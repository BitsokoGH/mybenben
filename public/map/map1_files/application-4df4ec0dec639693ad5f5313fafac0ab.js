/*! jQuery v1.9.0 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license */
function phi4z(t,e,i,n,o,r,s,a,l){var h,c,u,d,p,f,m,g,v;for(l=r,v=1;15>=v;v++)if(h=Math.sin(l),tanphi=Math.tan(l),a=tanphi*Math.sqrt(1-t*h*h),c=Math.sin(2*l),u=e*l-i*c+n*Math.sin(4*l)-o*Math.sin(6*l),d=e-2*i*Math.cos(2*l)+4*n*Math.cos(4*l)-6*o*Math.cos(6*l),p=2*u+a*(u*u+s)-2*r*(a*u+1),f=t*c*(u*u+s-2*r*u)/(2*a),m=2*(r-u)*(a*d-2/c)-2*d,g=p/(f+m),l+=g,Math.abs(g)<=1e-10)return l;return Proj4js.reportError("phi4z: No convergence"),null}function e4fn(t){var e,i;return e=1+t,i=1-t,Math.sqrt(Math.pow(e,e)*Math.pow(i,i))}/**
 * autoResize - resizes a DOM element to the width and height of another DOM element
 *
 * Copyright 2014, Marcin Warpechowski
 * Licensed under the MIT license
 */
function autoResize(){var t,e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},i=document.body,n=document.createTextNode(""),o=document.createElement("SPAN"),r=function(t,e,i){window.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)},s=function(t,e,i){window.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)},a=function(r){var s,a;r?/^[a-zA-Z \.,\\\/\|0-9]$/.test(r)||(r="."):r="",void 0!==n.textContent?n.textContent=t.value+r:n.data=t.value+r,o.style.fontSize=Handsontable.Dom.getComputedStyle(t).fontSize,o.style.fontFamily=Handsontable.Dom.getComputedStyle(t).fontFamily,o.style.whiteSpace="pre",i.appendChild(o),s=o.clientWidth+2,i.removeChild(o),t.style.height=e.minHeight+"px",t.style.width=e.minWidth>s?e.minWidth+"px":s>e.maxWidth?e.maxWidth+"px":s+"px",a=t.scrollHeight?t.scrollHeight-1:0,e.minHeight>a?t.style.height=e.minHeight+"px":e.maxHeight<a?(t.style.height=e.maxHeight+"px",t.style.overflowY="visible"):t.style.height=a+"px"},l=function(){window.setTimeout(a,0)},h=function(i){if(i&&i.minHeight)if("inherit"==i.minHeight)e.minHeight=t.clientHeight;else{var r=parseInt(i.minHeight);isNaN(r)||(e.minHeight=r)}if(i&&i.maxHeight)if("inherit"==i.maxHeight)e.maxHeight=t.clientHeight;else{var s=parseInt(i.maxHeight);isNaN(s)||(e.maxHeight=s)}if(i&&i.minWidth)if("inherit"==i.minWidth)e.minWidth=t.clientWidth;else{var a=parseInt(i.minWidth);isNaN(a)||(e.minWidth=a)}if(i&&i.maxWidth)if("inherit"==i.maxWidth)e.maxWidth=t.clientWidth;else{var l=parseInt(i.maxWidth);isNaN(l)||(e.maxWidth=l)}o.firstChild||(o.className="autoResize",o.style.display="inline-block",o.appendChild(n))},c=function(i,n,o){t=i,h(n),"TEXTAREA"==t.nodeName&&(t.style.resize="none",t.style.overflowY="",t.style.height=e.minHeight+"px",t.style.minWidth=e.minWidth+"px",t.style.maxWidth=e.maxWidth+"px",t.style.overflowY="hidden"),o&&(r(t,"change",a),r(t,"cut",l),r(t,"paste",l),r(t,"drop",l),r(t,"keydown",l)),a()};return{init:function(t,e,i){c(t,e,i)},unObserve:function(){s(t,"change",a),s(t,"cut",l),s(t,"paste",l),s(t,"drop",l),s(t,"keydown",l)},resize:a}}function copyPaste(){return instance?instance.hasBeenDestroyed()&&instance.init():instance=new CopyPasteClass,instance.refCounter++,instance}function CopyPasteClass(){this.refCounter=0,this.init()}function requireGoogleMaps(t){if(debug("requireGoogleMaps.."),"undefined"!=typeof google&&google.maps)return debug("- already loaded"),void t.apply();debug("- fetching"),window.onGoogleMapsAPI=function(){t.apply(),window.onGoogleMapsAPI=null};var e="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry&callback=onGoogleMapsAPI";$("head").append(s.sprintf("<script type='text/javascript' src='%s'></script>",e))}function validEmail(t){var e=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;return t.match(e)?!0:!1}function parseURL(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),o=n.length,r=0;o>r;r++)n[r]&&(t=n[r].split("="),i[t[0]]=t[1]);return i}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function guid(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()}if(function(t,e){"use strict";function i(t){var e=t.length,i=ae.type(t);return ae.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||"function"!==i&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t){var e=we[t]={};return ae.each(t.match(he)||[],function(t,i){e[i]=!0}),e}function o(t,i,n,o){if(ae.acceptData(t)){var r,s,a=ae.expando,l="string"==typeof i,h=t.nodeType,c=h?ae.cache:t,u=h?t[a]:t[a]&&a;if(u&&c[u]&&(o||c[u].data)||!l||n!==e)return u||(h?t[a]=u=Q.pop()||ae.guid++:u=a),c[u]||(c[u]={},h||(c[u].toJSON=ae.noop)),("object"==typeof i||"function"==typeof i)&&(o?c[u]=ae.extend(c[u],i):c[u].data=ae.extend(c[u].data,i)),r=c[u],o||(r.data||(r.data={}),r=r.data),n!==e&&(r[ae.camelCase(i)]=n),l?(s=r[i],null==s&&(s=r[ae.camelCase(i)])):s=r,s}}function r(t,e,i){if(ae.acceptData(t)){var n,o,r,s=t.nodeType,l=s?ae.cache:t,h=s?t[ae.expando]:ae.expando;if(l[h]){if(e&&(n=i?l[h]:l[h].data)){ae.isArray(e)?e=e.concat(ae.map(e,ae.camelCase)):e in n?e=[e]:(e=ae.camelCase(e),e=e in n?[e]:e.split(" "));for(o=0,r=e.length;r>o;o++)delete n[e[o]];if(!(i?a:ae.isEmptyObject)(n))return}(i||(delete l[h].data,a(l[h])))&&(s?ae.cleanData([t],!0):ae.support.deleteExpando||l!=l.window?delete l[h]:l[h]=null)}}}function s(t,i,n){if(n===e&&1===t.nodeType){var o="data-"+i.replace(Ce,"-$1").toLowerCase();if(n=t.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?ae.parseJSON(n):n}catch(r){}ae.data(t,i,n)}else n=e}return n}function a(t){var e;for(e in t)if(("data"!==e||!ae.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function h(){return!1}function c(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function u(t,e,i){if(e=e||0,ae.isFunction(e))return ae.grep(t,function(t,n){var o=!!e.call(t,n,t);return o===i});if(e.nodeType)return ae.grep(t,function(t){return t===e===i});if("string"==typeof e){var n=ae.grep(t,function(t){return 1===t.nodeType});if(Fe.test(e))return ae.filter(e,n,!i);e=ae.filter(e,n)}return ae.grep(t,function(t){return ae.inArray(t,e)>=0===i})}function d(t){var e=$e.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function p(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function f(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function m(t){var e=ii.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i,n=0;null!=(i=t[n]);n++)ae._data(i,"globalEval",!e||ae._data(e[n],"globalEval"))}function v(t,e){if(1===e.nodeType&&ae.hasData(t)){var i,n,o,r=ae._data(t),s=ae._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)ae.event.add(e,i,a[i][n])}s.data&&(s.data=ae.extend({},s.data))}}function y(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ae.support.noCloneEvent&&e[ae.expando]){n=ae._data(e);for(o in n.events)ae.removeEvent(e,o,n.handle);e.removeAttribute(ae.expando)}"script"===i&&e.text!==t.text?(f(e).text=t.text,m(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ae.support.html5Clone&&t.innerHTML&&!ae.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Je.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function b(t,i){var n,o,r=0,s=t.getElementsByTagName!==e?t.getElementsByTagName(i||"*"):t.querySelectorAll!==e?t.querySelectorAll(i||"*"):e;if(!s)for(s=[],n=t.childNodes||t;null!=(o=n[r]);r++)!i||ae.nodeName(o,i)?s.push(o):ae.merge(s,b(o,i));return i===e||i&&ae.nodeName(t,i)?ae.merge([t],s):s}function _(t){Je.test(t.type)&&(t.defaultChecked=t.checked)}function w(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=xi.length;o--;)if(e=xi[o]+i,e in t)return e;return n}function x(t,e){return t=e||t,"none"===ae.css(t,"display")||!ae.contains(t.ownerDocument,t)}function C(t,e){for(var i,n=[],o=0,r=t.length;r>o;o++)i=t[o],i.style&&(n[o]=ae._data(i,"olddisplay"),e?(n[o]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&x(i)&&(n[o]=ae._data(i,"olddisplay",P(i.nodeName)))):n[o]||x(i)||ae._data(i,"olddisplay",ae.css(i,"display")));for(o=0;r>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?n[o]||"":"none"));return t}function k(t,e,i){var n=mi.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function S(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=ae.css(t,i+wi[r],!0,o)),n?("content"===i&&(s-=ae.css(t,"padding"+wi[r],!0,o)),"margin"!==i&&(s-=ae.css(t,"border"+wi[r]+"Width",!0,o))):(s+=ae.css(t,"padding"+wi[r],!0,o),"padding"!==i&&(s+=ae.css(t,"border"+wi[r]+"Width",!0,o)));return s}function T(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=li(t),s=ae.support.boxSizing&&"border-box"===ae.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=ai(t,e,r),(0>o||null==o)&&(o=t.style[e]),gi.test(o))return o;n=s&&(ae.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+S(t,e,i||(s?"border":"content"),n,r)+"px"}function P(t){var e=V,i=yi[t];return i||(i=E(t,e),"none"!==i&&i||(hi=(hi||ae("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(hi[0].contentWindow||hi[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),i=E(t,e),hi.detach()),yi[t]=i),i}function E(t,e){var i=ae(e.createElement(t)).appendTo(e.body),n=ae.css(i[0],"display");return i.remove(),n}function D(t,e,i,n){var o;if(ae.isArray(e))ae.each(e,function(e,o){i||ki.test(t)?n(t,o):D(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==ae.type(e))n(t,e);else for(o in e)D(t+"["+o+"]",e[o],i,n)}function L(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(he)||[];if(ae.isFunction(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function M(t,i,n,o){function r(l){var h;return s[l]=!0,ae.each(t[l]||[],function(t,l){var c=l(i,n,o);return"string"!=typeof c||a||s[c]?a?!(h=c):e:(i.dataTypes.unshift(c),r(c),!1)}),h}var s={},a=t===Fi;return r(i.dataTypes[0])||!s["*"]&&r("*")}function A(t,i){var n,o,r=ae.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((r[n]?t:o||(o={}))[n]=i[n]);return o&&ae.extend(!0,t,o),t}function R(t,i,n){var o,r,s,a,l=t.contents,h=t.dataTypes,c=t.responseFields;for(r in c)r in n&&(i[c[r]]=n[r]);for(;"*"===h[0];)h.shift(),o===e&&(o=t.mimeType||i.getResponseHeader("Content-Type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){h.unshift(r);break}if(h[0]in n)s=h[0];else{for(r in n){if(!h[0]||t.converters[r+" "+h[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==h[0]&&h.unshift(s),n[s]):e}function O(t,e){var i,n,o,r,s={},a=0,l=t.dataTypes.slice(),h=l[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l[1])for(i in t.converters)s[i.toLowerCase()]=t.converters[i];for(;o=l[++a];)if("*"!==o){if("*"!==h&&h!==o){if(i=s[h+" "+o]||s["* "+o],!i)for(n in s)if(r=n.split(" "),r[1]===o&&(i=s[h+" "+r[0]]||s["* "+r[0]])){i===!0?i=s[n]:s[n]!==!0&&(o=r[0],l.splice(a--,0,o));break}if(i!==!0)if(i&&t["throws"])e=i(e);else try{e=i(e)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+h+" to "+o}}}h=o}return{state:"success",data:e}}function I(){try{return new t.XMLHttpRequest}catch(e){}}function N(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function j(){return setTimeout(function(){Zi=e}),Zi=ae.now()}function H(t,e){ae.each(e,function(e,i){for(var n=(nn[e]||[]).concat(nn["*"]),o=0,r=n.length;r>o;o++)if(n[o].call(t,e,i))return})}function z(t,e,i){var n,o,r=0,s=en.length,a=ae.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Zi||j(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,r=1-n,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(r);return a.notifyWith(t,[h,r,i]),1>r&&l?i:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:ae.extend({},e),opts:ae.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Zi||j(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ae.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)h.tweens[i].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),c=h.props;for(B(c,h.opts.specialEasing);s>r;r++)if(n=en[r].call(h,t,c,h.opts))return n;return H(h,c),ae.isFunction(h.opts.start)&&h.opts.start.call(t,h),ae.fx.timer(ae.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function B(t,e){var i,n,o,r,s;for(i in t)if(n=ae.camelCase(i),o=e[n],r=t[i],ae.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),s=ae.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=o)}else e[n]=o}function F(t,e,i){var n,o,r,s,a,l,h,c,u,d=this,p=t.style,f={},m=[],g=t.nodeType&&x(t);i.queue||(c=ae._queueHooks(t,"fx"),null==c.unqueued&&(c.unqueued=0,u=c.empty.fire,c.empty.fire=function(){c.unqueued||u()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,ae.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===ae.css(t,"display")&&"none"===ae.css(t,"float")&&(ae.support.inlineBlockNeedsLayout&&"inline"!==P(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ae.support.shrinkWrapBlocks||d.done(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],Qi.exec(r)){if(delete e[n],l=l||"toggle"===r,r===(g?"hide":"show"))continue;m.push(n)}if(s=m.length){a=ae._data(t,"fxshow")||ae._data(t,"fxshow",{}),"hidden"in a&&(g=a.hidden),l&&(a.hidden=!g),g?ae(t).show():d.done(function(){ae(t).hide()}),d.done(function(){var e;ae._removeData(t,"fxshow");for(e in f)ae.style(t,e,f[e])});for(n=0;s>n;n++)o=m[n],h=d.createTween(o,g?a[o]:0),f[o]=a[o]||ae.style(t,o),o in a||(a[o]=h.start,g&&(h.end=h.start,h.start="width"===o||"height"===o?1:0))}}function U(t,e,i,n,o){return new U.prototype.init(t,e,i,n,o)}function W(t,e){var i,n={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)i=wi[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function $(t){return ae.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G,q,V=t.document,Y=t.location,X=t.jQuery,Z=t.$,K={},Q=[],J="1.9.0",te=Q.concat,ee=Q.push,ie=Q.slice,ne=Q.indexOf,oe=K.toString,re=K.hasOwnProperty,se=J.trim,ae=function(t,e){return new ae.fn.init(t,e,G)},le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=/\S+/g,ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ue=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^[\],:{}\s]*$/,fe=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ge=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ve=/^-ms-/,ye=/-([\da-z])/gi,be=function(t,e){return e.toUpperCase()},_e=function(){V.addEventListener?(V.removeEventListener("DOMContentLoaded",_e,!1),ae.ready()):"complete"===V.readyState&&(V.detachEvent("onreadystatechange",_e),ae.ready())};ae.fn=ae.prototype={jquery:J,constructor:ae,init:function(t,i,n){var o,r;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ue.exec(t),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(o[1]){if(i=i instanceof ae?i[0]:i,ae.merge(this,ae.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:V,!0)),de.test(o[1])&&ae.isPlainObject(i))for(o in i)ae.isFunction(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}if(r=V.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return n.find(t);this.length=1,this[0]=r}return this.context=V,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ae.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),ae.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ie.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=ae.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ae.each(this,t,e)},ready:function(t){return ae.ready.promise().done(t),this},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},map:function(t){return this.pushStack(ae.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ee,sort:[].sort,splice:[].splice},ae.fn.init.prototype=ae.fn,ae.extend=ae.fn.extend=function(){var t,i,n,o,r,s,a=arguments[0]||{},l=1,h=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),"object"==typeof a||ae.isFunction(a)||(a={}),h===l&&(a=this,--l);h>l;l++)if(null!=(t=arguments[l]))for(i in t)n=a[i],o=t[i],a!==o&&(c&&o&&(ae.isPlainObject(o)||(r=ae.isArray(o)))?(r?(r=!1,s=n&&ae.isArray(n)?n:[]):s=n&&ae.isPlainObject(n)?n:{},a[i]=ae.extend(c,s,o)):o!==e&&(a[i]=o));return a},ae.extend({noConflict:function(e){return t.$===ae&&(t.$=Z),e&&t.jQuery===ae&&(t.jQuery=X),ae},isReady:!1,readyWait:1,holdReady:function(t){t?ae.readyWait++:ae.ready(!0)},ready:function(t){if(t===!0?!--ae.readyWait:!ae.isReady){if(!V.body)return setTimeout(ae.ready);ae.isReady=!0,t!==!0&&--ae.readyWait>0||(q.resolveWith(V,[ae]),ae.fn.trigger&&ae(V).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===ae.type(t)},isArray:Array.isArray||function(t){return"array"===ae.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[oe.call(t)]||"object":typeof t},isPlainObject:function(t){if(!t||"object"!==ae.type(t)||t.nodeType||ae.isWindow(t))return!1;try{if(t.constructor&&!re.call(t,"constructor")&&!re.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in t);return n===e||re.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||V;var n=de.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=ae.buildFragment([t],e,o),o&&ae(o).remove(),ae.merge([],n.childNodes))},parseJSON:function(i){return t.JSON&&t.JSON.parse?t.JSON.parse(i):null===i?i:"string"==typeof i&&(i=ae.trim(i),i&&pe.test(i.replace(me,"@").replace(ge,"]").replace(fe,"")))?Function("return "+i)():(ae.error("Invalid JSON: "+i),e)},parseXML:function(i){var n,o;if(!i||"string"!=typeof i)return null;try{t.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=e}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&ae.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ve,"ms-").replace(ye,be)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,r=0,s=t.length,a=i(t);if(n){if(a)for(;s>r&&(o=e.apply(t[r],n),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],n),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:se&&!se.call("\ufeff\xa0")?function(t){return null==t?"":se.call(t)}:function(t){return null==t?"":(t+"").replace(ce,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ae.merge(n,"string"==typeof t?[t]:t):ee.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(ne)return ne.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=i.length,o=t.length,r=0;if("number"==typeof n)for(;n>r;r++)t[o++]=i[r];else for(;i[r]!==e;)t[o++]=i[r++];return t.length=o,t},grep:function(t,e,i){var n,o=[],r=0,s=t.length;for(i=!!i;s>r;r++)n=!!e(t[r],r),i!==n&&o.push(t[r]);return o},map:function(t,e,n){var o,r=0,s=t.length,a=i(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,n),null!=o&&(l[l.length]=o);else for(r in t)o=e(t[r],r,n),null!=o&&(l[l.length]=o);return te.apply([],l)},guid:1,proxy:function(t,i){var n,o,r;return"string"==typeof i&&(n=t[i],i=t,t=n),ae.isFunction(t)?(o=ie.call(arguments,2),r=function(){return t.apply(i||this,o.concat(ie.call(arguments)))},r.guid=t.guid=t.guid||ae.guid++,r):e},access:function(t,i,n,o,r,s,a){var l=0,h=t.length,c=null==n;if("object"===ae.type(n)){r=!0;for(l in n)ae.access(t,i,l,n[l],!0,s,a)}else if(o!==e&&(r=!0,ae.isFunction(o)||(a=!0),c&&(a?(i.call(t,o),i=null):(c=i,i=function(t,e,i){return c.call(ae(t),i)})),i))for(;h>l;l++)i(t[l],n,a?o:o.call(t[l],l,i(t[l],n)));return r?t:c?i.call(t):h?i(t[0],n):s},now:function(){return(new Date).getTime()}}),ae.ready.promise=function(e){if(!q)if(q=ae.Deferred(),"complete"===V.readyState)setTimeout(ae.ready);else if(V.addEventListener)V.addEventListener("DOMContentLoaded",_e,!1),t.addEventListener("load",ae.ready,!1);else{V.attachEvent("onreadystatechange",_e),t.attachEvent("onload",ae.ready);var i=!1;try{i=null==t.frameElement&&V.documentElement}catch(n){}i&&i.doScroll&&function o(){if(!ae.isReady){try{i.doScroll("left")}catch(t){return setTimeout(o,50)}ae.ready()}}()}return q.promise(e)},ae.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),G=ae(V);var we={};ae.Callbacks=function(t){t="string"==typeof t?we[t]||n(t):ae.extend({},t);var i,o,r,s,a,l,h=[],c=!t.once&&[],u=function(e){for(i=t.memory&&e,o=!0,l=s||0,s=0,a=h.length,r=!0;h&&a>l;l++)if(h[l].apply(e[0],e[1])===!1&&t.stopOnFalse){i=!1;break}r=!1,h&&(c?c.length&&u(c.shift()):i?h=[]:d.disable())},d={add:function(){if(h){var e=h.length;!function n(e){ae.each(e,function(e,i){var o=ae.type(i);"function"===o?t.unique&&d.has(i)||h.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),r?a=h.length:i&&(s=e,u(i))}return this},remove:function(){return h&&ae.each(arguments,function(t,e){for(var i;(i=ae.inArray(e,h,i))>-1;)h.splice(i,1),r&&(a>=i&&a--,l>=i&&l--)}),this},has:function(t){return ae.inArray(t,h)>-1},empty:function(){return h=[],this},disable:function(){return h=c=i=e,this},disabled:function(){return!h},lock:function(){return c=e,i||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!h||o&&!c||(r?c.push(e):u(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},ae.extend({Deferred:function(t){var e=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ae.Deferred(function(i){ae.each(e,function(e,r){var s=r[0],a=ae.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&ae.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ae.extend(t,n):n}},o={};return n.pipe=n.then,ae.each(e,function(t,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,r=ie.call(arguments),s=r.length,a=1!==s||t&&ae.isFunction(t.promise)?s:0,l=1===a?t:ae.Deferred(),h=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?ie.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=Array(s),i=Array(s),n=Array(s);s>o;o++)r[o]&&ae.isFunction(r[o].promise)?r[o].promise().done(h(o,n,r)).fail(l.reject).progress(h(o,i,e)):--a;return a||l.resolveWith(n,r),l.promise()}}),ae.support=function(){var i,n,o,r,s,a,l,h,c,u,d=V.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),o=d.getElementsByTagName("a")[0],!n||!o||!n.length)return{};r=V.createElement("select"),s=r.appendChild(V.createElement("option")),a=d.getElementsByTagName("input")[0],o.style.cssText="top:1px;float:left;opacity:.5",i={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(o.getAttribute("style")),hrefNormalized:"/a"===o.getAttribute("href"),opacity:/^0.5/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,checkOn:!!a.value,optSelected:s.selected,enctype:!!V.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==V.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===V.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,i.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,i.optDisabled=!s.disabled;try{delete d.test}catch(p){i.deleteExpando=!1}a=V.createElement("input"),a.setAttribute("value",""),i.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),i.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),l=V.createDocumentFragment(),l.appendChild(a),i.appendChecked=a.checked,i.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){i.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(h="on"+u,"t"),i[u+"Bubbles"]=h in t||d.attributes[h].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===d.style.backgroundClip,ae(function(){var n,o,r,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=V.getElementsByTagName("body")[0];a&&(n=V.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=d.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",i.reliableHiddenOffsets=c&&0===r[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",i.boxSizing=4===d.offsetWidth,i.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,t.getComputedStyle&&(i.pixelPosition="1%"!==(t.getComputedStyle(d,null)||{}).top,i.boxSizingReliable="4px"===(t.getComputedStyle(d,null)||{width:"4px"}).width,o=d.appendChild(V.createElement("div")),o.style.cssText=d.style.cssText=s,o.style.marginRight=o.style.width="0",d.style.width="1px",i.reliableMarginRight=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),d.style.zoom!==e&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",i.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",i.shrinkWrapBlocks=3!==d.offsetWidth,a.style.zoom=1),a.removeChild(n),n=d=r=o=null)}),n=r=l=s=o=a=null,i}();var xe=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ce=/([A-Z])/g;ae.extend({cache:{},expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?ae.cache[t[ae.expando]]:t[ae.expando],!!t&&!a(t)},data:function(t,e,i){return o(t,e,i,!1)},removeData:function(t,e){return r(t,e,!1)},_data:function(t,e,i){return o(t,e,i,!0)},_removeData:function(t,e){return r(t,e,!0)},acceptData:function(t){var e=t.nodeName&&ae.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),ae.fn.extend({data:function(t,i){var n,o,r=this[0],a=0,l=null;if(t===e){if(this.length&&(l=ae.data(r),1===r.nodeType&&!ae._data(r,"parsedAttrs"))){for(n=r.attributes;n.length>a;a++)o=n[a].name,o.indexOf("data-")||(o=ae.camelCase(o.substring(5)),s(r,o,l[o]));ae._data(r,"parsedAttrs",!0)}return l}return"object"==typeof t?this.each(function(){ae.data(this,t)}):ae.access(this,function(i){return i===e?r?s(r,t,ae.data(r,t)):null:(this.each(function(){ae.data(this,t,i)}),e)},null,i,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ae.removeData(this,t)})}}),ae.extend({queue:function(t,i,n){var o;return t?(i=(i||"fx")+"queue",o=ae._data(t,i),n&&(!o||ae.isArray(n)?o=ae._data(t,i,ae.makeArray(n)):o.push(n)),o||[]):e},dequeue:function(t,e){e=e||"fx";var i=ae.queue(t,e),n=i.length,o=i.shift(),r=ae._queueHooks(t,e),s=function(){ae.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),r.cur=o,o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ae._data(t,i)||ae._data(t,i,{empty:ae.Callbacks("once memory").add(function(){ae._removeData(t,e+"queue"),ae._removeData(t,i)})})}}),ae.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),n>arguments.length?ae.queue(this[0],t):i===e?this:this.each(function(){var e=ae.queue(this,t,i);ae._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ae.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ae.dequeue(this,t)})},delay:function(t,e){return t=ae.fx?ae.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var n,o=1,r=ae.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";a--;)n=ae._data(s[a],t+"queueHooks"),n&&n.empty&&(o++,n.empty.add(l));return l(),r.promise(i)}});var ke,Se,Te=/[\t\r\n]/g,Pe=/\r/g,Ee=/^(?:input|select|textarea|button|object)$/i,De=/^(?:a|area)$/i,Le=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Me=/^(?:checked|selected)$/i,Ae=ae.support.getSetAttribute,Re=ae.support.input;ae.fn.extend({attr:function(t,e){return ae.access(this,ae.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ae.removeAttr(this,t)})},prop:function(t,e){return ae.access(this,ae.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ae.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,o,r,s=0,a=this.length,l="string"==typeof t&&t;if(ae.isFunction(t))return this.each(function(e){ae(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Te," "):" ")){for(r=0;o=e[r++];)0>n.indexOf(" "+o+" ")&&(n+=o+" ");i.className=ae.trim(n)}return this},removeClass:function(t){var e,i,n,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ae.isFunction(t))return this.each(function(e){ae(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(he)||[];a>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Te," "):"")){for(r=0;o=e[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=t?ae.trim(n):""}return this},toggleClass:function(t,e){var i=typeof t,n="boolean"==typeof e;return this.each(ae.isFunction(t)?function(i){ae(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var o,r=0,s=ae(this),a=e,l=t.match(he)||[];o=l[r++];)a=n?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else("undefined"===i||"boolean"===i)&&(this.className&&ae._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ae._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Te," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,n,o,r=this[0];return arguments.length?(o=ae.isFunction(t),this.each(function(n){var r,s=ae(this);1===this.nodeType&&(r=o?t.call(this,n,s.val()):t,null==r?r="":"number"==typeof r?r+="":ae.isArray(r)&&(r=ae.map(r,function(t){return null==t?"":t+""})),i=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))})):r?(i=ae.valHooks[r.type]||ae.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==e?n:(n=r.value,"string"==typeof n?n.replace(Pe,""):null==n?"":n)):void 0
}}),ae.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(ae.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&ae.nodeName(i.parentNode,"optgroup"))){if(e=ae(i).val(),r)return e;s.push(e)}return s},set:function(t,e){var i=ae.makeArray(e);return ae(t).find("option").each(function(){this.selected=ae.inArray(ae(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attr:function(t,i,n){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?t.getAttribute===e?ae.prop(t,i,n):(s=1!==a||!ae.isXMLDoc(t),s&&(i=i.toLowerCase(),r=ae.attrHooks[i]||(Le.test(i)?Se:ke)),n===e?r&&s&&"get"in r&&null!==(o=r.get(t,i))?o:(t.getAttribute!==e&&(o=t.getAttribute(i)),null==o?e:o):null!==n?r&&s&&"set"in r&&(o=r.set(t,n,i))!==e?o:(t.setAttribute(i,n+""),n):(ae.removeAttr(t,i),e)):void 0},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(he);if(r&&1===t.nodeType)for(;i=r[o++];)n=ae.propFix[i]||i,Le.test(i)?!Ae&&Me.test(i)?t[ae.camelCase("default-"+i)]=t[n]=!1:t[n]=!1:ae.attr(t,i,""),t.removeAttribute(Ae?i:n)},attrHooks:{type:{set:function(t,e){if(!ae.support.radioValue&&"radio"===e&&ae.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,n){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!ae.isXMLDoc(t),s&&(i=ae.propFix[i]||i,r=ae.propHooks[i]),n!==e?r&&"set"in r&&(o=r.set(t,n,i))!==e?o:t[i]=n:r&&"get"in r&&null!==(o=r.get(t,i))?o:t[i]):void 0},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Ee.test(t.nodeName)||De.test(t.nodeName)&&t.href?0:e}}}}),Se={get:function(t,i){var n=ae.prop(t,i),o="boolean"==typeof n&&t.getAttribute(i),r="boolean"==typeof n?Re&&Ae?null!=o:Me.test(i)?t[ae.camelCase("default-"+i)]:!!o:t.getAttributeNode(i);return r&&r.value!==!1?i.toLowerCase():e},set:function(t,e,i){return e===!1?ae.removeAttr(t,i):Re&&Ae||!Me.test(i)?t.setAttribute(!Ae&&ae.propFix[i]||i,i):t[ae.camelCase("default-"+i)]=t[i]=!0,i}},Re&&Ae||(ae.attrHooks.value={get:function(t,i){var n=t.getAttributeNode(i);return ae.nodeName(t,"input")?t.defaultValue:n&&n.specified?n.value:e},set:function(t,i,n){return ae.nodeName(t,"input")?(t.defaultValue=i,e):ke&&ke.set(t,i,n)}}),Ae||(ke=ae.valHooks.button={get:function(t,i){var n=t.getAttributeNode(i);return n&&("id"===i||"name"===i||"coords"===i?""!==n.value:n.specified)?n.value:e},set:function(t,i,n){var o=t.getAttributeNode(n);return o||t.setAttributeNode(o=t.ownerDocument.createAttribute(n)),o.value=i+="","value"===n||i===t.getAttribute(n)?i:e}},ae.attrHooks.contenteditable={get:ke.get,set:function(t,e,i){ke.set(t,""===e?!1:e,i)}},ae.each(["width","height"],function(t,i){ae.attrHooks[i]=ae.extend(ae.attrHooks[i],{set:function(t,n){return""===n?(t.setAttribute(i,"auto"),n):e}})})),ae.support.hrefNormalized||(ae.each(["href","src","width","height"],function(t,i){ae.attrHooks[i]=ae.extend(ae.attrHooks[i],{get:function(t){var n=t.getAttribute(i,2);return null==n?e:n}})}),ae.each(["href","src"],function(t,e){ae.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),ae.support.style||(ae.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),ae.support.optSelected||(ae.propHooks.selected=ae.extend(ae.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),ae.support.enctype||(ae.propFix.enctype="encoding"),ae.support.checkOn||ae.each(["radio","checkbox"],function(){ae.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]=ae.extend(ae.valHooks[this],{set:function(t,i){return ae.isArray(i)?t.checked=ae.inArray(ae(t).val(),i)>=0:e}})});var Oe=/^(?:input|select|textarea)$/i,Ie=/^key/,Ne=/^(?:mouse|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,He=/^([^.]*)(?:\.(.+)|)$/;ae.event={global:{},add:function(t,i,n,o,r){var s,a,l,h,c,u,d,p,f,m,g,v=3!==t.nodeType&&8!==t.nodeType&&ae._data(t);if(v){for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=ae.guid++),(h=v.events)||(h=v.events={}),(a=v.handle)||(a=v.handle=function(t){return ae===e||t&&ae.event.triggered===t.type?e:ae.event.dispatch.apply(a.elem,arguments)},a.elem=t),i=(i||"").match(he)||[""],c=i.length;c--;)l=He.exec(i[c])||[],f=g=l[1],m=(l[2]||"").split(".").sort(),d=ae.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=ae.event.special[f]||{},u=ae.extend({type:f,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&ae.expr.match.needsContext.test(r),namespace:m.join(".")},s),(p=h[f])||(p=h[f]=[],p.delegateCount=0,d.setup&&d.setup.call(t,o,m,a)!==!1||(t.addEventListener?t.addEventListener(f,a,!1):t.attachEvent&&t.attachEvent("on"+f,a))),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),ae.event.global[f]=!0;t=null}},remove:function(t,e,i,n,o){var r,s,a,l,h,c,u,d,p,f,m,g=ae.hasData(t)&&ae._data(t);if(g&&(l=g.events)){for(e=(e||"").match(he)||[""],h=e.length;h--;)if(a=He.exec(e[h])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=ae.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)c=d[r],!o&&m!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));s&&!d.length&&(u.teardown&&u.teardown.call(t,f,g.handle)!==!1||ae.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)ae.event.remove(t,p+e[h],i,n,!0);ae.isEmptyObject(l)&&(delete g.handle,ae._removeData(t,"events"))}},trigger:function(i,n,o,r){var s,a,l,h,c,u,d,p=[o||V],f=i.type||i,m=i.namespace?i.namespace.split("."):[];if(a=l=o=o||V,3!==o.nodeType&&8!==o.nodeType&&!je.test(f+ae.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),c=0>f.indexOf(":")&&"on"+f,i=i[ae.expando]?i:new ae.Event(f,"object"==typeof i&&i),i.isTrigger=!0,i.namespace=m.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=e,i.target||(i.target=o),n=null==n?[i]:ae.makeArray(n,[i]),d=ae.event.special[f]||{},r||!d.trigger||d.trigger.apply(o,n)!==!1)){if(!r&&!d.noBubble&&!ae.isWindow(o)){for(h=d.delegateType||f,je.test(h+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(o.ownerDocument||V)&&p.push(l.defaultView||l.parentWindow||t)}for(s=0;(a=p[s++])&&!i.isPropagationStopped();)i.type=s>1?h:d.bindType||f,u=(ae._data(a,"events")||{})[i.type]&&ae._data(a,"handle"),u&&u.apply(a,n),u=c&&a[c],u&&ae.acceptData(a)&&u.apply&&u.apply(a,n)===!1&&i.preventDefault();if(i.type=f,!(r||i.isDefaultPrevented()||d._default&&d._default.apply(o.ownerDocument,n)!==!1||"click"===f&&ae.nodeName(o,"a")||!ae.acceptData(o)||!c||!o[f]||ae.isWindow(o))){l=o[c],l&&(o[c]=null),ae.event.triggered=f;try{o[f]()}catch(g){}ae.event.triggered=e,l&&(o[c]=l)}return i.result}},dispatch:function(t){t=ae.event.fix(t);var i,n,o,r,s,a=[],l=ie.call(arguments),h=(ae._data(this,"events")||{})[t.type]||[],c=ae.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=ae.event.handlers.call(this,t,h),i=0;(r=a[i++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,o=((ae.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),o!==e&&(t.result=o)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,i){var n,o,r,s,a=[],l=i.delegateCount,h=t.target;if(l&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!=this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(o=[],n=0;l>n;n++)s=i[n],r=s.selector+" ",o[r]===e&&(o[r]=s.needsContext?ae(r,this).index(h)>=0:ae.find(r,this,null,[h]).length),o[r]&&o.push(s);o.length&&a.push({elem:h,handlers:o})}return i.length>l&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(t){if(t[ae.expando])return t;var e,i,n=t,o=ae.event.fixHooks[t.type]||{},r=o.props?this.props.concat(o.props):this.props;for(t=new ae.Event(n),e=r.length;e--;)i=r[e],t[i]=n[i];return t.target||(t.target=n.srcElement||V),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,n):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,o,r,s=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||V,o=n.documentElement,r=n.body,t.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return ae.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):e}},focus:{trigger:function(){if(this!==V.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===V.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=ae.extend(new ae.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ae.event.trigger(o,null,e):ae.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},ae.removeEvent=V.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,i,n){var o="on"+i;t.detachEvent&&(t[o]===e&&(t[o]=null),t.detachEvent(o,n))},ae.Event=function(t,i){return this instanceof ae.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:h):this.type=t,i&&ae.extend(this,i),this.timeStamp=t&&t.timeStamp||ae.now(),this[ae.expando]=!0,e):new ae.Event(t,i)},ae.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ae.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==n&&!ae.contains(n,o))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),ae.support.submitBubbles||(ae.event.special.submit={setup:function(){return ae.nodeName(this,"form")?!1:(ae.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=ae.nodeName(i,"input")||ae.nodeName(i,"button")?i.form:e;n&&!ae._data(n,"submitBubbles")&&(ae.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),ae._data(n,"submitBubbles",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ae.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ae.nodeName(this,"form")?!1:(ae.event.remove(this,"._submit"),e)}}),ae.support.changeBubbles||(ae.event.special.change={setup:function(){return Oe.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ae.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ae.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ae.event.simulate("change",this,t,!0)})),!1):(ae.event.add(this,"beforeactivate._change",function(t){var e=t.target;Oe.test(e.nodeName)&&!ae._data(e,"changeBubbles")&&(ae.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ae.event.simulate("change",this.parentNode,t,!0)}),ae._data(e,"changeBubbles",!0))}),e)},handle:function(t){var i=t.target;return this!==i||t.isSimulated||t.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return ae.event.remove(this,"._change"),!Oe.test(this.nodeName)}}),ae.support.focusinBubbles||ae.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){ae.event.simulate(e,t.target,ae.event.fix(t),!0)};ae.event.special[e]={setup:function(){0===i++&&V.addEventListener(t,n,!0)},teardown:function(){0===--i&&V.removeEventListener(t,n,!0)}}}),ae.fn.extend({on:function(t,i,n,o,r){var s,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(a in t)this.on(a,i,n,t[a],r);return this}if(null==n&&null==o?(o=i,n=i=e):null==o&&("string"==typeof i?(o=n,n=e):(o=n,n=i,i=e)),o===!1)o=h;else if(!o)return this;return 1===r&&(s=o,o=function(t){return ae().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=ae.guid++)),this.each(function(){ae.event.add(this,t,o,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,ae(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,i,t[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=h),this.each(function(){ae.event.remove(this,t,n,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},trigger:function(t,e){return this.each(function(){ae.event.trigger(t,e,this)})},triggerHandler:function(t,i){var n=this[0];return n?ae.event.trigger(t,i,n,!0):e},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ae.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)},Ie.test(e)&&(ae.event.fixHooks[e]=ae.event.keyHooks),Ne.test(e)&&(ae.event.fixHooks[e]=ae.event.mouseHooks)}),function(t,e){function i(t){return fe.test(t+"")}function n(){var t,e=[];return t=function(i,n){return e.push(i+=" ")>k.cacheLength&&delete t[e.shift()],t[i]=n}}function o(t){return t[z]=!0,t}function r(t){var e=M.createElement("div");try{return t(e)}catch(i){return!1}finally{e=null}}function s(t,e,i,n){var o,r,s,a,l,h,c,p,f,m;if((e?e.ownerDocument||e:B)!==M&&L(e),e=e||M,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(!R&&!n){if(o=me.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&j(e,r)&&r.id===s)return i.push(r),i}else{if(o[2])return K.apply(i,Q.call(e.getElementsByTagName(t),0)),i;if((s=o[3])&&F.getByClassName&&e.getElementsByClassName)return K.apply(i,Q.call(e.getElementsByClassName(s),0)),i}if(F.qsa&&!O.test(t)){if(c=!0,p=z,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=u(t),(c=e.getAttribute("id"))?p=c.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=h.length;l--;)h[l]=p+d(h[l]);f=pe.test(t)&&e.parentNode||e,m=h.join(",")}if(m)try{return K.apply(i,Q.call(f.querySelectorAll(m),0)),i}catch(g){}finally{c||e.removeAttribute("id")}}}return _(t.replace(se,"$1"),e,i,n)}function a(t,e){for(var i=t&&e&&t.nextSibling;i;i=i.nextSibling)if(i===e)return-1;return t?1:-1}function l(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return o(function(e){return e=+e,o(function(i,n){for(var o,r=t([],i.length,e),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function u(t,e){var i,n,o,r,a,l,h,c=G[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],h=k.preFilter;a;){(!i||(n=le.exec(a)))&&(n&&(a=a.slice(n[0].length)||a),l.push(o=[])),i=!1,(n=he.exec(a))&&(i=n.shift(),o.push({value:i,type:n[0].replace(se," ")}),a=a.slice(i.length));for(r in k.filter)!(n=de[r].exec(a))||h[r]&&!(n=h[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?s.error(t):G(t,l).slice(0)}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,o=i&&"parentNode"===e.dir,r=W++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,r)}:function(e,i,s){var a,l,h,c=U+" "+r;if(s){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(h=e[z]||(e[z]={}),(l=h[n])&&l[0]===c){if((a=l[1])===!0||a===C)return a===!0}else if(l=h[n]=[c],l[1]=t(e,i,s)||C,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function m(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!i||i(r,n,o))&&(s.push(r),h&&e.push(a));return s}function g(t,e,i,n,r,s){return n&&!n[z]&&(n=g(n)),r&&!r[z]&&(r=g(r,s)),o(function(o,s,a,l){var h,c,u,d=[],p=[],f=s.length,g=o||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?g:m(g,d,t,a,l),y=i?r||(o?t:f||n)?[]:s:v;if(i&&i(v,y,a,l),n)for(h=m(y,p),n(h,[],a,l),c=h.length;c--;)(u=h[c])&&(y[p[c]]=!(v[p[c]]=u));if(o){if(r||t){if(r){for(h=[],c=y.length;c--;)(u=y[c])&&h.push(v[c]=u);r(null,y=[],h,l)}for(c=y.length;c--;)(u=y[c])&&(h=r?J.call(o,u):d[c])>-1&&(o[h]=!(s[h]=u))}}else y=m(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):K.apply(s,y)})}function v(t){for(var e,i,n,o=t.length,r=k.relative[t[0].type],s=r||k.relative[" "],a=r?1:0,l=p(function(t){return t===e},s,!0),h=p(function(t){return J.call(e,t)>-1},s,!0),c=[function(t,i,n){return!r&&(n||i!==D)||((e=i).nodeType?l(t,i,n):h(t,i,n))}];o>a;a++)if(i=k.relative[t[a].type])c=[p(f(c),i)];else{if(i=k.filter[t[a].type].apply(null,t[a].matches),i[z]){for(n=++a;o>n&&!k.relative[t[n].type];n++);return g(a>1&&f(c),a>1&&d(t.slice(0,a-1)).replace(se,"$1"),i,n>a&&v(t.slice(a,n)),o>n&&v(t=t.slice(n)),o>n&&d(t))}c.push(i)}return f(c)}function y(t,e){var i=0,n=e.length>0,r=t.length>0,a=function(o,a,l,h,c){var u,d,p,f=[],g=0,v="0",y=o&&[],b=null!=c,_=D,w=o||r&&k.find.TAG("*",c&&a.parentNode||a),x=U+=null==_?1:Math.E;for(b&&(D=a!==M&&a,C=i);null!=(u=w[v]);v++){if(r&&u){for(d=0;p=t[d];d++)if(p(u,a,l)){h.push(u);break}b&&(U=x,C=++i)}n&&((u=!p&&u)&&g--,o&&y.push(u))}if(g+=v,n&&v!==g){for(d=0;p=e[d];d++)p(y,f,a,l);if(o){if(g>0)for(;v--;)y[v]||f[v]||(f[v]=Z.call(h));f=m(f)}K.apply(h,f),b&&!o&&f.length>0&&g+e.length>1&&s.uniqueSort(h)}return b&&(U=x,D=_),y};return n?o(a):a}function b(t,e,i){for(var n=0,o=e.length;o>n;n++)s(t,e[n],i);return i}function _(t,e,i,n){var o,r,s,a,l,h=u(t);if(!n&&1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&!R&&k.relative[r[1].type]){if(e=k.find.ID(s.matches[0].replace(_e,we),e)[0],!e)return i;t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?-1:r.length-1;o>=0&&(s=r[o],!k.relative[a=s.type]);o--)if((l=k.find[a])&&(n=l(s.matches[0].replace(_e,we),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=n.length&&d(r),!t)return K.apply(i,Q.call(n,0)),i;break}}return P(t,h)(n,e,R,i,pe.test(t)),i}function w(){}var x,C,k,S,T,P,E,D,L,M,A,R,O,I,N,j,H,z="sizzle"+-new Date,B=t.document,F={},U=0,W=0,$=n(),G=n(),q=n(),V=typeof e,Y=1<<31,X=[],Z=X.pop,K=X.push,Q=X.slice,J=X.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},te="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ee.replace("w","w#"),ne="([*^$|!~]?=)",oe="\\["+te+"*("+ee+")"+te+"*(?:"+ne+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+te+"*\\]",re=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",se=RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),le=RegExp("^"+te+"*,"+te+"*"),he=RegExp("^"+te+"*([\\x20\\t\\r\\n\\f>+~])"+te+"*"),ce=RegExp(re),ue=RegExp("^"+ie+"$"),de={ID:RegExp("^#("+ee+")"),CLASS:RegExp("^\\.("+ee+")"),NAME:RegExp("^\\[name=['\"]?("+ee+")['\"]?\\]"),TAG:RegExp("^("+ee.replace("w","w*")+")"),ATTR:RegExp("^"+oe),PSEUDO:RegExp("^"+re),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),needsContext:RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/\{\s*\[native code\]\s*\}/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,_e=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,we=function(t,e){var i="0x"+e-65536;return i!==i?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{Q.call(A.childNodes,0)[0].nodeType}catch(xe){Q=function(t){for(var e,i=[];e=this[t];t++)i.push(e);return i}}T=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=s.setDocument=function(t){var n=t?t.ownerDocument||t:B;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,A=n.documentElement,R=T(n),F.tagNameNoComments=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),F.attributes=r(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),F.getByClassName=r(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),F.getByName=r(function(t){t.id=z+0,t.innerHTML="<a name='"+z+"'></a><div name='"+z+"'></div>",A.insertBefore(t,A.firstChild);var e=n.getElementsByName&&n.getElementsByName(z).length===2+n.getElementsByName(z+0).length;return F.getIdNotName=!n.getElementById(z),A.removeChild(t),e}),k.attrHandle=r(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==V&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},F.getIdNotName?(k.find.ID=function(t,e){if(typeof e.getElementById!==V&&!R){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(t){var e=t.replace(_e,we);return function(t){return t.getAttribute("id")===e}}):(k.find.ID=function(t,i){if(typeof i.getElementById!==V&&!R){var n=i.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==V&&n.getAttributeNode("id").value===t?[n]:e:[]}},k.filter.ID=function(t){var e=t.replace(_e,we);return function(t){var i=typeof t.getAttributeNode!==V&&t.getAttributeNode("id");return i&&i.value===e}}),k.find.TAG=F.tagNameNoComments?function(t,i){return typeof i.getElementsByTagName!==V?i.getElementsByTagName(t):e}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o];o++)1===i.nodeType&&n.push(i);return n}return r},k.find.NAME=F.getByName&&function(t,i){return typeof i.getElementsByName!==V?i.getElementsByName(name):e},k.find.CLASS=F.getByClassName&&function(t,i){return typeof i.getElementsByClassName===V||R?e:i.getElementsByClassName(t)},I=[],O=[":focus"],(F.qsa=i(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||O.push("\\["+te+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||O.push(":checked")}),r(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&O.push("[*^$]="+te+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(F.matchesSelector=i(N=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(t){F.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),I.push("!=",re)}),O=RegExp(O.join("|")),I=RegExp(I.join("|")),j=i(A.contains)||A.compareDocumentPosition?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},H=A.compareDocumentPosition?function(t,e){var i;return t===e?(E=!0,0):(i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&i||t.parentNode&&11===t.parentNode.nodeType?t===n||j(B,t)?-1:e===n||j(B,e)?1:0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,r=t.parentNode,s=e.parentNode,l=[t],h=[e];if(t===e)return E=!0,0;if(t.sourceIndex&&e.sourceIndex)return(~e.sourceIndex||Y)-(j(B,t)&&~t.sourceIndex||Y);if(!r||!s)return t===n?-1:e===n?1:r?-1:s?1:0;if(r===s)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?a(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},E=!1,[0,0].sort(H),F.detectDuplicates=E,M):M},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==M&&L(t),e=e.replace(be,"='$1']"),!(!F.matchesSelector||R||I&&I.test(e)||O.test(e)))try{var i=N.call(t,e);if(i||F.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(n){}return s(e,M,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==M&&L(t),j(t,e)},s.attr=function(t,e){var i;return(t.ownerDocument||t)!==M&&L(t),R||(e=e.toLowerCase()),(i=k.attrHandle[e])?i(t):R||F.attributes?t.getAttribute(e):((i=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:i&&i.specified?i.value:null},s.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,i=[],n=1,o=0;if(E=!F.detectDuplicates,t.sort(H),E){for(;e=t[n];n++)e===t[n-1]&&(o=i.push(n));for(;o--;)t.splice(i[o],1)}return t},S=s.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n];n++)i+=S(e);return i},k=s.selectors={cacheLength:50,createPseudo:o,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,we),t[3]=(t[4]||t[5]||"").replace(_e,we),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:i&&ce.test(i)&&(e=u(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(_e,we).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=$[t+" "];return e||(e=RegExp("(^|"+te+")"+t+"("+te+"|$)"))&&$(t,function(t){return e.test(t.className||typeof t.getAttribute!==V&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var o=s.attr(n,t);return null==o?"!="===e:e?(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.substr(o.length-i.length)===i:"~="===e?(" "+o+" ").indexOf(i)>-1:"|="===e?o===i||o.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,f,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(u=e;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(c=g[z]||(g[z]={}),h=c[t]||[],p=h[0]===U&&h[1],d=h[0]===U&&h[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){c[t]=[U,p,d];break}}else if(y&&(h=(e[z]||(e[z]={}))[t])&&h[0]===U)d=h[1];else for(;(u=++p&&u&&u[m]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[z]||(u[z]={}))[t]=[U,d]),u!==e)););return d-=o,d===n||0===d%n&&d/n>=0}}},PSEUDO:function(t,e){var i,n=k.pseudos[t]||k.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return n[z]?n(e):n.length>1?(i=[t,t,"",e],k.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,i){for(var o,r=n(t,e),s=r.length;s--;)o=J.call(t,r[s]),t[o]=!(i[o]=r[s])}):function(t){return n(t,0,i)}):n}},pseudos:{not:o(function(t){var e=[],i=[],n=P(t.replace(se,"$1"));return n[z]?o(function(t,e,i,o){for(var r,s=n(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,n(e,null,r,i),!i.pop()}}),has:o(function(t){return function(e){return s(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:o(function(t){return ue.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(_e,we).toLowerCase(),function(e){var i;do if(i=R?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;e>++n;)t.push(n);return t})}};for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})k.pseudos[x]=h(x);P=s.compile=function(t,e){var i,n=[],o=[],r=q[t+" "];if(!r){for(e||(e=u(t)),i=e.length;i--;)r=v(e[i]),r[z]?n.push(r):o.push(r);r=q(t,y(o,n))}return r},k.pseudos.nth=k.pseudos.eq,k.filters=w.prototype=k.pseudos,k.setFilters=new w,L(),s.attr=ae.attr,ae.find=s,ae.expr=s.selectors,ae.expr[":"]=ae.expr.pseudos,ae.unique=s.uniqueSort,ae.text=s.getText,ae.isXMLDoc=s.isXML,ae.contains=s.contains
}(t);var ze=/Until$/,Be=/^(?:parents|prev(?:Until|All))/,Fe=/^.[^:#\[\.,]*$/,Ue=ae.expr.match.needsContext,We={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({find:function(t){var e,i,n;if("string"!=typeof t)return n=this,this.pushStack(ae(t).filter(function(){for(e=0;n.length>e;e++)if(ae.contains(n[e],this))return!0}));for(i=[],e=0;this.length>e;e++)ae.find(t,this[e],i);return i=this.pushStack(ae.unique(i)),i.selector=(this.selector?this.selector+" ":"")+t,i},has:function(t){var e,i=ae(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(ae.contains(this,i[e]))return!0})},not:function(t){return this.pushStack(u(this,t,!1))},filter:function(t){return this.pushStack(u(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?Ue.test(t)?ae(t,this.context).index(this[0])>=0:ae.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=Ue.test(t)||"string"!=typeof t?ae(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==e&&11!==i.nodeType;){if(s?s.index(i)>-1:ae.find.matchesSelector(i,t)){r.push(i);break}i=i.parentNode}return this.pushStack(r.length>1?ae.unique(r):r)},index:function(t){return t?"string"==typeof t?ae.inArray(this[0],ae(t)):ae.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var i="string"==typeof t?ae(t,e):ae.makeArray(t&&t.nodeType?[t]:t),n=ae.merge(this.get(),i);return this.pushStack(ae.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ae.fn.andSelf=ae.fn.addBack,ae.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ae.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ae.dir(t,"parentNode",i)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return ae.dir(t,"nextSibling")},prevAll:function(t){return ae.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ae.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ae.dir(t,"previousSibling",i)},siblings:function(t){return ae.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ae.sibling(t.firstChild)},contents:function(t){return ae.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ae.merge([],t.childNodes)}},function(t,e){ae.fn[t]=function(i,n){var o=ae.map(this,e,i);return ze.test(t)||(n=i),n&&"string"==typeof n&&(o=ae.filter(n,o)),o=this.length>1&&!We[t]?ae.unique(o):o,this.length>1&&Be.test(t)&&(o=o.reverse()),this.pushStack(o)}}),ae.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?ae.find.matchesSelector(e[0],t)?[e[0]]:[]:ae.find.matches(t,e)},dir:function(t,i,n){for(var o=[],r=t[i];r&&9!==r.nodeType&&(n===e||1!==r.nodeType||!ae(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var $e="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ge=/ jQuery\d+="(?:null|\d+)"/g,qe=RegExp("<(?:"+$e+")[\\s/>]","i"),Ve=/^\s+/,Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Xe=/<([\w:]+)/,Ze=/<tbody/i,Ke=/<|&#?\w+;/,Qe=/<(?:script|style|link)/i,Je=/^(?:checkbox|radio)$/i,ti=/checked\s*(?:[^=]|=\s*.checked.)/i,ei=/^$|\/(?:java|ecma)script/i,ii=/^true\/(.*)/,ni=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,oi={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ae.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ri=d(V),si=ri.appendChild(V.createElement("div"));oi.optgroup=oi.option,oi.tbody=oi.tfoot=oi.colgroup=oi.caption=oi.thead,oi.th=oi.td,ae.fn.extend({text:function(t){return ae.access(this,function(t){return t===e?ae.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(ae.isFunction(t))return this.each(function(e){ae(this).wrapAll(t.call(this,e))});if(this[0]){var e=ae(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(ae.isFunction(t)?function(e){ae(this).wrapInner(t.call(this,e))}:function(){var e=ae(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ae.isFunction(t);return this.each(function(i){ae(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=0;null!=(i=this[n]);n++)(!t||ae.filter(t,[i]).length>0)&&(e||1!==i.nodeType||ae.cleanData(b(i)),i.parentNode&&(e&&ae.contains(i.ownerDocument,i)&&g(b(i,"script")),i.parentNode.removeChild(i)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ae.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ae.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ae.clone(this,t,e)})},html:function(t){return ae.access(this,function(t){var i=this[0]||{},n=0,o=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(Ge,""):e;if(!("string"!=typeof t||Qe.test(t)||!ae.support.htmlSerialize&&qe.test(t)||!ae.support.leadingWhitespace&&Ve.test(t)||oi[(Xe.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ye,"<$1></$2>");try{for(;o>n;n++)i=this[n]||{},1===i.nodeType&&(ae.cleanData(b(i,!1)),i.innerHTML=t);i=0}catch(r){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=ae.isFunction(t);return e||"string"==typeof t||(t=ae(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,i=this.parentNode;(i&&1===this.nodeType||11===this.nodeType)&&(ae(this).remove(),e?e.parentNode.insertBefore(t,e):i.appendChild(t))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,n){t=te.apply([],t);var o,r,s,a,l,h,c=0,u=this.length,d=this,g=u-1,v=t[0],y=ae.isFunction(v);if(y||!(1>=u||"string"!=typeof v||ae.support.checkClone)&&ti.test(v))return this.each(function(o){var r=d.eq(o);y&&(t[0]=v.call(this,o,i?r.html():e)),r.domManip(t,i,n)});if(u&&(o=ae.buildFragment(t,this[0].ownerDocument,!1,this),r=o.firstChild,1===o.childNodes.length&&(o=r),r)){for(i=i&&ae.nodeName(r,"tr"),s=ae.map(b(o,"script"),f),a=s.length;u>c;c++)l=o,c!==g&&(l=ae.clone(l,!0,!0),a&&ae.merge(s,b(l,"script"))),n.call(i&&ae.nodeName(this[c],"table")?p(this[c],"tbody"):this[c],l,c);if(a)for(h=s[s.length-1].ownerDocument,ae.map(s,m),c=0;a>c;c++)l=s[c],ei.test(l.type||"")&&!ae._data(l,"globalEval")&&ae.contains(h,l)&&(l.src?ae.ajax({url:l.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ae.globalEval((l.text||l.textContent||l.innerHTML||"").replace(ni,"")));o=r=null}return this}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ae.fn[t]=function(t){for(var i,n=0,o=[],r=ae(t),s=r.length-1;s>=n;n++)i=n===s?this:this.clone(!0),ae(r[n])[e](i),ee.apply(o,i.get());return this.pushStack(o)}}),ae.extend({clone:function(t,e,i){var n,o,r,s,a,l=ae.contains(t.ownerDocument,t);if(ae.support.html5Clone||ae.isXMLDoc(t)||!qe.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(si.innerHTML=t.outerHTML,si.removeChild(a=si.firstChild)),!(ae.support.noCloneEvent&&ae.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ae.isXMLDoc(t)))for(n=b(a),o=b(t),s=0;null!=(r=o[s]);++s)n[s]&&y(r,n[s]);if(e)if(i)for(o=o||b(t),n=n||b(a),s=0;null!=(r=o[s]);s++)v(r,n[s]);else v(t,a);return n=b(a,"script"),n.length>0&&g(n,!l&&b(t,"script")),n=o=r=null,a},buildFragment:function(t,e,i,n){for(var o,r,s,a,l,h,c,u=t.length,p=d(e),f=[],m=0;u>m;m++)if(r=t[m],r||0===r)if("object"===ae.type(r))ae.merge(f,r.nodeType?[r]:r);else if(Ke.test(r)){for(a=a||p.appendChild(e.createElement("div")),s=(Xe.exec(r)||["",""])[1].toLowerCase(),l=oi[s]||oi._default,a.innerHTML=l[1]+r.replace(Ye,"<$1></$2>")+l[2],c=l[0];c--;)a=a.lastChild;if(!ae.support.leadingWhitespace&&Ve.test(r)&&f.push(e.createTextNode(Ve.exec(r)[0])),!ae.support.tbody)for(r="table"!==s||Ze.test(r)?"<table>"!==l[1]||Ze.test(r)?0:a:a.firstChild,c=r&&r.childNodes.length;c--;)ae.nodeName(h=r.childNodes[c],"tbody")&&!h.childNodes.length&&r.removeChild(h);for(ae.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(e.createTextNode(r));for(a&&p.removeChild(a),ae.support.appendChecked||ae.grep(b(f,"input"),_),m=0;r=f[m++];)if((!n||-1===ae.inArray(r,n))&&(o=ae.contains(r.ownerDocument,r),a=b(p.appendChild(r),"script"),o&&g(a),i))for(c=0;r=a[c++];)ei.test(r.type||"")&&i.push(r);return a=null,p},cleanData:function(t,i){for(var n,o,r,s,a=0,l=ae.expando,h=ae.cache,c=ae.support.deleteExpando,u=ae.event.special;null!=(r=t[a]);a++)if((i||ae.acceptData(r))&&(o=r[l],n=o&&h[o])){if(n.events)for(s in n.events)u[s]?ae.event.remove(r,s):ae.removeEvent(r,s,n.handle);h[o]&&(delete h[o],c?delete r[l]:r.removeAttribute!==e?r.removeAttribute(l):r[l]=null,Q.push(o))}}});var ai,li,hi,ci=/alpha\([^)]*\)/i,ui=/opacity\s*=\s*([^)]*)/,di=/^(top|right|bottom|left)$/,pi=/^(none|table(?!-c[ea]).+)/,fi=/^margin/,mi=RegExp("^("+le+")(.*)$","i"),gi=RegExp("^("+le+")(?!px)[a-z%]+$","i"),vi=RegExp("^([+-])=("+le+")","i"),yi={BODY:"block"},bi={position:"absolute",visibility:"hidden",display:"block"},_i={letterSpacing:0,fontWeight:400},wi=["Top","Right","Bottom","Left"],xi=["Webkit","O","Moz","ms"];ae.fn.extend({css:function(t,i){return ae.access(this,function(t,i,n){var o,r,s={},a=0;if(ae.isArray(i)){for(o=li(t),r=i.length;r>a;a++)s[i[a]]=ae.css(t,i[a],!1,o);return s}return n!==e?ae.style(t,i,n):ae.css(t,i)},t,i,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:x(this))?ae(this).show():ae(this).hide()})}}),ae.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ai(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ae.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,l=ae.camelCase(i),h=t.style;if(i=ae.cssProps[l]||(ae.cssProps[l]=w(h,l)),a=ae.cssHooks[i]||ae.cssHooks[l],n===e)return a&&"get"in a&&(r=a.get(t,!1,o))!==e?r:h[i];if(s=typeof n,"string"===s&&(r=vi.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(ae.css(t,i)),s="number"),!(null==n||"number"===s&&isNaN(n)||("number"!==s||ae.cssNumber[l]||(n+="px"),ae.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(h[i]="inherit"),a&&"set"in a&&(n=a.set(t,n,o))===e)))try{h[i]=n}catch(c){}}},css:function(t,i,n,o){var r,s,a,l=ae.camelCase(i);return i=ae.cssProps[l]||(ae.cssProps[l]=w(t.style,l)),a=ae.cssHooks[i]||ae.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,n)),r===e&&(r=ai(t,i,o)),"normal"===r&&i in _i&&(r=_i[i]),n?(s=parseFloat(r),n===!0||ae.isNumeric(s)?s||0:r):r},swap:function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=i.apply(t,n||[]);for(r in e)t.style[r]=s[r];return o}}),t.getComputedStyle?(li=function(e){return t.getComputedStyle(e,null)},ai=function(t,i,n){var o,r,s,a=n||li(t),l=a?a.getPropertyValue(i)||a[i]:e,h=t.style;return a&&(""!==l||ae.contains(t.ownerDocument,t)||(l=ae.style(t,i)),gi.test(l)&&fi.test(i)&&(o=h.width,r=h.minWidth,s=h.maxWidth,h.minWidth=h.maxWidth=h.width=l,l=a.width,h.width=o,h.minWidth=r,h.maxWidth=s)),l}):V.documentElement.currentStyle&&(li=function(t){return t.currentStyle},ai=function(t,i,n){var o,r,s,a=n||li(t),l=a?a[i]:e,h=t.style;return null==l&&h&&h[i]&&(l=h[i]),gi.test(l)&&!di.test(i)&&(o=h.left,r=t.runtimeStyle,s=r&&r.left,s&&(r.left=t.currentStyle.left),h.left="fontSize"===i?"1em":l,l=h.pixelLeft+"px",h.left=o,s&&(r.left=s)),""===l?"auto":l}),ae.each(["height","width"],function(t,i){ae.cssHooks[i]={get:function(t,n,o){return n?0===t.offsetWidth&&pi.test(ae.css(t,"display"))?ae.swap(t,bi,function(){return T(t,i,o)}):T(t,i,o):e},set:function(t,e,n){var o=n&&li(t);return k(t,e,n?S(t,i,n,ae.support.boxSizing&&"border-box"===ae.css(t,"boxSizing",!1,o),o):0)}}}),ae.support.opacity||(ae.cssHooks.opacity={get:function(t,e){return ui.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ae.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ae.trim(r.replace(ci,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=ci.test(r)?r.replace(ci,o):r+" "+o)}}),ae(function(){ae.support.reliableMarginRight||(ae.cssHooks.marginRight={get:function(t,i){return i?ae.swap(t,{display:"inline-block"},ai,[t,"marginRight"]):e}}),!ae.support.pixelPosition&&ae.fn.position&&ae.each(["top","left"],function(t,i){ae.cssHooks[i]={get:function(t,n){return n?(n=ai(t,i),gi.test(n)?ae(t).position()[i]+"px":n):e}}})}),ae.expr&&ae.expr.filters&&(ae.expr.filters.hidden=function(t){return 0===t.offsetWidth&&0===t.offsetHeight||!ae.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ae.css(t,"display"))},ae.expr.filters.visible=function(t){return!ae.expr.filters.hidden(t)}),ae.each({margin:"",padding:"",border:"Width"},function(t,e){ae.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+wi[n]+e]=r[n]||r[n-2]||r[0];return o}},fi.test(t)||(ae.cssHooks[t+e].set=k)});var Ci=/%20/g,ki=/\[\]$/,Si=/\r?\n/g,Ti=/^(?:submit|button|image|reset)$/i,Pi=/^(?:input|select|textarea|keygen)/i;ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ae.prop(this,"elements");return t?ae.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ae(this).is(":disabled")&&Pi.test(this.nodeName)&&!Ti.test(t)&&(this.checked||!Je.test(t))}).map(function(t,e){var i=ae(this).val();return null==i?null:ae.isArray(i)?ae.map(i,function(t){return{name:e.name,value:t.replace(Si,"\r\n")}}):{name:e.name,value:i.replace(Si,"\r\n")}}).get()}}),ae.param=function(t,i){var n,o=[],r=function(t,e){e=ae.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(t)||t.jquery&&!ae.isPlainObject(t))ae.each(t,function(){r(this.name,this.value)});else for(n in t)D(n,t[n],i,r);return o.join("&").replace(Ci,"+")};var Ei,Di,Li=ae.now(),Mi=/\?/,Ai=/#.*$/,Ri=/([?&])_=[^&]*/,Oi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ii=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ni=/^(?:GET|HEAD)$/,ji=/^\/\//,Hi=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,zi=ae.fn.load,Bi={},Fi={},Ui="*/".concat("*");try{Di=Y.href}catch(Wi){Di=V.createElement("a"),Di.href="",Di=Di.href}Ei=Hi.exec(Di.toLowerCase())||[],ae.fn.load=function(t,i,n){if("string"!=typeof t&&zi)return zi.apply(this,arguments);var o,r,s,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l,t.length),t=t.slice(0,l)),ae.isFunction(i)?(n=i,i=e):i&&"object"==typeof i&&(r="POST"),a.length>0&&ae.ajax({url:t,type:r,dataType:"html",data:i}).done(function(t){s=arguments,a.html(o?ae("<div>").append(ae.parseHTML(t)).find(o):t)}).complete(n&&function(t,e){a.each(n,s||[t.responseText,e,t])}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ae.fn[e]=function(t){return this.on(e,t)}}),ae.each(["get","post"],function(t,i){ae[i]=function(t,n,o,r){return ae.isFunction(n)&&(r=r||o,o=n,n=e),ae.ajax({url:t,type:i,dataType:r,data:n,success:o})}}),ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Di,type:"GET",isLocal:Ii.test(Ei[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ui,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?A(A(t,ae.ajaxSettings),e):A(ae.ajaxSettings,t)},ajaxPrefilter:L(Bi),ajaxTransport:L(Fi),ajax:function(t,i){function n(t,i,n,a){var h,u,y,b,w,C=i;2!==_&&(_=2,l&&clearTimeout(l),o=e,s=a||"",x.readyState=t>0?4:0,n&&(b=R(d,x,n)),t>=200&&300>t||304===t?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ae.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(ae.etag[r]=w)),304===t?(h=!0,C="notmodified"):(h=O(d,b),C=h.state,u=h.data,y=h.error,h=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(i||C)+"",h?m.resolveWith(p,[u,C,x]):m.rejectWith(p,[x,C,y]),x.statusCode(v),v=e,c&&f.trigger(h?"ajaxSuccess":"ajaxError",[x,d,h?u:y]),g.fireWith(p,[x,C]),c&&(f.trigger("ajaxComplete",[x,d]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var o,r,s,a,l,h,c,u,d=ae.ajaxSetup({},i),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?ae(p):ae.event,m=ae.Deferred(),g=ae.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=Oi.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return _||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return o&&o.abort(e),n(0,e),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||Di)+"").replace(Ai,"").replace(ji,Ei[1]+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=ae.trim(d.dataType||"*").toLowerCase().match(he)||[""],null==d.crossDomain&&(h=Hi.exec(d.url.toLowerCase()),d.crossDomain=!(!h||h[1]===Ei[1]&&h[2]===Ei[2]&&(h[3]||("http:"===h[1]?80:443))==(Ei[3]||("http:"===Ei[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ae.param(d.data,d.traditional)),M(Bi,d,i,x),2===_)return x;c=d.global,c&&0===ae.active++&&ae.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ni.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(Mi.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ri.test(r)?r.replace(Ri,"$1_="+Li++):r+(Mi.test(r)?"&":"?")+"_="+Li++)),d.ifModified&&(ae.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ae.lastModified[r]),ae.etag[r]&&x.setRequestHeader("If-None-Match",ae.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ui+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)x.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===_))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](d[u]);if(o=M(Fi,d,i,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,o.send(y,n)}catch(C){if(!(2>_))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getScript:function(t,i){return ae.get(t,e,i,"script")},getJSON:function(t,e,i){return ae.get(t,e,i,"json")}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ae.globalEval(t),t}}}),ae.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ae.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=V.head||ae("head")[0]||V.documentElement;return{send:function(e,o){i=V.createElement("script"),i.async=!0,t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(e,!0)}}}});var $i=[],Gi=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=$i.pop()||ae.expando+"_"+Li++;return this[t]=!0,t}}),ae.ajaxPrefilter("json jsonp",function(i,n,o){var r,s,a,l=i.jsonp!==!1&&(Gi.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gi.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(r=i.jsonpCallback=ae.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Gi,"$1"+r):i.jsonp!==!1&&(i.url+=(Mi.test(i.url)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return a||ae.error(r+" was not called"),a[0]},i.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},o.always(function(){t[r]=s,i[r]&&(i.jsonpCallback=n.jsonpCallback,$i.push(r)),a&&ae.isFunction(s)&&s(a[0]),a=s=e}),"script"):e});var qi,Vi,Yi=0,Xi=t.ActiveXObject&&function(){var t;for(t in qi)qi[t](e,!0)};ae.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&I()||N()}:I,Vi=ae.ajaxSettings.xhr(),ae.support.cors=!!Vi&&"withCredentials"in Vi,Vi=ae.support.ajax=!!Vi,Vi&&ae.ajaxTransport(function(i){if(!i.crossDomain||ae.support.cors){var n;return{send:function(o,r){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(h){}l.send(i.hasContent&&i.data||null),n=function(t,o){var a,h,c,u,d;try{if(n&&(o||4===l.readyState))if(n=e,s&&(l.onreadystatechange=ae.noop,Xi&&delete qi[s]),o)4!==l.readyState&&l.abort();else{u={},a=l.status,d=l.responseXML,c=l.getAllResponseHeaders(),d&&d.documentElement&&(u.xml=d),"string"==typeof l.responseText&&(u.text=l.responseText);try{h=l.statusText}catch(p){h=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(f){o||r(-1,f)}u&&r(a,h,u,c)},i.async?4===l.readyState?setTimeout(n):(s=++Yi,Xi&&(qi||(qi={},ae(t).unload(Xi)),qi[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(e,!0)}}}});var Zi,Ki,Qi=/^(?:toggle|show|hide)$/,Ji=RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[F],nn={"*":[function(t,e){var i,n,o=this.createTween(t,e),r=Ji.exec(e),s=o.cur(),a=+s||0,l=1,h=20;if(r){if(i=+r[2],n=r[3]||(ae.cssNumber[t]?"":"px"),"px"!==n&&a){a=ae.css(o.elem,t,!0)||i||1;do l=l||".5",a/=l,ae.style(o.elem,t,a+n);while(l!==(l=o.cur()/s)&&1!==l&&--h)}o.unit=n,o.start=a,o.end=r[1]?a+(r[1]+1)*i:i}return o}]};ae.Animation=ae.extend(z,{tweener:function(t,e){ae.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],nn[i]=nn[i]||[],nn[i].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),ae.Tween=U,U.prototype={constructor:U,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ae.cssNumber[i]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,i=U.propHooks[this.prop];return this.pos=e=this.options.duration?ae.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ae.css(t.elem,t.prop,"auto"),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ae.fx.step[t.prop]?ae.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ae.cssProps[t.prop]]||ae.cssHooks[t.prop])?ae.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ae.each(["toggle","show","hide"],function(t,e){var i=ae.fn[e];ae.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(W(e,!0),t,n,o)}}),ae.fn.extend({fadeTo:function(t,e,i,n){return this.filter(x).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ae.isEmptyObject(t),r=ae.speed(e,i,n),s=function(){var e=z(this,ae.extend({},t),r);s.finish=function(){e.stop(!0)},(o||ae._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,i,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",r=ae.timers,s=ae._data(this);if(i)s[i]&&s[i].stop&&o(s[i]);else for(i in s)s[i]&&s[i].stop&&tn.test(i)&&o(s[i]);for(i=r.length;i--;)r[i].elem!==this||null!=t&&r[i].queue!==t||(r[i].anim.stop(n),e=!1,r.splice(i,1));(e||!n)&&ae.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ae._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=ae.timers,s=n?n.length:0;for(i.finish=!0,ae.queue(this,t,[]),o&&o.cur&&o.cur.finish&&o.cur.finish.call(this),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ae.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ae.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ae.speed=function(t,e,i){var n=t&&"object"==typeof t?ae.extend({},t):{complete:i||!i&&e||ae.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ae.isFunction(e)&&e};return n.duration=ae.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ae.fx.speeds?ae.fx.speeds[n.duration]:ae.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ae.isFunction(n.old)&&n.old.call(this),n.queue&&ae.dequeue(this,n.queue)},n},ae.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ae.timers=[],ae.fx=U.prototype.init,ae.fx.tick=function(){var t,i=ae.timers,n=0;for(Zi=ae.now();i.length>n;n++)t=i[n],t()||i[n]!==t||i.splice(n--,1);i.length||ae.fx.stop(),Zi=e},ae.fx.timer=function(t){t()&&ae.timers.push(t)&&ae.fx.start()},ae.fx.interval=13,ae.fx.start=function(){Ki||(Ki=setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){clearInterval(Ki),Ki=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fx.step={},ae.expr&&ae.expr.filters&&(ae.expr.filters.animated=function(t){return ae.grep(ae.timers,function(e){return t===e.elem}).length}),ae.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){ae.offset.setOffset(this,t,e)});var i,n,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;return s?(i=s.documentElement,ae.contains(i,r)?(r.getBoundingClientRect!==e&&(o=r.getBoundingClientRect()),n=$(s),{top:o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):o):void 0},ae.offset={setOffset:function(t,e,i){var n=ae.css(t,"position");"static"===n&&(t.style.position="relative");var o,r,s=ae(t),a=s.offset(),l=ae.css(t,"top"),h=ae.css(t,"left"),c=("absolute"===n||"fixed"===n)&&ae.inArray("auto",[l,h])>-1,u={},d={};c?(d=s.position(),o=d.top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(h)||0),ae.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+o),null!=e.left&&(u.left=e.left-a.left+r),"using"in e?e.using.call(t,u):s.css(u)}},ae.fn.extend({position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ae.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ae.nodeName(t[0],"html")||(i=t.offset()),i.top+=ae.css(t[0],"borderTopWidth",!0),i.left+=ae.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ae.css(n,"marginTop",!0),left:e.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||V.documentElement;t&&!ae.nodeName(t,"html")&&"static"===ae.css(t,"position");)t=t.offsetParent;return t||V.documentElement})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n=/Y/.test(i);ae.fn[t]=function(o){return ae.access(this,function(t,o,r){var s=$(t);return r===e?s?i in s?s[i]:s.document.documentElement[o]:t[o]:(s?s.scrollTo(n?ae(s).scrollLeft():r,n?r:ae(s).scrollTop()):t[o]=r,e)},t,o,arguments.length,null)}}),ae.each({Height:"height",Width:"width"},function(t,i){ae.each({padding:"inner"+t,content:i,"":"outer"+t},function(n,o){ae.fn[o]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(o===!0||r===!0?"margin":"border");return ae.access(this,function(i,n,o){var r;return ae.isWindow(i)?i.document.documentElement["client"+t]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+t],r["scroll"+t],i.body["offset"+t],r["offset"+t],r["client"+t])):o===e?ae.css(i,n,a):ae.style(i,n,o,a)},i,s?o:e,s,null)}})}),t.jQuery=t.$=ae,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ae})}(window),function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,e=t._,i=Array.prototype,n=Object.prototype,o=i.push,r=i.slice,s=n.toString,a=n.hasOwnProperty,l=Array.isArray,h=Object.keys,c=Object.create,u=function(){},d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):t._=d,d.VERSION="1.8.3";var p=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,r){return t.call(e,i,n,o,r)}}return function(){return t.apply(e,arguments)}},f=function(t,e,i){return null==t?d.identity:d.isFunction(t)?p(t,e,i):d.isObject(t)?d.matcher(t):d.property(t)};d.iteratee=function(t,e){return f(t,e,1/0)};var m=function(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),o=0;i>o;o++)n[o]=arguments[o+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var r=Array(e+1);for(o=0;e>o;o++)r[o]=arguments[o];return r[e]=n,t.apply(this,r)}},g=function(t){if(!d.isObject(t))return{};if(c)return c(t);u.prototype=t;var e=new u;return u.prototype=null,e},v=function(t){return function(e){return null==e?void 0:e[t]}},y=Math.pow(2,53)-1,b=v("length"),_=function(t){var e=b(t);return"number"==typeof e&&e>=0&&y>=e};d.each=d.forEach=function(t,e,i){e=p(e,i);var n,o;if(_(t))for(n=0,o=t.length;o>n;n++)e(t[n],n,t);else{var r=d.keys(t);for(n=0,o=r.length;o>n;n++)e(t[r[n]],r[n],t)}return t},d.map=d.collect=function(t,e,i){e=f(e,i);for(var n=!_(t)&&d.keys(t),o=(n||t).length,r=Array(o),s=0;o>s;s++){var a=n?n[s]:s;r[s]=e(t[a],a,t)}return r};var w=function(t){var e=function(e,i,n,o){var r=!_(e)&&d.keys(e),s=(r||e).length,a=t>0?0:s-1;for(o||(n=e[r?r[a]:a],a+=t);a>=0&&s>a;a+=t){var l=r?r[a]:a;
n=i(n,e[l],l,e)}return n};return function(t,i,n,o){var r=arguments.length>=3;return e(t,p(i,o,4),n,r)}};d.reduce=d.foldl=d.inject=w(1),d.reduceRight=d.foldr=w(-1),d.find=d.detect=function(t,e,i){var n;return n=_(t)?d.findIndex(t,e,i):d.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},d.filter=d.select=function(t,e,i){var n=[];return e=f(e,i),d.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},d.reject=function(t,e,i){return d.filter(t,d.negate(f(e)),i)},d.every=d.all=function(t,e,i){e=f(e,i);for(var n=!_(t)&&d.keys(t),o=(n||t).length,r=0;o>r;r++){var s=n?n[r]:r;if(!e(t[s],s,t))return!1}return!0},d.some=d.any=function(t,e,i){e=f(e,i);for(var n=!_(t)&&d.keys(t),o=(n||t).length,r=0;o>r;r++){var s=n?n[r]:r;if(e(t[s],s,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,i,n){return _(t)||(t=d.values(t)),("number"!=typeof i||n)&&(i=0),d.indexOf(t,e,i)>=0},d.invoke=m(function(t,e,i){var n=d.isFunction(e);return d.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})}),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,e,i){var n,o,r=-1/0,s=-1/0;if(null==e&&null!=t){t=_(t)?t:d.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>r&&(r=n)}else e=f(e,i),d.each(t,function(t,i,n){o=e(t,i,n),(o>s||o===-1/0&&r===-1/0)&&(r=t,s=o)});return r},d.min=function(t,e,i){var n,o,r=1/0,s=1/0;if(null==e&&null!=t){t=_(t)?t:d.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],r>n&&(r=n)}else e=f(e,i),d.each(t,function(t,i,n){o=e(t,i,n),(s>o||1/0===o&&1/0===r)&&(r=t,s=o)});return r},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,i){if(null==e||i)return _(t)||(t=d.values(t)),t[d.random(t.length-1)];var n=_(t)?d.clone(t):d.values(t),o=b(n);e=Math.max(Math.min(e,o),0);for(var r=o-1,s=0;e>s;s++){var a=d.random(s,r),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,e)},d.sortBy=function(t,e,i){return e=f(e,i),d.pluck(d.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var x=function(t,e){return function(i,n,o){var r=e?[[],[]]:{};return n=f(n,o),d.each(i,function(e,o){var s=n(e,o,i);t(r,e,s)}),r}};d.groupBy=x(function(t,e,i){d.has(t,i)?t[i].push(e):t[i]=[e]}),d.indexBy=x(function(t,e,i){t[i]=e}),d.countBy=x(function(t,e,i){d.has(t,i)?t[i]++:t[i]=1}),d.toArray=function(t){return t?d.isArray(t)?r.call(t):_(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:_(t)?t.length:d.keys(t).length},d.partition=x(function(t,e,i){t[i?0:1].push(e)},!0),d.first=d.head=d.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,i){return r.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},d.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,i){return r.call(t,null==e||i?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var C=function(t,e,i,n){n=n||[];for(var o=n.length,r=0,s=b(t);s>r;r++){var a=t[r];if(_(a)&&(d.isArray(a)||d.isArguments(a)))if(e)for(var l=0,h=a.length;h>l;)n[o++]=a[l++];else C(a,e,i,n),o=n.length;else i||(n[o++]=a)}return n};d.flatten=function(t,e){return C(t,e,!1)},d.without=m(function(t,e){return d.difference(t,e)}),d.uniq=d.unique=function(t,e,i,n){d.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=f(i,n));for(var o=[],r=[],s=0,a=b(t);a>s;s++){var l=t[s],h=i?i(l,s,t):l;e?(s&&r===h||o.push(l),r=h):i?d.contains(r,h)||(r.push(h),o.push(l)):d.contains(o,l)||o.push(l)}return o},d.union=m(function(t){return d.uniq(C(t,!0,!0))}),d.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=b(t);o>n;n++){var r=t[n];if(!d.contains(e,r)){var s;for(s=1;i>s&&d.contains(arguments[s],r);s++);s===i&&e.push(r)}}return e},d.difference=m(function(t,e){return e=C(e,!0,!0),d.filter(t,function(t){return!d.contains(e,t)})}),d.unzip=function(t){for(var e=t&&d.max(t,b).length||0,i=Array(e),n=0;e>n;n++)i[n]=d.pluck(t,n);return i},d.zip=m(d.unzip),d.object=function(t,e){for(var i={},n=0,o=b(t);o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i};var k=function(t){return function(e,i,n){i=f(i,n);for(var o=b(e),r=t>0?0:o-1;r>=0&&o>r;r+=t)if(i(e[r],r,e))return r;return-1}};d.findIndex=k(1),d.findLastIndex=k(-1),d.sortedIndex=function(t,e,i,n){i=f(i,n,1);for(var o=i(e),r=0,s=b(t);s>r;){var a=Math.floor((r+s)/2);i(t[a])<o?r=a+1:s=a}return r};var S=function(t,e,i){return function(n,o,s){var a=0,l=b(n);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(i&&s&&l)return s=i(n,o),n[s]===o?s:-1;if(o!==o)return s=e(r.call(n,a,l),d.isNaN),s>=0?s+a:-1;for(s=t>0?a:l-1;s>=0&&l>s;s+=t)if(n[s]===o)return s;return-1}};d.indexOf=S(1,d.findIndex,d.sortedIndex),d.lastIndexOf=S(-1,d.findLastIndex),d.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),r=0;n>r;r++,t+=i)o[r]=t;return o};var T=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var r=g(t.prototype),s=t.apply(r,o);return d.isObject(s)?s:r};d.bind=m(function(t,e,i){if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var n=m(function(o){return T(t,n,e,this,i.concat(o))});return n}),d.partial=m(function(t,e){var i=d.partial.placeholder,n=function(){for(var o=0,r=e.length,s=Array(r),a=0;r>a;a++)s[a]=e[a]===i?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return T(t,n,this,this,s)};return n}),d.partial.placeholder=d,d.bindAll=m(function(t,e){e=C(e,!1,!1);var i=e.length;if(1>i)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=d.bind(t[n],t)}}),d.memoize=function(t,e){var i=function(n){var o=i.cache,r=""+(e?e.apply(this,arguments):n);return d.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return i.cache={},i},d.delay=m(function(t,e,i){return setTimeout(function(){return t.apply(null,i)},e)}),d.defer=d.partial(d.delay,d,1),d.throttle=function(t,e,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:d.now(),s=null,r=t.apply(n,o),s||(n=o=null)};return function(){var h=d.now();a||i.leading!==!1||(a=h);var c=e-(h-a);return n=this,o=arguments,0>=c||c>e?(s&&(clearTimeout(s),s=null),a=h,r=t.apply(n,o),s||(n=o=null)):s||i.trailing===!1||(s=setTimeout(l,c)),r}},d.debounce=function(t,e,i){var n,o,r,s,a,l=function(){var h=d.now()-s;e>h&&h>=0?n=setTimeout(l,e-h):(n=null,i||(a=t.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=d.now();var h=i&&!n;return n||(n=setTimeout(l,e)),h&&(a=t.apply(r,o),r=o=null),a}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},d.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},d.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},d.once=d.partial(d.before,2),d.restArgs=m;var P=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],D=function(t,e){var i=E.length,o=t.constructor,r=d.isFunction(o)&&o.prototype||n,s="constructor";for(d.has(t,s)&&!d.contains(e,s)&&e.push(s);i--;)s=E[i],s in t&&t[s]!==r[s]&&!d.contains(e,s)&&e.push(s)};d.keys=function(t){if(!d.isObject(t))return[];if(h)return h(t);var e=[];for(var i in t)d.has(t,i)&&e.push(i);return P&&D(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var i in t)e.push(i);return P&&D(t,e),e},d.values=function(t){for(var e=d.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},d.mapObject=function(t,e,i){e=f(e,i);for(var n=d.keys(t),o=n.length,r={},s=0;o>s;s++){var a=n[s];r[a]=e(t[a],a,t)}return r},d.pairs=function(t){for(var e=d.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},d.invert=function(t){for(var e={},i=d.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},d.functions=d.methods=function(t){var e=[];for(var i in t)d.isFunction(t[i])&&e.push(i);return e.sort()};var L=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var o=1;n>o;o++)for(var r=arguments[o],s=t(r),a=s.length,l=0;a>l;l++){var h=s[l];e&&void 0!==i[h]||(i[h]=r[h])}return i}};d.extend=L(d.allKeys),d.extendOwn=d.assign=L(d.keys),d.findKey=function(t,e,i){e=f(e,i);for(var n,o=d.keys(t),r=0,s=o.length;s>r;r++)if(n=o[r],e(t[n],n,t))return n};var M=function(t,e,i){return e in i};d.pick=m(function(t,e){var i={},n=e[0];if(null==t)return i;d.isFunction(n)?(e.length>1&&(n=p(n,e[1])),e=d.allKeys(t)):(n=M,e=C(e,!1,!1),t=Object(t));for(var o=0,r=e.length;r>o;o++){var s=e[o],a=t[s];n(a,s,t)&&(i[s]=a)}return i}),d.omit=m(function(t,e){var i,n=e[0];return d.isFunction(n)?(n=d.negate(n),e.length>1&&(i=e[1])):(e=d.map(C(e,!1,!1),String),n=function(t,i){return!d.contains(e,i)}),d.pick(t,n,i)}),d.defaults=L(d.allKeys,!0),d.create=function(t,e){var i=g(t);return e&&d.extendOwn(i,e),i},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var i=d.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),r=0;n>r;r++){var s=i[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var A,R;A=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;if(t!==t)return e!==e;var o=typeof t;return"function"!==o&&"object"!==o&&"object"!=typeof e?!1:R(t,e,i,n)},R=function(t,e,i,n){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=s.call(t);if(o!==s.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,l=e.constructor;if(a!==l&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var h=i.length;h--;)if(i[h]===t)return n[h]===e;if(i.push(t),n.push(e),r){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!A(t[h],e[h],i,n))return!1}else{var c,u=d.keys(t);if(h=u.length,d.keys(e).length!==h)return!1;for(;h--;)if(c=u[h],!d.has(e,c)||!A(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0},d.isEqual=function(t,e){return A(t,e)},d.isEmpty=function(t){return null==t?!0:_(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=l||function(t){return"[object Array]"===s.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){d["is"+t]=function(e){return s.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===s.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&a.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=v,d.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},d.matcher=d.matches=function(t){return t=d.extendOwn({},t),function(e){return d.isMatch(e,t)}},d.times=function(t,e,i){var n=Array(Math.max(0,t));e=p(e,i,1);for(var o=0;t>o;o++)n[o]=e(o);return n},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=d.invert(O),N=function(t){var e=function(e){return t[e]},i="(?:"+d.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};d.escape=N(O),d.unescape=N(I),d.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),d.isFunction(n)?n.call(t):n};var j=0;d.uniqueId=function(t){var e=++j+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+z[t]};d.template=function(t,e,i){!e&&i&&(e=i),e=d.defaults({},e,d.templateSettings);var n=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(n,function(e,i,n,s,a){return r+=t.slice(o,a).replace(B,F),o=a+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";var s;try{s=new Function(e.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(t){return s.call(this,t,d)},h=e.variable||"obj";return l.source="function("+h+"){\n"+r+"}",l},d.chain=function(t){var e=d(t);return e._chain=!0,e};var U=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(t){d.each(d.functions(t),function(e){var i=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),U(this,i.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];d.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],U(this,i)}}),d.each(["concat","join","slice"],function(t){var e=i[t];d.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}(),/* ========================================================================
 * Bootstrap: affix.js v3.1.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(i,n){this.options=t.extend({},e.DEFAULTS,n),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=t(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.top,a=r.bottom;"top"==this.affixed&&(o.top+=n),"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=i-a?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var h="affix"+(l?"-"+l:""),c=t.Event(h+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(h).trigger(t.Event(h.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:i-a-this.$element.height()}))}}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),o=n.data("bs.affix"),r="object"==typeof i&&i;o||n.data("bs.affix",o=new e(this,r)),"string"==typeof i&&o[i]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.1.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){r.trigger("closed.bs.alert").remove()}var n=t(this),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t(o);e&&e.preventDefault(),r.length||(r=n.hasClass("alert")?n:n.parent()),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one(t.support.transition.end,i).emulateTransitionEnd(150):i())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.1.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",r.resetText||n.data("resetText",n[o]()),n[o](r[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,r)),"toggle"==i?o.toggle():i&&o.setState(i)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle"),e.preventDefault()})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.1.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var i=this,n=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),o=i||n[e](),r=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}if(o.hasClass("active"))return this.sliding=!1;var h=t.Event("slide.bs.carousel",{relatedTarget:o[0],direction:s});return this.$element.trigger(h),h.isDefaultPrevented()?void 0:(this.sliding=!0,r&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,n.addClass(s),o.addClass(s),n.one(t.support.transition.end,function(){o.removeClass([e,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),r&&this.cycle(),this)};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i),s="string"==typeof i?i:r.slide;o||n.data("bs.carousel",o=new e(this,r)),"number"==typeof i?o.to(i):s?o[s]():r.interval&&o.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,n=t(this),o=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},o.data(),n.data()),s=n.attr("data-slide-to");s&&(r.interval=!1),o.carousel(r),(s=n.attr("data-slide-to"))&&o.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.1.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var n=i.data("bs.collapse");if(n&&n.transitioning)return;i.collapse("hide"),n||i.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var s=t.camelCase(["scroll",o].join("-"));this.$element.one(t.support.transition.end,t.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);!o&&r.toggle&&"show"==i&&(i=!i),o||n.data("bs.collapse",o=new e(this,r)),"string"==typeof i&&o[i]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var i,n=t(this),o=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=t(o),s=r.data("bs.collapse"),a=s?"toggle":n.data(),l=n.attr("data-parent"),h=l&&t(l);s&&s.transitioning||(h&&h.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.collapse(a)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.1.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){t(n).remove(),t(o).each(function(){var n=i(t(this)),o={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",o))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",o="[data-toggle=dropdown]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var r=i(o),s=r.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown",a),o.focus()}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var r=i(n),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).focus(),n.click();var a=" li:not(.divider):visible a",l=r.find("[role=menu]"+a+", [role=listbox]"+a);if(l.length){var h=l.index(l.filter(":focus"));38==e.keyCode&&h>0&&h--,40==e.keyCode&&h<l.length-1&&h++,~h||(h=0),l.eq(h).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu], [role=listbox]",r.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.1.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a")[0],r=t.Event("show.bs.tab",{relatedTarget:o});if(e.trigger(r),!r.isDefaultPrevented()){var s=t(n);this.activate(e.parent("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},e.prototype.activate=function(e,i,n){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var r=i.find("> .active"),s=n&&t.support.transition&&r.hasClass("fade");s?r.one(t.support.transition.end,o).emulateTransitionEnd(150):o(),r.removeClass("in")};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof i&&o[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.1.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.1.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(i,n){var o,r=t.proxy(this.process,this);this.$element=t(t(i).is("body")?window:i),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",r),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||(o=t(i).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);{var i=this;this.$body.find(this.selector).map(function(){var n=t(this),o=n.data("target")||n.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[e]().top+(!t.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})}},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(e>=n)return s!=(t=r.last()[0])&&this.activate(t);if(s&&e<=o[0])return s!=(t=r[0])&&this.activate(t);for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),r="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,r)),"string"==typeof i&&o[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.1.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one(t.support.transition.end,function(){i.$element.focus().trigger(o)}).emulateTransitionEnd(300):i.$element.focus().trigger(o)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var i=t.fn.modal;t.fn.modal=function(i,n){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);r||o.data("bs.modal",r=new e(this,s)),"string"==typeof i?r[i](n):s.show&&r.show(n)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),o=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},o.data(),i.data());i.is("a")&&e.preventDefault(),o.modal(r,this).one("hide",function(){i.is(":visible")&&i.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.1.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n);for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this,n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(o);s&&(o=o.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(o),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var a=this.getPosition(),l=n[0].offsetWidth,h=n[0].offsetHeight;if(s){var c=this.$element.parent(),u=o,d=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),m="body"==this.options.container?0:c.offset().left;o="bottom"==o&&a.top+a.height+h-d>f?"top":"top"==o&&a.top-d-h<0?"bottom":"right"==o&&a.right+l>p?"left":"left"==o&&a.left-l<m?"right":o,n.removeClass(u).addClass(o)}var g=this.getCalculatedOffset(o,a,l,h);this.applyPlacement(g,o),this.hoverState=null;var v=function(){i.$element.trigger("shown.bs."+i.type)};t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,v).emulateTransitionEnd(150):v()}},e.prototype.applyPlacement=function(e,i){var n,o=this.tip(),r=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),l=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),e.top=e.top+a,e.left=e.left+l,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var h=o[0].offsetWidth,c=o[0].offsetHeight;if("top"==i&&c!=s&&(n=!0,e.top=e.top+s-c),/bottom|top/.test(i)){var u=0;e.left<0&&(u=-2*e.left,e.left=0,o.offset(e),h=o[0].offsetWidth,c=o[0].offsetHeight),this.replaceArrow(u-r+h,h,"left")}else this.replaceArrow(c-s,c,"top");n&&o.offset(e)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),r="object"==typeof i&&i;(o||"destroy"!=i)&&(o||n.data("bs.tooltip",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.1.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof i&&i;(o||"destroy"!=i)&&(o||n.data("bs.popover",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var r,s,a=this,l=arguments;return r=function(){n=null,i||(o=t.apply(a,l))},s=i&&!n,clearTimeout(n),n=setTimeout(r,e),s&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=t.apply(i,n)},function(){var l=new Date,h=e-(l-s);return i=this,n=arguments,0>=h?(clearTimeout(o),o=null,s=l,r=t.apply(i,n)):o||(o=setTimeout(a,h)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var o=[];return e.each(i,function(i){o=o.concat(t(e.toStr(n[i])))}),o}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),o=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function o(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new o(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),r=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function o(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(e){return t.parseJSON(e)}function s(t){var e,i,n=[],o=a.length;for(e=0;o>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(t,i,r){return e.isNumber(r)?this._safeSet(this._ttlKey(t),o(n()+r)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),o(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=r(this.ls.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}),i}(),s=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new o(0):a}var n=0,r={},s=6,a=new o(10);return i.setMaxPendingRequests=function(t){s=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),c._cache.set(l,t)}function o(){e(!0)}function a(){n--,delete r[l],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var l,h,c=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((h=r[l])?h.done(i).fail(o):s>n?(n++,r[l]=this._send(t).done(i).fail(o).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var o,r;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},r=this._fingerprint(i),this.cancelled=!1,this.lastReq=r,(o=this._cache.get(r))?n(null,o):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function o(){var t={};return t[l]=[],t[a]={},t}function r(t){for(var e={},i=[],n=0,o=t.length;o>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function s(t,e){var i=0,n=0,o=[];t=t.sort(),e=e.sort();for(var r=t.length,s=e.length;r>i&&s>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(o.push(t[i]),i++,n++);return o}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,s;i.datums[r=i.identify(t)]=t,s=n(i.datumTokenizer(t)),e.each(s,function(t){var e,n,s;for(e=i.trie,n=t.split("");s=n.shift();)e=e[a][s]||(e[a][s]=o()),e[l].push(r)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,o,h=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,r;if(o&&0===o.length)return!1;for(e=h.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(r=e[l].slice(0),void(o=o?s(o,r):r)):(o=[],!1)}),o?e.map(r(o),function(t){return h.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,o.transform(e))}var n,o=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),h=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:o.transform(i))}var n,o=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function n(n){var o;return n?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(o,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function o(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=r(i),i.limiter=s(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function r(t){function e(t,e){return e.url=r(e.url,t),e}function i(t,e){return e.url=e.url.replace(s,encodeURIComponent(t)),e}function n(t,e){return e}var o,r,s;return o=t.prepare,r=t.replace,s=t.wildcard,o?o:o=r?e:t.wildcard?i:n}function s(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var o,r,s;return o=t.limiter,r=t.rateLimitBy,s=t.rateLimitWait,o||(o=/^throttle$/i.test(r)?n(s):i(s)),o}function a(i){return function(n){function o(t){e.defer(function(){s.resolve(t)})}function r(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return i(n,o,r),s}}return function(i){var r,s;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(r,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),s=i.sorter,i.sorter=s?function(t){return t.sort(s)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=o(i.remote),i}}(),u=function(){"use strict";function i(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new h(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var o;return o=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=o),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(o.add(e),o.prefetch.store(o.index.serialize()),void i.resolve())}var i,n,o=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function o(t){var i=[];e.each(t,function(t){!e.some(r,function(e){return s.identify(t)===s.identify(e)})&&i.push(t)}),n&&n(i)}var r,s=this;return r=this.sorter(this.index.search(t)),i(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,o):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return u}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var r,s,a=this,l=arguments;return r=function(){n=null,i||(o=t.apply(a,l))},s=i&&!n,clearTimeout(n),n=setTimeout(r,e),s&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=t.apply(i,n)},function(){var l=new Date,h=e-(l-s);return i=this,n=arguments,0>=h?(clearTimeout(o),o=null,s=l,r=t.apply(i,n)):o||(o=setTimeout(a,h)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var s,a;return a=e.mixin({},r,t),s={css:o(),classes:a,html:i(a),selectors:n(a)},{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(t){e.mixin(t,s)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function o(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,o;return n="typeahead:",o={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var o;return o=t.Event(n+e),(i=i||[]).unshift(o),this.$el.trigger.apply(this.$el,i),o},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=o[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),o=function(){"use strict";function t(t,e,i,n){var o;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,i,n,o,s;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)o=r(i.sync,this,[e].concat(n)),s=r(i.async,this,[e].concat(n)),o()&&h(s);return this}function r(t,e,i){function n(){for(var n,o=0,r=t.length;!n&&r>o;o+=1)n=t[o].apply(e,i)===!1;return!n}return n}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,h=s();return{onSync:i,onAsync:e,off:n,trigger:o}}(),r=function(t){"use strict";function i(t,i,n){for(var o,r=[],s=0,a=t.length;a>s;s++)r.push(e.escapeRegExChars(t[s]));return o=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(o):new RegExp(o,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function r(e){var i,n,r;return(i=a.exec(e.data))&&(r=t.createElement(o.tagName),o.className&&(r.className=o.className),n=e.splitText(i.index),n.splitText(i[0].length),r.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(r,n)),!!i}function s(t,e){for(var i,n=3,o=0;o<t.childNodes.length;o++)i=t.childNodes[o],i.nodeType===n?o+=e(i)?1:0:s(i,e)}var a;o=e.mixin({},n,o),o.node&&o.pattern&&(o.pattern=e.isArray(o.pattern)?o.pattern:[o.pattern],a=i(o.pattern,o.caseSensitive,o.wordsOnly),s(o.node,r))}}(window.document),s=function(){"use strict";function i(i,o){i=i||{},i.input||t.error("input is missing"),o.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!s(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!s(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=r(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,o,r=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),o=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,o){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),o.mixin(this),this.highlight=!!i.highlight,this.name=i.name||h(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function s(i,n){function o(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||o}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,h;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},h=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,o,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var o,s=this;return o=document.createDocumentFragment(),e.each(n,function(e){var n,r;r=s._injectQuery(i,e),n=t(s.templates.suggestion(r)).data(l.obj,e).data(l.val,s.displayFn(e)).addClass(s.classes.suggestion+" "+s.classes.selectable),o.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:o,pattern:i}),t(o)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){s||(s=!0,t=(t||[]).slice(0,o.limit),a=t.length,o._overwrite(e,t),a<o.limit&&o.async&&o.trigger("asyncRequested",e))}function n(i){i=i||[],!r&&a<o.limit&&(o.cancel=t.noop,a+=i.length,o._append(e,i.slice(0,o.limit-a)),o.async&&o.trigger("asyncReceived",e))}var o=this,r=!1,s=!1,a=0;this.cancel(),this.cancel=function(){r=!0,o.cancel=t.noop,o.async&&o.trigger("asyncCanceled",e)},this.source(e,i,n),!s&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function o(e){var i=r.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(r.$node),new a(e,n)}var r=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,o)}return e.mixin(i.prototype,o,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,o;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>o&&this.$node.scrollTop(n+(i-o))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,o;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,o=n+t,o=(o+1)%(e.length+1)-1,o=-1>o?e.length-1:o,-1===o?null:e.eq(o)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),h=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),c=function(){"use strict";function i(i,o){var r,s,a,l,h,c,u,d,p,f,m;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),o.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),h=n(this,"isActive","_onEscKeyed"),c=n(this,"isActive","open","_onUpKeyed"),u=n(this,"isActive","open","_onDownKeyed"),d=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),m=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",h,this).onSync("upKeyed",c,this).onSync("downKeyed",u,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var o,r,s;o=document.activeElement,r=n.is(o),s=n.has(o).length>0,e.isMsie()&&(r||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())
},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,o,r,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(o=s.normalizeQuery(n),r=e.escapeRegExChars(o),a=new RegExp("^(?:"+r+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,o,r;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),o=n?n.obj:null,r=this._minLengthMet()&&this.menu.update(e),r||this.eventBus.before("cursorchange",o)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function o(e,i){e.each(function(){var e,n=t(this);(e=n.data(m.typeahead))&&i(e,n)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(u(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(m.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var i,n;i=t.data(m.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(m.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,o;return n=e.isJQuery(i)||e.isElement(i),o=n?t(i).first():[],o.length?o:null}var f,m,g;f=t.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function(o,u){function d(){var i,d,g,v,y,b,_,w,x,C,k;e.each(u,function(t){t.highlight=!!o.highlight}),i=t(this),d=t(f.html.wrapper),g=p(o.hint),v=p(o.menu),y=o.hint!==!1&&!g,b=o.menu!==!1&&!v,y&&(g=r(i,f)),b&&(v=t(f.html.menu).css(f.css.menu)),g&&g.val(""),i=a(i,f),(y||b)&&(d.css(f.css.wrapper),i.css(y?f.css.input:f.css.inputWithNoHint),i.wrap(d).parent().prepend(y?g:null).append(b?v:null)),k=b?h:l,_=new n({el:i}),w=new s({hint:g,input:i},f),x=new k({node:v,datasets:u},f),C=new c({input:w,menu:x,eventBus:_,minLength:o.minLength},f),i.data(m.www,f),i.data(m.typeahead,C)}var f;return u=e.isArray(u)?u:[].slice.call(arguments,1),o=o||{},f=i(o.classNames),this.each(d)},isEnabled:function(){var t;return o(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return o(this,function(t){t.enable()}),this},disable:function(){return o(this,function(t){t.disable()}),this},isActive:function(){var t;return o(this.first(),function(e){t=e.isActive()}),t},activate:function(){return o(this,function(t){t.activate()}),this},deactivate:function(){return o(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return o(this.first(),function(e){t=e.isOpen()}),t},open:function(){return o(this,function(t){t.open()}),this},close:function(){return o(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return o(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(o(this,function(e){e.setVal(t)}),this):(o(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return o(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),!jQuery.support.cors&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i,getOrPostRegEx=/^get|post$/i,sameSchemeRegEx=new RegExp("^"+location.protocol,"i"),jsonRegEx=/\/json/i,xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(t,e){if(t.crossDomain&&t.async&&getOrPostRegEx.test(t.type)&&httpRegEx.test(e.url)&&sameSchemeRegEx.test(e.url)){var i=null,n=(e.dataType||"").toLowerCase();return{send:function(o,r){i=new XDomainRequest,/^\d+$/.test(e.timeout)&&(i.timeout=e.timeout),i.onprogress=function(){},i.ontimeout=function(){r(500,"timeout")},i.onload=function(){var t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,e={code:200,message:"success"},o={text:i.responseText};try{if("json"===n||"text"!==n&&jsonRegEx.test(i.contentType))try{o.json=$.parseJSON(i.responseText)}catch(s){e.code=500,e.message="parseerror"}else if("xml"===n||"text"!==n&&xmlRegEx.test(i.contentType)){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;try{a.loadXML(i.responseText)}catch(s){a=void 0}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw e.code=500,e.message="parseerror","Invalid XML: "+i.responseText;o.xml=a}}catch(l){throw l}finally{r(e.code,e.message,o,t)}},i.onerror=function(){r(500,"error",{text:i.responseText})};var s=e.data&&$.param(e.data)||"";i.open(t.type,t.url),i.send(s)},abort:function(){i&&i.abort()}}}})}if(function(t,e,i){var n=t.L,o={};o.version="0.7.2","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=n,this},t.L=o,o.Util={extend:function(t){var e,i,n,o,r=Array.prototype.slice.call(arguments,1);for(i=0,n=r.length;n>i;i++){o=r[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,e,i){var n,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function r(){var s=arguments;return n?void(o=!0):(n=!0,setTimeout(function(){n=!1,o&&(r.apply(i,s),o=!1)},e),void t.apply(i,s))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,r=t.requestAnimationFrame||e("RequestAnimationFrame")||i,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,s,a){return e=o.bind(e,n),s&&r===i?void e():r.call(t,e,a)},o.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&(e[r]=this[r]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var s=this;return e.__super__=s.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var r="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,s,a,l,h,c,u,d=this[r]=this[r]||{},p=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,s=t.length;s>n;n++)a={action:e,context:i||this},l=t[n],p?(h=l+"_idx",c=h+"_len",u=d[h]=d[h]||{},u[p]||(u[p]=[],d[c]=(d[c]||0)+1),u[p].push(a)):(d[l]=d[l]||[],d[l].push(a));return this},hasEventListeners:function(t){var e=this[r];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[r])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,s,a,l,h,c,u,d,p,f=this[r],m=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,s=t.length;s>n;n++)if(a=t[n],c=a+"_idx",u=c+"_len",d=f[c],e){if(l=m&&d?d[m]:f[a]){for(h=l.length-1;h>=0;h--)l[h].action!==e||i&&l[h].context!==i||(p=l.splice(h,1),p[0].action=o.Util.falseFn);i&&d&&0===l.length&&(delete d[m],f[u]--)}}else delete f[a],delete f[c],delete f[u];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,s,a,l,h=o.Util.extend({},e,{type:t,target:this}),c=this[r];if(c[t])for(i=c[t].slice(),n=0,s=i.length;s>n;n++)i[n].action.call(i[n].context,h);a=c[t+"_idx"];for(l in a)if(i=a[l].slice())for(n=0,s=i.length;s>n;n++)i[n].action.call(i[n].context,h);return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n="ActiveXObject"in t,r=n&&!e.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),l=-1!==s.indexOf("chrome"),h=-1!==s.indexOf("phantom"),c=-1!==s.indexOf("android"),u=-1!==s.search("android [23]"),d=-1!==s.indexOf("gecko"),p=typeof orientation!=i+"",f=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||f,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,v=e.documentElement,y=n&&"transition"in v.style,b="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!u,_="MozPerspective"in v.style,w="OTransition"in v.style,x=!t.L_DISABLE_3D&&(y||b||_||w)&&!h,C=!t.L_NO_TOUCH&&!h&&function(){var t="ontouchstart";if(m||t in v)return!0;var i=e.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n):!1}();o.Browser={ie:n,ielt9:r,webkit:a,gecko:d&&!a&&!t.opera&&!n,android:c,android23:u,chrome:l,ie3d:y,webkit3d:b,gecko3d:_,opera3d:w,any3d:x,mobile:p,mobileWebkit:p&&a,mobileWebkit3d:p&&b,mobileOpera:p&&t.opera,touch:C,msPointer:f,pointer:m,retina:g}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,r=t.max,s=r.x>=e.x&&n.x<=i.x,a=r.y>=e.y&&n.y<=i.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,n=0,r=0,s=t,a=e.body,l=e.documentElement;do{if(n+=s.offsetTop||0,r+=s.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(s,"borderTopWidth"),10)||0,r+=parseInt(o.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,i=o.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===i)break;if("fixed"===i){n+=a.scrollTop||l.scrollTop||0,r+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===i&&!s.offsetLeft){var h=o.DomUtil.getStyle(s,"width"),c=o.DomUtil.getStyle(s,"max-width"),u=s.getBoundingClientRect();("none"!==h||"none"!==c)&&(r+=u.left+s.clientLeft),n+=u.top+(a.scrollTop||l.scrollTop||0);break}s=s.offsetParent}while(s);s=t;do{if(s===a)break;n-=s.scrollTop||0,r-=s.scrollLeft||0,s=s.parentNode}while(s);return new o.Point(r,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),r=0,s=n.length;s>r;r++)t.classList.add(n[r]);else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var i=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(i){var t=e.documentElement.style;this._userSelect=t[i],t[i]="none"}},enableTextSelection:function(){i&&(e.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,r=(t.lng-this.lng)*i,s=this.lat*i,a=t.lat*i,l=Math.sin(n/2),h=Math.sin(r/2),c=l*l+h*h*Math.cos(s)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-r),new o.LatLng(i.lat+n,i.lng+r))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>=e.lat&&n.lat<=i.lat,a=r.lng>=e.lng&&n.lng<=i.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=t.lng*e,s=n*e;return s=Math.log(Math.tan(Math.PI/4+s/2)),new o.Point(r,s)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),s=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=s.subtract(r).multiplyBy(1-1/n),l=this.containerPointToLatLng(r.add(a));return this.setView(l,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n)),s=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),l=this.project(t.getNorthEast(),r),h=this.unproject(a.add(l).divideBy(2).add(s),r);return r=e&&e.maxZoom?Math.min(e.maxZoom,r):r,this.setView(h,r,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);return i.equals(n)?this:this.panTo(n,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),r=i.divideBy(2).round(),s=n.subtract(r);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n,r=this.getMinZoom()-(e?1:0),s=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),h=t.getSouthEast(),c=!0;i=o.point(i||[0,0]);do r++,n=this.project(h,r).subtract(this.project(l,r)).add(i),c=e?n.x<a.x||n.y<a.y:a.contains(n);while(c&&s>=r);return c&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)
},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var r=this._zoom!==e;n||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!i}),this.fire("move"),(r||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t];isNaN(r.options.minZoom)||(e=Math.min(e,r.options.minZoom)),isNaN(r.options.maxZoom)||(n=Math.max(n,r.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=r.length;n>i;i++)o.DomEvent[e](this._container,r[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),r=this.layerPointToLatLng(n);this.fire(e,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),s=new o.Bounds(n.subtract(r),n.add(r)),a=this._getBoundsOffset(s,i,e);return this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),r=this.project(e.getSouthEast(),i).subtract(t.max),s=this._rebound(n.x,-r.x),a=this._rebound(n.y,-r.y);return new o.Point(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=this.R_MAJOR,s=this.R_MINOR,a=t.lng*e*r,l=n*e,h=s/r,c=Math.sqrt(1-h*h),u=c*Math.sin(l);u=Math.pow((1-u)/(1+u),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/u;return l=-r*Math.log(d),new o.Point(a,l)},unproject:function(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,r=this.R_MINOR,s=t.x*i/n,a=r/n,l=Math.sqrt(1-a*a),h=Math.exp(-t.y/n),c=Math.PI/2-2*Math.atan(h),u=15,d=1e-7,p=u,f=.1;Math.abs(f)>d&&--p>0;)e=l*Math.sin(c),f=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-c,c+=f;return new o.LatLng(c*i,s)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=.5/(Math.PI*e);return new o.Transformation(i,.5,-i,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,r=t.children,s=-e(1/0,-1/0);for(n=0,o=r.length;o>n;n++)r[n]!==this._container&&(i=parseInt(r[n].style.zIndex,10),isNaN(i)||(s=e(s,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&e>i&&(n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)),n},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var r=o.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(t){var i,n,r,s=[],a=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(n=t.min.x;n<=t.max.x;n++)r=new o.Point(n,i),this._tileShouldBeLoaded(r)&&s.push(r);var l=s.length;if(0!==l){s.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var h=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;l>n;n++)this._addTile(s[n],h);this._tileContainer.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y)return!1}if(e.bounds){var n=e.tileSize,o=t.multiplyBy(n),r=o.add([n,n]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;i.width=i.height=e.detectRetina&&o.Browser.retina?2*n:n;for(var r in e)this.options.hasOwnProperty(r)||"crs"===r||(i[r]=e[r]);this.wmsParams=i,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),r=n.add([i,i]),s=this._crs.project(e.unproject(n,t.z)),a=this._crs.project(e.unproject(r,t.z)),l=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),h=o.Util.template(this._url,{s:this._getSubdomain(t)});return h+o.Util.getParamString(this.wmsParams,h,!0)+"&BBOX="+l},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(r,t.zoom,t.center),l=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(a),h=a._add(l._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(h)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,r=o.point(n[e+"Size"]);i=o.point("shadow"===e?n.shadowAnchor||n.iconAnchor:n.iconAnchor),!i&&r&&(i=r.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,i,n,o,r,s=e.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=s.length;i>t;t++)if(n=s[t].src,o=n.match(a))return r=n.split(a)[0],(r?r+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",r=t.icon.createIcon(this._icon),s=!1;r!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(r.title=t.title),t.alt&&(r.alt=t.alt)),o.DomUtil.addClass(r,n),t.keyboard&&(r.tabIndex="0"),this._icon=r,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&o.DomUtil.addClass(a,n),this._shadow=a,t.opacity<1&&this._updateOpacity();var h=this._map._panes;s&&h.markerPane.appendChild(this._icon),a&&l&&h.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;return i.innerHTML=n.html!==!1?n.html:"",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var r=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",n);o.DomEvent.disableClickPropagation(r),this._contentNode=o.DomUtil.create("div",e+"-content",r),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(r,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",n),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&n>r?(e.height=r+"px",o.DomUtil.addClass(t,s)):o.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(n),s=o.point(this.options.autoPanPadding),a=o.point(this.options.autoPanPaddingTopLeft||s),l=o.point(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),c=0,u=0;r.x+i+l.x>h.x&&(c=r.x+i-h.x+l.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+e+l.y>h.y&&(u=r.y+e-h.y+l.y),r.y-u-a.y<0&&(u=r.y-a.y),(c||u)&&t.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offset:i},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this
},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,i=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),r=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(n,r)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),r=e.layerPointToLatLng(n);this.fire(t.type,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,r=i.y-e.y,s=this._pathRoot,a=this._panes.overlayPane;o.Browser.mobileWebkit&&a.removeChild(s),o.DomUtil.setPosition(s,e),s.setAttribute("width",n),s.setAttribute("height",r),s.setAttribute("viewBox",[e.x,e.y,n,r].join(" ")),o.Browser.mobileWebkit&&a.appendChild(s)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?o.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",i.lineCap&&(t.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(t.joinstyle=i.lineJoin)):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,n,r,s;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,n=this._parts[t].length;n>e;e++)r=this._parts[t][e],s=(0===e?"move":"line")+"To",this._ctx[s](r.x,r.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,r=new o(n);r[0]=r[n-1]=1,this._simplifyDPStep(t,r,e,0,n-1);var s,a=[];for(s=0;n>s;s++)r[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,i,n,o){var r,s,a,l=0;for(s=n+1;o-1>=s;s++)a=this._sqClosestPointOnSegment(t[s],t[n],t[o],!0),a>l&&(r=s,l=a);l>i&&(e[r]=1,this._simplifyDPStep(t,e,i,n,r),this._simplifyDPStep(t,e,i,r,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;r>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return r-1>o&&i.push(t[r-1]),i},clipSegment:function(t,e,i,n){var o,r,s,a=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(t,e,o,i),s=this._getBitCode(r,i),o===a?(t=r,a=s):(e=r,l=s)}},_getEdgeIntersection:function(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,a=n.min,l=n.max;return 8&i?new o.Point(t.x+r*(l.y-t.y)/s,l.y):4&i?new o.Point(t.x+r*(a.y-t.y)/s,a.y):2&i?new o.Point(l.x,t.y+s*(l.x-t.x)/r):1&i?new o.Point(a.x,t.y+s*(a.x-t.x)/r):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var r,s=e.x,a=e.y,l=i.x-s,h=i.y-a,c=l*l+h*h;return c>0&&(r=((t.x-s)*l+(t.y-a)*h)/c,r>1?(s=i.x,a=i.y):r>0&&(s+=l*r,a+=h*r)),l=t.x-s,h=t.y-a,n?l*l+h*h:new o.Point(s,a)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,r=this._parts,s=null,a=0,l=r.length;l>a;a++)for(var h=r[a],c=1,u=h.length;u>c;c++){e=h[c-1],i=h[c];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);n>d&&(n=d,s=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,r=e?t:[];for(i=0,n=t.length;n>i;i++){if(o.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;r[i]=o.latLng(t[i])}return r},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=o.Path.VML,n=0,r=t.length,s="";r>n;n++)e=t[n],i&&e._round(),s+=(n?"L":"M")+e.x+" "+e.y;return s},_clipPoints:function(){var t,e,i,n=this._originalPoints,r=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var s=this._parts,a=this._map._pathViewport,l=o.LineUtil;for(t=0,e=0;r-1>t;t++)i=l.clipSegment(n[t],n[t+1],a,t),i&&(s[e]=s[e]||[],s[e].push(i[0]),(i[1]!==n[t+1]||t===r-2)&&(s[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;n>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,r,s,a,l,h,c,u,d=[1,4,2,8],p=o.LineUtil;for(n=0,h=t.length;h>n;n++)t[n]._code=p._getBitCode(t[n],e);for(s=0;4>s;s++){for(c=d[s],i=[],n=0,h=t.length,r=h-1;h>n;r=n++)a=t[n],l=t[r],a._code&c?l._code&c||(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),i.push(u)):(l._code&c&&(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),i.push(u)),i.push(a));t=i}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,i=this._holes.length;i>e;e++)n=this._holes[e]=this._convertLatLngs(this._holes[e]),n[0].equals(n[n.length-1])&&n.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var r=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);r.length&&e.push(r)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var i,n,r,s,a,l,h,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),i=0,s=this._parts.length;s>i;i++)for(h=this._parts[i],n=0,a=h.length,r=a-1;a>n;r=n++)if((e||0!==n)&&(l=o.LineUtil.pointToSegmentDistance(t,h[r],h[n]),c>=l))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,i,n,r,s,a,l,h,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(r=0,l=this._parts.length;l>r;r++)for(e=this._parts[r],s=0,h=e.length,a=h-1;h>s;a=s++)i=e[s],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=o.Util.isArray(t)?t:t.features;if(r){for(e=0,i=r.length;i>e;e++)n=r[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(r[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng,s);return a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i,n){var r,s,a,l,h="Feature"===t.type?t.geometry:t,c=h.coordinates,u=[];switch(i=i||this.coordsToLatLng,h.type){case"Point":return r=i(c),e?e(t,r):new o.Marker(r);case"MultiPoint":for(a=0,l=c.length;l>a;a++)r=i(c[a]),u.push(e?e(t,r):new o.Marker(r));return new o.FeatureGroup(u);case"LineString":return s=this.coordsToLatLngs(c,0,i),new o.Polyline(s,n);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(c,1,i),new o.Polygon(s,n);case"MultiLineString":return s=this.coordsToLatLngs(c,1,i),new o.MultiPolyline(s,n);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,i),new o.MultiPolygon(s,n);case"GeometryCollection":for(a=0,l=h.geometries.length;l>a;a++)u.push(this.geometryToLayer({geometry:h.geometries[a],type:"Feature",properties:t.properties},e,i,n));return new o.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,o,r,s=[];for(o=0,r=t.length;r>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),s.push(n);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var s={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(s),o.Circle.include(s),o.CircleMarker.include(s),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return t("MultiPoint").call(this);var r=i&&"GeometryCollection"===i.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(r?e.geometry:o.GeoJSON.asFeature(e)))}),r?o.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,i,n){var r,s,a,l=o.stamp(i),h="_leaflet_"+e+l;return t[h]?this:(r=function(e){return i.call(n||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,r,l):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,r,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?(s=r,a="mouseenter"===e?"mouseover":"mouseout",r=function(e){return o.DomEvent._checkMouse(t,e)?s(e):void 0},t.addEventListener(a,r,!1)):"click"===e&&o.Browser.android?(s=r,r=function(t){return o.DomEvent._filterClick(t,s)},t.addEventListener(e,r,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[h]=r,this))},removeListener:function(t,e,i){var n=o.stamp(i),r="_leaflet_"+e+n,s=t[r];return s?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,n):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[r]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i>=0;i--)o.DomEvent.on(t,o.Draggable.START[i],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&1e3>n||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!(t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.DomEvent.stopPropagation(t),o.Draggable._disabled||(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=new o.Point(i.clientX,i.clientY),r=n.subtract(this._startPoint);(r.x||r.y)&&(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.DomUtil.addClass(e.body,"leaflet-dragging"),o.DomUtil.addClass(t.target||t.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){o.DomUtil.removeClass(e.body,"leaflet-dragging"),o.DomUtil.removeClass(t.target||t.srcElement,"leaflet-drag-target");for(var i in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[i],this._onMove).off(e,o.Draggable.END[i],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())
},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,r=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),r)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+n-this._times[0])/1e3,l=i.easeLinearity,h=s.multiplyBy(l/a),c=h.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,c),d=h.multiplyBy(u/c),p=u/(i.inertiaDeceleration*l),f=d.multiplyBy(-p/2).round();f.x&&f.y?(f=e._limitOffset(f,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(f,{duration:p,easeLinearity:l,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,n){function r(t){var e;if(o.Browser.pointer?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(a||i);l=t.touches?t.touches[0]:t,h=n>0&&c>=n,a=i}}function s(t){if(o.Browser.pointer){var e=f.indexOf(t.pointerId);if(-1===e)return;f.splice(e,1)}if(h){if(o.Browser.pointer){var n,r={};for(var s in l)n=l[s],r[s]="function"==typeof n?n.bind(l):n;l=r}l.type="dblclick",i(l),a=null}}var a,l,h=!1,c=250,u="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[u+d+n]=r,t[u+p+n]=s;var m=o.Browser.pointer?e.documentElement:t;return t.addEventListener(d,r,!1),m.addEventListener(p,s,!1),o.Browser.pointer&&m.addEventListener(o.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(t,i){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(o.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+i],!1),o.Browser.pointer&&e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,i,n){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,i,n,r){var s="_leaflet_",a=this._pointers,l=function(t){o.DomEvent.preventDefault(t);for(var e=!1,i=0;i<a.length;i++)if(a[i].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[s+"touchstart"+r]=l,t.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var h=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,h,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,h,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],i(t)}}var r="_leaflet_",s=this._pointers;return t[r+"touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,i,n){var o="_leaflet_",r=this._pointers,s=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}t.touches=r.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),r=i.mouseEventToLayerPoint(t.touches[1]),s=i._getCenterLayerPoint();this._startCenter=n.add(r)._divideBy(2),this._startDist=n.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),r=t.getZoom(),s=t.getScaleZoom(this._scale)-r,a=s>0?Math.ceil(s):Math.floor(s),l=t._limitZoom(r+a),h=t.getZoomScale(l)/this._scale;t._animateZoom(n,l,i,h)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),r=n.subtract(e),s=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,s),this._moved=!0,i.style.width=Math.max(0,Math.abs(r.x)-4)+"px",i.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,r=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,r){var s=i+t+" "+i+r;e[t+r]=o.DomUtil.create("div",s,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,r,s){var a=o.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",o.DomEvent.preventDefault).on(a,"click",r,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),r=this.options,s=0;o.x>0&&(s=n*(r.maxWidth/o.x)),this._updateScales(r,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,r=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),r.style.width=this._getScaleWidth(i/e)+"px",r.innerHTML=i+" mi"):(n=this._getRoundNum(o),r.style.width=this._getScaleWidth(n/o)+"px",r.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),o.DomEvent.on(i,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=r):i=this._createRadioElement("leaflet-base-layers",r),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var s=e.createElement("span");s.innerHTML=" "+t.name,n.appendChild(i),n.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;o>t;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,r=this._el,s=t.getComputedStyle(r);if(o.Browser.any3d){if(n=s[o.DomUtil.TRANSFORM].match(this._transformRe),!n)return;e=parseFloat(n[1]),i=parseFloat(n[2])}else e=parseFloat(s.left),i=parseFloat(s.top);return new o.Point(e,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(i)?(this.panBy(i,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),r=this._getCenterLayerPoint()._add(o);return i.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,n,null,!0),!0):!1},_animateZoom:function(t,e,i,n,r,s){this._animatingZoom=!0,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:r,backwards:s})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[i],r=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?r+" "+n:n+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i>.5&&.5>n?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))
},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,r=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=r.length;i>e;e++)n=r[e],n.complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),r=180*t.coords.accuracy/40075017,s=r/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-r,i-s],[e+r,i+s]),l=this._locateOptions;if(l.setView){var h=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(n,h)}var c={latlng:n,bounds:a,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(c[u]=t.coords[u]);this.fire("locationfound",c)}})}(window,document),function(t){var e=function(){var e=t.documentMode;return"onhashchange"in t&&(void 0===e||e>7)}();L.Hash=function(t){this.onHashChange=L.Util.bind(this.onHashChange,this),t&&this.init(t)},L.Hash.prototype={map:null,lastHash:null,parseHash:function(t){0==t.indexOf("#")&&(t=t.substr(1));var e=t.split("/");if(3==e.length){var i=parseInt(e[0],10),n=parseFloat(e[1]),o=parseFloat(e[2]);return isNaN(i)||isNaN(n)||isNaN(o)?!1:{center:new L.LatLng(n,o),zoom:i}}return!1},formatHash:function(t){var e=t.getCenter(),i=t.getZoom(),n=Math.max(0,Math.ceil(Math.log(i)/Math.LN2));return"#"+[i,e.lat.toFixed(n),e.lng.toFixed(n)].join("/")},init:function(t){this.map=t,this.map.on("moveend",this.onMapMove,this),this.lastHash=null,this.onHashChange(),this.isListening||this.startListening()},remove:function(){this.map=null,this.isListening&&this.stopListening()},onMapMove:function(){if(this.movingMap||0===this.map.getZoom())return!1;var t=this.formatHash(this.map);this.lastHash!=t&&(location.replace(t),this.lastHash=t)},movingMap:!1,update:function(){var t=location.hash;if(t!==this.lastHash){var e=this.parseHash(t);e?(this.movingMap=!0,this.map.setView(e.center,e.zoom),this.movingMap=!1):this.onMapMove(this.map)}},changeDefer:100,changeTimeout:null,onHashChange:function(){if(!this.changeTimeout){var t=this;this.changeTimeout=setTimeout(function(){t.update(),t.changeTimeout=null},this.changeDefer)}},isListening:!1,hashChangeInterval:null,startListening:function(){e?L.DomEvent.addListener(t,"hashchange",this.onHashChange):(clearInterval(this.hashChangeInterval),this.hashChangeInterval=setInterval(this.onHashChange,50)),this.isListening=!0},stopListening:function(){e?L.DomEvent.removeListener(t,"hashchange",this.onHashChange):clearInterval(this.hashChangeInterval),this.isListening=!1}}}(window),Proj4js={defaultDatum:"WGS84",transform:function(t,e,i){if(!t.readyToUse)return this.reportError("Proj4js initialization for:"+t.srsCode+" not yet complete"),i;if(!e.readyToUse)return this.reportError("Proj4js initialization for:"+e.srsCode+" not yet complete"),i;if("900913"==t.srsProjNumber&&"WGS84"!=e.datumCode&&!e.datum_params||"900913"==e.srsProjNumber&&"WGS84"!=t.datumCode&&!t.datum_params){var n=Proj4js.WGS84;this.transform(t,n,i),t=n}return"enu"!=t.axis&&this.adjust_axis(t,!1,i),"longlat"==t.projName?(i.x*=Proj4js.common.D2R,i.y*=Proj4js.common.D2R):(t.to_meter&&(i.x*=t.to_meter,i.y*=t.to_meter),t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=this.datum_transform(t.datum,e.datum,i),e.from_greenwich&&(i.x-=e.from_greenwich),"longlat"==e.projName?(i.x*=Proj4js.common.R2D,i.y*=Proj4js.common.R2D):(e.forward(i),e.to_meter&&(i.x/=e.to_meter,i.y/=e.to_meter)),"enu"!=e.axis&&this.adjust_axis(e,!0,i),i},datum_transform:function(t,e,i){return t.compare_datums(e)?i:t.datum_type==Proj4js.common.PJD_NODATUM||e.datum_type==Proj4js.common.PJD_NODATUM?i:(t.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet."),e.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet."),(t.es!=e.es||t.a!=e.a||t.datum_type==Proj4js.common.PJD_3PARAM||t.datum_type==Proj4js.common.PJD_7PARAM||e.datum_type==Proj4js.common.PJD_3PARAM||e.datum_type==Proj4js.common.PJD_7PARAM)&&(t.geodetic_to_geocentric(i),(t.datum_type==Proj4js.common.PJD_3PARAM||t.datum_type==Proj4js.common.PJD_7PARAM)&&t.geocentric_to_wgs84(i),(e.datum_type==Proj4js.common.PJD_3PARAM||e.datum_type==Proj4js.common.PJD_7PARAM)&&e.geocentric_from_wgs84(i),e.geocentric_to_geodetic(i)),e.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet."),i)},adjust_axis:function(t,e,i){for(var n,o,r=i.x,s=i.y,a=i.z||0,l=0;3>l;l++)if(!e||2!=l||void 0!==i.z)switch(0==l?(n=r,o="x"):1==l?(n=s,o="y"):(n=a,o="z"),t.axis[l]){case"e":i[o]=n;break;case"w":i[o]=-n;break;case"n":i[o]=n;break;case"s":i[o]=-n;break;case"u":void 0!==i[o]&&(i.z=n);break;case"d":void 0!==i[o]&&(i.z=-n);break;default:return alert("ERROR: unknow axis ("+t.axis[l]+") - check definition of "+src.projName),null}return i},reportError:function(){},extend:function(t,e){if(t=t||{},e)for(var i in e){var n=e[i];void 0!==n&&(t[i]=n)}return t},Class:function(){for(var t,e=function(){this.initialize.apply(this,arguments)},i={},n=0;n<arguments.length;++n)t="function"==typeof arguments[n]?arguments[n].prototype:arguments[n],Proj4js.extend(i,t);return e.prototype=i,e},bind:function(t,e){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var n=i.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},scriptName:"proj4js-compressed.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath)return this.libPath;for(var t=this.scriptName,e=t.length,i=document.getElementsByTagName("script"),n=0;n<i.length;n++){var o=i[n].getAttribute("src");if(o){var r=o.lastIndexOf(t);if(r>-1&&r+e==o.length){this.libPath=o.slice(0,-e);break}}}return this.libPath||""},loadScript:function(t,e,i,n){var o=document.createElement("script");o.defer=!1,o.type="text/javascript",o.id=t,o.src=t,o.onload=e,o.onerror=i,o.loadCheck=n,/MSIE/.test(navigator.userAgent)&&(o.onreadystatechange=this.checkReadyState),document.getElementsByTagName("head")[0].appendChild(o)},checkReadyState:function(){"loaded"==this.readyState&&(this.loadCheck()?this.onload():this.onerror())}},Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(t,e){if(this.srsCodeInput=t,this.queue=[],e&&this.queue.push(e),t.indexOf("GEOGCS")>=0||t.indexOf("GEOCCS")>=0||t.indexOf("PROJCS")>=0||t.indexOf("LOCAL_CS")>=0)return this.parseWKT(t),this.deriveConstants(),void this.loadProjCode(this.projName);if(0==t.indexOf("urn:")){var i=t.split(":");"ogc"!=i[1]&&"x-ogc"!=i[1]||"def"!=i[2]||"crs"!=i[3]||(t=i[4]+":"+i[i.length-1])}else if(0==t.indexOf("http://")){var n=t.split("#");n[0].match(/epsg.org/)?t="EPSG:"+n[1]:n[0].match(/RIG.xml/)&&(t="IGNF:"+n[1])}this.srsCode=t.toUpperCase(),0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode),this.loadProjDefinition()},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode])return void this.defsLoaded();var t=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(t,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))},loadFromService:function(){var t=Proj4js.defsLookupService+"/"+this.srsAuth+"/"+this.srsProjNumber+"/proj4js/";Proj4js.loadScript(t,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs(),this.loadProjCode(this.projName)},checkDefsLoaded:function(){return Proj4js.defs[this.srsCode]?!0:!1},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode),Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84,this.defsLoaded()},loadProjCode:function(t){if(Proj4js.Proj[t])return void this.initTransforms();var e=Proj4js.getScriptLocation()+"projCode/"+t+".js";Proj4js.loadScript(e,Proj4js.bind(this.loadProjCodeSuccess,this,t),Proj4js.bind(this.loadProjCodeFailure,this,t),Proj4js.bind(this.checkCodeLoaded,this,t))},loadProjCodeSuccess:function(t){Proj4js.Proj[t].dependsOn?this.loadProjCode(Proj4js.Proj[t].dependsOn):this.initTransforms()},loadProjCodeFailure:function(t){Proj4js.reportError("failed to find projection file for: "+t)},checkCodeLoaded:function(t){return Proj4js.Proj[t]?!0:!1},initTransforms:function(){if(Proj4js.extend(this,Proj4js.Proj[this.projName]),this.init(),this.readyToUse=!0,this.queue)for(var t;t=this.queue.shift();)t.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(t){var e=t.match(this.wktRE);if(e){var i,n=e[1],o=e[2],r=o.split(",");i="TOWGS84"==n.toUpperCase()?n:r.shift(),i=i.replace(/^\"/,""),i=i.replace(/\"$/,"");for(var s=new Array,a=0,l="",h=0;h<r.length;++h){for(var c=r[h],u=0;u<c.length;++u)"["==c.charAt(u)&&++a,"]"==c.charAt(u)&&--a;l+=c,0===a?(s.push(l),l=""):l+=","}switch(n){case"LOCAL_CS":this.projName="identity",this.localCS=!0,this.srsCode=i;break;case"GEOGCS":this.projName="longlat",this.geocsCode=i,this.srsCode||(this.srsCode=i);break;case"PROJCS":this.srsCode=i;break;case"GEOCCS":break;case"PROJECTION":this.projName=Proj4js.wktProjections[i];break;case"DATUM":this.datumName=i;break;case"LOCAL_DATUM":this.datumCode="none";break;case"SPHEROID":this.ellps=i,this.a=parseFloat(s.shift()),this.rf=parseFloat(s.shift());break;case"PRIMEM":this.from_greenwich=parseFloat(s.shift());break;case"UNIT":this.units=i,this.unitsPerMeter=parseFloat(s.shift());break;case"PARAMETER":var d=i.toLowerCase(),p=parseFloat(s.shift());switch(d){case"false_easting":this.x0=p;break;case"false_northing":this.y0=p;break;case"scale_factor":this.k0=p;break;case"central_meridian":this.long0=p*Proj4js.common.D2R;break;case"latitude_of_origin":this.lat0=p*Proj4js.common.D2R;break;case"more_here":}break;case"TOWGS84":this.datum_params=s;break;case"AXIS":var d=i.toLowerCase(),p=s.shift();switch(p){case"EAST":p="e";break;case"WEST":p="w";break;case"NORTH":p="n";break;case"SOUTH":p="s";break;case"UP":p="u";break;case"DOWN":p="d";break;case"OTHER":default:p=" "}switch(this.axis||(this.axis="enu"),d){case"X":this.axis=p+this.axis.substr(1,2);break;case"Y":this.axis=this.axis.substr(0,1)+p+this.axis.substr(2,1);break;case"Z":this.axis=this.axis.substr(0,2)+p}case"MORE_HERE":}for(var h=0;h<s.length;++h)this.parseWKT(s[h])}},parseDefs:function(){this.defData=Proj4js.defs[this.srsCode];var t,e;if(this.defData){for(var i=this.defData.split("+"),n=0;n<i.length;n++){var o=i[n].split("=");switch(t=o[0].toLowerCase(),e=o[1],t.replace(/\s/gi,"")){case"":break;case"title":this.title=e;break;case"proj":this.projName=e.replace(/\s/gi,"");break;case"units":this.units=e.replace(/\s/gi,"");break;case"datum":this.datumCode=e.replace(/\s/gi,"");break;case"nadgrids":this.nagrids=e.replace(/\s/gi,"");break;case"ellps":this.ellps=e.replace(/\s/gi,"");break;case"a":this.a=parseFloat(e);break;case"b":this.b=parseFloat(e);break;case"rf":this.rf=parseFloat(e);break;case"lat_0":this.lat0=e*Proj4js.common.D2R;break;case"lat_1":this.lat1=e*Proj4js.common.D2R;break;case"lat_2":this.lat2=e*Proj4js.common.D2R;break;case"lat_ts":this.lat_ts=e*Proj4js.common.D2R;break;case"lon_0":this.long0=e*Proj4js.common.D2R;break;case"alpha":this.alpha=parseFloat(e)*Proj4js.common.D2R;break;case"lonc":this.longc=e*Proj4js.common.D2R;break;case"x_0":this.x0=parseFloat(e);break;case"y_0":this.y0=parseFloat(e);break;case"k_0":this.k0=parseFloat(e);break;case"k":this.k0=parseFloat(e);break;case"r_a":this.R_A=!0;break;case"zone":this.zone=parseInt(e);break;case"south":this.utmSouth=!0;break;case"towgs84":this.datum_params=e.split(",");break;case"to_meter":this.to_meter=parseFloat(e);break;case"from_greenwich":this.from_greenwich=e*Proj4js.common.D2R;break;case"pm":e=e.replace(/\s/gi,""),this.from_greenwich=Proj4js.PrimeMeridian[e]?Proj4js.PrimeMeridian[e]:parseFloat(e),this.from_greenwich*=Proj4js.common.D2R;break;case"axis":e=e.replace(/\s/gi,"");var r="ewnsud";3==e.length&&-1!=r.indexOf(e.substr(0,1))&&-1!=r.indexOf(e.substr(1,1))&&-1!=r.indexOf(e.substr(2,1))&&(this.axis=e);break;case"no_defs":}}this.deriveConstants()}},deriveConstants:function(){if("@null"==this.nagrids&&(this.datumCode="none"),this.datumCode&&"none"!=this.datumCode){var t=Proj4js.Datum[this.datumCode];t&&(this.datum_params=t.towgs84?t.towgs84.split(","):null,this.ellps=t.ellipse,this.datumName=t.datumName?t.datumName:this.datumCode)}if(!this.a){var e=Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84;Proj4js.extend(this,e)}this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a),Math.abs(this.a-this.b)<Proj4js.common.EPSLN&&(this.sphere=!0,this.b=this.a),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=(this.a2-this.b2)/this.a2,this.e=Math.sqrt(this.es),this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0),this.ep2=(this.a2-this.b2)/this.b2,this.k0||(this.k0=1),this.axis||(this.axis="enu"),this.datum=new Proj4js.datum(this)}}),Proj4js.Proj.longlat={init:function(){},forward:function(t){return t},inverse:function(t){return t}},Proj4js.Proj.identity=Proj4js.Proj.longlat,Proj4js.defs={WGS84:"+title=long/lat:WGS84 +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=long/lat:WGS84 +proj=longlat +a=6378137.0 +b=6356752.31424518 +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=long/lat:NAD83 +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3785":"+title= Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"},Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3785"],Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3785"],Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3785"],Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)},tsfnz:function(t,e,i){var n=t*i,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(this.HALF_PI-e))/n},phi2z:function(t,e){for(var i,n,o=.5*t,r=this.HALF_PI-2*Math.atan(e),s=0;15>=s;s++)if(i=t*Math.sin(r),n=this.HALF_PI-2*Math.atan(e*Math.pow((1-i)/(1+i),o))-r,r+=n,Math.abs(n)<=1e-10)return r;return alert("phi2z has NoConvergence"),-9999},qsfnz:function(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e},asinz:function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},e0fn:function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},e1fn:function(t){return.375*t*(1+.25*t*(1+.46875*t))},e2fn:function(t){return.05859375*t*t*(1+.75*t)},e3fn:function(t){return t*t*t*(35/3072)},mlfn:function(t,e,i,n,o){return t*o-e*Math.sin(2*o)+i*Math.sin(4*o)-n*Math.sin(6*o)},srat:function(t,e){return Math.pow((1-t)/(1+t),e)},sign:function(t){return 0>t?-1:1},adjust_lon:function(t){return t=Math.abs(t)<this.PI?t:t-this.sign(t)*this.TWO_PI},adjust_lat:function(t){return t=Math.abs(t)<this.HALF_PI?t:t-this.sign(t)*this.PI},latiso:function(t,e,i){if(Math.abs(e)>this.HALF_PI)return+Number.NaN;if(e==this.HALF_PI)return Number.POSITIVE_INFINITY;if(e==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;var n=t*i;return Math.log(Math.tan((this.HALF_PI+e)/2))+t*Math.log((1-n)/(1+n))/2},fL:function(t,e){return 2*Math.atan(t*Math.exp(e))-this.HALF_PI},invlatiso:function(t,e){var i=this.fL(1,e),n=0,o=0;do n=i,o=t*Math.sin(n),i=this.fL(Math.exp(t*Math.log((1+o)/(1-o))/2),e);while(Math.abs(i-n)>1e-12);return i},sinh:function(t){var e=Math.exp(t);return e=(e-1/e)/2},cosh:function(t){var e=Math.exp(t);return e=(e+1/e)/2},tanh:function(t){var e=Math.exp(t);return e=(e-1/e)/(e+1/e)},asinh:function(t){var e=t>=0?1:-1;return e*Math.log(Math.abs(t)+Math.sqrt(t*t+1))},acosh:function(t){return 2*Math.log(Math.sqrt((t+1)/2)+Math.sqrt((t-1)/2))},atanh:function(t){return Math.log((t-1)/(t+1))/2},gN:function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}},Proj4js.datum=Proj4js.Class({initialize:function(t){if(this.datum_type=Proj4js.common.PJD_WGS84,t.datumCode&&"none"==t.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM),t&&t.datum_params){for(var e=0;e<t.datum_params.length;e++)t.datum_params[e]=parseFloat(t.datum_params[e]);(0!=t.datum_params[0]||0!=t.datum_params[1]||0!=t.datum_params[2])&&(this.datum_type=Proj4js.common.PJD_3PARAM),t.datum_params.length>3&&(0!=t.datum_params[3]||0!=t.datum_params[4]||0!=t.datum_params[5]||0!=t.datum_params[6])&&(this.datum_type=Proj4js.common.PJD_7PARAM,t.datum_params[3]*=Proj4js.common.SEC_TO_RAD,t.datum_params[4]*=Proj4js.common.SEC_TO_RAD,t.datum_params[5]*=Proj4js.common.SEC_TO_RAD,t.datum_params[6]=t.datum_params[6]/1e6+1)}t&&(this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_params=t.datum_params)},compare_datums:function(t){return this.datum_type!=t.datum_type?!1:this.a!=t.a||Math.abs(this.es-t.es)>5e-11?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==t.datum_params[0]&&this.datum_params[1]==t.datum_params[1]&&this.datum_params[2]==t.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==t.datum_params[0]&&this.datum_params[1]==t.datum_params[1]&&this.datum_params[2]==t.datum_params[2]&&this.datum_params[3]==t.datum_params[3]&&this.datum_params[4]==t.datum_params[4]&&this.datum_params[5]==t.datum_params[5]&&this.datum_params[6]==t.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT?0==strcmp(pj_param(this.params,"snadgrids").s,pj_param(t.params,"snadgrids").s):!0},geodetic_to_geocentric:function(t){var e,i,n,o,r,s,a,l=t.x,h=t.y,c=t.z?t.z:0,u=0;if(h<-Proj4js.common.HALF_PI&&h>-1.001*Proj4js.common.HALF_PI)h=-Proj4js.common.HALF_PI;else if(h>Proj4js.common.HALF_PI&&h<1.001*Proj4js.common.HALF_PI)h=Proj4js.common.HALF_PI;else if(h<-Proj4js.common.HALF_PI||h>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+h),null;return l>Proj4js.common.PI&&(l-=2*Proj4js.common.PI),r=Math.sin(h),a=Math.cos(h),s=r*r,o=this.a/Math.sqrt(1-this.es*s),e=(o+c)*a*Math.cos(l),i=(o+c)*a*Math.sin(l),n=(o*(1-this.es)+c)*r,t.x=e,t.y=i,t.z=n,u},geocentric_to_geodetic:function(t){var e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,y=1e-12,b=y*y,_=30,w=t.x,x=t.y,C=t.z?t.z:0;if(p=!1,e=Math.sqrt(w*w+x*x),i=Math.sqrt(w*w+x*x+C*C),e/this.a<y){if(p=!0,m=0,i/this.a<y)return g=Proj4js.common.HALF_PI,void(v=-this.b)}else m=Math.atan2(x,w);n=C/i,o=e/i,r=1/Math.sqrt(1-this.es*(2-this.es)*o*o),l=o*(1-this.es)*r,h=n*r,f=0;do f++,a=this.a/Math.sqrt(1-this.es*h*h),v=e*l+C*h-a*(1-this.es*h*h),s=this.es*a/(a+v),r=1/Math.sqrt(1-s*(2-s)*o*o),c=o*(1-s)*r,u=n*r,d=u*l-c*h,l=c,h=u;while(d*d>b&&_>f);return g=Math.atan(u/Math.abs(c)),t.x=m,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,y=t.x,b=t.y,_=t.z?t.z:0;if(y=parseFloat(y),b=parseFloat(b),_=parseFloat(_),v=!1,0!=y)e=Math.atan2(b,y);else if(b>0)e=Proj4js.common.HALF_PI;else if(0>b)e=-Proj4js.common.HALF_PI;else if(v=!0,e=0,_>0)i=Proj4js.common.HALF_PI;else{if(!(0>_))return i=Proj4js.common.HALF_PI,void(n=-this.b);i=-Proj4js.common.HALF_PI}return r=y*y+b*b,o=Math.sqrt(r),s=_*Proj4js.common.AD_C,l=Math.sqrt(s*s+r),c=s/l,d=o/l,u=c*c*c,a=_+this.b*this.ep2*u,g=o-this.a*this.es*d*d*d,h=Math.sqrt(a*a+g*g),p=a/h,f=g/h,m=this.a/Math.sqrt(1-this.es*p*p),n=f>=Proj4js.common.COS_67P5?o/f-m:f<=-Proj4js.common.COS_67P5?o/-f-m:_/p+m*(this.es-1),0==v&&(i=Math.atan(p/f)),t.x=e,t.y=i,t.z=n,t},geocentric_to_wgs84:function(t){if(this.datum_type==Proj4js.common.PJD_3PARAM)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],o=this.datum_params[3],r=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],l=a*(t.x-s*t.y+r*t.z)+e,h=a*(s*t.x+t.y-o*t.z)+i,c=a*(-r*t.x+o*t.y+t.z)+n;t.x=l,t.y=h,t.z=c}},geocentric_from_wgs84:function(t){if(this.datum_type==Proj4js.common.PJD_3PARAM)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],o=this.datum_params[3],r=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],l=(t.x-e)/a,h=(t.y-i)/a,c=(t.z-n)/a;t.x=l+s*h-r*c,t.y=-s*l+h+o*c,t.z=r*l-o*h+c}}}),Proj4js.Point=Proj4js.Class({initialize:function(t,e,i){if("object"==typeof t)this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("string"==typeof t&&"undefined"==typeof e){var n=t.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=t,this.y=e,this.z=i||0},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}}),Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},Proj4js.WGS84=new Proj4js.Proj("WGS84"),Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36,Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"},Proj4js.Proj.aea={init:function(){return Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN?void Proj4js.reportError("aeaInitEqualLatitudes"):(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,void(this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0))},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Proj4js.common.qsfnz(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*Proj4js.common.adjust_lon(e-this.long0),s=o*Math.sin(r)+this.x0,a=this.rh-o*Math.cos(r)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,i,n,o,r,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!=e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,i=(this.c-n*n)/this.ns0,this.e3>=1e-10?(n=1-.5*(1-this.es)*Math.log((1-this.e3)/(1+this.e3))/this.e3,s=Math.abs(Math.abs(n)-Math.abs(i))>1e-10?this.phi1z(this.e3,i):i>=0?.5*PI:-.5*PI):s=this.phi1z(e3,i),r=Proj4js.common.adjust_lon(o/this.ns0+this.long0),t.x=r,t.y=s,t},phi1z:function(t,e){var i,n,o,r=Proj4js.common.asinz(.5*e);if(t<Proj4js.common.EPSLN)return r;for(var s=t*t,a=1;25>=a;a++)if(sinphi=Math.sin(r),cosphi=Math.cos(r),i=t*sinphi,n=1-i*i,o=.5*n*n/cosphi*(e/(1-s)-sinphi/n+.5/t*Math.log((1-i)/(1+i))),r+=o,Math.abs(o)<=1e-7)return r;return Proj4js.reportError("aea:phi1z:Convergence error"),null}},Proj4js.Proj.sterea={dependsOn:"gauss",init:function(){return Proj4js.Proj.gauss.init.apply(this),this.rc?(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,void(this.title||(this.title="Oblique Stereographic Alternative"))):void Proj4js.reportError("sterea:init:E_ERROR_0")},forward:function(t){return t.x=Proj4js.common.adjust_lon(t.x-this.long0),Proj4js.Proj.gauss.forward.apply(this,[t]),sinc=Math.sin(t.y),cosc=Math.cos(t.y),cosl=Math.cos(t.x),k=this.k0*this.R2/(1+this.sinc0*sinc+this.cosc0*cosc*cosl),t.x=k*cosc*Math.sin(t.x),t.y=k*(this.cosc0*sinc-this.sinc0*cosc*cosl),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(rho=Math.sqrt(t.x*t.x+t.y*t.y))?(c=2*Math.atan2(rho,this.R2),sinc=Math.sin(c),cosc=Math.cos(c),i=Math.asin(cosc*this.sinc0+t.y*sinc*this.cosc0/rho),e=Math.atan2(t.x*sinc,rho*this.cosc0*cosc-t.y*this.sinc0*sinc)):(i=this.phic0,e=0),t.x=e,t.y=i,Proj4js.Proj.gauss.inverse.apply(this,[t]),t.x=Proj4js.common.adjust_lon(t.x+this.long0),t}},Proj4js.Proj.poly={init:function(){(this.lat0=0)&&(this.lat0=90),this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,o,r,s,a,l=t.x,h=t.y;return n=Proj4js.common.adjust_lon(l-this.long0),Math.abs(h)<=1e-7?(s=this.x0+this.a*n,a=this.y0-this.a*this.ml0):(e=Math.sin(h),i=Math.cos(h),o=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,h),r=Proj4js.common.msfnz(this.e,e,i),n=e,s=this.x0+this.a*r*Math.sin(n)/e,a=this.y0+this.a*(o-this.ml0+r*(1-Math.cos(n))/e)),t.x=s,t.y=a,t},inverse:function(t){var e,i,n,o,r,s;if(t.x-=this.x0,t.y-=this.y0,e=this.ml0+t.y/this.a,o=0,Math.abs(e)<=1e-7)r=t.x/this.a+this.long0,s=0;else{if(i=e*e+t.x/this.a*(t.x/this.a),o=phi4z(this.es,this.e0,this.e1,this.e2,this.e3,this.al,i,n,s),1!=o)return o;r=Proj4js.common.adjust_lon(Proj4js.common.asinz(t.x*n/this.a)/Math.sin(s)+this.long0)}return t.x=r,t.y=s,t}},Proj4js.Proj.equi={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0)},forward:function(t){var e=t.x,i=t.y,n=Proj4js.common.adjust_lon(e-this.long0),o=this.x0+this.a*n*Math.cos(this.lat0),r=this.y0+this.a*i;return this.t1=o,this.t2=Math.cos(this.lat0),t.x=o,t.y=r,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=t.y/this.a;Math.abs(e)>Proj4js.common.HALF_PI&&Proj4js.reportError("equi:Inv:DataError");var i=Proj4js.common.adjust_lon(this.long0+t.x/(this.a*Math.cos(this.lat0)));t.x=i,t.y=e}},Proj4js.Proj.merc={init:function(){this.lat_ts&&(this.k0=this.sphere?Math.cos(this.lat_ts):Proj4js.common.msfnz(this.es,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e=t.x,i=t.y;if(i*Proj4js.common.R2D>90&&i*Proj4js.common.R2D<-90&&e*Proj4js.common.R2D>180&&e*Proj4js.common.R2D<-180)return Proj4js.reportError("merc:forward: llInputOutOfRange: "+e+" : "+i),null;var n,o;if(Math.abs(Math.abs(i)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)return Proj4js.reportError("merc:forward: ll2mAtPoles"),null;if(this.sphere)n=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(e-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(Proj4js.common.FORTPI+.5*i));else{var r=Math.sin(i),s=Proj4js.common.tsfnz(this.e,i,r);n=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(e-this.long0),o=this.y0-this.a*this.k0*Math.log(s)
}return t.x=n,t.y=o,t},inverse:function(t){var e,i,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)i=Proj4js.common.HALF_PI-2*Math.atan(Math.exp(-o/this.a*this.k0));else{var r=Math.exp(-o/(this.a*this.k0));if(i=Proj4js.common.phi2z(this.e,r),-9999==i)return Proj4js.reportError("merc:inverse: lat = -9999"),null}return e=Proj4js.common.adjust_lon(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t}},Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){return this.zone?(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,void(this.inverse=Proj4js.Proj.tmerc.inverse)):void Proj4js.reportError("utm:init: zone must be specified for UTM")}},Proj4js.Proj.eqdc={init:function(){this.mode||(this.mode=0),this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),0!=this.mode?(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN&&Proj4js.reportError("eqdc:Init:EqualLatitudes"),this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=Math.abs(this.lat1-this.lat2)>=Proj4js.common.EPSLN?(this.ms1-this.ms2)/(this.ml2-this.ml1):this.sinphi):this.ns=this.sinphi,this.g=this.ml1+this.ms1/this.ns,this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0)},forward:function(t){var e=t.x,i=t.y,n=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,i),o=this.a*(this.g-n),r=this.ns*Proj4js.common.adjust_lon(e-this.long0),s=this.x0+o*Math.sin(r),a=this.y0+this.rh-o*Math.cos(r);return t.x=s,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i;if(this.ns>=0)var i=Math.sqrt(t.x*t.x+t.y*t.y),e=1;else i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1;var n=0;0!=i&&(n=Math.atan2(e*t.x,e*t.y));var o=this.g-i/this.a,r=this.phi3z(o,this.e0,this.e1,this.e2,this.e3),s=Proj4js.common.adjust_lon(this.long0+n/this.ns);return t.x=s,t.y=r,t},phi3z:function(t,e,i,n,o){var r,s;r=t;for(var a=0;15>a;a++)if(s=(t+i*Math.sin(2*r)-n*Math.sin(4*r)+o*Math.sin(6*r))/e-r,r+=s,Math.abs(s)<=1e-10)return r;return Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null}},Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,o=t.x,r=t.y,s=Proj4js.common.adjust_lon(o-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.sphere){var h=l*Math.sin(s);if(Math.abs(Math.abs(h)-1)<1e-10)return Proj4js.reportError("tmerc:forward: Point projects into infinity"),93;i=.5*this.a*this.k0*Math.log((1+h)/(1-h)),e=Math.acos(l*Math.cos(s)/Math.sqrt(1-h*h)),0>r&&(e=-e),n=this.a*this.k0*(e-this.lat0)}else{var c=l*s,u=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.tan(r),f=Math.pow(p,2);e=1-this.es*Math.pow(a,2);var m=this.a/Math.sqrt(e),g=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,r);i=this.k0*m*c*(1+u/6*(1-f+d+u/20*(5-18*f+Math.pow(f,2)+72*d-58*this.ep2)))+this.x0,n=this.k0*(g-this.ml0+m*p*u*(.5+u/24*(5-f+9*d+4*Math.pow(d,2)+u/30*(61-58*f+Math.pow(f,2)+600*d-330*this.ep2))))+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,o,r,s,a=6;if(this.sphere){var l=Math.exp(t.x/(this.a*this.k0)),h=.5*(l-1/l),c=this.lat0+t.y/(this.a*this.k0),u=Math.cos(c);e=Math.sqrt((1-u*u)/(1+h*h)),r=Proj4js.common.asinz(e),0>c&&(r=-r),s=0==h&&0==u?this.long0:Proj4js.common.adjust_lon(Math.atan2(h,u)+this.long0)}else{var d=t.x-this.x0,p=t.y-this.y0;for(e=(this.ml0+p/this.k0)/this.a,i=e,o=0;!0&&(n=(e+this.e1*Math.sin(2*i)-this.e2*Math.sin(4*i)+this.e3*Math.sin(6*i))/this.e0-i,i+=n,!(Math.abs(n)<=Proj4js.common.EPSLN));o++)if(o>=a)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95;if(Math.abs(i)<Proj4js.common.HALF_PI){var f=Math.sin(i),m=Math.cos(i),g=Math.tan(i),v=this.ep2*Math.pow(m,2),y=Math.pow(v,2),b=Math.pow(g,2),_=Math.pow(b,2);e=1-this.es*Math.pow(f,2);var w=this.a/Math.sqrt(e),x=w*(1-this.es)/e,C=d/(w*this.k0),k=Math.pow(C,2);r=i-w*g*k/x*(.5-k/24*(5+3*b+10*v-4*y-9*this.ep2-k/30*(61+90*b+298*v+45*_-252*this.ep2-3*y))),s=Proj4js.common.adjust_lon(this.long0+C*(1-k/6*(1+2*b+v-k/20*(5-2*v+28*b-3*y+8*this.ep2+24*_)))/m)}else r=Proj4js.common.HALF_PI*Proj4js.common.sign(p),s=this.long0}return t.x=s,t.y=r,t}},Proj4js.defs.GOOGLE="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs",Proj4js.defs["EPSG:900913"]=Proj4js.defs.GOOGLE,Proj4js.Proj.gstmerc={init:function(){var t=this.b/this.a;this.e=Math.sqrt(1-t*t),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),i=Math.asin(e/this.rs),n=Math.sin(i);this.cp=Proj4js.common.latiso(0,i,n)-this.rs*Proj4js.common.latiso(this.e,this.lat0,e),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e),this.xs=this.x0,this.ys=this.y0-this.n2*i,this.title||(this.title="Gauss Schreiber transverse mercator")},forward:function(t){var e=t.x,i=t.y,n=this.rs*(e-this.lc),o=this.cp+this.rs*Proj4js.common.latiso(this.e,i,Math.sin(i)),r=Math.asin(Math.sin(n)/Proj4js.common.cosh(o)),s=Proj4js.common.latiso(0,r,Math.sin(r));return t.x=this.xs+this.n2*s,t.y=this.ys+this.n2*Math.atan(Proj4js.common.sinh(o)/Math.cos(n)),t},inverse:function(t){var e=t.x,i=t.y,n=Math.atan(Proj4js.common.sinh((e-this.xs)/this.n2)/Math.cos((i-this.ys)/this.n2)),o=Math.asin(Math.sin((i-this.ys)/this.n2)/Proj4js.common.cosh((e-this.xs)/this.n2)),r=Proj4js.common.latiso(0,o,Math.sin(o));return t.x=this.lc+n/this.rs,t.y=Proj4js.common.invlatiso(this.e,(r-this.cp)/this.rs),t}},Proj4js.Proj.ortho={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,o,r,s,a=t.x,l=t.y;if(n=Proj4js.common.adjust_lon(a-this.long0),e=Math.sin(l),i=Math.cos(l),o=Math.cos(n),s=this.sin_p14*e+this.cos_p14*i*o,r=1,s>0||Math.abs(s)<=Proj4js.common.EPSLN)var h=this.a*r*i*Math.sin(n),c=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*i*o);else Proj4js.reportError("orthoFwdPointError");return t.x=h,t.y=c,t},inverse:function(t){var e,i,n,o,r,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),e>this.a+1e-7&&Proj4js.reportError("orthoInvDataError"),i=Proj4js.common.asinz(e/this.a),n=Math.sin(i),o=Math.cos(i),s=this.long0,Math.abs(e)<=Proj4js.common.EPSLN&&(a=this.lat0),a=Proj4js.common.asinz(o*this.sin_p14+t.y*n*this.cos_p14/e),r=Math.abs(this.lat0)-Proj4js.common.HALF_PI,Math.abs(r)<=Proj4js.common.EPSLN&&(s=Proj4js.common.adjust_lon(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y))),r=o-this.sin_p14*Math.sin(a),t.x=s,t.y=a,t}},Proj4js.Proj.somerc={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=this.rf,o=1/n,r=2*o-Math.pow(o,2),s=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha),this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+t/2))+this.alpha*s/2*Math.log((1+s*e)/(1-s*e))},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),a=this.lambda0+s/this.alpha,l=0,h=r,c=-1e3,u=0;Math.abs(h-c)>1e-7;){if(++u>20)return void Proj4js.reportError("omercFwdInfinity");l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=h,t}},Proj4js.Proj.stere={ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(Proj4js.common.HALF_PI+t))*Math.pow((1-e)/(1+e),.5*i)},TOL:1e-8,NITER:8,CONV:1e-10,S_POLE:0,N_POLE:1,OBLIQ:2,EQUIT:3,init:function(){this.phits=this.lat_ts?this.lat_ts:Proj4js.common.HALF_PI;var t=Math.abs(this.lat0);if(this.mode=Math.abs(t)-Proj4js.common.HALF_PI<Proj4js.common.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:t>Proj4js.common.EPSLN?this.OBLIQ:this.EQUIT,this.phits=Math.abs(this.phits),this.es){var e;switch(this.mode){case this.N_POLE:case this.S_POLE:Math.abs(this.phits-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.akm1=2*this.k0/Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)):(t=Math.sin(this.phits),this.akm1=Math.cos(this.phits)/Proj4js.common.tsfnz(this.e,this.phits,t),t*=this.e,this.akm1/=Math.sqrt(1-t*t));break;case this.EQUIT:this.akm1=2*this.k0;break;case this.OBLIQ:t=Math.sin(this.lat0),e=2*Math.atan(this.ssfn_(this.lat0,t,this.e))-Proj4js.common.HALF_PI,t*=this.e,this.akm1=2*this.k0*Math.cos(this.lat0)/Math.sqrt(1-t*t),this.sinX1=Math.sin(e),this.cosX1=Math.cos(e)}}else switch(this.mode){case this.OBLIQ:this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0);case this.EQUIT:this.akm1=2*this.k0;break;case this.S_POLE:case this.N_POLE:this.akm1=Math.abs(this.phits-Proj4js.common.HALF_PI)>=Proj4js.common.EPSLN?Math.cos(this.phits)/Math.tan(Proj4js.common.FORTPI-.5*this.phits):2*this.k0}},forward:function(t){var e=t.x;e=Proj4js.common.adjust_lon(e-this.long0);var i,n,o=t.y;if(this.sphere){var r,s,a,l;switch(r=Math.sin(o),s=Math.cos(o),a=Math.cos(e),l=Math.sin(e),this.mode){case this.EQUIT:n=1+s*a,n<=Proj4js.common.EPSLN&&F_ERROR,n=this.akm1/n,i=n*s*l,n*=r;break;case this.OBLIQ:n=1+this.sinph0*r+this.cosph0*s*a,n<=Proj4js.common.EPSLN&&F_ERROR,n=this.akm1/n,i=n*s*l,n*=this.cosph0*r-this.sinph0*s*a;break;case this.N_POLE:a=-a,o=-o;case this.S_POLE:Math.abs(o-Proj4js.common.HALF_PI)<this.TOL&&F_ERROR,n=this.akm1*Math.tan(Proj4js.common.FORTPI+.5*o),i=l*n,n*=a}}else{switch(a=Math.cos(e),l=Math.sin(e),r=Math.sin(o),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(X=2*Math.atan(this.ssfn_(o,r,this.e)),sinX=Math.sin(X-Proj4js.common.HALF_PI),cosX=Math.cos(X)),this.mode){case this.OBLIQ:A=this.akm1/(this.cosX1*(1+this.sinX1*sinX+this.cosX1*cosX*a)),n=A*(this.cosX1*sinX-this.sinX1*cosX*a),i=A*cosX;break;case this.EQUIT:A=2*this.akm1/(1+cosX*a),n=A*sinX,i=A*cosX;break;case this.S_POLE:o=-o,a=-a,r=-r;case this.N_POLE:i=this.akm1*Proj4js.common.tsfnz(this.e,o,r),n=-i*a}i*=l}return t.x=i*this.a+this.x0,t.y=n*this.a+this.y0,t},inverse:function(t){var e,i,n,o,r,s,a=(t.x-this.x0)/this.a,l=(t.y-this.y0)/this.a,h=0,c=0,u=0,d=0;if(this.sphere){var p,f,m,g;switch(f=Math.sqrt(a*a+l*l),p=2*Math.atan(f/this.akm1),m=Math.sin(p),g=Math.cos(p),e=0,this.mode){case this.EQUIT:i=Math.abs(f)<=Proj4js.common.EPSLN?0:Math.asin(l*m/f),(0!=g||0!=a)&&(e=Math.atan2(a*m,g*f));break;case this.OBLIQ:i=Math.abs(f)<=Proj4js.common.EPSLN?this.phi0:Math.asin(g*sinph0+l*m*cosph0/f),p=g-sinph0*Math.sin(i),(0!=p||0!=a)&&(e=Math.atan2(a*m*cosph0,p*f));break;case this.N_POLE:l=-l;case this.S_POLE:i=Math.abs(f)<=Proj4js.common.EPSLN?this.phi0:Math.asin(this.mode==this.S_POLE?-g:g),e=0==a&&0==l?0:Math.atan2(a,l)}t.x=Proj4js.common.adjust_lon(e+this.long0),t.y=i}else{switch(r=Math.sqrt(a*a+l*l),this.mode){case this.OBLIQ:case this.EQUIT:h=2*Math.atan2(r*this.cosX1,this.akm1),n=Math.cos(h),o=Math.sin(h),c=Math.asin(0==r?n*this.sinX1:n*this.sinX1+l*o*this.cosX1/r),h=Math.tan(.5*(Proj4js.common.HALF_PI+c)),a*=o,l=r*this.cosX1*n-l*this.sinX1*o,d=Proj4js.common.HALF_PI,u=.5*this.e;break;case this.N_POLE:l=-l;case this.S_POLE:h=-r/this.akm1,c=Proj4js.common.HALF_PI-2*Math.atan(h),d=-Proj4js.common.HALF_PI,u=-.5*this.e}for(s=this.NITER;s--;c=i)if(o=this.e*Math.sin(c),i=2*Math.atan(h*Math.pow((1+o)/(1-o),u))-d,Math.abs(c-i)<this.CONV)return this.mode==this.S_POLE&&(i=-i),e=0==a&&0==l?0:Math.atan2(a,l),t.x=Proj4js.common.adjust_lon(e+this.long0),t.y=i,t}}},Proj4js.Proj.nzmg={iterations:1,init:function(){this.A=new Array,this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=new Array,this.B_im=new Array,this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=new Array,this.C_im=new Array,this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=new Array,this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e=t.x,i=t.y,o=i-this.lat0,r=e-this.long0,s=o/Proj4js.common.SEC_TO_RAD*1e-5,a=r,l=1,h=0;for(n=1;n<=10;n++)l*=s,h+=this.A[n]*l;var c,u,d=h,p=a,f=1,m=0,g=0,v=0;for(n=1;n<=6;n++)c=f*d-m*p,u=m*d+f*p,f=c,m=u,g=g+this.B_re[n]*f-this.B_im[n]*m,v=v+this.B_im[n]*f+this.B_re[n]*m;return x=v*this.a+this.x0,y=g*this.a+this.y0,t.x=x,t.y=y,t},inverse:function(t){var e,o,r=t.x,s=t.y,a=r-this.x0,l=s-this.y0,h=l/this.a,c=a/this.a,u=1,d=0,p=0,f=0;for(n=1;n<=6;n++)e=u*h-d*c,o=d*h+u*c,u=e,d=o,p=p+this.C_re[n]*u-this.C_im[n]*d,f=f+this.C_im[n]*u+this.C_re[n]*d;for(i=0;i<this.iterations;i++){var m,g,v=p,y=f,b=h,_=c;for(n=2;n<=6;n++)m=v*p-y*f,g=y*p+v*f,v=m,y=g,b+=(n-1)*(this.B_re[n]*v-this.B_im[n]*y),_+=(n-1)*(this.B_im[n]*v+this.B_re[n]*y);v=1,y=0;var w=this.B_re[1],x=this.B_im[1];for(n=2;n<=6;n++)m=v*p-y*f,g=y*p+v*f,v=m,y=g,w+=n*(this.B_re[n]*v-this.B_im[n]*y),x+=n*(this.B_im[n]*v+this.B_re[n]*y);var C=w*w+x*x;p=(b*w+_*x)/C,f=(_*w-b*x)/C}var k=p,S=f,T=1,P=0;for(n=1;n<=9;n++)T*=k,P+=this.D[n]*T;var E=this.lat0+P*Proj4js.common.SEC_TO_RAD*1e5,D=this.long0+S;return t.x=D,t.y=E,t}},Proj4js.Proj.mill={init:function(){},forward:function(t){var e=t.x,i=t.y,n=Proj4js.common.adjust_lon(e-this.long0),o=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Proj4js.common.PI/4+i/2.5))*1.25;return t.x=o,t.y=r,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Proj4js.common.adjust_lon(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Proj4js.common.PI/4);return t.x=e,t.y=i,t}},Proj4js.Proj.gnom={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,o,r,s,a=t.x,l=t.y;return n=Proj4js.common.adjust_lon(a-this.long0),e=Math.sin(l),i=Math.cos(l),o=Math.cos(n),s=this.sin_p14*e+this.cos_p14*i*o,r=1,s>0||Math.abs(s)<=Proj4js.common.EPSLN?(x=this.x0+this.a*r*i*Math.sin(n)/s,y=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*i*o)/s):(Proj4js.reportError("orthoFwdPointError"),x=this.x0+this.infinity_dist*i*Math.sin(n),y=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*o)),t.x=x,t.y=y,t},inverse:function(t){var e,i,n,o,r,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),i=Math.sin(o),n=Math.cos(o),s=Proj4js.common.asinz(n*this.sin_p14+t.y*i*this.cos_p14/e),r=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),r=Proj4js.common.adjust_lon(this.long0+r)):(s=this.phic0,r=0),t.x=r,t.y=s,t}},Proj4js.Proj.sinu={init:function(){this.R=6370997},forward:function(t){var e,i,n,o=t.x,r=t.y;return n=Proj4js.common.adjust_lon(o-this.long0),e=this.R*n*Math.cos(r)+this.x0,i=this.R*r+this.y0,t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,t.y-=this.y0,e=t.y/this.R,Math.abs(e)>Proj4js.common.HALF_PI&&Proj4js.reportError("sinu:Inv:DataError"),i=Math.abs(e)-Proj4js.common.HALF_PI,Math.abs(i)>Proj4js.common.EPSLN?(i=this.long0+t.x/(this.R*Math.cos(e)),n=Proj4js.common.adjust_lon(i)):n=this.long0,t.x=n,t.y=e,t}},Proj4js.Proj.vandg={init:function(){this.R=6370997},forward:function(t){var e,i,n=t.x,o=t.y,r=Proj4js.common.adjust_lon(n-this.long0);Math.abs(o)<=Proj4js.common.EPSLN&&(e=this.x0+this.R*r,i=this.y0);var s=Proj4js.common.asinz(2*Math.abs(o/Proj4js.common.PI));(Math.abs(r)<=Proj4js.common.EPSLN||Math.abs(Math.abs(o)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)&&(e=this.x0,i=o>=0?this.y0+Proj4js.common.PI*this.R*Math.tan(.5*s):this.y0+Proj4js.common.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Proj4js.common.PI/r-r/Proj4js.common.PI),l=a*a,h=Math.sin(s),c=Math.cos(s),u=c/(h+c-1),d=u*u,p=u*(2/h-1),f=p*p,m=Proj4js.common.PI*this.R*(a*(u-f)+Math.sqrt(l*(u-f)*(u-f)-(f+l)*(d-f)))/(f+l);return 0>r&&(m=-m),e=this.x0+m,m=Math.abs(m/(Proj4js.common.PI*this.R)),i=o>=0?this.y0+Proj4js.common.PI*this.R*Math.sqrt(1-m*m-2*a*m):this.y0-Proj4js.common.PI*this.R*Math.sqrt(1-m*m-2*a*m),t.x=e,t.y=i,t},inverse:function(t){var e,i,n,o,r,s,a,l,h,c,u;return t.x-=this.x0,t.y-=this.y0,h=Proj4js.common.PI*this.R,e=t.x/h,i=t.y/h,n=e*e+i*i,o=-Math.abs(i)*(1+n),r=o-2*i*i+e*e,s=-2*o+1+2*i*i+n*n,u=i*i/s+(2*r*r*r/s/s/s-9*o*r/s/s)/27,a=(o-r*r/3/s)/s,l=2*Math.sqrt(-a/3),h=3*u/a/l,Math.abs(h)>1&&(h=h>=0?1:-1),c=Math.acos(h)/3,lat=t.y>=0?(-l*Math.cos(c+Proj4js.common.PI/3)-r/3/s)*Proj4js.common.PI:-(-l*Math.cos(c+Proj4js.common.PI/3)-r/3/s)*Proj4js.common.PI,Math.abs(e)<Proj4js.common.EPSLN&&(lon=this.long0),lon=Proj4js.common.adjust_lon(this.long0+Proj4js.common.PI*(n-1+Math.sqrt(1+2*(e*e-i*i)+n*n))/2/e),t.x=lon,t.y=lat,t}},Proj4js.Proj.cea={init:function(){},forward:function(t){var e=t.x,i=t.y;dlon=Proj4js.common.adjust_lon(e-this.long0);var n=this.x0+this.a*dlon*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);return t.x=n,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Proj4js.common.adjust_lon(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts));return t.x=e,t.y=i,t}},Proj4js.Proj.eqc={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0),this.lat_ts||(this.lat_ts=0),this.title||(this.title="Equidistant Cylindrical (Plate Carre)"),this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=Proj4js.common.adjust_lon(e-this.long0),o=Proj4js.common.adjust_lat(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,i=t.y;return t.x=Proj4js.common.adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Proj4js.common.adjust_lat(this.lat0+(i-this.y0)/this.a),t}},Proj4js.Proj.cass={init:function(){this.sphere||(this.en=this.pj_enfn(this.es),this.m0=this.pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},C1:.16666666666666666,C2:.008333333333333333,C3:.041666666666666664,C4:.3333333333333333,C5:.06666666666666667,forward:function(t){var e,i,n=t.x,o=t.y;return n=Proj4js.common.adjust_lon(n-this.long0),this.sphere?(e=Math.asin(Math.cos(o)*Math.sin(n)),i=Math.atan2(Math.tan(o),Math.cos(n))-this.phi0):(this.n=Math.sin(o),this.c=Math.cos(o),i=this.pj_mlfn(o,this.n,this.c,this.en),this.n=1/Math.sqrt(1-this.es*this.n*this.n),this.tn=Math.tan(o),this.t=this.tn*this.tn,this.a1=n*this.c,this.c*=this.es*this.c/(1-this.es),this.a2=this.a1*this.a1,e=this.n*this.a1*(1-this.a2*this.t*(this.C1-(8-this.t+8*this.c)*this.a2*this.C2)),i-=this.m0-this.n*this.tn*this.a2*(.5+(5-this.t+6*this.c)*this.a2*this.C3)),t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a;return this.sphere?(this.dd=i+this.lat0,phi=Math.asin(Math.sin(this.dd)*Math.cos(e)),lam=Math.atan2(Math.tan(e),Math.cos(this.dd))):(ph1=this.pj_inv_mlfn(this.m0+i,this.es,this.en),this.tn=Math.tan(ph1),this.t=this.tn*this.tn,this.n=Math.sin(ph1),this.r=1/(1-this.es*this.n*this.n),this.n=Math.sqrt(this.r),this.r*=(1-this.es)*this.n,this.dd=e/this.n,this.d2=this.dd*this.dd,phi=ph1-this.n*this.tn/this.r*this.d2*(.5-(1+3*this.t)*this.d2*this.C3),lam=this.dd*(1+this.t*this.d2*(-this.C4+(1+3*this.t)*this.d2*this.C5))/Math.cos(ph1)),t.x=Proj4js.common.adjust_lon(this.long0+lam),t.y=phi,t},pj_enfn:function(t){en=new Array,en[0]=this.C00-t*(this.C02+t*(this.C04+t*(this.C06+t*this.C08))),en[1]=t*(this.C22-t*(this.C04+t*(this.C06+t*this.C08)));var e=t*t;return en[2]=e*(this.C44-t*(this.C46+t*this.C48)),e*=t,en[3]=e*(this.C66-t*this.C68),en[4]=e*t*this.C88,en},pj_mlfn:function(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},pj_inv_mlfn:function(e,n,o){for(k=1/(1-n),phi=e,i=Proj4js.common.MAX_ITER;i;--i)if(s=Math.sin(phi),t=1-n*s*s,t=(this.pj_mlfn(phi,s,Math.cos(phi),o)-e)*t*Math.sqrt(t)*k,phi-=t,Math.abs(t)<Proj4js.common.EPSLN)return phi;return Proj4js.reportError("cass:pj_inv_mlfn: Convergence error"),phi},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875},Proj4js.Proj.gauss={init:function(){sphi=Math.sin(this.lat0),cphi=Math.cos(this.lat0),cphi*=cphi,this.rc=Math.sqrt(1-this.es)/(1-this.es*sphi*sphi),this.C=Math.sqrt(1+this.es*cphi*cphi/(1-this.es)),this.phic0=Math.asin(sphi/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Proj4js.common.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*sphi,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*Math.sin(i),this.ratexp))-Proj4js.common.HALF_PI,t.x=this.C*e,t},inverse:function(t){var e=1e-14,i=t.x/this.C,n=t.y;num=Math.pow(Math.tan(.5*n+Proj4js.common.FORTPI)/this.K,1/this.C);for(var o=Proj4js.common.MAX_ITER;o>0&&(n=2*Math.atan(num*Proj4js.common.srat(this.e*Math.sin(t.y),-.5*this.e))-Proj4js.common.HALF_PI,!(Math.abs(n-t.y)<e));--o)t.y=n;return o?(t.x=i,t.y=n,t):(Proj4js.reportError("gauss:inverse:convergence failed"),null)}},Proj4js.Proj.omerc={init:function(){this.mode||(this.mode=0),this.lon1||(this.lon1=0,this.mode=1),this.lon2||(this.lon2=0),this.lat2||(this.lat2=0);{var t=this.b/this.a,e=1-Math.pow(t,2);Math.sqrt(e)}this.sin_p20=Math.sin(this.lat0),this.cos_p20=Math.cos(this.lat0),this.con=1-this.es*this.sin_p20*this.sin_p20,this.com=Math.sqrt(1-e),this.bl=Math.sqrt(1+this.es*Math.pow(this.cos_p20,4)/(1-e)),this.al=this.a*this.bl*this.k0*this.com/this.con,Math.abs(this.lat0)<Proj4js.common.EPSLN?(this.ts=1,this.d=1,this.el=1):(this.ts=Proj4js.common.tsfnz(this.e,this.lat0,this.sin_p20),this.con=Math.sqrt(this.con),this.d=this.bl*this.com/(this.cos_p20*this.con),this.f=this.d*this.d-1>0?this.lat0>=0?this.d+Math.sqrt(this.d*this.d-1):this.d-Math.sqrt(this.d*this.d-1):this.d,this.el=this.f*Math.pow(this.ts,this.bl)),0!=this.mode?(this.g=.5*(this.f-1/this.f),this.gama=Proj4js.common.asinz(Math.sin(this.alpha)/this.d),this.longc=this.longc-Proj4js.common.asinz(this.g*Math.tan(this.gama))/this.bl,this.con=Math.abs(this.lat0),this.con>Proj4js.common.EPSLN&&Math.abs(this.con-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(this.singam=Math.sin(this.gama),this.cosgam=Math.cos(this.gama),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=this.lat0>=0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz)):Proj4js.reportError("omerc:Init:DataError")):(this.sinphi=Math.sin(this.at1),this.ts1=Proj4js.common.tsfnz(this.e,this.lat1,this.sinphi),this.sinphi=Math.sin(this.lat2),this.ts2=Proj4js.common.tsfnz(this.e,this.lat2,this.sinphi),this.h=Math.pow(this.ts1,this.bl),this.l=Math.pow(this.ts2,this.bl),this.f=this.el/this.h,this.g=.5*(this.f-1/this.f),this.j=(this.el*this.el-this.l*this.h)/(this.el*this.el+this.l*this.h),this.p=(this.l-this.h)/(this.l+this.h),this.dlon=this.lon1-this.lon2,this.dlon<-Proj4js.common.PI&&(this.lon2=this.lon2-2*Proj4js.common.PI),this.dlon>Proj4js.common.PI&&(this.lon2=this.lon2+2*Proj4js.common.PI),this.dlon=this.lon1-this.lon2,this.longc=.5*(this.lon1+this.lon2)-Math.atan(this.j*Math.tan(.5*this.bl*this.dlon)/this.p)/this.bl,this.dlon=Proj4js.common.adjust_lon(this.lon1-this.longc),this.gama=Math.atan(Math.sin(this.bl*this.dlon)/this.g),this.alpha=Proj4js.common.asinz(this.d*Math.sin(this.gama)),Math.abs(this.lat1-this.lat2)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):this.con=Math.abs(this.lat1),this.con<=Proj4js.common.EPSLN||Math.abs(this.con-HALF_PI)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):Math.abs(Math.abs(this.lat0)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercInitDataError"),this.singam=Math.sin(this.gam),this.cosgam=Math.cos(this.gam),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=this.lat0>=0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz))},forward:function(t){var e,i,n,o,r,s,a,l,h,c,u,d=t.x,p=t.y;e=Math.sin(p),c=Proj4js.common.adjust_lon(d-this.longc),s=Math.sin(this.bl*c),Math.abs(Math.abs(p)-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(u=Proj4js.common.tsfnz(this.e,p,e),o=this.el/Math.pow(u,this.bl),h=.5*(o-1/o),i=.5*(o+1/o),a=(h*this.singam-s*this.cosgam)/i,n=Math.cos(this.bl*c),Math.abs(n)<1e-7?r=this.al*this.bl*c:(r=this.al*Math.atan((h*this.cosgam+s*this.singam)/n)/this.bl,0>n&&(r+=Proj4js.common.PI*this.al/this.bl))):(a=p>=0?this.singam:-this.singam,r=this.al*p/this.bl),Math.abs(Math.abs(a)-1)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercFwdInfinity"),l=.5*this.al*Math.log((1-a)/(1+a))/this.bl,r-=this.u;var f=this.x0+l*this.cosaz+r*this.sinaz,m=this.y0+r*this.cosaz-l*this.sinaz;return t.x=f,t.y=m,t},inverse:function(t){var e,i,n,o,r,s,a,l,h,c,u;return t.x-=this.x0,t.y-=this.y0,u=0,o=t.x*this.cosaz-t.y*this.sinaz,r=t.y*this.cosaz+t.x*this.sinaz,r+=this.u,s=Math.exp(-this.bl*o/this.al),a=.5*(s-1/s),i=.5*(s+1/s),h=Math.sin(this.bl*r/this.al),c=(h*this.cosgam+a*this.singam)/i,Math.abs(Math.abs(c)-1)<=Proj4js.common.EPSLN?(lon=this.longc,lat=c>=0?Proj4js.common.HALF_PI:-Proj4js.common.HALF_PI):(n=1/this.bl,l=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),n),lat=Proj4js.common.phi2z(this.e,l),e=this.longc-Math.atan2(a*this.cosgam-h*this.singam,n)/this.bl,lon=Proj4js.common.adjust_lon(e)),t.x=lon,t.y=lat,t}},Proj4js.Proj.lcc={init:function(){if(this.lat2||(this.lat2=this.lat0),this.k0||(this.k0=1),Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)return void Proj4js.reportError("lcc:init: Equal Latitudes");var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Proj4js.common.msfnz(this.e,e,i),o=Proj4js.common.tsfnz(this.e,this.lat1,e),r=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Proj4js.common.msfnz(this.e,r,s),l=Proj4js.common.tsfnz(this.e,this.lat2,r),h=Proj4js.common.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?Math.log(n/a)/Math.log(o/l):e,this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")},forward:function(t){var e=t.x,i=t.y;if(!(90>=i&&i>=-90&&180>=e&&e>=-180))return Proj4js.reportError("lcc:forward: llInputOutOfRange: "+e+" : "+i),null;var n,o,r=Math.abs(Math.abs(i)-Proj4js.common.HALF_PI);if(r>Proj4js.common.EPSLN)n=Proj4js.common.tsfnz(this.e,i,Math.sin(i)),o=this.a*this.f0*Math.pow(n,this.ns);else{if(r=i*this.ns,0>=r)return Proj4js.reportError("lcc:forward: No Projection"),null;o=0}var s=this.ns*Proj4js.common.adjust_lon(e-this.long0);return t.x=this.k0*o*Math.sin(s)+this.x0,t.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,t},inverse:function(t){var e,i,n,o,r,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),i=1):(e=-Math.sqrt(s*s+a*a),i=-1);var l=0;if(0!=e&&(l=Math.atan2(i*s,i*a)),0!=e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),o=Proj4js.common.phi2z(this.e,n),-9999==o)return null}else o=-Proj4js.common.HALF_PI;return r=Proj4js.common.adjust_lon(l/this.ns+this.long0),t.x=r,t.y=o,t}},Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var t=Math.abs(this.lat0);if(this.mode=Math.abs(t-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Proj4js.common.EPSLN?this.EQUIT:this.OBLIQ,this.es>0){var e;switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n=t.x,o=t.y;if(n=Proj4js.common.adjust_lon(n-this.long0),this.sphere){var r,s,a;switch(a=Math.sin(o),s=Math.cos(o),r=Math.cos(n),this.mode){case this.OBLIQ:case this.EQUIT:if(i=this.mode==this.EQUIT?1+s*r:1+this.sinph0*a+this.cosph0*s*r,i<=Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:y less than eps"),null;i=Math.sqrt(2/i),e=i*s*Math.sin(n),i*=this.mode==this.EQUIT?a:this.cosph0*a-this.sinph0*s*r;break;case this.N_POLE:r=-r;case this.S_POLE:if(Math.abs(o+this.phi0)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:phi < eps"),null;i=Proj4js.common.FORTPI-.5*o,i=2*(this.mode==this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(n),i*=r}}else{var r,l,a,h,c=0,u=0,d=0;switch(r=Math.cos(n),l=Math.sin(n),a=Math.sin(o),h=Proj4js.common.qsfnz(this.e,a),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(c=h/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*u*r;break;case this.EQUIT:d=1+u*r;break;case this.N_POLE:d=Proj4js.common.HALF_PI+o,h=this.qp-h;break;case this.S_POLE:d=o-Proj4js.common.HALF_PI,h=this.qp+h}if(Math.abs(d)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:b < eps"),null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),i=this.mode==this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*u*r):(d=Math.sqrt(2/(1+u*r)))*c*this.ymf,e=this.xmf*d*u*l;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(d=Math.sqrt(h))*l,i=r*(this.mode==this.S_POLE?d:-d)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a;if(this.sphere){var n,o=0,r=0;n=Math.sqrt(e*e+i*i);var s=.5*n;if(s>1)return Proj4js.reportError("laea:Inv:DataError"),null;switch(s=2*Math.asin(s),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(r=Math.sin(s),o=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(n)<=Proj4js.common.EPSLN?0:Math.asin(i*r/n),e*=r,i=o*n;break;case this.OBLIQ:s=Math.abs(n)<=Proj4js.common.EPSLN?this.phi0:Math.asin(o*sinph0+i*r*cosph0/n),e*=r*cosph0,i=(o-Math.sin(s)*sinph0)*n;break;case this.N_POLE:i=-i,s=Proj4js.common.HALF_PI-s;break;case this.S_POLE:s-=Proj4js.common.HALF_PI}lam=0!=i||this.mode!=this.EQUIT&&this.mode!=this.OBLIQ?Math.atan2(e,i):0}else{var a,l,h,c,u=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:if(e/=this.dd,i*=this.dd,c=Math.sqrt(e*e+i*i),c<Proj4js.common.EPSLN)return t.x=0,t.y=this.phi0,t;l=2*Math.asin(.5*c/this.rq),a=Math.cos(l),e*=l=Math.sin(l),this.mode==this.OBLIQ?(u=a*this.sinb1+i*l*this.cosb1/c,h=this.qp*u,i=c*this.cosb1*a-i*this.sinb1*l):(u=i*l/c,h=this.qp*u,i=c*a);break;case this.N_POLE:i=-i;case this.S_POLE:if(h=e*e+i*i,!h)return t.x=0,t.y=this.phi0,t;u=1-h/this.qp,this.mode==this.S_POLE&&(u=-u)}lam=Math.atan2(e,i),s=this.authlat(Math.asin(u),this.apa)}return t.x=Proj4js.common.adjust_lon(this.long0+lam),t.y=s,t
},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(t){var e,i=new Array;return i[0]=t*this.P00,e=t*t,i[0]+=e*this.P01,i[1]=e*this.P10,e*=t,i[0]+=e*this.P02,i[1]+=e*this.P11,i[2]=e*this.P20,i},authlat:function(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}},Proj4js.Proj.aeqd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i=t.x,n=(t.y,Math.sin(t.y)),o=Math.cos(t.y),r=Proj4js.common.adjust_lon(i-this.long0),s=Math.cos(r),a=this.sin_p12*n+this.cos_p12*o*s;if(Math.abs(Math.abs(a)-1)<Proj4js.common.EPSLN){if(e=1,0>a)return void Proj4js.reportError("aeqd:Fwd:PointError")}else{var l=Math.acos(a);e=l/Math.sin(l)}return t.x=this.x0+this.a*e*o*Math.sin(r),t.y=this.y0+this.a*e*(this.cos_p12*n-this.sin_p12*o*s),t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Math.sqrt(t.x*t.x+t.y*t.y);if(e>2*Proj4js.common.HALF_PI*this.a)return void Proj4js.reportError("aeqdInvDataError");var i,n=e/this.a,o=Math.sin(n),r=Math.cos(n),s=this.long0;if(Math.abs(e)<=Proj4js.common.EPSLN)i=this.lat0;else{i=Proj4js.common.asinz(r*this.sin_p12+t.y*o*this.cos_p12/e);var a=Math.abs(this.lat0)-Proj4js.common.HALF_PI;if(Math.abs(a)<=Proj4js.common.EPSLN)s=Proj4js.common.adjust_lon(lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y));else if(a=r-this.sin_p12*Math.sin(i),Math.abs(a)<Proj4js.common.EPSLN&&Math.abs(t.x)<Proj4js.common.EPSLN);else{{Math.atan2(t.x*o*this.cos_p12,a*e)}s=Proj4js.common.adjust_lon(this.long0+Math.atan2(t.x*o*this.cos_p12,a*e))}}return t.x=s,t.y=i,t}},Proj4js.Proj.moll={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=Proj4js.common.adjust_lon(e-this.long0),o=i,r=Proj4js.common.PI*Math.sin(i),s=0;!0;s++){var a=-(o+Math.sin(o)-r)/(1+Math.cos(o));if(o+=a,Math.abs(a)<Proj4js.common.EPSLN)break;s>=50&&Proj4js.reportError("moll:Fwd:IterationError")}o/=2,Proj4js.common.PI/2-Math.abs(i)<Proj4js.common.EPSLN&&(n=0);var l=.900316316158*this.a*n*Math.cos(o)+this.x0,h=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=h,t},inverse:function(t){var e,i;t.x-=this.x0;var i=t.y/(1.4142135623731*this.a);Math.abs(i)>.999999999999&&(i=.999999999999);var e=Math.asin(i),n=Proj4js.common.adjust_lon(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Proj4js.common.PI&&(n=-Proj4js.common.PI),n>Proj4js.common.PI&&(n=Proj4js.common.PI),i=(2*e+Math.sin(2*e))/Proj4js.common.PI,Math.abs(i)>1&&(i=1);var o=Math.asin(i);return t.x=n,t.y=o,t}},L.CRS.proj4js=function(){var t=function(t,e){"undefined"!=typeof e&&(Proj4js.defs[t]=e);var i=new Proj4js.Proj(t);return{project:function(t){var e=new L.Point(t.lng,t.lat);return Proj4js.transform(Proj4js.WGS84,i,e)},unproject:function(t,e){var n=Proj4js.transform(i,Proj4js.WGS84,t.clone());return new L.LatLng(n.y,n.x,e)}}};return function(e,i,n){return L.Util.extend({},L.CRS,{code:e,transformation:n?n:new L.Transformation(1,0,-1,0),projection:t(e,i)})}}(),"undefined"==typeof L||"undefined"==typeof L.version||L.version<"0.4")throw"Leaflet not loaded or version is < 0.4";L.TileJSON=function(){function t(t){return"undefined"!=typeof t&&null!==t}function e(e,i){var o={tileLayer:L.Util.extend({minZoom:0,maxZoom:22},i.tileLayerConfig||{}),map:L.Util.extend({},i.mapConfig||{}),crs:{},validation:{version:!1}};for(var r in n)t(e[r])&&n[r](o,e[r],e);for(var s in o.validation)if(!o.validation[s])throw new Error('Missing property "'+s+'".');return t(o.crs.projection)&&(o.map.crs=new L.CRS.proj4js(o.crs.code,o.crs.projection,o.crs.transformation),t(o.crs.scale)&&(o.map.crs.scale=o.crs.scale),o.tileLayer.continuousWorld=!0),o}function i(t){var e=t.tileUrls[0].replace(/\$({[sxyz]})/g,"$1");return new L.TileLayer(e,t.tileLayer)}var n={tilejson:function(t,e){var i=o.parse(e);if(!i||2!=i[1])throw new Error('This parser supports version 2 of TileJSON. (Provided version: "'+e.tilejson+'"');t.validation.version=!0},minzoom:function(t,e){t.tileLayer.minZoom=e},maxzoom:function(t,e){t.tileLayer.maxZoom=e},center:function(t,e){t.map.center=new L.LatLng(e[1],e[0]),t.map.zoom=e[2]},bounds:function(t,e){var i=e;t.tileLayer.bounds=[[i[1],i[0]],[i[3],i[2]]]},attribution:function(t,e){t.map.attributionControl=!0,t.tileLayer.attribution=e},projection:function(t,e){t.crs.projection=e},transform:function(t,e){t.crs.transformation=new L.Transformation(e[0],e[1],e[2],e[3])},crs:function(t,e){t.crs.code=e},scales:function(t,e){t.crs.scale=function(t){return e[t]}},scheme:function(t,e){t.tileLayer.scheme=e},tilesize:function(t,e){t.tileLayer.tileSize=e},tiles:function(t,e){t.tileUrls=e},detectRetina:function(t,e){t.tileLayer.detectRetina=e},zIndex:function(t,e){t.tileLayer.zIndex=e}},o=function(){var t="\\s*[v=]*\\s*([0-9]+)\\.([0-9]+)\\.([0-9]+)(-[0-9]+-?)?([a-zA-Z-][a-zA-Z0-9-.:]*)?",e=new RegExp("^\\s*"+t+"\\s*$");return{parse:function(t){return t.match(e)}}}();return{createMapConfig:function(t,i){return e(t,{mapConfig:i})},createTileLayerConfig:function(t,i){return e(t,{tileLayerConfig:i}).tileLayer},createTileLayer:function(t,n){var o=e(t,{tileLayerConfig:n});return i(o)},createMap:function(t,n,o){var r=e(n,o||{});return r.map.layers=[i(r)],new L.Map(t,r.map)}}}(),L.Util.ajax=function(t,e){$.ajax({url:t,crossDomain:!0,data:{},success:e,dataType:"json",error:function(t,e,i){console.log("hey! "+i)},statusCode:{404:function(){console.log("my 404")}}})},L.Util.ajaxxx=function(url,cb){void 0===window.XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("XMLHttpRequest is not supported")}});var response,request=new XMLHttpRequest;request.open("GET",url),request.onreadystatechange=function(){4===request.readyState&&200===request.status&&(response=window.JSON?JSON.parse(request.responseText):eval("("+request.responseText+")"),cb(response))},request.send()},L.UtfGrid=L.Class.extend({includes:L.Mixin.Events,options:{subdomains:"abc",minZoom:0,maxZoom:18,tileSize:256,resolution:4,useJsonP:!0,pointerCursor:!0},_mouseOn:null,initialize:function(t,e){L.Util.setOptions(this,e),this._url=t,this._cache={};for(var i=0;window["lu"+i];)i++;this._windowKey="lu"+i,window[this._windowKey]={};var n=this.options.subdomains;"string"==typeof this.options.subdomains&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._container=this._map._container,this._update();var e=this._map.getZoom();e>this.options.maxZoom||e<this.options.minZoom||(t.on("click",this._click,this),t.on("mousemove",this._move,this),t.on("moveend",this._update,this))},onRemove:function(){var t=this._map;t.off("click",this._click,this),t.off("mousemove",this._move,this),t.off("moveend",this._update,this)},_click:function(t){this.fire("click",this._objectForEvent(t))},_move:function(t){var e=this._objectForEvent(t);e.data!==this._mouseOn?(this._mouseOn&&(this.fire("mouseout",{latlng:t.latlng,data:this._mouseOn}),this.options.pointerCursor&&(this._container.style.cursor="")),e.data&&(this.fire("mouseover",e),this.options.pointerCursor&&(this._container.style.cursor="pointer")),this._mouseOn=e.data):e.data&&this.fire("mousemove",e)},_objectForEvent:function(t){var e=this._map,i=e.project(t.latlng),n=this.options.tileSize,o=this.options.resolution,r=Math.floor(i.x/n),s=Math.floor(i.y/n),a=Math.floor((i.x-r*n)/o),l=Math.floor((i.y-s*n)/o),h=e.options.crs.scale(e.getZoom())/n;r=(r+h)%h,s=(s+h)%h;var c=this._cache[e.getZoom()+"_"+r+"_"+s];if(!c)return{latlng:t.latlng,data:null};var u=this._utfDecode(c.grid[l].charCodeAt(a)),d=c.keys[u],p=c.data[d];return c.data.hasOwnProperty(d)||(p=null),{latlng:t.latlng,data:p,parentEvent:t}},_tileShouldBeLoaded:function(t){if(!this.imageLayer||!this.imageLayer.options.bounds)return!0;var e=this.imageLayer.options,i=e.tileSize,n=t.multiplyBy(i),o=n.add([i,i]),r=this._map.unproject(n),s=this._map.unproject(o);return e.continuousWorld||e.noWrap||(r=r.wrap(),s=s.wrap()),e.bounds.intersects([r,s])?!0:!1},_update:function(){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom))for(var n=new L.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),o=new L.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),r=this._map.options.crs.scale(e)/i,s=n.x;s<=o.x;s++)for(var a=n.y;a<=o.y;a++){var l=(s+r)%r,h=(a+r)%r,c=e+"_"+l+"_"+h;!this._cache.hasOwnProperty(c)&&this._tileShouldBeLoaded(n)&&(this._cache[c]=null,this.options.useJsonP?this._loadTileP(e,l,h):this._loadTile(e,l,h))}},_loadTileP:function(t,e,i){var n=document.getElementsByTagName("head")[0],o=t+"_"+e+"_"+i,r="lu_"+o,s=this._windowKey,a=this,l=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:i}),z:t,x:e,y:i,cb:s+"."+r},this.options)),h=document.createElement("script");h.setAttribute("type","text/javascript"),h.setAttribute("src",l),window[s][r]=function(t){a._cache[o]=t,delete window[s][r],n.removeChild(h)},n.appendChild(h)},_loadTile:function(t,e,i){var n=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:i}),z:t,x:e,y:i},this.options)),o=t+"_"+e+"_"+i,r=this;L.Util.ajax(n,function(t){r._cache[o]=t})},_utfDecode:function(t){return t>=93&&t--,t>=35&&t--,t-32}}),function(t,e){L.drawVersion="0.2.4-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mousedown",this._onMouseDown,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("mouseup",this._onMouseUp,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseup",this._onMouseUp,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=this._poly.spliceLatLngs(e.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){var e=this._markers.length;return e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&t||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,i=t.latlng;this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(e){if(this._mouseDownOrigin){var i=L.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(i)<9*(t.devicePixelRatio||1)&&this.addVertex(e.latlng)}this._mouseDownOrigin=null},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers.length;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,n,o,r=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,l=r>a?r-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));r>l;l+=this.options.guidelineDistance)i=l/r,n={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),o.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,n)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;i>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,n,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=o-(e?2:1),n=t.distanceTo(this._markers[i].getLatLng()),this._measurementRunningTotal+=n*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(i),L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent({text:this._endLabelText}),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,n=this.options.showRadius,o=this.options.metric;this._tooltip.updatePosition(i),this._isDrawing&&(this._drawShape(i),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:n?"Radius: "+L.GeometryUtil.readableDistance(e,o):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var t=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,o=this._poly._latlngs;for(t=0,i=o.length;i>t;t++)n=this._createMarker(o[t],t),n.on("click",this._onMarkerClick,this),this._markers.push(n);var r,s;for(t=0,e=i-1;i>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],s=this._markers[t],this._createMiddleMarker(r,s),this._updatePrevNext(r,s))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._poly._latlngs.length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,r=this._getMiddleLatLng(t,e),s=this._createMarker(r);s.setOpacity(.6),t._middleRight=e._middleLeft=s,n=function(){var n=e._index;s._index=n,s.off("click",i,this).on("click",this._onMarkerClick,this),r.lat=s.getLatLng().lat,r.lng=s.getLatLng().lng,this._poly.spliceLatLngs(n,0,r),this._markers.splice(n,0,s),s.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},o=function(){s.off("dragstart",n,this),s.off("dragend",o,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},i=function(){n.call(this),o.call(this),this._fireEdit()},s.on("click",i,this).on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.project(t.getLatLng()),o=i.project(e.getLatLng());return i.unproject(n._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var t=0,e=this._resizeMarkers.length;e>t;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw()},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;i>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target,n=i._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,i,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds(),i=e.getCenter(),n.setLatLng(i)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape.getLatLngs(),n=this._shape.getBounds(),o=n.getCenter(),r=[],s=0,a=i.length;a>s;s++)e=[i[s].lat-o.lat,i[s].lng-o.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter())},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),i=t.getNorthEast(),n=t.getSouthEast(),o=t.getSouthWest();return[e,i,n,o]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())
}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._moveMarker.getLatLng(),i=e.distanceTo(t);this._shape.setRadius(i)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,n=t.length,o=0,r=L.LatLng.DEG_TO_RAD;if(n>2){for(var s=0;n>s;s++)e=t[s],i=t[(s+1)%n],o+=(i.lng-e.lng)*r*(2+Math.sin(e.lat*r)+Math.sin(i.lat*r));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){var i;return e?i=t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t*=.836127,i=t>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"),i},readableDistance:function(t,e){var i;return e?i=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":(t*=1.09361,i=t>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"),i}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,n){return this._checkCounterclockwise(t,i,n)!==this._checkCounterclockwise(e,i,n)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,n)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,i,n=this._originalPoints,o=n?n.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=n[t-1],i=n[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(t),e):!1},newPointIntersects:function(t,e){var i=this._originalPoints,n=i?i.length:0,o=i?i[n-1]:null,r=n-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(o,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,i=e?e.length:0;return i+=t||0,!this._originalPoints||3>=i},_lineSegmentsIntersectsRange:function(t,e,i,n){var o,r,s=this._originalPoints;n=n||0;for(var a=i;a>n;a--)if(o=s[a-1],r=s[a],L.LineUtil.segmentsIntersect(t,e,o,r))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,i,n,o,r=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(t=L.Polyline.prototype.intersects.call(this))?!0:(e=r.length,i=r[0],n=r[e-1],o=e-2,this._lineSegmentsIntersectsRange(n,i,o,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this))},onAdd:function(t){var e,i=L.DomUtil.create("div","leaflet-draw"),n=!1,o="leaflet-draw-toolbar-top";for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t),e&&(n||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),n=!0),i.appendChild(e)));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create("div","leaflet-draw-section"),n=0,o=this._toolbarClass||"",r=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<r.length;e++)r[e].enabled&&this._initModeHandler(r[e].handler,this._toolbarContainer,n++,o,r[e].title);return n?(this._lastButtonIndex=--n,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i):void 0},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;i>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,n,o){var r=t.type;this._modes[r]={},this._modes[r].handler=t,this._modes[r].button=this._createButton({title:o,className:n+"-"+r,container:e,callback:this._modes[r].handler.enable,context:this._modes[r].handler}),this._modes[r].buttonIndex=i,this._modes[r].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,i,n,o,r=this._actionsContainer,s=this.getActions(t),a=s.length;for(i=0,n=this._actionButtons.length;n>i;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];r.firstChild;)r.removeChild(r.firstChild);for(var l=0;a>l;l++)"enabled"in s[l]&&!s[l].enabled||(e=L.DomUtil.create("li","",r),o=this._createButton({title:s[l].title,text:s[l].text,container:e,callback:s[l].callback,context:s[l].context}),this._actionButtons.push({button:o,callback:s[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(i.style.visibility="inherit",L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit=L.extend({},this.options.edit,t.edit)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,i=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,i?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",i?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,i?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",i?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),this._selectedPathOptions=e.selectedPathOptions,this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng))},_toggleMarkerHighlight:function(t){if(t._icon){var e=t._icon;e.style.display="none",L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,-4)):(L.DomUtil.addClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display=""}},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,n=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+"px",t.style.marginLeft=n+"px"},_enableLayerEdit:function(t){var e,i=t.layer||t.target||t,n=i instanceof L.Marker;(!n||i._icon)&&(this._backupLayer(i),this._selectedPathOptions&&(e=L.Util.extend({},this._selectedPathOptions),n?this._toggleMarkerHighlight(i):(i.options.previousOptions=L.Util.extend({dashArray:null},i.options),i instanceof L.Circle||i instanceof L.Polygon||i instanceof L.Rectangle||(e.fill=!1),i.setStyle(e))),n?(i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd)):i.editing.enable())},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this)):e.editing.disable()},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){var e=t.layer||t.target||t;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e)},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document),function(){"use strict";var t=function(t){return t="number"==typeof t?{precision:t}:t||{},t.precision=t.precision||5,t.factor=t.factor||Math.pow(10,t.precision),t.dimension=t.dimension||2,t},e={encode:function(e,i){i=t(i);for(var n=[],o=0,r=e.length;r>o;++o){var s=e[o];if(2===i.dimension)n.push(s.lat||s[0]),n.push(s.lng||s[1]);else for(var a=0;a<i.dimension;++a)n.push(s[a])}return this.encodeDeltas(n,i)},decode:function(e,i){i=t(i);for(var n=this.decodeDeltas(e,i),o=[],r=0,s=n.length;r+(i.dimension-1)<s;){for(var a=[],l=0;l<i.dimension;++l)a.push(n[r++]);o.push(a)}return o},encodeDeltas:function(e,i){i=t(i);for(var n=[],o=0,r=e.length;r>o;)for(var s=0;s<i.dimension;++s,++o){var a=e[o],l=a-(n[s]||0);n[s]=a,e[o]=l}return this.encodeFloats(e,i)},decodeDeltas:function(e,i){i=t(i);for(var n=[],o=this.decodeFloats(e,i),r=0,s=o.length;s>r;)for(var a=0;a<i.dimension;++a,++r)o[r]=n[a]=o[r]+(n[a]||0);return o},encodeFloats:function(e,i){i=t(i);for(var n=0,o=e.length;o>n;++n)e[n]=Math.round(e[n]*i.factor);return this.encodeSignedIntegers(e)},decodeFloats:function(e,i){i=t(i);for(var n=this.decodeSignedIntegers(e),o=0,r=n.length;r>o;++o)n[o]/=i.factor;return n},encodeSignedIntegers:function(t){for(var e=0,i=t.length;i>e;++e){var n=t[e];t[e]=0>n?~(n<<1):n<<1}return this.encodeUnsignedIntegers(t)},decodeSignedIntegers:function(t){for(var e=this.decodeUnsignedIntegers(t),i=0,n=e.length;n>i;++i){var o=e[i];e[i]=1&o?~(o>>1):o>>1}return e},encodeUnsignedIntegers:function(t){for(var e="",i=0,n=t.length;n>i;++i)e+=this.encodeUnsignedInteger(t[i]);return e},decodeUnsignedIntegers:function(t){for(var e=[],i=0,n=0,o=0,r=t.length;r>o;++o){var s=t.charCodeAt(o)-63;i|=(31&s)<<n,32>s?(e.push(i),i=0,n=0):n+=5}return e},encodeSignedInteger:function(t){return t=0>t?~(t<<1):t<<1,this.encodeUnsignedInteger(t)},encodeUnsignedInteger:function(t){for(var e,i="";t>=32;)e=(32|31&t)+63,i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}};if("object"==typeof module&&"object"==typeof module.exports&&(module.exports=e),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(t,i){return new L.Polyline(e.decode(t),i)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(t,i){return new L.Polygon(e.decode(t),i)});var i={encodePath:function(){return e.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(i),L.Polygon.prototype.encodePath||L.Polygon.include(i),L.PolylineUtil=e}}();var Paraffin={MAPBOX:"mapbox",CLOUDMADE:"cloudmade",MAPQUEST:"mapquest",GOOGLE:"google",TONER:"toner",BING:"bing",MIDNIGHT:"midnight",NEARMAP:"nearmap",GEOJSON:"geojson",TILEJSON:"tilejson",Map:function(t){var e=$.extend({minZoom:t.minZoom,maxZoom:t.maxZoom,attributionControl:!0},t.leafletOverrides||{}),i=new L.Map(t.divId,e);this.map=i,this.opts=t,this.remainingLayers=0,this.hash=t.hash,this.ready=!1,this.utfLayers=[],this.hilite=null,this.pointDefaults={radius:8,fillColor:"#00a0dd",color:"#000",weight:1,opacity:1,fillOpacity:.8},this.emptyGeoJSON={type:"FeatureCollection",features:[]},t.extent?this.setExtent(t.extent):t.center&&this.setCenter(t.center,t.zoom||16),t.geolocate&&"manual"!=t.geolocate&&this.enableGPS({watch:!0,noLocation:function(){$.ajax({async:!0,type:"GET",url:"/disable_gps",data:{},cache:!1,success:function(){}})}})}};Paraffin.Map.prototype.setExtent=function(t){var e=[[t[0].lat,t[0].lon],[t[1].lat,t[1].lon]];this.map.fitBounds(e)},Paraffin.Map.prototype.getExtent=function(){var t=this.map.getBounds();return[{lat:t._southWest.lat,lon:t._southWest.lng},{lat:t._northEast.lat,lon:t._northEast.lng}]},Paraffin.Map.prototype.setCenter=function(t,e){this.map.setView([t.lat,t.lon],e)},Paraffin.Map.prototype.getLayer=function(t){var e=_.select(this.overlays,function(e){return e.id==t||e.name==t});return 0==e.length?null:1==e.length?e[0]:e},Paraffin.Map.prototype.initializeLayers=function(t,e){var i=this,n={},o={};this.overlays=o,this.layers=e,this.baseLayers=n;for(var r in t){var s=t[r],a=null;a="street"==s?n.Street=this.createLayer(Paraffin.MAPBOX,{baseMapId:"dexterslu.djmdkj4i"}):"satellite"==s?n.Satellite=this.createLayer(Paraffin.MAPBOX,{baseMapId:"loveland.io6f7045"}):s==Paraffin.MIDNIGHT?n.Street=this.createLayer(Paraffin.MAPBOX,{baseMapId:"loveland.hm948jgf"}):s==Paraffin.NEARMAP&&window.data&&window.data.nearmap_ticket?n.Nearmap=this.createLayer(Paraffin.NEARMAP,{ticket:window.data.nearmap_ticket}):n.Satellite=this.createLayer(s),a.id=a.paraffinId=s,a.base=!0,r==t.length-1&&this.map.addLayer(a)}var l=_.filter(e,function(t){return t.mouseover});l.length>0&&(this.info=L.control(),this.info.onAdd=function(){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},this.info.update=function(t){this.sticky||(t?(this._div.innerHTML=t,$(this._div).removeClass("hide")):$(this._div).addClass("hide"))},this.info.setSticky=function(t){return},this.info.addTo(i.map));var h=function(){i.remainingLayers-=1,0==i.remainingLayers&&(i.onReady&&i.onReady(),i.ready=!0)},c=function(){h()};for(var r in e){var u,d=e[r];"geojson"==d.ty?u=i.createGeoJSON($.extend(d,{onCreate:h})):"tilejson"==d.ty&&(u=function(t){return i.createTileJSON({id:t.id,url:t.url,onCreate:h,onError:c,interaction:t.interaction,template:t.template,zindex:t.zindex,mouseover:t.mouseover,detectRetina:!0})}(d)),u.id=u.paraffinId=d.id,o[d.id]=u,d.hide||i.map.addLayer(u)}if(this.opts.layerControl){var p=new L.Control.Layers(n,o);this.map.addControl(p)}},Paraffin.Map.prototype.addLayer=function(t,e){var i=this.createLayer(t,e);return e.hide||this.map.addLayer(i),i},Paraffin.Map.prototype.createLayer=function(t,e){if(t==Paraffin.MAPBOX){var i="https://{s}.tiles.mapbox.com/v3/"+e.baseMapId+"/{z}/{x}/{y}.png",n="<a href='https://www.mapbox.com/about/maps/' target='_blank'>&copy; Mapbox &copy; OpenStreetMap</a><span class='improve'> | <a href='https://www.mapbox.com/map-feedback/' target='_blank'>Improve this map</span>",o=new L.TileLayer(i,{maxZoom:19,detectRetina:!0,zIndex:0,attribution:n});return o}if(t==Paraffin.CLOUDMADE){if(!this.opts.cloudmadeKey||!this.opts.cloudmadeStyle)throw"For a CloudMade layer the map opts needs 'cloudmadeKey' and 'cloudmadeStyle' values for the API key and style ID.";var r="http://{s}.tile.cloudmade.com/"+this.opts.cloudmadeKey+"/"+this.opts.cloudmadeStyle+"/256/{z}/{x}/{y}.png",o=new L.TileLayer(r,{maxZoom:18});return o}if(t==Paraffin.MAPQUEST){var s="http://{s}.mqcdn.com/naip/{z}/{x}/{y}.png",a=["oatile1","oatile2","oatile3","oatile4"],l='&copy; <a href="http://open.mapquest.co.uk" target="_blank">MapQuest</a>, <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> and contributors.',o=new L.TileLayer(s,{maxZoom:18,attribution:l,subdomains:a});return o}if(t==Paraffin.GOOGLE){var o=new L.Google("SATELLITE");return o}if(t==Paraffin.BING){var h="&copy; Bing Maps",o=new L.BingLayer("AtX0UxXkWS3Ww0h73R-sHuB1_qQWvq28PrA9vsxG9HQyNBOTO3_cqfoBPZwfvJvf",{type:"AerialWithLabels",attribution:h});return o}if(t==Paraffin.TONER){var c=new L.StamenTileLayer("toner");return c}if(t==Paraffin.NEARMAP){var i="http://us.nearmap.com/maps?x={x}&y={y}&z={z}&nml=v&ticket="+e.ticket+"&httpauth=false&version=2",o=new L.TileLayer(i,{maxZoom:21,attribution:"nearmap"});return o}throw"Unknown layer type: "+t},Paraffin.Map.prototype.removeLayer=function(t){this.map.removeLayer(t)},Paraffin.Map.prototype.createGeoJSON=function(layer){var opts={},that=this,fullStyle=$.extend({},this.pointDefaults,layer.style||{}),geojsonLayer=null;opts.pointToLayer=layer.pointToLayer||function(t){return function(e,i){return new L.CircleMarker(i,t)}}(fullStyle);var mouseoverHandler=function(t){var e=t.originalEvent,i=layer.zindex;if(!(e.firedForZ&&e.firedForZ>i)){if(e.firedForZ=i,!geojsonLayer.allowRolloversThrough)for(var n in that.utfLayers)that.utfLayers[n].muted=!0;"string"==typeof layer.template&&(layer.template=Handlebars.compile(layer.template)),"function"==typeof layer.template&&that.info.update(layer.template(t.target.feature.properties))}};opts.onEachFeature=function(t,e){if(t.properties.classes)if("undefined"!=typeof e.options)e.options.classes=t.properties.classes;else if(e._layers)for(var i in e._layers){var n=e._layers[i];n.options.classes=t.properties.classes}if(e._layers)for(var o in e._layers)e._layers[o].feature=t;layer.template&&layer.mouseover&&(e.on("mouseover",mouseoverHandler),e.on("mouseout",function(){that.info.update(null);for(var t in that.utfLayers)that.utfLayers[t].muted=!1})),layer.interaction&&e.on("click",function(t){var e=(t.target.options?t.target.options.interaction:null)||(t.target.parent?t.target.parent.options.interaction:null);e&&$("#"+that.opts.divId).trigger("paraffin:click",{originalEvent:t,layer:t.target,layerType:"geojson",feature:t.target.feature,data:t.target.feature.properties})}),e.parent=geojsonLayer};var styleHandler=layer.style_handler?eval("("+layer.style_handler+")"):null;return opts.style=styleHandler?function(t){return overrides=styleHandler(t),$.extend({},layer.style||{},overrides)}:layer.style,layer.url?(geojsonLayer=new L.GeoJSON(this.emptyGeoJSON,opts),$.ajax({async:!0,type:"GET",dataType:"json",url:layer.url,cache:!0,success:function(t){geojsonLayer.addData(t),layer.onCreate&&layer.onCreate(geojsonLayer)}})):layer.elements&&(geojsonLayer=new L.GeoJSON(layer.elements,opts),layer.onCreate&&layer.onCreate(geojsonLayer)),geojsonLayer.options.interaction=layer.interaction,geojsonLayer.paraffinId=layer.id,geojsonLayer.template=layer.template,$(geojsonLayer._container).addClass(layer.id),geojsonLayer},Paraffin.Map.prototype.createTileJSON=function(t){var e=this,i=new L.LayerGroup;return $.ajax({dataType:"json",url:t.url,data:{},crossDomain:!0,success:function(n){n.tilejson="2.0.0",t.url.match(/^https:/)&&(n.tiles=_.map(n.tiles,function(t){return t.replace(/^http:/,"https:")}));var o={errorTileUrl:"/assets/fallback/missing_tile.png"};t.zindex&&(o.zIndex=t.zindex);var r=L.TileJSON.createTileLayer(n,o);if(r.id=n.id,r.paraffinId=t.id,i.addLayer(r),!e.opts.extent&&!e.opts.center){var s=[n.bounds[1],n.bounds[0]],a=[n.bounds[3],n.bounds[2]],l=[s,a];e.map.fitBounds(l),e.bounds=l}if(t.onCreate&&t.onCreate(r),t.interaction&&n.grids){var h=n.grids[0].replace(/^http:/,"https:"),c=h.indexOf("mapbox.com")>-1;if(c){var u=h.indexOf("?")>-1,d=u?"&":"?";u?c=!1:h=h+d+"callback={cb}"}var p=new L.UtfGrid(h,{resolution:4,useJsonP:c,bounds:r.options.bounds});p.grid=!0,p.paraffinId=t.id,p.imageLayer=r,e.utfLayers.push(p),t.mouseover&&(p.on("mouseover",function(i){if(!p.muted){var n=i.target.imageLayer.options.zIndex,o=i.parentEvent.originalEvent;if(!(o.firedForZ&&o.firedForZ>n)&&(o.firedForZ=n,"string"==typeof t.template&&(t.template=Handlebars.compile(t.template)),"function"==typeof t.template&&e.info.update(t.template(i.data)),i.data.geojson)){e.hilite&&e.map.hasLayer(e.hilite)&&(e.map.removeLayer(e.hilite),e.hilite=null);var r=i.data.geojson;"string"==typeof i.data.geojson&&(r="---"==i.data.geojson.substring(0,3)&&"undefined"!=typeof jsyaml?jsyaml.safeLoad(i.data.geojson,{schema:jsyaml.JSON_SCHEMA}):JSON.parse(i.data.geojson)),e.hilite=L.geoJson(r,{style:{fillOpacity:0,fillColor:"none",color:"#2980B9",weight:3},clickable:!1}),map.map.addLayer(e.hilite)}}}),p.on("mouseout",function(){p.muted||(e.info.update(null),e.hilite&&e.map.hasLayer(e.hilite)&&(e.map.removeLayer(e.hilite),e.hilite=null))})),p.on("click",function(t){if(!p.muted&&t.data){var i=t.target.imageLayer.options.zIndex;if(t.parentEvent.firedForZ&&t.parentEvent.firedForZ>i)return;t.parentEvent.firedForZ=i;{t.latlng}return $("#"+e.opts.divId).trigger("paraffin:click",{layer:t.target,layerType:"tilejson",data:t.data}),!1}}),i.addLayer(p)}},error:function(e,i){t.onError&&t.onError(i)}}),i},L.Path.prototype._updateStyleBase=L.Path.prototype._updateStyle,L.Path.prototype._updateStyle=function(){this._updateStyleBase(),this.options.classes&&this._path.setAttribute("class",this._path.getAttribute("class")+" "+this.options.classes)},L.Path.prototype._initEventsBase=L.Path.prototype._initEvents,L.Path.prototype._initEvents=function(){this._initEventsBase(),this.options.classes&&this._path.setAttribute("class",this._path.getAttribute("class")+" "+this.options.classes)
},L.CircleMarker.prototype.setZIndexOffset=function(){},L.CircleMarker.prototype._setPos=function(){},L.CircleMarker.prototype.setOpacity=function(){},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Paraffin.Map.prototype.enableGPS=function(t){var e=t;t.map=this.map,this.gps=new Paraffin.GPS(e)},Paraffin.GPS=function(t){t=t||{};1==t.follow;this.bounds=null;t.map;if(!t.map)throw"You need to specify the 'map' property of the GPS options"},function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e,i=arguments,n={},o=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?o(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=o(n,i[t]);return n}function i(){for(var t=0,e=arguments,i=e.length,n={};i>t;t++)n[e[t++]]=e[t];return n}function n(t,e){return parseInt(t,e||10)}function o(t){return"string"==typeof t}function r(t){return"object"==typeof t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"number"==typeof t}function l(t){return me.log(t)/me.LN10}function h(t){return me.pow(10,t)}function c(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function u(t){return t!==$&&null!==t}function d(t,e,i){var n,s;if(o(e))u(i)?t.setAttribute(e,i):t&&t.getAttribute&&(s=t.getAttribute(e));else if(u(e)&&r(e))for(n in e)t.setAttribute(n,e[n]);return s}function p(t){return s(t)?t:[t]}function f(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],"undefined"!=typeof e&&null!==e)return e}function m(e,i){Ee&&!Oe&&i&&i.opacity!==$&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function g(e,i,n,o,r){var s=pe.createElement(e);return i&&t(s,i),r&&m(s,{padding:0,border:Ke,margin:0}),n&&m(s,n),o&&o.appendChild(s),s}function v(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function y(t,e,i,o){var r=Y.lang,s=+t||0,a=-1===e?(s.toString().split(".")[1]||"").length:isNaN(e=we(e))?2:e,l=void 0===i?r.decimalPoint:i,h=void 0===o?r.thousandsSep:o,c=0>s?"-":"",u=String(n(s=we(s).toFixed(a))),d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+h:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+h)+(a?l+we(s-u).toFixed(a).slice(2):"")}function b(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function _(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function w(t,e){var i,n=/f$/,o=/\.([0-9])/,r=Y.lang;return n.test(t)?(i=t.match(o),i=i?i[1]:-1,null!==e&&(e=y(e,i,r.decimalPoint,t.indexOf(",")>-1?r.thousandsSep:""))):e=X(t,e),e}function x(t,e){for(var i,n,o,r,s,a,l,h="{",c=!1,u=[];-1!==(l=t.indexOf(h));){if(i=t.slice(0,l),c){for(n=i.split(":"),o=n.shift().split("."),s=o.length,a=e,r=0;s>r;r++)a=a[o[r]];n.length&&(a=w(n.join(":"),a)),u.push(a)}else u.push(i);t=t.slice(l+1),c=!c,h=c?"}":"{"}return u.push(t),u.join("")}function C(t){return me.pow(10,ve(me.log(t)/me.LN10))}function k(t,e,i,n){var o,r;for(i=f(i,1),o=t/i,e||(e=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),r=0;r<e.length&&(t=e[r],!(o<=(e[r]+(e[r+1]||e[r]))/2));r++);return t*=i}function S(){this.color=0,this.symbol=0}function T(t,e){var i,n,o=t.length;for(n=0;o>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;o>n;n++)delete t[n].ss_i}function P(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function E(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function D(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function L(t){V||(V=g($e)),t&&V.appendChild(t),V.innerHTML=""}function M(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;fe.console&&console.log(i)}function A(t){return parseFloat(t.toPrecision(14))}function R(t,e){Z=f(t,e.animation)}function O(){var t=Y.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";ee=6e4*(t&&Y.global.timezoneOffset||0),te=t?Date.UTC:function(t,e,i,n,o,r){return new Date(t,e,f(i,1),f(n,0),f(o,0),f(r,0)).getTime()},ie=e+"Minutes",ne=e+"Hours",oe=e+"Day",re=e+"Date",se=e+"Month",ae=e+"FullYear",le=i+"Minutes",he=i+"Hours",ce=i+"Date",ue=i+"Month",de=i+"FullYear"}function I(t){return Y=e(!0,Y,t),O(),Y}function N(){return Y}function j(){}function H(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function z(){this.init.apply(this,arguments)}function B(){this.init.apply(this,arguments)}function F(t,e,i,n,o){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=o,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:f(e.y,r?4:i?14:-6),x:f(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}function U(t){var e=t.options,i=e.navigator,n=i.enabled,o=e.scrollbar,r=o.enabled,s=n?i.height:0,a=r?o.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=s,this.scrollbarHeight=a,this.scrollbarEnabled=r,this.navigatorEnabled=n,this.navigatorOptions=i,this.scrollbarOptions=o,this.outlineHeight=s+a,this.init()}function W(t){this.init(t)}var $,G,q,V,Y,X,Z,K,Q,J,te,ee,ie,ne,oe,re,se,ae,le,he,ce,ue,de,pe=document,fe=window,me=Math,ge=me.round,ve=me.floor,ye=me.ceil,be=me.max,_e=me.min,we=me.abs,xe=me.cos,Ce=me.sin,ke=me.PI,Se=2*ke/360,Te=navigator.userAgent,Pe=fe.opera,Ee=/msie/i.test(Te)&&!Pe,De=8===pe.documentMode,Le=/AppleWebKit/.test(Te),Me=/Firefox/.test(Te),Ae=/(Mobile|Android|Windows Phone)/.test(Te),Re="http://www.w3.org/2000/svg",Oe=!!pe.createElementNS&&!!pe.createElementNS(Re,"svg").createSVGRect,Ie=Me&&parseInt(Te.split("Firefox/")[1],10)<4,Ne=!Oe&&!Ee&&!!pe.createElement("canvas").getContext,je={},He=0,ze=function(){},Be=[],Fe=0,Ue="@product.name@",We="@product.version@",$e="div",Ge="absolute",qe="relative",Ve="hidden",Ye="highcharts-",Xe="visible",Ze="px",Ke="none",Qe="M",Je="L",ti=/^[0-9]+$/,ei="",ii="hover",ni="select",oi="millisecond",ri="second",si="minute",ai="hour",li="day",hi="week",ci="month",ui="year",di="stroke-width",pi={},fi=fe.Highcharts=fe.Highcharts?M(16,!0):{};X=function(e,i,n){if(!u(i)||isNaN(i))return"Invalid date";e=f(e,"%Y-%m-%d %H:%M:%S");var o,r=new Date(i-ee),s=r[ne](),a=r[oe](),l=r[re](),h=r[se](),c=r[ae](),d=Y.lang,p=d.weekdays,m=t({a:p[a].substr(0,3),A:p[a],d:b(l),e:l,b:d.shortMonths[h],B:d.months[h],m:b(h+1),y:c.toString().substr(2,2),Y:c,H:b(s),I:b(s%12||12),l:s%12||12,M:b(r[ie]()),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:b(r.getSeconds()),L:b(ge(i%1e3),3)},fi.dateFormats);for(o in m)for(;-1!==e.indexOf("%"+o);)e=e.replace("%"+o,"function"==typeof m[o]?m[o](i):m[o]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},S.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},Q=i(oi,1,ri,1e3,si,6e4,ai,36e5,li,864e5,hi,6048e5,ci,26784e5,ui,31556952e3),K={init:function(t,e,i){e=e||"";var n,o,r,s,a,l=t.shift,h=e.indexOf("C")>-1,c=h?7:3,u=e.split(" "),d=[].concat(i),p=function(t){for(r=t.length;r--;)t[r]===Qe&&t.splice(r+1,0,t[r+1],t[r+2],t[r+1],t[r+2])};if(h&&(p(u),p(d)),t.isArea&&(s=u.splice(u.length-6,6),a=d.splice(d.length-6,6)),l<=d.length/c&&u.length===d.length)for(;l--;)d=[].concat(d).splice(0,c).concat(d);if(t.shift=0,u.length)for(n=d.length;u.length<n;)o=[].concat(u).splice(u.length-c,c),h&&(o[c-6]=o[c-2],o[c-5]=o[c-1]),u=u.concat(o);return s&&(u=u.concat(s),d=d.concat(a)),[u,d]},step:function(t,e,i,n){var o,r=[],s=t.length;if(1===i)r=n;else if(s===e.length&&1>i)for(;s--;)o=parseFloat(t[s]),r[s]=isNaN(o)?t[s]:i*parseFloat(e[s]-o)+o;else r=e;return r}},function(e){fe.HighchartsAdapter=fe.HighchartsAdapter||e&&{init:function(t){var i,n=e.fx,r=n.step,s=e.Tween,a=s&&s.propHooks,l=e.cssHooks.opacity;e.extend(e.easing,{easeOutQuad:function(t,e,i,n,o){return-n*(e/=o)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,e){var i,o=r;"cur"===e?o=n.prototype:"_default"===e&&s&&(o=a[e],e="set"),i=o[e],i&&(o[e]=function(n){var o;return n=t?n:this,"align"!==n.prop?(o=n.elem,o.attr?o.attr(n.prop,"cur"===e?$:n.now):i.apply(this,arguments)):void 0})}),_(l,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),i=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},s?a.d={set:i}:r.d=i,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i,n="Chart",r=arguments;return this[0]&&(o(r[0])&&(n=r[0],r=Array.prototype.slice.call(r,1)),t=r[0],t!==$&&(t.chart=t.chart||{},t.chart.renderTo=this[0],i=new fi[n](t,r[1]),e=this),t===$&&(e=Be[d(this[0],"data-highcharts-chart")])),e}},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var o=pe.removeEventListener?"removeEventListener":"detachEvent";pe[o]&&t&&!t[o]&&(t[o]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,o,r){var s,a=e.Event(n),l="detached"+n;!Ee&&o&&(delete o.layerX,delete o.layerY,delete o.returnValue),t(a,o),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),!r||a.isDefaultPrevented()||s||r(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===$&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var o=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),o.stop(),i.opacity!==$&&t.attr&&(i.opacity+="px"),o.animate(i,n)},stop:function(t){e(t).stop()}}}(fe.jQuery);var mi=fe.HighchartsAdapter,gi=mi||{};mi&&mi.init.call(mi,K);var vi=gi.adapterRun,yi=gi.getScript,bi=gi.inArray,_i=gi.each,wi=gi.grep,xi=gi.offset,Ci=gi.map,ki=gi.addEvent,Si=gi.removeEvent,Ti=gi.fireEvent,Pi=gi.washMouseEvent,Ei=gi.animate,Di=gi.stop,Li={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};Y={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8085e8","#8d4653","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com@product.cdnpath@/@product.version@/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com@product.cdnpath@/@product.version@/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Li,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Ge,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Ge,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:qe,top:"1em"},style:{position:Ge,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Oe,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ae?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Mi=Y.plotOptions,Ai=Mi.line;O();var Ri=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Oi=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Ii=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ni=function(t){function i(t){t&&t.stops?h=Ci(t.stops,function(t){return Ni(t[1])}):(l=Ri.exec(t),l?c=[n(l[1]),n(l[2]),n(l[3]),parseFloat(l[4],10)]:(l=Oi.exec(t),l?c=[n(l[1],16),n(l[2],16),n(l[3],16),1]:(l=Ii.exec(t),l&&(c=[n(l[1]),n(l[2]),n(l[3]),1]))))}function o(i){var n;return h?(n=e(t),n.stops=[].concat(n.stops),_i(h,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=c&&!isNaN(c[0])?"rgb"===i?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===i?c[3]:"rgba("+c.join(",")+")":t,n}function r(t){if(h)_i(h,function(e){e.brighten(t)});else if(a(t)&&0!==t){var e;for(e=0;3>e;e++)c[e]+=n(255*t),c[e]<0&&(c[e]=0),c[e]>255&&(c[e]=255)}return this}function s(t){return c[3]=t,this}var l,h,c=[];return i(t),{get:o,brighten:r,rgba:c,setOpacity:s}};j.prototype={init:function(t,e){var i=this;i.element="span"===e?g(e):pe.createElementNS(Re,e),i.renderer=t},opacity:1,animate:function(t,i,n){var o=f(i,Z,!0);Di(this),o?(o=e(o,{}),n&&(o.complete=n),Ei(this,t,o)):(this.attr(t),n&&n())},colorGradient:function(t,i,n){var o,r,a,l,h,c,d,p,f,m,g,v=this.renderer,y=[];if(t.linearGradient?r="linearGradient":t.radialGradient&&(r="radialGradient"),r){a=t[r],l=v.gradients,c=t.stops,f=n.radialReference,s(a)&&(t[r]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===r&&f&&!u(a.gradientUnits)&&(a=e(a,{cx:f[0]-f[2]/2+a.cx*f[2],cy:f[1]-f[2]/2+a.cy*f[2],r:a.r*f[2],gradientUnits:"userSpaceOnUse"}));for(m in a)"id"!==m&&y.push(m,a[m]);for(m in c)y.push(c[m]);y=y.join(","),l[y]?g=l[y].attr("id"):(a.id=g=Ye+He++,l[y]=h=v.createElement(r).attr(a).add(v.defs),h.stops=[],_i(c,function(t){var e;0===t[1].indexOf("rgba")?(o=Ni(t[1]),d=o.get("rgb"),p=o.get("a")):(d=t[1],p=1),e=v.createElement("stop").attr({offset:t[0],"stop-color":d,"stop-opacity":p}).add(h),h.stops.push(e)})),n.setAttribute(i,"url("+v.url+"#"+g+")")}},attr:function(t,e){var i,n,o,r,s=this.element,a=this;if("string"==typeof t&&e!==$&&(i=t,t={},t[i]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(i in t)n=t[i],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(o||(this.symbolAttr(t),o=!0),r=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),r||(this[i+"Setter"]||this._defaultSetter).call(this,n,i,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,n);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a},updateShadows:function(t,e){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(t,"height"===t?be(e-(i[n].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,i=d(e,"class")||"";return-1===i.indexOf(t)&&d(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;_i(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=f(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ke)},crisp:function(t){var e,i,n=this,o={},r=t.strokeWidth||n.strokeWidth||n.attr&&n.attr("stroke-width")||0;i=ge(r)%2/2,t.x=ve(t.x||n.x||0)+i,t.y=ve(t.y||n.y||0)+i,t.width=ve((t.width||n.width||0)-2*i),t.height=ve((t.height||n.height||0)-2*i),t.strokeWidth=r;for(e in t)n[e]!==t[e]&&(n[e]=o[e]=t[e]);return o},css:function(e){var i,o,r,s=this,a=s.styles,l={},h=s.element,c="",u=!a;if(e&&e.color&&(e.fill=e.color),a)for(o in e)e[o]!==a[o]&&(l[o]=e[o],u=!0);if(u){if(i=s.textWidth=e&&e.width&&"text"===h.nodeName.toLowerCase()&&n(e.width),a&&(e=t(a,l)),s.styles=e,i&&(Ne||!Oe&&s.renderer.forExport)&&delete e.width,Ee&&!Oe)m(s.element,e);else{r=function(t,e){return"-"+e.toLowerCase()};for(o in e)c+=o.replace(/([A-Z])/g,r)+":"+e[o]+";";d(h,"style",c)}i&&s.added&&s.renderer.buildText(s)}return s},on:function(t,e){var i=this,n=i.element;return q&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Te.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,o=e.scaleX,r=e.scaleY,s=e.inverted,a=e.rotation,l=e.element;s&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],s?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(l.getAttribute("x")||0)+" "+(l.getAttribute("y")||0)+")"),(u(o)||u(r))&&t.push("scale("+f(o,1)+" "+f(r,1)+")"),t.length&&l.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,r,s,a,l,h={},u=this.renderer,d=u.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||o(i))&&(this.alignTo=l=i||"renderer",c(d,this),d.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=f(i,u[l],u),n=t.align,r=t.verticalAlign,s=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),("right"===n||"center"===n)&&(s+=(i.width-(t.width||0))/{right:1,center:2}[n]),h[e?"translateX":"x"]=ge(s),("bottom"===r||"middle"===r)&&(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),h[e?"translateY":"y"]=ge(a),this[this.placed?"animate":"attr"](h),this.placed=!0,this.alignAttr=h,this},getBBox:function(){var e,i,n,o=this,r=o.bBox,s=o.renderer,a=o.rotation,l=o.element,h=o.styles,c=a*Se,u=o.textStr;if((""===u||ti.test(u))&&(n="num."+u.toString().length+(h?"|"+h.fontSize+"|"+h.fontFamily:"")),n&&(r=s.cache[n]),!r){if(l.namespaceURI===Re||s.forExport){try{r=l.getBBox?t({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight}}catch(d){}(!r||r.width<0)&&(r={width:0,height:0})}else r=o.htmlGetBBox();s.isSVG&&(e=r.width,i=r.height,Ee&&h&&"11px"===h.fontSize&&"16.9"===i.toPrecision(3)&&(r.height=i=14),a&&(r.width=we(i*Ce(c))+we(e*xe(c)),r.height=we(i*xe(c))+we(e*Ce(c)))),o.bBox=r,n&&(s.cache[n]=r)}return r},show:function(t){return t&&this.element.namespaceURI===Re?(this.element.removeAttribute("visibility"),this):this.attr({visibility:t?"inherit":Xe})},hide:function(){return this.attr({visibility:Ve})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,i,o,r,s,a=this.renderer,l=t||a,h=l.element||a.box,c=this.element,p=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&a.buildText(this),p&&(l.handleZ=!0,p=n(p)),l.handleZ)for(e=h.childNodes,r=0;r<e.length;r++)if(i=e[r],o=d(i,"zIndex"),i!==c&&(n(o)>p||!u(p)&&u(o))){h.insertBefore(c,i),s=!0;break}return s||h.appendChild(c),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,o=n.element||{},r=n.shadows,s=n.renderer.isSVG&&"SPAN"===o.nodeName&&n.parentGroup;if(o.onclick=o.onmouseout=o.onmouseover=o.onmousemove=o.point=null,Di(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(o),r&&_i(r,function(t){n.safeRemoveChild(t)});s&&0===s.div.childNodes.length;)t=s.parentGroup,n.safeRemoveChild(s.div),delete s.div,s=t;n.alignTo&&c(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(t,e,i){var n,o,r,s,a,l,h=[],c=this.element;if(t){for(s=f(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+f(t.offsetX,1)+", "+f(t.offsetY,1)+")",n=1;s>=n;n++)o=c.cloneNode(0),r=2*s+1-2*n,d(o,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":r,transform:"translate"+l,fill:Ke}),i&&(d(o,"height",be(d(o,"height")-r,0)),o.cutHeight=r),e?e.element.appendChild(o):c.parentNode.insertBefore(o,c),h.push(o);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=f(this[t],this.element?this.element.getAttribute(t):null,0);return/^[0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=n(t[e])*this.element.getAttribute("stroke-width");t=t.join(","),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},"stroke-widthSetter":function(t,e,i){0===t&&(t=1e-5),this.strokeWidth=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=pe.createElementNS(Re,"title"),this.element.appendChild(e)),e.textContent=t},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},zIndexSetter:function(t,e,i){i.setAttribute(e,t),this[e]=t},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},j.prototype.yGetter=j.prototype.xGetter,j.prototype.translateXSetter=j.prototype.translateYSetter=j.prototype.rotationSetter=j.prototype.verticalAlignSetter=j.prototype.scaleXSetter=j.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},j.prototype.strokeSetter=j.prototype.fillSetter;var ji=function(){this.init.apply(this,arguments)};ji.prototype={Element:j,init:function(t,e,i,n,o){var r,s,a,l=this,h=location;r=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n)),s=r.element,t.appendChild(s),-1===t.innerHTML.indexOf("xmlns")&&d(s,"xmlns",Re),l.isSVG=!0,l.box=s,l.boxWrapper=r,l.alignedObjects=[],l.url=(Me||Le)&&pe.getElementsByTagName("base").length?h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",a=this.createElement("desc").add(),a.element.appendChild(pe.createTextNode("Created with "+Ue+" "+We)),l.defs=this.createElement("defs").add(),l.forExport=o,l.gradients={},l.cache={},l.setSize(e,i,!1);var c,u;Me&&t.getBoundingClientRect&&(l.subPixelFix=c=function(){m(t,{left:0,top:0}),u=t.getBoundingClientRect(),m(t,{left:ye(u.left)-u.left+Ze,top:ye(u.top)-u.top+Ze})},c(),ki(fe,"resize",c))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),D(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.subPixelFix&&Si(fe,"resize",t.subPixelFix),t.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,i,o,r=t.element,s=this,a=s.forExport,l=f(t.textStr,"").toString(),h=-1!==l.indexOf("<"),c=r.childNodes,u=d(r,"x"),p=t.styles,g=t.textWidth,v=p&&p.lineHeight,y=c.length,b=function(t){return v?n(v):s.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:p&&p.fontSize||s.style.fontSize||12).h};y--;)r.removeChild(c[y]);return h||-1!==l.indexOf(" ")?(i=/<.*style="([^"]+)".*>/,o=/<.*href="(http[^"]+)".*>/,g&&!t.added&&this.box.appendChild(r),e=h?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],""===e[e.length-1]&&e.pop(),_i(e,function(e,n){var l,h=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=e.split("|||"),_i(l,function(e){if(""!==e||1===l.length){var c,f={},v=pe.createElementNS(Re,"tspan");if(i.test(e)&&(c=e.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),d(v,"style",c)),o.test(e)&&!a&&(d(v,"onclick",'location.href="'+e.match(o)[1]+'"'),m(v,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==e&&(v.appendChild(pe.createTextNode(e)),h?f.dx=0:n&&null!==u&&(f.x=u),d(v,f),!h&&n&&(!Oe&&a&&m(v,{display:"block"}),d(v,"dy",b(v),Le&&v.offsetHeight)),r.appendChild(v),h++,g))for(var y,_,w,x=e.replace(/([^\^])-/g,"$1- ").split(" "),C=x.length>1&&"nowrap"!==p.whiteSpace,k=t._clipHeight,S=[],T=b(),P=1;C&&(x.length||S.length);)delete t.bBox,w=t.getBBox(),_=w.width,!Oe&&s.forExport&&(_=s.measureSpanWidth(v.firstChild.data,t.styles)),y=_>g,y&&1!==x.length?(v.removeChild(v.firstChild),S.unshift(x.pop())):(x=S,S=[],x.length&&(P++,k&&P*T>k?(x=["..."],t.attr("title",t.textStr)):(v=pe.createElementNS(Re,"tspan"),d(v,{dy:T,x:u}),c&&d(v,"style",c),r.appendChild(v),_>g&&(g=_)))),x.length&&v.appendChild(pe.createTextNode(x.join(" ").replace(/- /g,"-")))}})}),void 0):void r.appendChild(pe.createTextNode(l))},button:function(i,n,o,r,s,a,l,h,c){var u,d,p,f,m,g,v=this.label(i,n,o,c,null,null,null,null,"button"),y=0,b={x1:0,y1:0,x2:0,y2:1};return s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:b,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s),p=s.style,delete s.style,a=e(s,{stroke:"#68A",fill:{linearGradient:b,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),f=a.style,delete a.style,l=e(s,{stroke:"#68A",fill:{linearGradient:b,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),m=l.style,delete l.style,h=e(s,{style:{color:"#CCC"}},h),g=h.style,delete h.style,ki(v.element,Ee?"mouseover":"mouseenter",function(){3!==y&&v.attr(a).css(f)}),ki(v.element,Ee?"mouseout":"mouseleave",function(){3!==y&&(u=[s,a,l][y],d=[p,f,m][y],v.attr(u).css(d))}),v.setState=function(t){v.state=y=t,t?2===t?v.attr(l).css(m):3===t&&v.attr(h).css(g):v.attr(s).css(p)},v.on("click",function(){3!==y&&r.call(v)}).attr(s).css(t({cursor:"default"},p))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=ge(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=ge(t[2])+e%2/2),t},path:function(e){var i={fill:Ke};return s(e)?i.d=e:r(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){var n=r(t)?t:{x:t,y:e,r:i},o=this.createElement("circle");return o.xSetter=function(t){this.element.setAttribute("cx",t)},o.ySetter=function(t){this.element.setAttribute("cy",t)},o.attr(n)},arc:function(t,e,i,n,o,s){var a;return r(t)&&(e=t.y,i=t.r,n=t.innerR,o=t.start,s=t.end,t=t.x),a=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:o||0,end:s||0}),a.r=i,a},rect:function(t,e,i,n,o,s){o=r(t)?t.r:o;var a=this.createElement("rect"),l=r(t)?t:t===$?{}:{x:t,y:e,width:be(i,0),height:be(n,0)};return s!==$&&(l.strokeWidth=s,l=a.crisp(l)),o&&(l.r=o),a.rSetter=function(t){d(this.element,{rx:t,ry:t})},a.attr(l)},setSize:function(t,e,i){var n=this,o=n.alignedObjects,r=o.length;for(n.width=t,n.height=e,n.boxWrapper[f(i,!0)?"animate":"attr"]({width:t,height:e});r--;)o[r].align()},g:function(t){var e=this.createElement("g");return u(t)?e.attr({"class":Ye+t}):e},image:function(e,i,n,o,r){var s,a={preserveAspectRatio:Ke};return arguments.length>1&&t(a,{x:i,y:n,width:o,height:r}),s=this.createElement("image").attr(a),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,i,n,o,r,s){var a,l,h,c,u,d=this.symbols[e],p=d&&d(ge(i),ge(n),o,r,s),f=/^url\((.*?)\)$/;return p?(a=this.path(p),t(a,{symbolName:e,x:i,y:n,width:o,height:r}),s&&t(a,s)):f.test(e)&&(u=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(ge((o-e[0])/2),ge((r-e[1])/2)))},h=e.match(f)[1],c=je[h],a=this.image(h).attr({x:i,y:n}),a.isImg=!0,c?u(a,c):(a.attr({width:0,height:0}),l=g("img",{onload:function(){u(a,je[h]=[this.width,this.height])},src:h}))),a},symbols:{circle:function(t,e,i,n){var o=.166*i;return[Qe,t+i/2,e,"C",t+i+o,e,t+i+o,e+n,t+i/2,e+n,"C",t-o,e+n,t-o,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[Qe,t,e,Je,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[Qe,t+i/2,e,Je,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[Qe,t,e,Je,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[Qe,t+i/2,e,Je,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,o){var r=o.start,s=o.r||i||n,a=o.end-.001,l=o.innerR,h=o.open,c=xe(r),u=Ce(r),d=xe(a),p=Ce(a),f=o.end-r<ke?0:1;return[Qe,t+s*c,e+s*u,"A",s,s,0,f,1,t+s*d,e+s*p,h?Qe:Je,t+l*d,e+l*p,"A",l,l,0,f,0,t+l*c,e+l*u,h?"":"Z"]},callout:function(t,e,i,n,o){var r,s=6,a=6,l=_e(o&&o.r||0,i,n),h=l+a,c=o&&o.anchorX,u=o&&o.anchorY,d=ge(o.strokeWidth||0)%2/2;return t+=d,e+=d,r=["M",t+l,e,"L",t+i-l,e,"C",t+i,e,t+i,e,t+i,e+l,"L",t+i,e+n-l,"C",t+i,e+n,t+i,e+n,t+i-l,e+n,"L",t+l,e+n,"C",t,e+n,t,e+n,t,e+n-l,"L",t,e+l,"C",t,e,t,e,t+l,e],c&&c>i&&u>e+h&&e+n-h>u?r.splice(13,3,"L",t+i,u-a,t+i+s,u,t+i,u+a,t+i,e+n-l):c&&0>c&&u>e+h&&e+n-h>u?r.splice(33,3,"L",t,u+a,t-s,u,t,u-a,t,e+l):u&&u>n&&c>t+h&&t+i-h>c?r.splice(23,3,"L",c+a,e+n,c,e+n+s,c-a,e+n,t+l,e+n):u&&0>u&&c>t+h&&t+i-h>c&&r.splice(3,3,"L",c-a,e,c,e-s,c+a,e,i-l,e),r}},clipRect:function(t,e,i,n){var o,r=Ye+He++,s=this.createElement("clipPath").attr({id:r}).add(this.defs);return o=this.rect(t,e,i,n,0).add(s),o.id=r,o.clipPath=s,o},text:function(t,e,i,n){var o,r=this,s=Ne||!Oe&&r.forExport,a={};return n&&!r.forExport?r.html(t,e,i):(a.x=Math.round(e||0),i&&(a.y=Math.round(i)),(t||0===t)&&(a.text=t),o=r.createElement("text").attr(a),s&&o.css({position:Ge}),n||(o.xSetter=function(t,e,i){var n,o,r=i.childNodes;for(o=1;o<r.length;o++)n=r[o],n.getAttribute("x")===i.getAttribute("x")&&n.setAttribute("x",t);i.setAttribute(e,t)}),o)},fontMetrics:function(t){t=t||this.style.fontSize,t=/px/.test(t)?n(t):/em/.test(t)?12*parseFloat(t):12;var e=24>t?t+4:ge(1.2*t),i=ge(.8*e);return{h:e,b:i}},label:function(i,n,o,r,s,a,l,h,c){function d(){var e,i,n=S.element.style;g=(void 0===v||void 0===y||k.styles.textAlign)&&S.textStr&&S.getBBox(),k.width=(v||g.width||0)+2*P+E,k.height=(y||g.height||0)+2*P,w=P+C.fontMetrics(n&&n.fontSize).b,x&&(m||(e=ge(-T*P),i=h?-w:0,k.box=m=r?C.symbol(r,e,i,k.width,k.height,L):C.rect(e,i,k.width,k.height,0,L[di]),m.attr("fill",Ke).add(k)),m.isImg||m.attr(t({width:ge(k.width),height:ge(k.height)},L)),L=null)}function p(){var t,e=k.styles,i=e&&e.textAlign,n=E+P*(1-T);t=h?0:w,u(v)&&g&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(v-g.width)),(n!==S.x||t!==S.y)&&(S.attr("x",n),t!==$&&S.attr("y",t)),S.x=n,S.y=t}function f(t,e){m?m.attr(t,e):L[t]=e}var m,g,v,y,b,_,w,x,C=this,k=C.g(c),S=C.text("",0,0,l).attr({zIndex:1}),T=0,P=3,E=0,D=0,L={};k.onAdd=function(){S.add(k),k.attr({text:i||"",x:n,y:o}),m&&u(s)&&k.attr({anchorX:s,anchorY:a})
},k.widthSetter=function(t){v=t},k.heightSetter=function(t){y=t},k.paddingSetter=function(t){u(t)&&t!==P&&(P=t,p())},k.paddingLeftSetter=function(t){u(t)&&t!==E&&(E=t,p())},k.alignSetter=function(t){T={left:0,center:.5,right:1}[t]},k.textSetter=function(t){t!==$&&S.textSetter(t),d(),p()},k["stroke-widthSetter"]=function(t,e){t&&(x=!0),D=t%2/2,f(e,t)},k.strokeSetter=k.fillSetter=k.rSetter=function(t,e){"fill"===e&&t&&(x=!0),f(e,t)},k.anchorXSetter=function(t,e){s=t,f(e,t+D-b)},k.anchorYSetter=function(t,e){a=t,f(e,t-_)},k.xSetter=function(t){k.x=t,T&&(t-=T*((v||g.width)+P)),b=ge(t),k.attr("translateX",b)},k.ySetter=function(t){_=k.y=ge(t),k.attr("translateY",_)};var M=k.css;return t(k,{css:function(t){if(t){var i={};t=e(t),_i(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],function(e){t[e]!==$&&(i[e]=t[e],delete t[e])}),S.css(i)}return M.call(k,t)},getBBox:function(){return{width:g.width+2*P,height:g.height+2*P,x:g.x-P,y:g.y-P}},shadow:function(t){return m&&m.shadow(t),k},destroy:function(){Si(k.element,"mouseenter"),Si(k.element,"mouseleave"),S&&(S=S.destroy()),m&&(m=m.destroy()),j.prototype.destroy.call(k),k=C=d=p=f=null}})}},G=ji,t(j.prototype,{htmlCss:function(e){var i=this,n=i.element,o=e&&"SPAN"===n.tagName&&e.width;return o&&(delete e.width,i.textWidth=o,i.updateTransform()),i.styles=t(i.styles,e),m(i.element,e),i},htmlGetBBox:function(){var t=this,e=t.element,i=t.bBox;return i||("text"===e.nodeName&&(e.style.position=Ge),i=t.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),i},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var t=this,e=t.renderer,i=t.element,o=t.translateX||0,r=t.translateY||0,s=t.x||0,a=t.y||0,l=t.textAlign||"left",h={left:0,center:.5,right:1}[l],c=t.shadows;if(m(i,{marginLeft:o,marginTop:r}),c&&_i(c,function(t){m(t,{marginLeft:o+1,marginTop:r+1})}),t.inverted&&_i(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName){var d,p,g=t.rotation,v=n(t.textWidth),y=[g,l,i.innerHTML,t.textWidth].join(",");y!==t.cTT&&(p=e.fontMetrics(i.style.fontSize).b,u(g)&&t.setSpanRotation(g,h,p),d=f(t.elemWidth,i.offsetWidth),d>v&&/[ \-]/.test(i.textContent||i.innerText)&&(m(i,{width:v+Ze,display:"block",whiteSpace:"normal"}),d=v),t.getSpanCorrection(d,p,h,g,l)),m(i,{left:s+(t.xCorr||0)+Ze,top:a+(t.yCorr||0)+Ze}),Le&&(p=i.offsetHeight),t.cTT=y}},setSpanRotation:function(t,e,i){var n={},o=Ee?"-ms-transform":Le?"-webkit-transform":Me?"MozTransform":Pe?"-o-transform":"";n[o]=n.transform="rotate("+t+"deg)",n[o+(Me?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",m(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),t(ji.prototype,{html:function(e,i,n){var o=this.createElement("span"),r=o.element,s=o.renderer;return o.textSetter=function(t){t!==r.innerHTML&&delete this.bBox,r.innerHTML=this.textStr=t},o.xSetter=o.ySetter=o.alignSetter=o.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),o[e]=t,o.htmlUpdateTransform()},o.attr({text:e,x:ge(i),y:ge(n)}).css({position:Ge,whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),o.css=o.htmlCss,s.isSVG&&(o.add=function(e){var i,n,a=s.box.parentNode,l=[];if(this.parentGroup=e,e){if(i=e.div,!i){for(n=e;n;)l.push(n),n=n.parentGroup;_i(l.reverse(),function(e){var n;i=e.div=e.div||g($e,{className:d(e.element,"class")},{position:Ge,left:(e.translateX||0)+Ze,top:(e.translateY||0)+Ze},i||a),n=i.style,t(e,{translateXSetter:function(t,i){n.left=t+Ze,e[i]=t,e.doTransform=!0},translateYSetter:function(t,i){n.top=t+Ze,e[i]=t,e.doTransform=!0},visibilitySetter:function(t,e){n[e]=t}})})}}else i=a;return i.appendChild(r),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o}});var Hi,zi;if(!Oe&&!Ne){fi.VMLElement=zi={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],o=["position: ",Ge,";"],r=e===$e;("shape"===e||r)&&o.push("left:0;top:0;width:1px;height:1px;"),o.push("visibility: ",r?Ve:Xe),n.push(' style="',o.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=g(n)),i.renderer=t},add:function(t){var e=this,i=e.renderer,n=e.element,o=i.box,r=t&&t.inverted,s=t?t.element||t:o;return r&&i.invertChild(n,s),s.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),e.onAdd&&e.onAdd(),e},updateTransform:j.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=xe(t*Se),i=Ce(t*Se);m(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Ke})},getSpanCorrection:function(t,e,i,n,o){var r,s=n?xe(n*Se):1,a=n?Ce(n*Se):0,l=f(this.elemHeight,this.element.offsetHeight),h=o&&"left"!==o;this.xCorr=0>s&&-t,this.yCorr=0>a&&-l,r=0>s*a,this.xCorr+=a*e*(r?1-i:i),this.yCorr-=s*e*(n?r?i:1-i:1),h&&(this.xCorr-=t*i*(0>s?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),m(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)a(t[e])?i[e]=ge(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i,n=this;return t?(e=t.members,c(e,n),e.push(n),n.destroyClip=function(){c(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:De?"inherit":"rect(auto)"}),n.css(i)},css:j.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&L(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),j.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=fe.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return t=t.split(/[ ,]/),i=t.length,(9===i||11===i)&&(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var o,r,s,a,l,h,c,u=[],d=this.element,p=this.renderer,m=d.style,v=d.path;if(v&&"string"!=typeof v.value&&(v="x"),l=v,t){for(h=f(t.width,3),c=(t.opacity||.15)/h,o=1;3>=o;o++)a=2*h+1-2*o,i&&(l=this.cutOffPath(v.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],r=g(p.prepVML(s),null,{left:n(m.left)+f(t.offsetX,1),top:n(m.top)+f(t.offsetY,1)}),i&&(r.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',c*o,'"/>'],g(p.prepVML(s),null,null,r),e?e.element.appendChild(r):d.parentNode.insertBefore(r,d),u.push(r);this.shadows=u}return this},updateShadows:ze,setAttr:function(t,e){De?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){var n=i.getElementsByTagName("stroke")[0]||g(this.renderer.prepVML(["<stroke/>"]),null,null,i);n[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n,o=this.shadows;if(t=t||[],this.d=t.join(" "),i.path=t=this.pathToVML(t),o)for(n=o.length;n--;)o[n].path=o[n].cutOff?this.cutOffPath(t,o[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==Ke,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},opacitySetter:ze,rotationSetter:function(t,e,i){var n=i.style;this[e]=n[e]=t,n.left=-ge(Ce(t*Se)+1)+Ze,n.top=ge(xe(t*Se))+Ze},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,a(t)&&(t+=Ze),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t=Xe),this.shadows&&_i(this.shadows,function(i){i.style[e]=t}),"DIV"===i.nodeName&&(t=t===Ve?"-999em":0,De||(i.style[e]=t?Xe:Ve),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},zi=v(j,zi),zi.prototype.ySetter=zi.prototype.widthSetter=zi.prototype.heightSetter=zi.prototype.xSetter;var Bi={Element:zi,isIE8:Te.indexOf("MSIE 8.0")>-1,init:function(e,i,n,o){var r,s,a,l=this;if(l.alignedObjects=[],r=l.createElement($e).css(t(this.getStyle(o),{position:qe})),s=r.element,e.appendChild(r.element),l.isVML=!0,l.box=s,l.boxWrapper=r,l.cache={},l.setSize(i,n,!1),!pe.namespaces.hcv){pe.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{pe.createStyleSheet().cssText=a}catch(h){pe.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,o){var s=this.createElement(),a=r(e);return t(s,{members:[],left:(a?e.x:e)+1,top:(a?e.y:i)+1,width:(a?e.width:n)-1,height:(a?e.height:o)-1,getCSS:function(e){var i=e.element,n=i.nodeName,o="shape"===n,r=e.inverted,s=this,a=s.top-(o?i.offsetTop:0),l=s.left,h=l+s.width,c=a+s.height,u={clip:"rect("+ge(r?l:a)+"px,"+ge(r?c:h)+"px,"+ge(r?h:c)+"px,"+ge(r?a:l)+"px)"};return!r&&De&&"DIV"===n&&t(u,{width:h+Ze,height:c+Ze}),u},updateClipping:function(){_i(s.members,function(t){t.element&&t.css(s.getCSS(t))})}})},color:function(t,e,i,n){var o,r,s,a=this,l=/^rgba/,h=Ke;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var c,u,d,p,f,m,v,y,b,_,w,x,C=t.linearGradient||t.radialGradient,k="",S=t.stops,T=[],P=function(){r=['<fill colors="'+T.join(",")+'" opacity="',y,'" o:opacity2="',v,'" type="',s,'" ',k,'focus="100%" method="any" />'],g(a.prepVML(r),null,null,e)};if(w=S[0],x=S[S.length-1],w[0]>0&&S.unshift([0,w[1]]),x[0]<1&&S.push([1,x[1]]),_i(S,function(t,e){l.test(t[1])?(o=Ni(t[1]),c=o.get("rgb"),u=o.get("a")):(c=t[1],u=1),T.push(100*t[0]+"% "+c),e?(y=u,b=c):(v=u,_=c)}),"fill"===i)if("gradient"===s)d=C.x1||C[0]||0,p=C.y1||C[1]||0,f=C.x2||C[2]||0,m=C.y2||C[3]||0,k='angle="'+(90-180*me.atan((m-p)/(f-d))/ke)+'"',P();else{var E,D=C.r,L=2*D,M=2*D,A=C.cx,R=C.cy,O=e.radialReference,I=function(){O&&(E=n.getBBox(),A+=(O[0]-E.x)/E.width-.5,R+=(O[1]-E.y)/E.height-.5,L*=O[2]/E.width,M*=O[2]/E.height),k='src="'+Y.global.VMLRadialGradientURL+'" size="'+L+","+M+'" origin="0.5,0.5" position="'+A+","+R+'" color2="'+_+'" ',P()};n.added?I():n.onAdd=I,h=b}else h=c}else if(l.test(t)&&"IMG"!==e.tagName)o=Ni(t),r=["<",i,' opacity="',o.get("a"),'"/>'],g(this.prepVML(r),null,null,e),h=o.get("rgb");else{var N=e.getElementsByTagName(i);N.length&&(N[0].opacity=1,N[0].type="solid"),h=t}return h},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),i?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)):t=t.replace("<","<hcv:"),t},text:ji.prototype.html,path:function(e){var i={coordsize:"10 10"};return s(e)?i.d=e:r(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return r(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e,i;return t&&(i={className:Ye+t,"class":Ye+t}),e=this.createElement($e).attr(i)},image:function(t,e,i,n,o){var r=this.createElement("img").attr({src:t});return arguments.length>1&&r.attr({x:e,y:i,width:n,height:o}),r},createElement:function(t){return"rect"===t?this.symbol(t):ji.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,o=e.style,r="IMG"===t.tagName&&t.style;m(t,{flip:"x",left:n(o.width)-(r?n(r.top):1),top:n(o.height)-(r?n(r.left):1),rotation:-90}),_i(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,o){var r,s=o.start,a=o.end,l=o.r||i||n,h=o.innerR,c=xe(s),u=Ce(s),d=xe(a),p=Ce(a);return a-s===0?["x"]:(r=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*u,t+l*d,e+l*p],o.open&&!h&&r.push("e",Qe,t,e),r.push("at",t-h,e-h,t+h,e+h,t+h*d,e+h*p,t+h*c,e+h*u,"x","e"),r.isArc=!0,r)},circle:function(t,e,i,n,o){return o&&(i=n=2*o.r),o&&o.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,o){return ji.prototype.symbols[u(o)&&o.r?"callout":"square"].call(0,t,e,i,n,o)}}};fi.VMLRenderer=Hi=function(){this.init.apply(this,arguments)},Hi.prototype=e(ji.prototype,Bi),G=Hi}ji.prototype.measureSpanWidth=function(t,e){var i,n=pe.createElement("span"),o=pe.createTextNode(t);return n.appendChild(o),m(n,e),this.box.appendChild(n),i=n.offsetWidth,L(n),i};var Fi,Ui;Ne&&(fi.CanVGRenderer=Fi=function(){Re="http://www.w3.org/1999/xhtml"},Fi.prototype.symbols={},Ui=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&yi(n,t),e.push(i)}}}(),G=Fi),H.prototype={addLabel:function(){var e,i,n,o,r=this,s=r.axis,l=s.options,c=s.chart,d=s.horiz,p=s.categories,m=s.names,g=r.pos,v=l.labels,y=s.tickPositions,b=d&&p&&!v.step&&!v.staggerLines&&!v.rotation&&c.plotWidth/y.length||!d&&(c.margin[3]||.33*c.chartWidth),_=g===y[0],w=g===y[y.length-1],x=p?f(p[g],m[g],g):g,C=r.label,k=y.info;s.isDatetimeAxis&&k&&(o=l.dateTimeLabelFormats[k.higherRanks[g]||k.unitName]),r.isFirst=_,r.isLast=w,e=s.labelFormatter.call({axis:s,chart:c,isFirst:_,isLast:w,dateTimeLabelFormat:o,value:s.isLog?A(h(x)):x}),i=b&&{width:be(1,ge(b-2*(v.padding||10)))+Ze},i=t(i,v.style),u(C)?C&&C.attr({text:e}).css(i):(n={align:s.labelAlign},a(v.rotation)&&(n.rotation=v.rotation),b&&v.ellipsis&&(n._clipHeight=s.len/y.length),r.label=u(e)&&v.enabled?c.renderer.text(e,0,0,v.useHTML).attr(n).css(i).add(s.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,i=e.horiz,n=e.options,o=n.labels,r=i?t.width:t.height,s=i?o.x-r*{left:0,center:.5,right:1}[e.labelAlign]:0,a=i?r+s:r;return[s,a]},handleOverflow:function(t,e){var i,n,o,r,s,a=!0,l=this.axis,h=this.isFirst,c=this.isLast,u=l.horiz,d=u?e.x:e.y,p=l.reversed,f=l.tickPositions,m=this.getLabelSides(),g=m[0],v=m[1],y=this.label.line||0,b=l.labelEdge,_=l.justifyLabels&&(h||c);if(b[y]===$||d+g>b[y]?b[y]=d+v:_||(a=!1),_){s=l.justifyToPlot,i=s?l.pos:0,n=s?i+l.len:l.chart.chartWidth;do t+=h?1:-1,o=l.ticks[f[t]];while(f[t]&&(!o||o.label.line!==y));r=o&&o.label.xy&&o.label.xy.x+o.getLabelSides()[h?0:1],h&&!p||c&&p?i>d+g&&(d=i-g,o&&d+v>r&&(a=!1)):d+v>n&&(d=n-v,o&&r>d+g&&(a=!1)),e.x=d}return a},getPosition:function(t,e,i,n){var o=this.axis,r=o.chart,s=n&&r.oldChartHeight||r.chartHeight;return{x:t?o.translate(e+i,null,null,n)+o.transB:o.left+o.offset+(o.opposite?(n&&r.oldChartWidth||r.chartWidth)-o.right-o.left:0),y:t?s-o.bottom+o.offset-(o.opposite?o.height:0):s-o.translate(e+i,null,null,n)-o.transB}},getLabelPosition:function(t,e,i,n,o,r,s,a){var l=this.axis,h=l.transA,c=l.reversed,d=l.staggerLines,p=l.chart.renderer.fontMetrics(o.style.fontSize).b,f=o.rotation;return t=t+o.x-(r&&n?r*h*(c?-1:1):0),e=e+o.y-(r&&!n?r*h*(c?1:-1):0),f&&2===l.side&&(e-=p-p*xe(f*Se)),u(o.y)||f||(e+=p-i.getBBox().height/2),d&&(i.line=s/(a||1)%d,e+=i.line*(l.labelOffset/d)),{x:t,y:e}},getMarkPath:function(t,e,i,n,o,r){return r.crispLine([Qe,t,e,Je,t+(o?0:-i),e+(o?i:0)],n)},render:function(t,e,i){var n,o,r,s=this,a=s.axis,l=a.options,h=a.chart,c=h.renderer,u=a.horiz,d=s.type,p=s.label,m=s.pos,g=l.labels,v=s.gridLine,y=d?d+"Grid":"grid",b=d?d+"Tick":"tick",_=l[y+"LineWidth"],w=l[y+"LineColor"],x=l[y+"LineDashStyle"],C=l[b+"Length"],k=l[b+"Width"]||0,S=l[b+"Color"],T=l[b+"Position"],P=s.mark,E=g.step,D=!0,L=a.tickmarkOffset,M=s.getPosition(u,m,L,e),A=M.x,R=M.y,O=u&&A===a.pos+a.len||!u&&R===a.pos?-1:1;this.isActive=!0,_&&(n=a.getPlotLinePath(m+L,_*O,e,!0),v===$&&(r={stroke:w,"stroke-width":_},x&&(r.dashstyle=x),d||(r.zIndex=1),e&&(r.opacity=0),s.gridLine=v=_?c.path(n).attr(r).add(a.gridGroup):null),!e&&v&&n&&v[s.isNew?"attr":"animate"]({d:n,opacity:i})),k&&C&&("inside"===T&&(C=-C),a.opposite&&(C=-C),o=s.getMarkPath(A,R,C,k*O,u,c),P?P.animate({d:o,opacity:i}):s.mark=c.path(o).attr({stroke:S,"stroke-width":k,opacity:i}).add(a.axisGroup)),p&&!isNaN(A)&&(p.xy=M=s.getLabelPosition(A,R,p,u,g,L,t,E),s.isFirst&&!s.isLast&&!f(l.showFirstLabel,1)||s.isLast&&!s.isFirst&&!f(l.showLastLabel,1)?D=!1:a.isRadial||g.step||g.rotation||e||0===i||(D=s.handleOverflow(t,M)),E&&t%E&&(D=!1),D&&!isNaN(M.y)?(M.opacity=i,p[s.isNew?"attr":"animate"](M),s.isNew=!1):p.attr("y",-9999))},destroy:function(){D(this,this.axis)}},z.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Li,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:Li.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:20},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e);var o=this.options,r=o.type,s="datetime"===r;n.labelFormatter=o.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.chart=t,n.reversed=o.reversed,n.zoomEnabled=o.zoomEnabled!==!1,n.categories=o.categories||"category"===r,n.names=[],n.isLog="logarithmic"===r,n.isDatetimeAxis=s,n.isLinked=u(o.linkedTo),n.tickmarkOffset=n.categories&&"between"===o.tickmarkPlacement?.5:0,n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=o.minRange||o.maxZoom,n.range=o.range,n.offset=o.offset||0,n.stacks={},n.oldStacks={},n.max=null,n.min=null,n.crosshair=f(o.crosshair,p(t.options.tooltip.crosshairs)[i?0:1],!1);var a,c=n.options.events;-1===bi(n,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===$&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(a in c)ki(n,a,c[a]);n.isLog&&(n.val2lin=l,n.lin2val=h)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(Y[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,o=i.categories,r=this.dateTimeLabelFormat,s=Y.lang.numericSymbols,a=s&&s.length,l=i.options.labels.format,h=i.isLog?n:i.tickInterval;if(l)e=x(l,this);else if(o)e=n;else if(r)e=X(r,n);else if(a&&h>=1e3)for(;a--&&e===$;)t=Math.pow(1e3,a+1),h>=t&&null!==s[a]&&(e=y(n/t,-1)+s[a]);return e===$&&(e=we(n)>=1e4?y(n,0):y(n,-1,$,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,t.buildStacks&&t.buildStacks(),_i(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,o,r,s=i.options,a=s.threshold;t.hasVisibleSeries=!0,t.isLog&&0>=a&&(a=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=_e(f(t.dataMin,n[0]),P(n)),t.dataMax=be(f(t.dataMax,n[0]),E(n)))):(i.getExtremes(),r=i.dataMax,o=i.dataMin,u(o)&&u(r)&&(t.dataMin=_e(f(t.dataMin,o),o),t.dataMax=be(f(t.dataMax,r),r)),u(a)&&(t.dataMin>=a?(t.dataMin=a,t.ignoreMinPadding=!0):t.dataMax<a&&(t.dataMax=a,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,i,n,o,r){var s,l=this,h=1,c=0,u=n?l.oldTransA:l.transA,d=n?l.oldMin:l.min,p=l.minPixelPadding,f=(l.options.ordinal||l.isLog&&o)&&l.lin2val;return u||(u=l.transA),i&&(h*=-1,c=l.len),l.reversed&&(h*=-1,c-=h*(l.sector||l.len)),e?(t=t*h+c,t-=p,s=t/u+d,f&&(s=l.lin2val(s))):(f&&(t=l.val2lin(t)),"between"===r&&(r=.5),s=h*(t-d)*u+c+h*p+(a(r)?u*r*l.pointRange:0)),s},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,o){var r,s,a,l,h,c=this,u=c.chart,d=c.left,p=c.top,m=i&&u.oldChartHeight||u.chartHeight,g=i&&u.oldChartWidth||u.chartWidth,v=c.transB;return o=f(o,c.translate(t,null,null,i)),r=a=ge(o+v),s=l=ge(m-o-v),isNaN(o)?h=!0:c.horiz?(s=p,l=m-c.bottom,(d>r||r>d+c.width)&&(h=!0)):(r=d,a=g-c.right,(p>s||s>p+c.height)&&(h=!0)),h&&!n?null:u.renderer.crispLine([Qe,r,s,Je,a,l],e||1)},getLinearTickPositions:function(t,e,i){var n,o,r=A(ve(e/t)*t),s=A(ye(i/t)*t),l=[];if(e===i&&a(e))return[e];for(n=r;s>=n&&(l.push(n),n=A(n+t),n!==o);)o=n;return l},getMinorTickPositions:function(){var t,e,i,n=this,o=n.options,r=n.tickPositions,s=n.minorTickInterval,a=[];if(n.isLog)for(i=r.length,e=1;i>e;e++)a=a.concat(n.getLogTickPositions(s,r[e-1],r[e],!0));else if(n.isDatetimeAxis&&"auto"===o.minorTickInterval)a=a.concat(n.getTimeTicks(n.normalizeTimeTickInterval(s),n.min,n.max,o.startOfWeek)),a[0]<n.min&&a.shift();else for(t=n.min+(r[0]-n.min)%s;t<=n.max;t+=s)a.push(t);return a},adjustForMinRange:function(){var t,e,i,n,o,r,s,a,l=this,h=l.options,c=l.min,d=l.max,p=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===$&&!l.isLog&&(u(h.min)||u(h.max)?l.minRange=null:(_i(l.series,function(t){for(o=t.xData,r=t.xIncrement?1:o.length-1,i=r;i>0;i--)n=o[i]-o[i-1],(e===$||e>n)&&(e=n)}),l.minRange=_e(5*e,l.dataMax-l.dataMin))),d-c<l.minRange){var m=l.minRange;t=(m-d+c)/2,s=[c-t,f(h.min,c-t)],p&&(s[2]=l.dataMin),c=E(s),a=[c+m,f(h.max,c+m)],p&&(a[2]=l.dataMax),d=P(a),m>d-c&&(s[0]=d-m,s[1]=f(h.min,d-m),c=E(s))}l.min=c,l.max=d},setAxisTranslation:function(t){var e,i,n=this,r=n.max-n.min,s=n.axisPointRange||0,a=0,l=0,h=n.linkedParent,c=!!n.categories,d=n.transA;(n.isXAxis||c||s)&&(h?(a=h.minPointOffset,l=h.pointRangePadding):_i(n.series,function(t){var i=c?1:n.isXAxis?t.pointRange:n.axisPointRange||0,h=t.options.pointPlacement,d=t.closestPointRange;i>r&&(i=0),s=be(s,i),a=be(a,o(h)?0:i/2),l=be(l,"on"===h?0:i),!t.noSharedTooltip&&u(d)&&(e=u(e)?_e(e,d):d)}),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=a*=i,n.pointRangePadding=l*=i,n.pointRange=_e(s,r),n.closestPointRange=e),t&&(n.oldTransA=d),n.translationSlope=n.transA=d=n.len/(r+l||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=d*a},setTickPositions:function(t){var e,i,n,o,r=this,s=r.chart,h=r.options,c=r.isLog,d=r.isDatetimeAxis,p=r.isXAxis,m=r.isLinked,g=r.options.tickPositioner,v=h.maxPadding,y=h.minPadding,b=h.tickInterval,_=h.minTickInterval,w=h.tickPixelInterval,x=r.categories;if(m?(r.linkedParent=s[r.coll][h.linkedTo],i=r.linkedParent.getExtremes(),r.min=f(i.min,i.dataMin),r.max=f(i.max,i.dataMax),h.type!==r.linkedParent.options.type&&M(11,1)):(r.min=f(r.userMin,h.min,r.dataMin),r.max=f(r.userMax,h.max,r.dataMax)),c&&(!t&&_e(r.min,f(r.dataMin,r.min))<=0&&M(10,1),r.min=A(l(r.min)),r.max=A(l(r.max))),r.range&&u(r.max)&&(r.userMin=r.min=be(r.min,r.max-r.range),r.userMax=r.max,r.range=null),r.beforePadding&&r.beforePadding(),r.adjustForMinRange(),x||r.axisPointRange||r.usePercentage||m||!u(r.min)||!u(r.max)||(e=r.max-r.min,e&&(u(h.min)||u(r.userMin)||!y||!(r.dataMin<0)&&r.ignoreMinPadding||(r.min-=e*y),u(h.max)||u(r.userMax)||!v||!(r.dataMax>0)&&r.ignoreMaxPadding||(r.max+=e*v))),a(h.floor)&&(r.min=be(r.min,h.floor)),a(h.ceiling)&&(r.max=_e(r.max,h.ceiling)),r.min===r.max||void 0===r.min||void 0===r.max?r.tickInterval=1:m&&!b&&w===r.linkedParent.options.tickPixelInterval?r.tickInterval=r.linkedParent.tickInterval:(r.tickInterval=f(b,x?1:(r.max-r.min)*w/be(r.len,w)),!u(b)&&r.len<w&&!this.isRadial&&!this.isLog&&!x&&h.startOnTick&&h.endOnTick&&(o=!0,r.tickInterval/=4)),p&&!t&&_i(r.series,function(t){t.processData(r.min!==r.oldMin||r.max!==r.oldMax)}),r.setAxisTranslation(!0),r.beforeSetTickPositions&&r.beforeSetTickPositions(),r.postProcessTickInterval&&(r.tickInterval=r.postProcessTickInterval(r.tickInterval)),r.pointRange&&(r.tickInterval=be(r.pointRange,r.tickInterval)),!b&&r.tickInterval<_&&(r.tickInterval=_),d||c||b||(r.tickInterval=k(r.tickInterval,null,C(r.tickInterval),h)),r.minorTickInterval="auto"===h.minorTickInterval&&r.tickInterval?r.tickInterval/5:h.minorTickInterval,r.tickPositions=n=h.tickPositions?[].concat(h.tickPositions):g&&g.apply(r,[r.min,r.max]),n||(!r.ordinalPositions&&(r.max-r.min)/r.tickInterval>be(2*r.len,200)&&M(19,!0),n=d?r.getTimeTicks(r.normalizeTimeTickInterval(r.tickInterval,h.units),r.min,r.max,h.startOfWeek,r.ordinalPositions,r.closestPointRange,!0):c?r.getLogTickPositions(r.tickInterval,r.min,r.max):r.getLinearTickPositions(r.tickInterval,r.min,r.max),o&&n.splice(1,n.length-2),r.tickPositions=n),!m){var S,T=n[0],P=n[n.length-1],E=r.minPointOffset||0;h.startOnTick?r.min=T:r.min-E>T&&n.shift(),h.endOnTick?r.max=P:r.max+E<P&&n.pop(),1===n.length&&(S=we(r.max)>1e13?1:.001,r.min-=S,r.max+=S)}},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this,e=t.chart,i=t._maxTicksKey,n=t.tickPositions,o=e.maxTicks;if(o&&o[i]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&t.options.alignTicks!==!1&&this.min!==$){var r,s=t.tickAmount,a=n.length;if(t.tickAmount=r=o[i],r>a){for(;n.length<r;)n.push(A(n[n.length-1]+t.tickInterval));t.transA*=(a-1)/(r-1),t.max=n[n.length-1]}u(s)&&r!==s&&(t.isDirty=!0)}},setScale:function(){var t,e,i,n,o=this,r=o.stacks;if(o.oldMin=o.min,o.oldMax=o.max,o.oldAxisLength=o.len,o.setAxisSize(),n=o.len!==o.oldAxisLength,_i(o.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),n||i||o.isLinked||o.forceRedraw||o.userMin!==o.oldUserMin||o.userMax!==o.oldUserMax){if(!o.isXAxis)for(t in r)for(e in r[t])r[t][e].total=null,r[t][e].cum=0;o.forceRedraw=!1,o.getSeriesExtremes(),o.setTickPositions(),o.oldUserMin=o.userMin,o.oldUserMax=o.userMax,o.isDirty||(o.isDirty=n||o.min!==o.oldMin||o.max!==o.oldMax)}else if(!o.isXAxis){o.oldStacks&&(r=o.stacks=o.oldStacks);for(t in r)for(e in r[t])r[t][e].cum=r[t][e].total}o.setMaxTicks()},setExtremes:function(e,i,n,o,r){var s=this,a=s.chart;n=f(n,!0),r=t(r,{min:e,max:i}),Ti(s,"setExtremes",r,function(){s.userMin=e,s.userMax=i,s.eventArgs=r,s.isDirtyExtremes=!0,n&&a.redraw(o)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,o=this.options;return this.allowZoomOutside||(u(i)&&t<=_e(i,f(o.min,i))&&(t=$),u(n)&&e>=be(n,f(o.max,n))&&(e=$)),this.displayBtn=t!==$||e!==$,this.setExtremes(t,e,!1,$,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=e.offsetRight||0,o=this.horiz,r=f(e.width,t.plotWidth-i+n),s=f(e.height,t.plotHeight),a=f(e.top,t.plotTop),l=f(e.left,t.plotLeft+i),h=/%$/;h.test(s)&&(s=parseInt(s,10)/100*t.plotHeight),h.test(a)&&(a=parseInt(a,10)/100*t.plotHeight+t.plotTop),this.left=l,this.top=a,this.width=r,this.height=s,this.bottom=t.chartHeight-s-a,this.right=t.chartWidth-r-l,this.len=be(o?r:s,0),this.pos=o?l:a},getExtremes:function(){var t=this,e=t.isLog;return{min:e?A(h(t.min)):t.min,max:e?A(h(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?h(e.min):e.min,o=i?h(e.max):e.max;return n>t||null===t?t=n:t>o&&(t=o),e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e,i=(f(t,0)-90*this.side+720)%360;return e=i>15&&165>i?"right":i>195&&345>i?"left":"center"},getOffset:function(){var t,e,i,n,o,r,s,a,l,h,c,d,p,m=this,g=m.chart,v=g.renderer,y=m.options,b=m.tickPositions,_=m.ticks,w=m.horiz,x=m.side,C=g.inverted?[1,0,3,2][x]:x,k=0,S=0,T=y.title,P=y.labels,E=0,D=g.axisOffset,L=g.clipOffset,M=[-1,1,1,-1][x],A=1,R=f(P.maxStaggerLines,5),O=2===x?v.fontMetrics(P.style.fontSize).b:0;if(m.hasData=t=m.hasVisibleSeries||u(m.min)&&u(m.max)&&!!b,m.showAxis=e=t||f(y.showEmpty,!0),m.staggerLines=m.horiz&&P.staggerLines,m.axisGroup||(m.gridGroup=v.g("grid").attr({zIndex:y.gridZIndex||1}).add(),m.axisGroup=v.g("axis").attr({zIndex:y.zIndex||2}).add(),m.labelGroup=v.g("axis-labels").attr({zIndex:P.zIndex||7}).addClass(Ye+m.coll.toLowerCase()+"-labels").add()),t||m.isLinked){if(m.labelAlign=f(P.align||m.autoLabelAlign(P.rotation)),_i(b,function(t){_[t]?_[t].addLabel():_[t]=new H(m,t)}),m.horiz&&!m.staggerLines&&R&&!P.rotation){for(r=m.reversed?[].concat(b).reverse():b;R>A;){for(s=[],a=!1,o=0;o<r.length;o++)l=r[o],h=_[l].label&&_[l].label.getBBox(),d=h?h.width:0,p=o%A,d&&(c=m.translate(l),s[p]!==$&&c<s[p]&&(a=!0),s[p]=c+d);if(!a)break;A++}A>1&&(m.staggerLines=A)}_i(b,function(t){(0===x||2===x||{1:"left",3:"right"}[x]===m.labelAlign)&&(E=be(_[t].getLabelSize(),E))}),m.staggerLines&&(E*=m.staggerLines,m.labelOffset=E)}else for(n in _)_[n].destroy(),delete _[n];T&&T.text&&T.enabled!==!1&&(m.axisTitle||(m.axisTitle=v.text(T.text,0,0,T.useHTML).attr({zIndex:7,rotation:T.rotation||0,align:T.textAlign||{low:"left",middle:"center",high:"right"}[T.align]}).addClass(Ye+this.coll.toLowerCase()+"-title").css(T.style).add(m.axisGroup),m.axisTitle.isNew=!0),e&&(k=m.axisTitle.getBBox()[w?"height":"width"],S=f(T.margin,w?5:10),i=T.offset),m.axisTitle[e?"show":"hide"]()),m.offset=M*f(y.offset,D[x]),m.axisTitleMargin=f(i,E+S+(E&&M*y.labels[w?"y":"x"]-O)),D[x]=be(D[x],m.axisTitleMargin+k+M*m.offset),L[C]=be(L[C],2*ve(y.lineWidth/2))},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,o=this.horiz,r=this.left+(i?this.width:0)+n,s=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([Qe,o?this.left:r,o?s:this.top,Je,o?e.chartWidth-this.right:r,o?s:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,o=this.len,r=this.options.title,s=t?e:i,a=this.opposite,l=this.offset,h=n(r.style.fontSize||12),c={low:s+(t?0:o),middle:s+o/2,high:s+(t?o:0)}[r.align],u=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?h:0);return{x:t?c:u+(a?this.width:0)+l+(r.x||0),y:t?u-(a?this.height:0)+l:c+(r.y||0)}},render:function(){var t,e,i,n,o=this,r=o.horiz,s=o.reversed,a=o.chart,l=a.renderer,c=o.options,d=o.isLog,p=o.isLinked,f=o.tickPositions,m=o.axisTitle,g=o.ticks,v=o.minorTicks,y=o.alternateBands,b=c.stackLabels,_=c.alternateGridColor,w=o.tickmarkOffset,x=c.lineWidth,C=a.hasRendered,k=C&&u(o.oldMin)&&!isNaN(o.oldMin),S=o.hasData,T=o.showAxis,P=c.labels.overflow,E=o.justifyLabels=r&&P!==!1;o.labelEdge.length=0,o.justifyToPlot="justify"===P,_i([g,v,y],function(t){var e;for(e in t)t[e].isActive=!1}),(S||p)&&(o.minorTickInterval&&!o.categories&&_i(o.getMinorTickPositions(),function(t){v[t]||(v[t]=new H(o,t,"minor")),k&&v[t].isNew&&v[t].render(null,!0),v[t].render(null,!1,1)}),f.length&&(t=f.slice(),(r&&s||!r&&!s)&&t.reverse(),E&&(t=t.slice(1).concat([t[0]])),_i(t,function(e,i){E&&(i=i===t.length-1?0:i+1),(!p||e>=o.min&&e<=o.max)&&(g[e]||(g[e]=new H(o,e)),k&&g[e].isNew&&g[e].render(i,!0,.1),g[e].render(i,!1,1))}),w&&0===o.min&&(g[-1]||(g[-1]=new H(o,-1,null,!0)),g[-1].render(-1))),_&&_i(f,function(t,e){e%2===0&&t<o.max&&(y[t]||(y[t]=new fi.PlotLineOrBand(o)),i=t+w,n=f[e+1]!==$?f[e+1]+w:o.max,y[t].options={from:d?h(i):i,to:d?h(n):n,color:_},y[t].render(),y[t].isActive=!0)}),o._addedPlotLB||(_i((c.plotLines||[]).concat(c.plotBands||[]),function(t){o.addPlotBandOrLine(t)}),o._addedPlotLB=!0)),_i([g,v,y],function(t){var e,i,n=[],o=Z?Z.duration||500:0,r=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==y&&a.hasRendered&&o?o&&setTimeout(r,o):r()}),x&&(e=o.getLinePath(x),o.axisLine?o.axisLine.animate({d:e}):o.axisLine=l.path(e).attr({stroke:c.lineColor,"stroke-width":x,zIndex:7}).add(o.axisGroup),o.axisLine[T?"show":"hide"]()),m&&T&&(m[m.isNew?"attr":"animate"](o.getTitlePosition()),m.isNew=!1),b&&b.enabled&&o.renderStackTotals(),o.isDirty=!1},redraw:function(){var t=this,e=t.chart,i=e.pointer;i&&i.reset(!0),t.render(),_i(t.plotLinesAndBands,function(t){t.render()}),_i(t.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i,n=this,o=n.stacks,r=n.plotLinesAndBands;t||Si(n);for(e in o)D(o[e]),o[e]=null;for(_i([n.ticks,n.minorTicks,n.alternateBands],function(t){D(t)}),i=r.length;i--;)r[i].destroy();_i(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){n[t]&&(n[t]=n[t].destroy())
}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair){if((u(e)||!f(this.crosshair.snap,!0))===!1)return void this.hideCrosshair();var i,n,o=this.crosshair,r=o.animation;if(f(o.snap,!0)?u(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:f(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n),null===i)return void this.hideCrosshair();if(this.cross)this.cross.attr({visibility:Xe})[r?"animate":"attr"]({d:i},r);else{var s={"stroke-width":o.width||1,stroke:o.color||"#C0C0C0",zIndex:o.zIndex||2};o.dashStyle&&(s.dashstyle=o.dashStyle),this.cross=this.chart.renderer.path(i).attr(s).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(z.prototype,J),z.prototype.getTimeTicks=function(e,i,n,o){var r,s,a=[],l={},h=Y.global.useUTC,c=new Date(i-ee),d=e.unitRange,p=e.count;if(u(i)){d>=Q[ri]&&(c.setMilliseconds(0),c.setSeconds(d>=Q[si]?0:p*ve(c.getSeconds()/p))),d>=Q[si]&&c[le](d>=Q[ai]?0:p*ve(c[ie]()/p)),d>=Q[ai]&&c[he](d>=Q[li]?0:p*ve(c[ne]()/p)),d>=Q[li]&&c[ce](d>=Q[ci]?1:p*ve(c[re]()/p)),d>=Q[ci]&&(c[ue](d>=Q[ui]?0:p*ve(c[se]()/p)),s=c[ae]()),d>=Q[ui]&&(s-=s%p,c[de](s)),d===Q[hi]&&c[ce](c[re]()-c[oe]()+f(o,1)),r=1,ee&&(c=new Date(c.getTime()+ee)),s=c[ae]();for(var m=c.getTime(),g=c[se](),v=c[re](),y=h?ee:(864e5+60*c.getTimezoneOffset()*1e3)%864e5;n>m;)a.push(m),d===Q[ui]?m=te(s+r*p,0):d===Q[ci]?m=te(s,g+r*p):h||d!==Q[li]&&d!==Q[hi]?m+=d*p:m=te(s,g,v+r*p*(d===Q[li]?1:7)),r++;a.push(m),_i(wi(a,function(t){return d<=Q[ai]&&t%Q[li]===y}),function(t){l[t]=li})}return a.info=t(e,{higherRanks:l,totalRange:d*p}),a},z.prototype.normalizeTimeTickInterval=function(t,e){var i,n,o=e||[[oi,[1,2,5,10,20,25,50,100,200,500]],[ri,[1,2,5,10,15,30]],[si,[1,2,5,10,15,30]],[ai,[1,2,3,4,6,8,12]],[li,[1,2]],[hi,[1,2]],[ci,[1,2,3,4,6]],[ui,null]],r=o[o.length-1],s=Q[r[0]],a=r[1];for(n=0;n<o.length;n++)if(r=o[n],s=Q[r[0]],a=r[1],o[n+1]){var l=(s*a[a.length-1]+Q[o[n+1][0]])/2;if(l>=t)break}return s===Q[ui]&&5*s>t&&(a=[1,2,5]),i=k(t/s,a,r[0]===ui?be(C(t/s),1):1),{unitRange:s,count:i,unitName:r[0]}},z.prototype.getLogTickPositions=function(t,e,i,n){var o=this,r=o.options,s=o.len,a=[];if(n||(o._minorAutoInterval=null),t>=.5)t=ge(t),a=o.getLinearTickPositions(t,e,i);else if(t>=.08){var c,u,d,p,m,g,v,y=ve(e);for(c=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],u=y;i+1>u&&!v;u++)for(p=c.length,d=0;p>d&&!v;d++)m=l(h(u)*c[d]),m>e&&(!n||i>=g)&&a.push(g),g>i&&(v=!0),g=m}else{var b=h(e),_=h(i),w=r[n?"minorTickInterval":"tickInterval"],x="auto"===w?null:w,S=r.tickPixelInterval/(n?5:1),T=n?s/o.tickPositions.length:s;t=f(x,o._minorAutoInterval,(_-b)*S/(T||1)),t=k(t,null,C(t)),a=Ci(o.getLinearTickPositions(t,b,_),l),n||(o._minorAutoInterval=t/5)}return n||(o.tickInterval=t),a};var Wi=fi.Tooltip=function(){this.init.apply(this,arguments)};Wi.prototype={init:function(t,e){var i=e.borderWidth,o=e.style,r=n(o.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(o).css({padding:0}).add().attr({y:-9999}),Ne||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,o){var r=this,s=r.now,a=r.options.animation!==!1&&!r.isHidden,l=r.followPointer||r.len>1;t(s,{x:a?(2*s.x+e)/3:e,y:a?(s.y+i)/2:i,anchorX:l?$:a?(2*s.anchorX+n)/3:n,anchorY:l?$:a?(s.anchorY+o)/2:o}),r.label.attr(s),a&&(we(e-s.x)>1||we(i-s.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){r&&r.move(e,i,n,o)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},f(this.options.hideDelay,500)),t&&_i(t,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var i,n,o=this.chart,r=o.inverted,s=o.plotTop,a=0,l=0;return t=p(t),i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===$&&(e=o.pointer.normalize(e)),i=[e.chartX-o.plotLeft,e.chartY-s]),i||(_i(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&n?n.top-s:0)}),a/=t.length,l/=t.length,i=[r?o.plotWidth-l:a,this.shared&&!r&&t.length>1&&e?e.chartY-s:r?o.plotHeight-a:l]),Ci(i,ge)},getPosition:function(t,e,i){var n,o=this.chart,r=this.distance,s={},a=["y",o.chartHeight,e,i.plotY+o.plotTop],l=["x",o.chartWidth,t,i.plotX+o.plotLeft],h=i.ttBelow||o.inverted&&!i.negative||!o.inverted&&i.negative,c=function(t,e,i,n){var o=n-r>i,a=e>n+r+i,l=n-r-i,c=n+r;if(h&&a)s[t]=c;else if(!h&&o)s[t]=l;else if(o)s[t]=l;else{if(!a)return!1;s[t]=c}},u=function(t,e,i,n){return r>n||n>e-r?!1:void(s[t]=i/2>n?1:n>e-i/2?e-i-2:n-i/2)},d=function(t){var e=a;a=l,l=e,n=t},p=function(){c.apply(0,a)!==!1?u.apply(0,l)!==!1||n||(d(!0),p()):n?s.x=s.y=0:(d(!0),p())};return(o.inverted||this.len>1)&&d(),p(),s},defaultFormatter:function(t){var e,i=this.points||p(this),n=i[0].series;return e=[t.tooltipHeaderFormatter(i[0])],_i(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,o,r,s,a,l=this,h=l.chart,c=l.label,u=l.options,d={},m=[],g=u.formatter||l.defaultFormatter,v=h.hoverPoints,y=l.shared;clearTimeout(this.hideTimer),l.followPointer=p(t)[0].series.tooltipOptions.followPointer,o=l.getAnchor(t,e),i=o[0],n=o[1],!y||t.series&&t.series.noSharedTooltip?d=t.getLabelConfig():(h.hoverPoints=t,v&&_i(v,function(t){t.setState()}),_i(t,function(t){t.setState(ii),m.push(t.getLabelConfig())}),d={x:t[0].category,y:t[0].y},d.points=m,this.len=m.length,t=t[0]),r=g.call(d,l),a=t.series,this.distance=f(a.tooltipOptions.distance,16),r===!1?this.hide():(l.isHidden&&(Di(c),c.attr("opacity",1).show()),c.attr({text:r}),s=u.borderColor||t.color||a.color||"#606060",c.attr({stroke:s}),l.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow}),this.isHidden=!1),Ti(h,"tooltipRefresh",{text:r,x:i+h.plotLeft,y:n+h.plotTop,borderColor:s})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(ge(n.x),ge(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,i=t.series,n=i.tooltipOptions,o=n.dateTimeLabelFormats,r=n.xDateFormat,s=i.xAxis,l=s&&"datetime"===s.options.type&&a(t.key),h=n.headerFormat,c=s&&s.closestPointRange;if(l&&!r){if(c){for(e in Q)if(Q[e]>=c||Q[e]<=Q[li]&&t.key%Q[e]>0){r=o[e];break}}else r=o.day;r=r||o.year}return l&&r&&(h=h.replace("{point.key}","{point.key:"+r+"}")),x(h,{point:t,series:i})}};var $i;q=pe.documentElement.ontouchstart!==$;var Gi=fi.Pointer=function(t,e){this.init(t,e)};Gi.prototype={init:function(t,e){var i,n,o=e.chart,r=o.events,s=Ne?"":o.zoomType,a=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=n=/y/.test(s),this.zoomHor=i&&!a||n&&a,this.zoomVert=n&&!a||i&&a,this.hasZoom=i||n,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},fi.Tooltip&&e.tooltip.enabled&&(t.tooltip=new Wi(t,e.tooltip),this.followTouchMove=e.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(e,i){var n,o,r;return e=e||window.event,e=Pi(e),e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,i||(this.chartPosition=i=xi(this.chart.container)),r.pageX===$?(n=be(e.x,e.clientX-i.left),o=e.y):(n=r.pageX-i.left,o=r.pageY-i.top),t(e,{chartX:ge(n),chartY:ge(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return _i(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,o,r,s,a=this,l=a.chart,h=l.series,c=l.tooltip,u=l.hoverPoint,d=l.hoverSeries,p=l.chartWidth,m=a.getIndex(t);if(c&&a.options.tooltip.shared&&(!d||!d.noSharedTooltip)){for(n=[],o=h.length,r=0;o>r;r++)h[r].visible&&h[r].options.enableMouseTracking!==!1&&!h[r].noSharedTooltip&&h[r].singularTooltips!==!0&&h[r].tooltipPoints.length&&(i=h[r].tooltipPoints[m],i&&i.series&&(i._dist=we(m-i.clientX),p=_e(p,i._dist),n.push(i)));for(o=n.length;o--;)n[o]._dist>p&&n.splice(o,1);n.length&&n[0].clientX!==a.hoverX&&(c.refresh(n,t),a.hoverX=n[0].clientX)}e=d&&d.tooltipOptions.followPointer,d&&d.tracker&&!e?(i=d.tooltipPoints[m],i&&i!==u&&i.onMouseOver(t)):c&&e&&!c.isHidden&&(s=c.getAnchor([{}],t),c.updatePosition({plotX:s[0],plotY:s[1]})),c&&!a._onDocumentMouseMove&&(a._onDocumentMouseMove=function(t){Be[$i]&&Be[$i].pointer.onDocumentMouseMove(t)},ki(pe,"mousemove",a._onDocumentMouseMove)),_i(l.axes,function(e){e.drawCrosshair(t,f(i,u))})},reset:function(t){var e=this,i=e.chart,n=i.hoverSeries,o=i.hoverPoint,r=i.tooltip,s=r&&r.shared?i.hoverPoints:o;t=t&&r&&s,t&&p(s)[0].plotX===$&&(t=!1),t?(r.refresh(s),o&&o.setState(o.state,!0)):(o&&o.onMouseOut(),n&&n.onMouseOut(),r&&r.hide(),e._onDocumentMouseMove&&(Si(pe,"mousemove",e._onDocumentMouseMove),e._onDocumentMouseMove=null),_i(i.axes,function(t){t.hideCrosshair()}),e.hoverX=null)},scaleGroups:function(t,e){var i,n=this.chart;_i(n.series,function(o){i=t||o.getPlotBox(),o.xAxis&&o.xAxis.zoomEnabled&&(o.group.attr(i),o.markerGroup&&(o.markerGroup.attr(i),o.markerGroup.clip(e?n.clipRect:null)),o.dataLabelsGroup&&o.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,o=n.options.chart,r=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,u=n.plotWidth,d=n.plotHeight,p=this.mouseDownX,f=this.mouseDownY;h>r?r=h:r>h+u&&(r=h+u),c>s?s=c:s>c+d&&(s=c+d),this.hasDragged=Math.sqrt(Math.pow(p-r,2)+Math.pow(f-s,2)),this.hasDragged>10&&(e=n.isInsidePlot(p-h,f-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(h,c,a?1:u,l?1:d,0).attr({fill:o.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&a&&(i=r-p,this.selectionMarker.attr({width:we(i),x:(i>0?0:i)+p})),this.selectionMarker&&l&&(i=s-f,this.selectionMarker.attr({height:we(i),y:(i>0?0:i)+f})),e&&!this.selectionMarker&&o.panning&&n.pan(t,o.panning))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var o,r={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,l=s.attr?s.attr("y"):s.y,h=s.attr?s.attr("width"):s.width,c=s.attr?s.attr("height"):s.height;(this.hasDragged||n)&&(_i(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.toValue(e?a:l),n=t.toValue(e?a+h:l+c);isNaN(i)||isNaN(n)||(r[t.coll].push({axis:t,min:_e(i,n),max:be(i,n)}),o=!0)}}),o&&Ti(i,"selection",r,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(m(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Be[$i]&&Be[$i].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries;t=this.normalize(t,i),i&&n&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Be[$i];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;$i=e.index,t=this.normalize(t),"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=d(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(Ye+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement,n=i&&i.point&&i.point.series;!e||e.options.stickyTracking||this.inClass(i,Ye+"tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var i=this.chart,n=i.hoverPoint,o=i.plotLeft,r=i.plotTop;e=this.normalize(e),e.cancelBubble=!0,i.cancelClick||(n&&this.inClass(e.target,Ye+"tracker")?(Ti(n.series,"click",t(e,{point:n})),i.hoverPoint&&n.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),i.isInsidePlot(e.chartX-o,e.chartY-r)&&Ti(i,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},ki(e,"mouseleave",t.onContainerMouseLeave),1===Fe&&ki(pe,"mouseup",t.onDocumentMouseUp),q&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Fe&&ki(pe,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;Si(this.chart.container,"mouseleave",this.onContainerMouseLeave),Fe||(Si(pe,"mouseup",this.onDocumentMouseUp),Si(pe,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}};var qi=fi.Legend=function(t,e){this.init(t,e)};qi.prototype={init:function(t,i){var o=this,r=i.itemStyle,s=f(i.padding,8),a=i.itemMarginTop||0;this.options=i,i.enabled&&(o.baseline=n(r.fontSize)+3+a,o.itemStyle=r,o.itemHiddenStyle=e(r,i.itemHiddenStyle),o.itemMarginTop=a,o.padding=s,o.initialItemX=s,o.initialItemY=s-5,o.maxItemWidth=0,o.chart=t,o.itemHeight=0,o.lastLineHeight=0,o.symbolWidth=f(i.symbolWidth,16),o.pages=[],o.render(),ki(o.chart,"endResize",function(){o.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,o=this,r=o.options,s=t.legendItem,a=t.legendLine,l=t.legendSymbol,h=o.itemHiddenStyle.color,c=e?r.itemStyle.color:h,u=e?t.legendColor||t.color||"#CCC":h,d=t.options&&t.options.marker,p={fill:u};if(s&&s.css({fill:c,color:c}),a&&a.attr({stroke:u}),l){if(d&&l.isMarker){p.stroke=u,d=t.convertAttribs(d);for(i in d)n=d[i],n!==$&&(p[i]=n)}l.attr(p)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,o=!i.rtl,r=t._legendItemPos,s=r[0],a=r[1],l=t.checkbox;t.legendGroup&&t.legendGroup.translate(o?s:e.legendWidth-s-2*n-4,a),l&&(l.x=s,l.y=a)},destroyItem:function(t){var e=t.checkbox;_i(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&L(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,_i(this.allItems,function(o){var r,s=o.checkbox;s&&(r=e+s.y+(t||0)+3,m(s,{left:i.translateX+o.checkboxOffset+s.x-20+Ze,top:r+Ze,display:r>e-6&&e+n-6>r?"":Ke}))}))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,o=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox(),o=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:o})),this.titleHeight=o},renderItem:function(t){var i,n,o,r=this,s=r.chart,a=s.renderer,l=r.options,h="horizontal"===l.layout,c=r.symbolWidth,u=l.symbolPadding,d=r.itemStyle,p=r.itemHiddenStyle,m=r.padding,g=h?f(l.itemDistance,20):0,v=!l.rtl,y=l.width,b=l.itemMarginBottom||0,_=r.itemMarginTop,w=r.initialItemX,C=t.legendItem,k=t.series&&t.series.drawLegendSymbol?t.series:t,S=k.options,T=r.createCheckboxForItem&&S&&S.showCheckbox,P=l.useHTML;C||(t.legendGroup=a.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),k.drawLegendSymbol(r,t),t.legendItem=C=a.text(l.labelFormat?x(l.labelFormat,t):l.labelFormatter.call(t),v?c+u:-u,r.baseline,P).css(e(t.visible?d:p)).attr({align:v?"left":"right",zIndex:2}).add(t.legendGroup),r.setItemEvents&&r.setItemEvents(t,C,P,d,p),r.colorizeItem(t,t.visible),T&&r.createCheckboxForItem(t)),n=C.getBBox(),o=t.checkboxOffset=l.itemWidth||t.legendItemWidth||c+u+n.width+g+(T?20:0),r.itemHeight=i=ge(t.legendItemHeight||n.height),h&&r.itemX-w+o>(y||s.chartWidth-2*m-w-l.x)&&(r.itemX=w,r.itemY+=_+r.lastLineHeight+b,r.lastLineHeight=0),r.maxItemWidth=be(r.maxItemWidth,o),r.lastItemY=_+r.itemY+b,r.lastLineHeight=be(i,r.lastLineHeight),t._legendItemPos=[r.itemX,r.itemY],h?r.itemX+=o:(r.itemY+=_+i+b,r.lastLineHeight=i),r.offsetWidth=y||be((h?r.itemX-w-g:o)+m,r.offsetWidth)},getAllItems:function(){var t=[];return _i(this.chart.series,function(e){var i=e.options;f(i.showInLegend,u(i.linkedTo)?!1:$,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},render:function(){var e,i,n,o,r=this,s=r.chart,a=s.renderer,l=r.group,h=r.box,c=r.options,u=r.padding,d=c.borderWidth,p=c.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,l||(r.group=l=a.g("legend").attr({zIndex:7}).add(),r.contentGroup=a.g().attr({zIndex:1}).add(l),r.scrollGroup=a.g().add(r.contentGroup)),r.renderTitle(),e=r.getAllItems(),T(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&e.reverse(),r.allItems=e,r.display=i=!!e.length,_i(e,function(t){r.renderItem(t)}),n=c.width||r.offsetWidth,o=r.lastItemY+r.lastLineHeight+r.titleHeight,o=r.handleOverflow(o),(d||p)&&(n+=u,o+=u,h?n>0&&o>0&&(h[h.isNew?"attr":"animate"](h.crisp({width:n,height:o})),h.isNew=!1):(r.box=h=a.rect(0,0,n,o,c.borderRadius,d||0).attr({stroke:c.borderColor,"stroke-width":d||0,fill:p||Ke}).add(l).shadow(c.shadow),h.isNew=!0),h[i?"show":"hide"]()),r.legendWidth=n,r.legendHeight=o,_i(e,function(t){r.positionItem(t)}),i&&l.align(t({width:n,height:o},c),!0,"spacingBox"),s.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,o=this.chart,r=o.renderer,s=this.options,a=s.y,l="top"===s.verticalAlign,h=o.spacingBox.height+(l?-a:a)-this.padding,c=s.maxHeight,u=this.clipRect,d=s.navigation,p=f(d.animation,!0),m=d.arrowSize||12,g=this.nav,v=this.pages,y=this.allItems;return"horizontal"===s.layout&&(h/=2),c&&(h=_e(h,c)),v.length=0,t>h&&!s.useHTML?(this.clipHeight=e=h-20-this.titleHeight-this.padding,this.currentPage=f(this.currentPage,1),this.fullHeight=t,_i(y,function(t,n){var o=t._legendItemPos[1],r=ge(t.legendItem.getBBox().height),s=v.length;(!s||o-v[s-1]>e&&(i||o)!==v[s-1])&&(v.push(i||o),s++),n===y.length-1&&o+r-v[s-1]>e&&v.push(o),o!==i&&(i=o)}),u||(u=n.clipRect=r.clipRect(0,this.padding,9999,0),n.contentGroup.clip(u)),u.attr({height:e}),g||(this.nav=g=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,m,m).on("click",function(){n.scroll(-1,p)}).add(g),this.pager=r.text("",15,10).css(d.style).add(g),this.down=r.symbol("triangle-down",0,0,m,m).on("click",function(){n.scroll(1,p)}).add(g)),n.scroll(0),t=h):g&&(u.attr({height:o.chartHeight}),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,o=n.length,r=this.currentPage+t,s=this.clipHeight,a=this.options.navigation,l=a.activeColor,h=a.inactiveColor,c=this.pager,u=this.padding;r>o&&(r=o),r>0&&(e!==$&&R(e,this.chart),this.nav.attr({translateX:u,translateY:s+this.padding+7+this.titleHeight,visibility:Xe}),this.up.attr({fill:1===r?h:l}).css({cursor:1===r?"default":"pointer"}),c.attr({text:r+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===o?h:l}).css({cursor:r===o?"default":"pointer"}),i=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=r,this.positionCheckboxes(i))}};var Vi=fi.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-i/2,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,o=this.options,r=o.marker,s=t.options,a=t.symbolWidth,l=this.chart.renderer,h=this.legendGroup,c=t.baseline-ge(.3*l.fontMetrics(s.itemStyle.fontSize).b);o.lineWidth&&(n={"stroke-width":o.lineWidth},o.dashStyle&&(n.dashstyle=o.dashStyle),this.legendLine=l.path([Qe,0,c,Je,a,c]).attr(n).add(h)),r&&r.enabled!==!1&&(e=r.radius,this.legendSymbol=i=l.symbol(this.symbol,a/2-e,c-e,2*e,2*e).add(h),i.isMarker=!0)}};(/Trident\/7\.0/.test(Te)||Me)&&_(qi.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)}),B.prototype={init:function(t,i){var n,o=t.series;t.series=null,n=e(Y,t),n.series=t.series=o,this.userOptions=t;var r=n.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var s=r.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var a,l=this;if(l.index=Be.length,Be.push(l),Fe++,r.reflow!==!1&&ki(l,"load",function(){l.initReflow()}),s)for(a in s)ki(l,a,s[a]);l.xAxis=[],l.yAxis=[],l.animation=Ne?!1:f(r.animation,!0),l.pointCount=0,l.counters=new S,l.firstRender()},initSeries:function(t){var e,i=this,n=i.options.chart,o=t.type||n.type||n.defaultSeriesType,r=pi[o];return r||M(17,!0),e=new r,e.init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,o=i?t:e;return n>=0&&n<=this.plotWidth&&o>=0&&o<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&_i(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var i,n,o,r=this,s=r.axes,a=r.series,l=r.pointer,h=r.legend,c=r.isDirtyLegend,u=r.isDirtyBox,d=a.length,p=d,f=r.renderer,m=f.isHidden(),g=[];for(R(e,r),m&&r.cloneRenderTo(),r.layOutTitles();p--;)if(o=a[p],o.options.stacking&&(i=!0,o.isDirty)){n=!0;break}if(n)for(p=d;p--;)o=a[p],o.options.stacking&&(o.isDirty=!0);_i(a,function(t){t.isDirty&&"point"===t.options.legendType&&(c=!0)}),c&&h.options.enabled&&(h.render(),r.isDirtyLegend=!1),i&&r.getStacks(),r.hasCartesianSeries&&(r.isResizing||(r.maxTicks=null,_i(s,function(t){t.setScale()})),r.adjustTickAmounts(),r.getMargins(),_i(s,function(t){t.isDirty&&(u=!0)}),_i(s,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,g.push(function(){Ti(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(u||i)&&e.redraw()})),u&&r.drawChartBox(),_i(a,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),l&&l.reset(!0),f.draw(),Ti(r,"redraw"),m&&r.cloneRenderTo(!0),_i(g,function(t){t.call()})},get:function(t){var e,i,n,o=this,r=o.axes,s=o.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(n=s[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e,i=this,n=this.options,o=n.xAxis=p(n.xAxis||{}),r=n.yAxis=p(n.yAxis||{});_i(o,function(t,e){t.index=e,t.isX=!0}),_i(r,function(t,e){t.index=e}),t=o.concat(r),_i(t,function(t){e=new z(i,t)}),i.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return _i(this.series,function(e){t=t.concat(wi(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return wi(this.series,function(t){return t.selected})},getStacks:function(){var t=this;_i(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),_i(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+f(e.options.stack,""))})},setTitle:function(t,i,n){var o,r,s=this,a=s.options;o=a.title=e(a.title,t),r=a.subtitle=e(a.subtitle,i),_i([["title",t,o],["subtitle",i,r]],function(t){var e=t[0],i=s[e],n=t[1],o=t[2];i&&n&&(s[e]=i=i.destroy()),o&&o.text&&!i&&(s[e]=s.renderer.text(o.text,0,0,o.useHTML).attr({align:o.align,"class":Ye+e,zIndex:o.zIndex||4}).css(o.style).add())}),s.layOutTitles(n)},layOutTitles:function(e){var i,n=0,o=this.title,r=this.subtitle,s=this.options,a=s.title,l=s.subtitle,h=this.spacingBox.width-44;o&&(o.css({width:(a.width||h)+Ze}).align(t({y:15},a),!1,"spacingBox"),a.floating||a.verticalAlign||(n=o.getBBox().height)),r&&(r.css({width:(l.width||h)+Ze}).align(t({y:n+a.margin},l),!1,"spacingBox"),l.floating||l.verticalAlign||(n=ye(n+r.getBBox().height))),i=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&f(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,n=e.height,o=t.renderToClone||t.renderTo;u(i)||(t.containerWidth=vi(o,"width")),u(n)||(t.containerHeight=vi(o,"height")),t.chartWidth=be(0,i||t.containerWidth||600),t.chartHeight=be(0,f(n,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),L(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),m(e,{position:Ge,top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),pe.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,r,s,a,l,h=this,c=h.options.chart,u="data-highcharts-chart";h.renderTo=s=c.renderTo,l=Ye+He++,o(s)&&(h.renderTo=s=pe.getElementById(s)),s||M(13,!0),a=n(d(s,u)),!isNaN(a)&&Be[a]&&Be[a].hasRendered&&Be[a].destroy(),d(s,u,h.index),s.innerHTML="",c.skipClone||s.offsetWidth||h.cloneRenderTo(),h.getChartSize(),i=h.chartWidth,r=h.chartHeight,h.container=e=g($e,{className:Ye+"container"+(c.className?" "+c.className:""),id:l},t({position:qe,overflow:Ve,width:i+Ze,height:r+Ze,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),h.renderToClone||s),h._cursor=e.style.cursor,h.renderer=c.forExport?new ji(e,i,r,c.style,!0):new G(e,i,r,c.style),Ne&&h.renderer.create(h,e,i,r)},getMargins:function(){var t,e=this,i=e.spacing,n=e.legend,o=e.margin,r=e.options.legend,s=f(r.margin,20),a=r.x,l=r.y,h=r.align,c=r.verticalAlign,d=e.titleOffset;e.resetMargins(),t=e.axisOffset,d&&!u(o[0])&&(e.plotTop=be(e.plotTop,d+e.options.title.margin+i[0])),n.display&&!r.floating&&("right"===h?u(o[1])||(e.marginRight=be(e.marginRight,n.legendWidth-a+s+i[1])):"left"===h?u(o[3])||(e.plotLeft=be(e.plotLeft,n.legendWidth+a+s+i[3])):"top"===c?u(o[0])||(e.plotTop=be(e.plotTop,n.legendHeight+l+s+i[0])):"bottom"===c&&(u(o[2])||(e.marginBottom=be(e.marginBottom,n.legendHeight-l+s+i[2])))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&_i(e.axes,function(t){t.getOffset()}),u(o[3])||(e.plotLeft+=t[3]),u(o[0])||(e.plotTop+=t[0]),u(o[2])||(e.marginBottom+=t[2]),u(o[1])||(e.marginRight+=t[1]),e.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,o=i.width||vi(n,"width"),r=i.height||vi(n,"height"),s=t?t.target:fe,a=function(){e.container&&(e.setSize(o,r,!1),e.hasUserSize=null)};e.hasUserSize||!o||!r||s!==fe&&s!==pe||((o!==e.containerWidth||r!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(a,100):a()),e.containerWidth=o,e.containerHeight=r)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};ki(fe,"resize",e),ki(t,"destroy",function(){Si(fe,"resize",e)})},setSize:function(t,e,i){var n,o,r,s=this;s.isResizing+=1,r=function(){s&&Ti(s,"endResize",null,function(){s.isResizing-=1})},R(i,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,u(t)&&(s.chartWidth=n=be(0,ge(t)),s.hasUserSize=!!n),u(e)&&(s.chartHeight=o=be(0,ge(e))),(Z?Ei:m)(s.container,{width:n+Ze,height:o+Ze},Z),s.setChartSize(!0),s.renderer.setSize(n,o,i),s.maxTicks=null,_i(s.axes,function(t){t.isDirty=!0,t.setScale()}),_i(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(i),s.oldChartHeight=null,Ti(s,"resize"),Z===!1?r():setTimeout(r,Z&&Z.duration||500)},setChartSize:function(t){var e,i,n,o,r,s,a,l=this,h=l.inverted,c=l.renderer,u=l.chartWidth,d=l.chartHeight,p=l.options.chart,f=l.spacing,m=l.clipOffset;l.plotLeft=n=ge(l.plotLeft),l.plotTop=o=ge(l.plotTop),l.plotWidth=r=be(0,ge(u-n-l.marginRight)),l.plotHeight=s=be(0,ge(d-o-l.marginBottom)),l.plotSizeX=h?s:r,l.plotSizeY=h?r:s,l.plotBorderWidth=p.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:f[3],y:f[0],width:u-f[3]-f[1],height:d-f[0]-f[2]},l.plotBox=c.plotBox={x:n,y:o,width:r,height:s},a=2*ve(l.plotBorderWidth/2),e=ye(be(a,m[3])/2),i=ye(be(a,m[0])/2),l.clipBox={x:e,y:i,width:ve(l.plotSizeX-be(a,m[1])/2-e),height:ve(l.plotSizeY-be(a,m[2])/2-i)},t||_i(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.spacing,i=t.margin;t.plotTop=f(i[0],e[0]),t.marginRight=f(i[1],e[1]),t.marginBottom=f(i[2],e[2]),t.plotLeft=f(i[3],e[3]),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,o=i.renderer,r=i.chartWidth,s=i.chartHeight,a=i.chartBackground,l=i.plotBackground,h=i.plotBorder,c=i.plotBGImage,u=n.borderWidth||0,d=n.backgroundColor,p=n.plotBackgroundColor,f=n.plotBackgroundImage,m=n.plotBorderWidth||0,g=i.plotLeft,v=i.plotTop,y=i.plotWidth,b=i.plotHeight,_=i.plotBox,w=i.clipRect,x=i.clipBox;t=u+(n.shadow?8:0),(u||d)&&(a?a.animate(a.crisp({width:r-t,height:s-t})):(e={fill:d||Ke},u&&(e.stroke=n.borderColor,e["stroke-width"]=u),i.chartBackground=o.rect(t/2,t/2,r-t,s-t,n.borderRadius,u).attr(e).addClass(Ye+"background").add().shadow(n.shadow))),p&&(l?l.animate(_):i.plotBackground=o.rect(g,v,y,b,0).attr({fill:p}).add().shadow(n.plotShadow)),f&&(c?c.animate(_):i.plotBGImage=o.image(f,g,v,y,b).add()),w?w.animate({width:x.width,height:x.height}):i.clipRect=o.clipRect(x),m&&(h?h.animate(h.crisp({x:g,y:v,width:y,height:b})):i.plotBorder=o.rect(g,v,y,b,0,-m).attr({stroke:n.plotBorderColor,"stroke-width":m,fill:Ke,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,o=n.options.chart,r=n.options.series;_i(["inverted","angular","polar"],function(s){for(t=pi[o.type||o.defaultSeriesType],i=n[s]||o[s]||t&&t.prototype[s],e=r&&r.length;!i&&e--;)t=pi[r[e].type],t&&t.prototype[s]&&(i=!0);n[s]=i})},linkSeries:function(){var t=this,e=t.series;_i(e,function(t){t.linkedSeries.length=0}),_i(e,function(e){var i=e.options.linkedTo;o(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i),i&&(i.linkedSeries.push(e),e.linkedParent=i))})},renderSeries:function(){_i(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},render:function(){var e,i=this,o=i.axes,r=i.renderer,s=i.options,a=s.labels,l=s.credits;i.setTitle(),i.legend=new qi(i,s.legend),i.getStacks(),_i(o,function(t){t.setScale()}),i.getMargins(),i.maxTicks=null,_i(o,function(t){t.setTickPositions(!0),t.setMaxTicks()}),i.adjustTickAmounts(),i.getMargins(),i.drawChartBox(),i.hasCartesianSeries&&_i(o,function(t){t.render()}),i.seriesGroup||(i.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),i.renderSeries(),a.items&&_i(a.items,function(e){var o=t(a.style,e.style),s=n(o.left)+i.plotLeft,l=n(o.top)+i.plotTop+12;delete o.left,delete o.top,r.text(e.html,s,l).attr({zIndex:2}).css(o).add()}),l.enabled&&!i.credits&&(e=l.href,i.credits=r.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),i.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,o=e.container,r=o&&o.parentNode;for(Ti(e,"destroy"),Be[e.index]=$,Fe--,e.renderTo.removeAttribute("data-highcharts-chart"),Si(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();_i(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),o&&(o.innerHTML="",Si(o),r&&L(o));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Oe&&fe==fe.top&&"complete"!==pe.readyState||Ne&&!fe.canvg?(Ne?Ui.push(function(){t.firstRender()},t.options.global.canvasToolsURL):pe.attachEvent("onreadystatechange",function(){pe.detachEvent("onreadystatechange",t.firstRender),"complete"===pe.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),Ti(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),_i(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Ti(t,"beforeRender"),fi.Pointer&&(t.pointer=new Gi(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),_i(t.callbacks,function(e){e.apply(t,[t])
}),t.cloneRenderTo(!0),Ti(t,"load"))},splashArray:function(t,e){var i=e[t],n=r(i)?i:[i,i,i,i];return[f(e[t+"Top"],n[0]),f(e[t+"Right"],n[1]),f(e[t+"Bottom"],n[2]),f(e[t+"Left"],n[3])]}},B.prototype.callbacks=[];var Yi=fi.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,o=this.chart,r=2*(i.slicedOffset||0),s=o.plotWidth-2*r,a=o.plotHeight-2*r,l=i.center,h=[f(l[0],"50%"),f(l[1],"50%"),i.size||"100%",i.innerSize||0],c=_e(s,a);return Ci(h,function(i,o){return e=/%$/.test(i),t=2>o||2===o&&e,(e?[s,a,c,c][o]*n(i)/100:i)+(t?r:0)})}},Xi=function(){};Xi.prototype={init:function(t,e,i){var n,o=this;return o.series=t,o.applyOptions(e,i),o.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,o.color=o.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,o},applyOptions:function(e,i){var n=this,o=n.series,r=o.pointValKey;return e=Xi.prototype.optionsToObject.call(this,e),t(n,e),n.options=n.options?t(n.options,e):e,r&&(n.y=n[r]),n.x===$&&o&&(n.x=i===$?o.autoIncrement():i),n},optionsToObject:function(t){var e,i={},n=this.series,o=n.pointArrayMap||["y"],r=o.length,a=0,l=0;if("number"==typeof t||null===t)i[o[0]]=t;else if(s(t))for(t.length>r&&(e=typeof t[0],"string"===e?i.name=t[0]:"number"===e&&(i.x=t[0]),a++);r>l;)i[o[l++]]=t[a++];else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this,i=e.series,n=i.chart,o=n.hoverPoints;n.pointCount--,o&&(e.setState(),c(o,e),o.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(Si(e),e.destroyElements()),e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)t=i[n],e[t]&&(e[t]=e[t].destroy())},getLabelConfig:function(){var t=this;return{x:t.category,y:t.y,key:t.name||t.category,series:t.series,point:t,percentage:t.percentage,total:t.total||t.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=f(i.valueDecimals,""),o=i.valuePrefix||"",r=i.valueSuffix||"";return _i(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||r)&&(t=t.replace(e+"}",o+e+"}"+r)),t=t.replace(e+"}",e+":,."+n+"f}")}),x(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,o=this.series,r=o.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ti(this,t,e,i)}};var Zi=function(){};Zi.prototype={isCartesian:!0,type:"line",pointClass:Xi,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,i){var n,o,r=this,s=e.series,a=function(t,e){return f(t.options.index,t._i)-f(e.options.index,e._i)};r.chart=e,r.options=i=r.setOptions(i),r.linkedSeries=[],r.bindAxes(),t(r,{name:i.name,state:ei,pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),Ne&&(i.animation=!1),o=i.events;for(n in o)ki(r,n,o[n]);(o&&o.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),r.getColor(),r.getSymbol(),_i(r.parallelArrays,function(t){r[t+"Data"]=[]}),r.setData(i.data,!1),r.isCartesian&&(e.hasCartesianSeries=!0),s.push(r),r._i=s.length-1,T(s,a),this.yAxis&&T(this.yAxis.series,a),_i(s,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;_i(e.axisTypes||[],function(o){_i(n[o],function(n){t=n.options,(i[o]===t.index||i[o]!==$&&i[o]===t.id||i[o]===$&&0===t.index)&&(n.series.push(e),e[o]=n,n.isDirty=!0)}),e[o]||e.optionalAxis===o||M(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,o="number"==typeof e?function(n){var o="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=o}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};_i(i.parallelArrays,o)},autoIncrement:function(){var t=this,e=t.options,i=t.xIncrement;return i=f(i,e.pointStart,0),t.pointInterval=f(t.pointInterval,e.pointInterval,1),t.xIncrement=i+t.pointInterval,i},getSegments:function(){var t,e=this,i=-1,n=[],o=e.points,r=o.length;if(r)if(e.options.connectNulls){for(t=r;t--;)null===o[t].y&&o.splice(t,1);o.length&&(n=[o])}else _i(o,function(t,e){null===t.y?(e>i+1&&n.push(o.slice(i+1,e)),i=e):e===r-1&&n.push(o.slice(i+1,e+1))});e.segments=n},setOptions:function(t){var i,n=this.chart,o=n.options,r=o.plotOptions,s=n.userOptions||{},a=s.plotOptions||{},l=r[this.type];return this.userOptions=t,i=e(l,r.series,t),this.tooltipOptions=e(Y.tooltip,Y.plotOptions[this.type].tooltip,s.tooltip,a.series&&a.series.tooltip,a[this.type]&&a[this.type].tooltip,t.tooltip),null===l.marker&&delete i.marker,i},getColor:function(){var t,e,i=this.options,n=this.userOptions,o=this.chart.options.colors,r=this.chart.counters;t=i.color||Mi[this.type].color,t||i.colorByPoint||(u(n._colorIndex)?e=n._colorIndex:(n._colorIndex=r.color,e=r.color++),t=o[e]),this.color=t,r.wrapColor(o.length)},getSymbol:function(){var t,e=this,i=e.userOptions,n=e.options.marker,o=e.chart,r=o.options.symbols,s=o.counters;e.symbol=n.symbol,e.symbol||(u(i._symbolIndex)?t=i._symbolIndex:(i._symbolIndex=s.symbol,t=s.symbol++),e.symbol=r[t]),/^url/.test(e.symbol)&&(n.radius=0),s.wrapSymbol(r.length)},drawLegendSymbol:Vi.drawLineMarker,setData:function(t,e,i,n){var r,l,h,c=this,u=c.points,d=u&&u.length||0,p=c.options,m=c.chart,g=null,v=c.xAxis,y=v&&!!v.categories,b=c.tooltipPoints,_=p.turboThreshold,w=this.xData,x=this.yData,C=c.pointArrayMap,k=C&&C.length;if(t=t||[],r=t.length,e=f(e,!0),n===!1||!r||d!==r||c.cropped||c.hasGroupedData){if(c.xIncrement=null,c.pointRange=y?1:p.pointRange,c.colorCounter=0,_i(this.parallelArrays,function(t){c[t+"Data"].length=0}),_&&r>_){for(l=0;null===g&&r>l;)g=t[l],l++;if(a(g)){var S=f(p.pointStart,0),T=f(p.pointInterval,1);for(l=0;r>l;l++)w[l]=S,x[l]=t[l],S+=T;c.xIncrement=S}else if(s(g))if(k)for(l=0;r>l;l++)h=t[l],w[l]=h[0],x[l]=h.slice(1,k+1);else for(l=0;r>l;l++)h=t[l],w[l]=h[0],x[l]=h[1];else M(12)}else for(l=0;r>l;l++)t[l]!==$&&(h={series:c},c.pointClass.prototype.applyOptions.apply(h,[t[l]]),c.updateParallelArrays(h,l),y&&h.name&&(v.names[h.x]=h.name));for(o(x[0])&&M(14,!0),c.data=[],c.options.data=t,l=d;l--;)u[l]&&u[l].destroy&&u[l].destroy();b&&(b.length=0),v&&(v.minRange=v.userMinRange),c.isDirty=c.isDirtyData=m.isDirtyBox=!0,i=!1}else _i(t,function(t,e){u[e].update(t,!1)});e&&m.redraw(i)},processData:function(t){var e,i,n,o,r,s,a,l=this,h=l.xData,c=l.yData,u=h.length,d=0,p=l.xAxis,f=l.options,m=f.cropThreshold,g=0,v=l.isCartesian;if(v&&!l.isDirty&&!p.isDirty&&!l.yAxis.isDirty&&!t)return!1;for(v&&l.sorted&&(!m||u>m||l.forceCrop)&&(s=p.min,a=p.max,h[u-1]<s||h[0]>a?(h=[],c=[]):(h[0]<s||h[u-1]>a)&&(e=this.cropData(l.xData,l.yData,s,a),h=e.xData,c=e.yData,d=e.start,i=!0,g=h.length)),r=h.length-1;r>=0;r--)n=h[r]-h[r-1],!i&&h[r]>s&&h[r]<a&&g++,n>0&&(o===$||o>n)?o=n:0>n&&l.requireSorting&&M(15);l.cropped=i,l.cropStart=d,l.processedXData=h,l.processedYData=c,l.activePointCount=g,null===f.pointRange&&(l.pointRange=o||1),l.closestPointRange=o},cropData:function(t,e,i,n){var o,r=t.length,s=0,a=r,l=f(this.cropShoulder,1);for(o=0;r>o;o++)if(t[o]>=i){s=be(0,o-l);break}for(;r>o;o++)if(t[o]>n){a=o+l;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,i,n,o=this,r=o.options,s=r.data,a=o.data,l=o.processedXData,h=o.processedYData,c=o.pointClass,u=l.length,d=o.cropStart||0,f=o.hasGroupedData,m=[];if(!a&&!f){var g=[];g.length=s.length,a=o.data=g}for(n=0;u>n;n++)e=d+n,f?m[n]=(new c).init(o,[l[n]].concat(p(h[n]))):(a[e]?i=a[e]:s[e]!==$&&(a[e]=i=(new c).init(o,s[e],l[n])),m[n]=i);if(a&&(u!==(t=a.length)||f))for(n=0;t>n;n++)n!==d||f||(n+=u),a[n]&&(a[n].destroyElements(),a[n].plotX=$);o.data=a,o.points=m},getExtremes:function(t){var e,i,n,o,r,s,a,l,h,c=this.xAxis,u=this.yAxis,d=this.processedXData,p=[],m=0,g=c.getExtremes(),v=g.min,y=g.max;for(t=t||this.stackedYData||this.processedYData,e=t.length,l=0;e>l;l++)if(s=d[l],a=t[l],i=null!==a&&a!==$&&(!u.isLog||a.length||a>0),n=this.getExtremesFromAll||this.cropped||(d[l+1]||s)>=v&&(d[l-1]||s)<=y,i&&n)if(h=a.length)for(;h--;)null!==a[h]&&(p[m++]=a[h]);else p[m++]=a;this.dataMin=f(o,P(p)),this.dataMax=f(r,E(p))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e=this,i=e.options,n=i.stacking,o=e.xAxis,r=o.categories,s=e.yAxis,l=e.points,h=l.length,c=!!e.modifyValue,d=i.pointPlacement,p="between"===d||a(d),m=i.threshold;for(t=0;h>t;t++){var g,v,y=l[t],b=y.x,_=y.y,w=y.low,x=n&&s.stacks[(e.negStacks&&m>_?"-":"")+e.stackKey];s.isLog&&0>=_&&(y.y=_=null),y.plotX=o.translate(b,0,0,0,1,d,"flags"===this.type),n&&e.visible&&x&&x[b]&&(g=x[b],v=g.points[e.index+","+t],w=v[0],_=v[1],0===w&&(w=f(m,s.min)),s.isLog&&0>=w&&(w=null),y.total=y.stackTotal=g.total,y.percentage=g.total&&y.y/g.total*100,y.stackY=_,g.setOffset(e.pointXOffset||0,e.barW||0)),y.yBottom=u(w)?s.translate(w,0,1,0,1):null,c&&(_=e.modifyValue(_,y)),y.plotY="number"==typeof _&&1/0!==_?s.translate(_,0,1,0,1):$,y.clientX=p?o.translate(b,0,0,0,1):y.plotX,y.negative=y.y<(m||0),y.category=r&&r[y.x]!==$?r[y.x]:y.x}e.getSegments()},animate:function(e){var i,n,o,s=this,a=s.chart,l=a.renderer,h=s.options.animation,c=s.clipBox||a.clipBox,u=a.inverted;h&&!r(h)&&(h=Mi[s.type].animation),o=["_sharedClip",h.duration,h.easing,c.height].join(","),e?(i=a[o],n=a[o+"m"],i||(a[o]=i=l.clipRect(t(c,{width:0})),a[o+"m"]=n=l.clipRect(-99,u?-a.plotLeft:-a.plotTop,99,u?a.chartWidth:a.chartHeight)),s.group.clip(i),s.markerGroup.clip(n),s.sharedClipKey=o):(i=a[o],i&&i.animate({width:a.plotSizeX},h),a[o+"m"]&&a[o+"m"].animate({width:a.plotSizeX+99},h),s.animate=null)},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group,n=this.clipBox;i&&this.options.clip!==!1&&(e&&n||i.clip(n?t.renderer.clipRect(n):t.clipRect),this.markerGroup.clip()),Ti(this,"afterAnimate"),setTimeout(function(){e&&t[e]&&(n||(t[e]=t[e].destroy()),t[e+"m"]&&(t[e+"m"]=t[e+"m"].destroy()))},100)},drawPoints:function(){var e,i,n,o,r,s,a,l,h,c,u,d,p=this,m=p.points,g=p.chart,v=p.options,y=v.marker,b=p.pointAttr[""],_=p.markerGroup,w=f(y.enabled,p.activePointCount<.5*p.xAxis.len/y.radius);if(y.enabled!==!1||p._hasPointMarkers)for(o=m.length;o--;)r=m[o],i=ve(r.plotX),n=r.plotY,h=r.graphic,c=r.marker||{},u=w&&c.enabled===$||c.enabled,d=g.isInsidePlot(ge(i),n,g.inverted),u&&n!==$&&!isNaN(n)&&null!==r.y?(e=r.pointAttr[r.selected?ni:ei]||b,s=e.r,a=f(c.symbol,p.symbol),l=0===a.indexOf("url"),h?h[d?"show":"hide"](!0).animate(t({x:i-s,y:n-s},h.symbolName?{width:2*s,height:2*s}:{})):d&&(s>0||l)&&(r.graphic=h=g.renderer.symbol(a,i-s,n-s,2*s,2*s).attr(e).add(_))):h&&(r.graphic=h.destroy())},convertAttribs:function(t,e,i,n){var o,r,s=this.pointAttrToOptions,a={};t=t||{},e=e||{},i=i||{},n=n||{};for(o in s)r=s[o],a[o]=f(t[r],e[o],i[o],n[o]);return a},getAttribs:function(){var e,i,n,o,r,s,a=this,l=a.options,h=Mi[a.type].marker?l.marker:l,c=h.states,d=c[ii],p=a.color,f={stroke:p,fill:p},m=a.points||[],g=[],v=a.pointAttrToOptions,y=a.hasPointSpecificOptions,b=l.negativeColor,_=h.lineColor,w=h.fillColor,x=l.turboThreshold;if(l.marker?(d.radius=d.radius||h.radius+2,d.lineWidth=d.lineWidth||h.lineWidth+1):d.color=d.color||Ni(d.color||p).brighten(d.brightness).get(),g[ei]=a.convertAttribs(h,f),_i([ii,ni],function(t){g[t]=a.convertAttribs(c[t],g[ei])}),a.pointAttr=g,i=m.length,!x||x>i||y)for(;i--;){if(n=m[i],h=n.options&&n.options.marker||n.options,h&&h.enabled===!1&&(h.radius=0),n.negative&&b&&(n.color=n.fillColor=b),y=l.colorByPoint||n.color,n.options)for(s in v)u(h[v[s]])&&(y=!0);y?(h=h||{},o=[],c=h.states||{},e=c[ii]=c[ii]||{},l.marker||(e.color=e.color||!n.options.color&&d.color||Ni(n.color).brighten(e.brightness||d.brightness).get()),r={color:n.color},w||(r.fillColor=n.color),_||(r.lineColor=n.color),o[ei]=a.convertAttribs(t(r,h),g[ei]),o[ii]=a.convertAttribs(c[ii],g[ii],o[ei]),o[ni]=a.convertAttribs(c[ni],g[ni],o[ei])):o=g,n.pointAttr=o}},destroy:function(){var t,e,i,n,o,r=this,s=r.chart,a=/AppleWebKit\/533/.test(Te),l=r.data||[];for(Ti(r,"destroy"),Si(r),_i(r.axisTypes||[],function(t){o=r[t],o&&(c(o.series,r),o.isDirty=o.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),e=l.length;e--;)i=l[e],i&&i.destroy&&i.destroy();r.points=null,clearTimeout(r.animationTimeout),_i(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(e){r[e]&&(t=a&&"group"===e?"hide":"destroy",r[e][t]())}),s.hoverSeries===r&&(s.hoverSeries=null),c(s.series,r);for(n in r)delete r[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return _i(t,function(o,r){var s,a=o.plotX,l=o.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,o,r)):(i.push(r?Je:Qe),n&&r&&(s=t[r-1],"right"===n?i.push(s.plotX,l):"center"===n?i.push((s.plotX+a)/2,s.plotY,(s.plotX+a)/2,l):i.push(a,s.plotY)),i.push(o.plotX,o.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return _i(e.segments,function(o){t=e.getSegmentPath(o),o.length>1?i=i.concat(t):n.push(o[0])}),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,o=e.dashStyle,r="square"!==e.linecap,s=this.getGraphPath(),a=e.negativeColor;a&&i.push(["graphNeg",a]),_i(i,function(i,a){var l,h=i[0],c=t[h];c?(Di(c),c.animate({d:s})):n&&s.length&&(l={stroke:i[1],"stroke-width":n,fill:Ke,zIndex:1},o?l.dashstyle=o:r&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[h]=t.chart.renderer.path(s).attr(l).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e,i,n,o,r=this.options,s=this.chart,a=s.renderer,l=r.negativeColor||r.negativeFillColor,h=this.graph,c=this.area,u=this.posClip,d=this.negClip,p=s.chartWidth,f=s.chartHeight,m=be(p,f),g=this.yAxis;l&&(h||c)&&(t=ge(g.toPixels(r.threshold||0,!0)),0>t&&(m-=t),n={x:0,y:0,width:m,height:t},o={x:0,y:t,width:m,height:m},s.inverted&&(n.height=o.y=s.plotWidth-t,a.isVML&&(n={x:s.plotWidth-t-s.plotLeft,y:0,width:p,height:f},o={x:t+s.plotLeft-p,y:0,width:s.plotLeft+t,height:p})),g.reversed?(e=o,i=n):(e=n,i=o),u?(u.animate(e),d.animate(i)):(this.posClip=u=a.clipRect(e),this.negClip=d=a.clipRect(i),h&&this.graphNeg&&(h.clip(u),this.graphNeg.clip(d)),c&&(c.clip(u),this.areaNeg.clip(d))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};_i(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(ki(i,"resize",t),ki(e,"destroy",function(){Si(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,o){var r=this[t],s=!r;return s&&(this[t]=r=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(o)),r[s?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,o=n.animation,r=o&&!!e.animate&&i.renderer.isSVG&&f(o.duration,500)||0,s=e.visible?Xe:Ve,a=n.zIndex,l=e.hasRendered,h=i.seriesGroup;t=e.plotGroup("group","series",s,a,h),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,h),r&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||t.clip(i.clipRect),r&&e.animate(),l||(r?e.animationTimeout=setTimeout(function(){e.afterAnimate()},r):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.group,o=t.xAxis,r=t.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:f(o&&o.left,e.plotLeft),translateY:f(r&&r.top,e.plotTop)})),t.translate(),t.setTooltipPoints&&t.setTooltipPoints(!0),t.render(),i&&Ti(t,"updatedData")}},F.prototype={destroy:function(){D(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?x(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:Ve}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:Ve}).add(t)},setOffset:function(t,e){var i,n=this,o=n.axis,r=o.chart,s=r.inverted,a=this.isNegative,l=o.translate(o.usePercentage?100:this.total,0,0,0,1),h=o.translate(0),c=we(l-h),u=r.xAxis[0].translate(this.x)+t,d=r.plotHeight,p={x:s?a?l:l-c:u,y:s?d-u-e:a?d-l-c:d-l,width:s?c:e,height:s?e:c},f=this.label;f&&(f.align(this.alignOptions,null,p),i=f.alignAttr,f[this.options.crop===!1||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))}},z.prototype.buildStacks=function(){var t=this.series,e=f(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},z.prototype.renderStackTotals=function(){var t,e,i,n=this,o=n.chart,r=o.renderer,s=n.stacks,a=n.stackTotalGroup;a||(n.stackTotalGroup=a=r.g("stack-labels").attr({visibility:Xe,zIndex:6}).add()),a.translate(o.plotLeft,o.plotTop);for(t in s){e=s[t];for(i in e)e[i].render(a)}},Zi.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,o,r,s,a,l=this,h=l.processedXData,c=l.processedYData,u=[],d=c.length,p=l.options,f=p.threshold,m=p.stack,g=p.stacking,v=l.stackKey,y="-"+v,b=l.negStacks,_=l.yAxis,w=_.stacks,x=_.oldStacks;for(r=0;d>r;r++)s=h[r],a=c[r],o=l.index+","+r,t=b&&f>a,n=t?y:v,w[n]||(w[n]={}),w[n][s]||(x[n]&&x[n][s]?(w[n][s]=x[n][s],w[n][s].total=null):w[n][s]=new F(_,_.options.stackLabels,t,s,m)),e=w[n][s],e.points[o]=[e.cum||0],"percent"===g?(i=t?v:y,b&&w[i]&&w[i][s]?(i=w[i][s],e.total=i.total=be(i.total,e.total)+we(a)||0):e.total=A(e.total+(we(a)||0))):e.total=A(e.total+(a||0)),e.cum=(e.cum||0)+(a||0),e.points[o].push(e.cum),u[r]=e.cum;"percent"===g&&(_.usePercentage=!0),this.stackedYData=u,_.oldStacks={}}},Zi.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;_i([e,"-"+e],function(e){for(var o,r,s,a,l=n.length;l--;)o=n[l],r=i[e]&&i[e][o],s=r&&r.points[t.index+","+l],s&&(a=r.total?100/r.total:0,s[0]=A(s[0]*a),s[1]=A(s[1]*a),t.stackedYData[l]=s[1])})},t(B.prototype,{addSeries:function(t,e,i){var n,o=this;return t&&(e=f(e,!0),Ti(o,"addSeries",{options:t},function(){n=o.initSeries(t),o.isDirtyLegend=!0,o.linkSeries(),e&&o.redraw(i)})),n},addAxis:function(t,i,n,o){var r,s=i?"xAxis":"yAxis",a=this.options;r=new z(this,e(t,{index:this[s].length,isX:i})),a[s]=p(a[s]||{}),a[s].push(t),f(n,!0)&&this.redraw(o)},showLoading:function(e){var i=this,n=i.options,o=i.loadingDiv,r=n.loading;o||(i.loadingDiv=o=g($e,{className:Ye+"loading"},t(r.style,{zIndex:10,display:Ke}),i.container),i.loadingSpan=g("span",null,r.labelStyle,o)),i.loadingSpan.innerHTML=e||n.lang.loading,i.loadingShown||(m(o,{opacity:0,display:"",left:i.plotLeft+Ze,top:i.plotTop+Ze,width:i.plotWidth+Ze,height:i.plotHeight+Ze}),Ei(o,{opacity:r.style.opacity},{duration:r.showDuration||0}),i.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&Ei(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){m(e,{display:Ke})}}),this.loadingShown=!1}}),t(Xi.prototype,{update:function(t,e,i){var n,o=this,s=o.series,a=o.graphic,l=s.data,h=s.chart,c=s.options;e=f(e,!0),o.firePointEvent("update",{options:t},function(){o.applyOptions(t),r(t)&&(s.getAttribs(),a&&(t&&t.marker&&t.marker.symbol?o.graphic=a.destroy():a.attr(o.pointAttr[o.state||""])),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy())),n=bi(o,l),s.updateParallelArrays(o,n),c.data[n]=o.options,s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(h.isDirtyBox=!0),"point"===c.legendType&&h.legend.destroyItem(o),e&&h.redraw(i)})},remove:function(t,e){var i,n=this,o=n.series,r=o.points,s=o.chart,a=o.data;R(e,s),t=f(t,!0),n.firePointEvent("remove",null,function(){i=bi(n,a),a.length===r.length&&r.splice(i,1),a.splice(i,1),o.options.data.splice(i,1),o.updateParallelArrays(n,"splice",i,1),n.destroy(),o.isDirty=!0,o.isDirtyData=!0,t&&s.redraw()})}}),t(Zi.prototype,{addPoint:function(t,e,i,n){var o,r,s,a,l=this,h=l.options,c=l.data,u=l.graph,d=l.area,p=l.chart,m=l.xAxis&&l.xAxis.names,g=u&&u.shift||0,v=h.data,y=l.xData;if(R(n,p),i&&_i([u,d,l.graphNeg,l.areaNeg],function(t){t&&(t.shift=g+1)}),d&&(d.isArea=!0),e=f(e,!0),o={series:l},l.pointClass.prototype.applyOptions.apply(o,[t]),s=o.x,a=y.length,l.requireSorting&&s<y[a-1])for(r=!0;a&&y[a-1]>s;)a--;l.updateParallelArrays(o,"splice",a,0,0),l.updateParallelArrays(o,a),m&&(m[s]=o.name),v.splice(a,0,t),r&&(l.data.splice(a,0,null),l.processData()),"point"===h.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(o,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),p.redraw())},remove:function(t,e){var i=this,n=i.chart;t=f(t,!0),i.isRemoving||(i.isRemoving=!0,Ti(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(i,n){var o,r=this.chart,s=this.userOptions,a=this.type,l=pi[a].prototype;i=e(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},i),this.remove(!1);for(o in l)l.hasOwnProperty(o)&&(this[o]=$);t(this,pi[i.type||a].prototype),this.init(r,i),f(n,!0)&&r.redraw(!1)}}),t(z.prototype,{update:function(i,n){var o=this.chart;i=o.options[this.coll][this.options.index]=e(this.userOptions,i),this.destroy(!0),this._addedPlotLB=$,this.init(o,t(i,{events:$})),o.isDirtyBox=!0,f(n,!0)&&o.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,o=n.length;o--;)n[o]&&n[o].remove(!1);c(e.axes,this),c(e[i],this),e.options[i].splice(this.options.index,1),_i(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,f(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Ki=v(Zi);pi.line=Ki,Mi.area=e(Ai,{threshold:0});var Qi=v(Zi,{type:"area",getSegments:function(){var t,e,i,n,o,r=[],s=[],a=[],l=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],u={},d=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<d.length;n++)u[d[n].x]=d[n];for(o in c)null!==c[o].total&&a.push(+o);a.sort(function(t,e){return t-e}),_i(a,function(n){(!p||u[n]&&null!==u[n].y)&&(u[n]?s.push(u[n]):(t=l.translate(n),i=c[n].percent?c[n].total?100*c[n].cum/c[n].total:0:c[n].cum,e=h.toPixels(i,!0),s.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:ze})))}),s.length&&r.push(s)}else Zi.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(t){var e,i,n=Zi.prototype.getSegmentPath.call(this,t),o=[].concat(n),r=this.options,s=n.length,a=this.yAxis.getThreshold(r.threshold);if(3===s&&o.push(Je,n[1],n[2]),r.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)i=f(t[e].yBottom,a),e<t.length-1&&r.step&&o.push(t[e+1].plotX,i),o.push(t[e].plotX,i);else this.closeSegment(o,t,a);return this.areaPath=this.areaPath.concat(o),n},closeSegment:function(t,e,i){t.push(Je,e[e.length-1].plotX,i,Je,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Zi.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,o=i.negativeFillColor,r=[["area",this.color,i.fillColor]];(n||o)&&r.push(["areaNeg",n,o]),_i(r,function(n){var o=n[0],r=t[o];r?r.animate({d:e}):t[o]=t.chart.renderer.path(e).attr({fill:f(n[2],Ni(n[1]).setOpacity(f(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Vi.drawRectangle});pi.area=Qi,Mi.spline=e(Ai);var Ji=v(Zi,{type:"spline",getPointSpline:function(t,e,i){var n,o,r,s,a,l=1.5,h=l+1,c=e.plotX,u=e.plotY,d=t[i-1],p=t[i+1];if(d&&p){var f,m=d.plotX,g=d.plotY,v=p.plotX,y=p.plotY;n=(l*c+m)/h,o=(l*u+g)/h,r=(l*c+v)/h,s=(l*u+y)/h,f=(s-o)*(r-c)/(r-n)+u-s,o+=f,s+=f,o>g&&o>u?(o=be(g,u),s=2*u-o):g>o&&u>o&&(o=_e(g,u),s=2*u-o),s>y&&s>u?(s=be(y,u),o=2*u-s):y>s&&u>s&&(s=_e(y,u),o=2*u-s),e.rightContX=r,e.rightContY=s}return i?(a=["C",d.rightContX||d.plotX,d.rightContY||d.plotY,n||c,o||u,c,u],d.rightContX=d.rightContY=null):a=[Qe,c,u],a}});pi.spline=Ji,Mi.column=e(Ai,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var tn=v(Zi,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Zi.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&_i(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,o=i.xAxis,r=i.yAxis,s=o.reversed,a={},l=0;n.grouping===!1?l=1:_i(i.chart.series,function(n){var o=n.options,s=n.yAxis;n.type===i.type&&n.visible&&r.len===s.len&&r.pos===s.pos&&(o.stacking?(t=n.stackKey,a[t]===$&&(a[t]=l++),e=a[t]):o.grouping!==!1&&(e=l++),n.columnIndex=e)});var h=_e(we(o.transA)*(o.ordinalSlope||n.pointRange||o.closestPointRange||o.tickInterval||1),o.len),c=h*n.groupPadding,d=h-2*c,p=d/l,m=n.pointWidth,g=u(m)?(p-m)/2:p*n.pointPadding,v=f(m,p-2*g),y=(s?l-(i.columnIndex||0):i.columnIndex)||0,b=g+(c+y*p-h/2)*(s?-1:1);return i.columnMetrics={width:v,offset:b}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=f(i.borderWidth,t.activePointCount>.5*t.xAxis.len?0:1),o=t.yAxis,r=i.threshold,s=t.translatedThreshold=o.getThreshold(r),a=f(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=ye(be(h,1+2*n)),u=t.pointXOffset=l.offset,d=-(n%2?.5:0),p=n%2?.5:1;e.renderer.isVML&&e.inverted&&(p+=1),Zi.prototype.translate.apply(t),_i(t.points,function(i){var n,r,l,m,g=f(i.yBottom,s),v=_e(be(-999-g,i.plotY),o.len+999+g),y=i.plotX+u,b=c,_=_e(v,g),w=be(v,g)-_;we(w)<a&&a&&(w=a,_=ge(we(_-s)>a?g-a:s-(o.translate(i.y,0,1,0,1)<=s?a:0))),i.barX=y,i.pointWidth=h,i.tooltipPos=e.inverted?[o.len-v,t.xAxis.len-y-b/2]:[y+b/2,v],m=we(y)<.5,n=ge(y+b)+d,y=ge(y)+d,b=n-y,l=we(_)<.5,r=ge(_+w)+p,_=ge(_)+p,w=r-_,m&&(y+=1,b-=1),l&&(_-=1,w+=1),i.shapeType="rect",i.shapeArgs={x:y,y:_,width:b,height:w}})},getSymbol:ze,drawLegendSymbol:Vi.drawRectangle,drawGraph:ze,drawPoints:function(){var t,i,n,o=this,r=this.chart,s=o.options,a=r.renderer,l=s.animationLimit||250;_i(o.points,function(h){var c=h.plotY,d=h.graphic;c===$||isNaN(c)||null===h.y?d&&(h.graphic=d.destroy()):(t=h.shapeArgs,n=u(o.borderWidth)?{"stroke-width":o.borderWidth}:{},i=h.pointAttr[h.selected?ni:ei]||o.pointAttr[ei],d?(Di(d),d.attr(n)[r.pointCount<l?"animate":"attr"](e(t))):h.graphic=d=a[h.shapeType](t).attr(i).attr(n).add(o.group).shadow(s.shadow,null,s.stacking&&!s.borderRadius))})},animate:function(t){var e,i=this,n=this.yAxis,o=i.options,r=this.chart.inverted,s={};Oe&&(t?(s.scaleY=.001,e=_e(n.pos+n.len,be(n.pos,n.toPixels(o.threshold))),r?s.translateX=e-n.len:s.translateY=e,i.group.attr(s)):(s.scaleY=1,s[r?"translateX":"translateY"]=n.pos,i.group.animate(s,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&_i(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Zi.prototype.remove.apply(t,arguments)}});pi.column=tn,Mi.bar=e(Mi.column);var en=v(tn,{type:"bar",inverted:!0});pi.bar=en,Mi.pie=e(Ai,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var nn=v(Xi,{init:function(){Xi.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:f(i.name,"Slice")}),e=function(t){i.slice("select"===t.type)},ki(i,"select",e),ki(i,"unselect",e),i},setVisible:function(t){var e=this,i=e.series,n=i.chart;e.visible=e.options.visible=t=t===$?!e.visible:t,i.options.data[bi(e,i.data)]=e.options,_i(["graphic","dataLabel","connector","shadowGroup"],function(i){e[i]&&e[i][t?"show":"hide"](!0)}),e.legendItem&&n.legend.colorizeItem(e,t),!i.isDirty&&i.options.ignoreHiddenPoint&&(i.isDirty=!0,n.redraw())},slice:function(t,e,i){var n,o=this,r=o.series,s=r.chart;R(i,s),e=f(e,!0),o.sliced=o.options.sliced=t=u(t)?t:!o.sliced,r.options.data[bi(o,r.data)]=o.options,n=t?o.slicedTranslation:{translateX:0,translateY:0},o.graphic.animate(n),o.shadowGroup&&o.shadowGroup.animate(n)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),on={type:"pie",isCartesian:!1,pointClass:nn,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:ze,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(_i(i,function(t){var i=t.graphic,o=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:o.r,start:o.start,end:o.end},e.options.animation))}),e.animate=null)},setData:function(t,e,i,n){Zi.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),f(e,!0)&&this.chart.redraw(i)},generatePoints:function(){var t,e,i,n,o=0,r=this.options.ignoreHiddenPoint;for(Zi.prototype.generatePoints.call(this),e=this.points,i=e.length,t=0;i>t;t++)n=e[t],o+=r&&!n.visible?0:n.y;for(this.total=o,t=0;i>t;t++)n=e[t],n.percentage=o>0?n.y/o*100:0,n.total=o},translate:function(t){this.generatePoints();var e,i,n,o,r,s,a,l=this,h=0,c=1e3,u=l.options,d=u.slicedOffset,p=d+u.borderWidth,m=u.startAngle||0,g=l.startAngleRad=ke/180*(m-90),v=l.endAngleRad=ke/180*(f(u.endAngle,m+360)-90),y=v-g,b=l.points,_=u.dataLabels.distance,w=u.ignoreHiddenPoint,x=b.length;for(t||(l.center=t=l.getCenter()),l.getX=function(e,i){return n=me.asin(_e((e-t[1])/(t[2]/2+_),1)),t[0]+(i?-1:1)*xe(n)*(t[2]/2+_)},s=0;x>s;s++)a=b[s],e=g+h*y,(!w||a.visible)&&(h+=a.percentage/100),i=g+h*y,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:ge(e*c)/c,end:ge(i*c)/c},n=(i+e)/2,n>1.5*ke?n-=2*ke:-ke/2>n&&(n+=2*ke),a.slicedTranslation={translateX:ge(xe(n)*d),translateY:ge(Ce(n)*d)},o=xe(n)*t[2]/2,r=Ce(n)*t[2]/2,a.tooltipPos=[t[0]+.7*o,t[1]+.7*r],a.half=-ke/2>n||n>ke/2?1:0,a.angle=n,p=_e(p,_/2),a.labelPos=[t[0]+o+xe(n)*_,t[1]+r+Ce(n)*_,t[0]+o+xe(n)*p,t[1]+r+Ce(n)*p,t[0]+o,t[1]+r,0>_?"center":a.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var e,i,n,o,r=this,s=r.chart,a=s.renderer,l=r.options.shadow;l&&!r.shadowGroup&&(r.shadowGroup=a.g("shadow").add(r.group)),_i(r.points,function(s){i=s.graphic,o=s.shapeArgs,n=s.shadowGroup,l&&!n&&(n=s.shadowGroup=a.g("shadow").add(r.shadowGroup)),e=s.sliced?s.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(o,e)):s.graphic=i=a[s.shapeType](o).setRadialReference(r.center).attr(s.pointAttr[s.selected?ni:ei]).attr({"stroke-linejoin":"round"}).attr(e).add(r.group).shadow(l,n),void 0!==s.visible&&s.setVisible(s.visible)})},sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Vi.drawRectangle,getCenter:Yi.getCenter,getSymbol:ze};on=v(Zi,on),pi.pie=on,Zi.prototype.drawDataLabels=function(){var i,n,o,r,s=this,a=s.options,l=a.cursor,h=a.dataLabels,c=s.points;(h.enabled||s._hasPointLabels)&&(s.dlProcessOptions&&s.dlProcessOptions(h),r=s.plotGroup("dataLabelsGroup","data-labels",Ve,h.zIndex||6),!s.hasRendered&&f(h.defer,!0)&&(r.attr({opacity:0}),ki(s,"afterAnimate",function(){s.dataLabelsGroup.show()[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),n=h,_i(c,function(a){var c,d,p,m,g,v=a.dataLabel,y=a.connector,b=!0;if(i=a.options&&a.options.dataLabels,c=f(i&&i.enabled,n.enabled),v&&!c)a.dataLabel=v.destroy();else if(c){if(h=e(n,i),g=h.rotation,d=a.getLabelConfig(),o=h.format?x(h.format,d):h.formatter.call(d,h),h.style.color=f(h.color,h.style.color,s.color,"black"),v)u(o)?(v.attr({text:o}),b=!1):(a.dataLabel=v=v.destroy(),y&&(a.connector=y.destroy()));else if(u(o)){p={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":h.borderWidth,r:h.borderRadius||0,rotation:g,padding:h.padding,zIndex:1};
for(m in p)p[m]===$&&delete p[m];v=a.dataLabel=s.chart.renderer[g?"text":"label"](o,0,-999,null,null,null,h.useHTML).attr(p).css(t(h.style,l&&{cursor:l})).add(r).shadow(h.shadow)}v&&s.alignDataLabel(a,v,h,null,b)}}))},Zi.prototype.alignDataLabel=function(e,i,n,o,r){var s,a=this.chart,l=a.inverted,h=f(e.plotX,-999),c=f(e.plotY,-999),u=i.getBBox(),d=this.visible&&(e.series.forceDL||a.isInsidePlot(h,ge(c),l)||o&&a.isInsidePlot(h,l?o.x+1:o.y+o.height-1,l));d&&(o=t({x:l?a.plotWidth-c:h,y:ge(l?a.plotHeight-h:c),width:0,height:0},o),t(n,{width:u.width,height:u.height}),n.rotation?(s={align:n.align,x:o.x+n.x+o.width/2,y:o.y+n.y+o.height/2},i[r?"attr":"animate"](s)):(i.align(n,null,o),s=i.alignAttr,"justify"===f(n.overflow,"justify")?this.justifyDataLabel(i,n,s,u,o,r):f(n.crop,!0)&&(d=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+u.width,s.y+u.height)))),d||(i.attr({y:-999}),i.placed=!1)},Zi.prototype.justifyDataLabel=function(t,e,i,n,o,r){var s,a,l=this.chart,h=e.align,c=e.verticalAlign;s=i.x,0>s&&("right"===h?e.align="left":e.x=-s,a=!0),s=i.x+n.width,s>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-s,a=!0),s=i.y,0>s&&("bottom"===c?e.verticalAlign="top":e.y=-s,a=!0),s=i.y+n.height,s>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!r,t.align(e,null,o))},pi.pie&&(pi.pie.prototype.drawDataLabels=function(){var t,e,i,n,o,r,s,a,l,h,c,u,d,p=this,m=p.data,g=p.chart,v=p.options.dataLabels,y=f(v.connectorPadding,10),b=f(v.connectorWidth,1),_=g.plotWidth,w=g.plotHeight,x=f(v.softConnector,!0),C=v.distance,k=p.center,S=k[2]/2,T=k[1],P=C>0,D=[[],[]],L=[0,0,0,0],M=function(t,e){return e.y-t.y};if(p.visible&&(v.enabled||p._hasPointLabels)){for(Zi.prototype.drawDataLabels.apply(p),_i(m,function(t){t.dataLabel&&t.visible&&D[t.half].push(t)}),u=0;!s&&m[u];)s=m[u]&&m[u].dataLabel&&(m[u].dataLabel.getBBox().height||21),u++;for(u=2;u--;){var A,R,O,I=[],N=[],j=D[u],H=j.length;if(p.sortByAngle(j,u-.5),C>0){for(R=T-S-C;T+S+C>=R;R+=s)I.push(R);if(A=I.length,H>A){for(c=[].concat(j),c.sort(M),d=H;d--;)c[d].rank=d;for(d=H;d--;)j[d].rank>=A&&j.splice(d,1);H=j.length}for(d=0;H>d;d++){t=j[d],r=t.labelPos;var z,B,F=9999;for(B=0;A>B;B++)z=we(I[B]-r[1]),F>z&&(F=z,O=B);if(d>O&&null!==I[d])O=d;else if(H-d+O>A&&null!==I[d])for(O=A-H+d;null===I[O];)O++;else for(;null===I[O];)O++;N.push({i:O,y:I[O]}),I[O]=null}N.sort(M)}for(d=0;H>d;d++){var U,W;t=j[d],r=t.labelPos,n=t.dataLabel,h=t.visible===!1?Ve:Xe,W=r[1],C>0?(U=N.pop(),O=U.i,l=U.y,(W>l&&null!==I[O+1]||l>W&&null!==I[O-1])&&(l=W)):l=W,a=v.justify?k[0]+(u?-1:1)*(S+C):p.getX(0===O||O===I.length-1?W:l,u),n._attr={visibility:h,align:r[6]},n._pos={x:a+v.x+({left:y,right:-y}[r[6]]||0),y:l+v.y-10},n.connX=a,n.connY=l,null===this.options.size&&(o=n.width,y>a-o?L[3]=be(ge(o-a+y),L[3]):a+o>_-y&&(L[1]=be(ge(a+o-_+y),L[1])),0>l-s/2?L[0]=be(ge(-l+s/2),L[0]):l+s/2>w&&(L[2]=be(ge(l+s/2-w),L[2])))}}(0===E(L)||this.verifyDataLabelOverflow(L))&&(this.placeDataLabels(),P&&b&&_i(this.points,function(t){e=t.connector,r=t.labelPos,n=t.dataLabel,n&&n._pos?(h=n._attr.visibility,a=n.connX,l=n.connY,i=x?[Qe,a+("left"===r[6]?5:-5),l,"C",a,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],Je,r[4],r[5]]:[Qe,a+("left"===r[6]?5:-5),l,Je,r[2],r[3],Je,r[4],r[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":b,stroke:v.connectorColor||t.color||"#606060",visibility:h}).add(p.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},pi.pie.prototype.placeDataLabels=function(){_i(this.points,function(t){var e,i=t.dataLabel;i&&(e=i._pos,e?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))})},pi.pie.prototype.alignDataLabel=ze,pi.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,o=n.center,r=n.minSize||80,s=r;return null!==o[0]?s=be(i[2]-be(t[1],t[3]),r):(s=be(i[2]-t[1]-t[3],r),i[0]+=(t[3]-t[1])/2),null!==o[1]?s=be(_e(s,i[2]-be(t[0],t[2])),r):(s=be(_e(s,i[2]-t[0]-t[2]),r),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,this.translate(i),_i(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),pi.column&&(pi.column.prototype.alignDataLabel=function(t,i,n,o,r){var s=this.chart,a=s.inverted,l=t.dlBox||t.shapeArgs,h=t.below||t.plotY>f(this.translatedThreshold,s.plotSizeY),c=f(n.inside,!!this.options.stacking);l&&(o=e(l),a&&(o={x:s.plotWidth-o.y-o.height,y:s.plotHeight-o.x-o.width,width:o.height,height:o.width}),c||(a?(o.x+=h?0:o.width,o.width=0):(o.y+=h?o.height:0,o.height=0))),n.align=f(n.align,!a||c?"center":h?"right":"left"),n.verticalAlign=f(n.verticalAlign,a||c?"middle":h?"top":"bottom"),Zi.prototype.alignDataLabel.call(this,t,i,n,o,r)});var rn=fi.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,o=n&&{cursor:n},r=function(i){var n,o=i.target;for(e.hoverSeries!==t&&t.onMouseOver();o&&!n;)n=o.point,o=o.parentNode;n!==$&&n!==e.hoverPoint&&n.onMouseOver(i)};_i(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(_i(t.trackerGroups,function(e){t[e]&&(t[e].addClass(Ye+"tracker").on("mouseover",r).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(o),q&&t[e].on("touchstart",r))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e,i=this,n=i.options,o=n.trackByArea,r=[].concat(o?i.areaPath:i.graphPath),s=r.length,a=i.chart,l=a.pointer,h=a.renderer,c=a.options.tooltip.snap,u=i.tracker,d=n.cursor,p=d&&{cursor:d},f=i.singlePoints,m=function(){a.hoverSeries!==i&&i.onMouseOver()},g="rgba(192,192,192,"+(Oe?1e-4:.002)+")";if(s&&!o)for(e=s+1;e--;)r[e]===Qe&&r.splice(e+1,0,r[e+1]-c,r[e+2],Je),(e&&r[e]===Qe||e===s)&&r.splice(e,0,Je,r[e-2]+c,r[e-1]);for(e=0;e<f.length;e++)t=f[e],r.push(Qe,t.plotX-c,t.plotY,Je,t.plotX+c,t.plotY);u?u.attr({d:r}):(i.tracker=h.path(r).attr({"stroke-linejoin":"round",visibility:i.visible?Xe:Ve,stroke:g,fill:o?g:Ke,"stroke-width":n.lineWidth+(o?0:2*c),zIndex:2}).add(i.group),_i([i.tracker,i.markerGroup],function(t){t.addClass(Ye+"tracker").on("mouseover",m).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(p),q&&t.on("touchstart",m)}))}};pi.column&&(tn.prototype.drawTracker=rn.drawTrackerPoint),pi.pie&&(pi.pie.prototype.drawTracker=rn.drawTrackerPoint),pi.scatter&&(ScatterSeries.prototype.drawTracker=rn.drawTrackerPoint),t(qi.prototype,{setItemEvents:function(t,e,i,n,o){var r=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState(ii),e.css(r.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:o),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):Ti(t,i,e,n)})},createCheckboxForItem:function(t){var e=this;t.checkbox=g("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},e.options.itemCheckboxStyle,e.chart.container),ki(t.checkbox,"click",function(e){var i=e.target;Ti(t,"checkboxClick",{checked:i.checked},function(){t.select()})})}}),Y.legend.itemStyle.cursor="pointer",t(B.prototype,{showResetZoom:function(){var t=this,e=Y.lang,i=t.options.chart.resetZoomButton,n=i.theme,o=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,o&&o.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,r)},zoomOut:function(){var t=this;Ti(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,o=n.pointer,s=!1;!t||t.resetSelection?_i(n.axes,function(t){e=t.zoom()}):_i(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(o[n?"zoomX":"zoomY"]||o[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(s=!0))}),i=n.resetZoomButton,s&&!i?n.showResetZoom():!s&&r(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(f(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,o=n.hoverPoints;o&&_i(o,function(t){t.setState()}),_i("xy"===e?[1,0]:[1],function(e){var o=t[e?"chartX":"chartY"],r=n[e?"xAxis":"yAxis"][0],s=n[e?"mouseDownX":"mouseDownY"],a=(r.pointRange||0)/2,l=r.getExtremes(),h=r.toValue(s-o,!0)+a,c=r.toValue(s+n[e?"plotWidth":"plotHeight"]-o,!0)-a;r.series.length&&h>_e(l.dataMin,l.min)&&c<be(l.dataMax,l.max)&&(r.setExtremes(h,c,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=o}),i&&n.redraw(!1),m(n.container,{cursor:"move"})}}),t(Xi.prototype,{select:function(t,e){var i=this,n=i.series,o=n.chart;t=f(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[bi(i,n.data)]=i.options,i.setState(t&&ni),e||_i(o.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[bi(t,n.data)]=t.options,t.setState(ei),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this,i=e.series,n=i.chart,o=n.tooltip,r=n.hoverPoint;r&&r!==e&&r.onMouseOut(),e.firePointEvent("mouseOver"),!o||o.shared&&!i.noSharedTooltip||o.refresh(e,t),e.setState(ii),n.hoverPoint=e},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&-1!==bi(this,e)||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,i=this,n=e(i.series.options.point,i.options),o=n.events;i.events=o;for(t in o)ki(i,t,o[t]);this.hasImportedEvents=!0}},setState:function(i,n){var o,r,s,a,l=this,h=l.plotX,c=l.plotY,u=l.series,d=u.options.states,p=Mi[u.type].marker&&u.options.marker,f=p&&!p.enabled,m=p&&p.states[i],g=m&&m.enabled===!1,v=u.stateMarkerGraphic,y=l.marker||{},b=u.chart,_=u.halo;i=i||ei,a=l.pointAttr[i]||u.pointAttr[i],i===l.state&&!n||l.selected&&i!==ni||d[i]&&d[i].enabled===!1||i&&(g||f&&m.enabled===!1)||i&&y.states&&y.states[i]&&y.states[i].enabled===!1||(l.graphic?(o=p&&l.graphic.symbolName&&a.r,l.graphic.attr(e(a,o?{x:h-o,y:c-o,width:2*o,height:2*o}:{})),v&&v.hide()):(i&&m&&(o=m.radius,s=y.symbol||u.symbol,v&&v.currentSymbol!==s&&(v=v.destroy()),v?v[n?"animate":"attr"]({x:h-o,y:c-o}):s&&(u.stateMarkerGraphic=v=b.renderer.symbol(s,h-o,c-o,2*o,2*o).attr(a).add(u.markerGroup),v.currentSymbol=s)),v&&v[i&&b.isInsidePlot(h,c,b.inverted)?"show":"hide"]()),r=d[i]&&d[i].halo,r&&r.size?(_||(u.halo=_=b.renderer.path().add(u.seriesGroup)),_.attr(t({fill:Ni(l.color||u.color).setOpacity(r.opacity).get()},r.attributes))[n?"animate":"attr"]({d:l.haloPath(r.size)})):_&&_.attr({d:[]}),l.state=i)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),o=i.inverted;return i.renderer.symbols.circle(n.translateX+(o?e.yAxis.len-this.plotY:this.plotX)-t,n.translateY+(o?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),t(Zi.prototype,{onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&Ti(t,"mouseOver"),t.setState(ii),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,o=i.hoverPoint;o&&o.onMouseOut(),t&&e.events.mouseOut&&Ti(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState(),i.hoverSeries=null},setState:function(t){var e,i=this,n=i.options,o=i.graph,r=i.graphNeg,s=n.states,a=n.lineWidth;if(t=t||ei,i.state!==t){if(i.state=t,s[t]&&s[t].enabled===!1)return;t&&(a=s[t].lineWidth||a+1),o&&!o.dashstyle&&(e={"stroke-width":a},o.attr(e),r&&r.attr(e))}},setVisible:function(t,e){var i,n=this,o=n.chart,r=n.legendItem,s=o.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=t=n.userOptions.visible=t===$?!a:t,i=t?"show":"hide",_i(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),o.hoverSeries===n&&n.onMouseOut(),r&&o.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&_i(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),_i(n.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(o.isDirtyBox=!0),e!==!1&&o.redraw(),Ti(n,i)},setTooltipPoints:function(t){var e,i,n,o,r,s,a,l=this,h=[],c=l.xAxis,u=c&&c.getExtremes(),d=c?c.tooltipLen||c.len:l.chart.plotSizeX,p=[];if(l.options.enableMouseTracking!==!1&&!l.singularTooltips){for(t&&(l.tooltipPoints=null),_i(l.segments||l.points,function(t){h=h.concat(t)}),c&&c.reversed&&(h=h.reverse()),l.orderTooltipPoints&&l.orderTooltipPoints(h),e=h.length,a=0;e>a;a++)if(o=h[a],r=o.x,r>=u.min&&r<=u.max)for(s=h[a+1],i=n===$?0:n+1,n=h[a+1]?_e(be(0,ve((o.clientX+(s?s.wrappedClientX||s.clientX:d))/2)),d):d;i>=0&&n>=i;)p[i++]=o;l.tooltipPoints=p}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===$?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),Ti(e,t?"select":"unselect")},drawTracker:rn.drawTrackerGraph}),_(Zi.prototype,"init",function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1)),e=i.xAxis,e&&e.options.ordinal&&ki(i,"updatedData",function(){delete e.ordinalIndex})}),_(z.prototype,"getTimeTicks",function(t,e,i,n,o,r,s,a){var l,h,c,d,p,f=0,m=0,g={},v=[],y=-Number.MAX_VALUE,b=this.options.tickPixelInterval;if(!this.options.ordinal||!r||r.length<3||i===$)return t.call(this,e,i,n,o);for(d=r.length;d>m;m++){if(p=m&&r[m-1]>n,r[m]<i&&(f=m),m===d-1||r[m+1]-r[m]>5*s||p){if(r[m]>y){for(l=t.call(this,e,r[f],r[m],o);l.length&&l[0]<=y;)l.shift();l.length&&(y=l[l.length-1]),v=v.concat(l)}f=m+1}if(p)break}if(c=l.info,a&&c.unitRange<=Q[ai]){for(m=v.length-1,f=1;m>f;f++)new Date(v[f]-ee)[re]()!==new Date(v[f-1]-ee)[re]()&&(g[v[f]]=li,h=!0);h&&(g[v[0]]=li),c.higherRanks=g}if(v.info=c,a&&u(b)){for(var _,w,x,C,k,S=v.length,T=S,P=[],E=[];T--;)w=this.translate(v[T]),x&&(E[T]=x-w),P[T]=x=w;for(E.sort(),C=E[ve(E.length/2)],.6*b>C&&(C=null),T=v[S-1]>n?S-1:S,x=void 0;T--;)w=P[T],k=x-w,x&&.8*b>k&&(null===C||.8*C>k)?(g[v[T]]&&!g[v[T+1]]?(_=T+1,x=w):_=T,v.splice(_,1)):x=w}return v}),t(z.prototype,{beforeSetTickPositions:function(){var t,e,i,n,o,r,s=this,a=[],l=!1,h=s.getExtremes(),c=h.min,u=h.max;if(s.options.ordinal){if(_i(s.series,function(e,i){if(e.visible!==!1&&e.takeOrdinalPosition!==!1&&(a=a.concat(e.processedXData),t=a.length,a.sort(function(t,e){return t-e}),t))for(i=t-1;i--;)a[i]===a[i+1]&&a.splice(i,1)}),t=a.length,t>2){for(e=a[1]-a[0],r=t-1;r--&&!l;)a[r+1]-a[r]!==e&&(l=!0);!s.options.keepOrdinalPadding&&(a[0]-c>e||u-a[a.length-1]>e)&&(l=!0)}l?(s.ordinalPositions=a,i=s.val2lin(be(c,a[0]),!0),n=s.val2lin(_e(u,a[a.length-1]),!0),s.ordinalSlope=o=(u-c)/(n-i),s.ordinalOffset=c-i*o):s.ordinalPositions=s.ordinalSlope=s.ordinalOffset=$}s.groupIntervalFactor=null},val2lin:function(t,e){var i=this,n=i.ordinalPositions;if(n){var o,r,s,a=n.length;for(o=a;o--;)if(n[o]===t){s=o;break}for(o=a-1;o--;)if(t>n[o]||0===o){r=(t-n[o])/(n[o+1]-n[o]),s=o+r;break}return e?s:i.ordinalSlope*(s||0)+i.ordinalOffset}return t},lin2val:function(t,e){var i=this,n=i.ordinalPositions;if(n){var o,r,s,a=i.ordinalSlope,l=i.ordinalOffset,h=n.length-1;if(e)0>t?t=n[0]:t>h?t=n[h]:(h=ve(t),s=t-h);else for(;h--;)if(o=a*h+l,t>=o){r=a*(h+1)+l,s=(t-o)/(r-o);break}return s!==$&&n[h]!==$?n[h]+(s?s*(n[h+1]-n[h]):0):t}return t},getExtendedPositions:function(){var t,e,i=this,n=i.chart,o=i.series[0].currentDataGrouping,r=i.ordinalIndex,s=o?o.count+o.unitName:"raw",a=i.getExtremes();return r||(r=i.ordinalIndex={}),r[s]||(t={series:[],getExtremes:function(){return{min:a.dataMin,max:a.dataMax}},options:{ordinal:!0},val2lin:z.prototype.val2lin},_i(i.series,function(i){e={xAxis:t,xData:i.xData,chart:n,destroyGroupedData:ze},e.options={dataGrouping:o?{enabled:!0,forced:!0,approximation:"open",units:[[o.unitName,[o.count]]]}:{enabled:!1}},i.processData.apply(e),t.series.push(e)}),i.beforeSetTickPositions.apply(t),r[s]=t.ordinalPositions),r[s]},getGroupIntervalFactor:function(t,e,i){var n,o=0,r=i.processedXData,s=r.length,a=[],l=this.groupIntervalFactor;if(!l){for(;s-1>o;o++)a[o]=r[o+1]-r[o];a.sort(function(t,e){return t-e}),n=a[ve(s/2)],t=be(t,r[0]),e=_e(e,r[s-1]),this.groupIntervalFactor=l=s*n/(e-t)}return l},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?t/(e/this.closestPointRange):t}}),_(B.prototype,"pan",function(t,e){var i=this,n=i.xAxis[0],o=e.chartX,r=!1;if(n.options.ordinal&&n.series.length){var s,a,l,h,c=i.mouseDownX,u=n.getExtremes(),d=u.dataMax,p=u.min,f=u.max,g=i.hoverPoints,v=n.closestPointRange,y=n.translationSlope*(n.ordinalSlope||v),b=(c-o)/y,_={ordinalPositions:n.getExtendedPositions()},w=n.lin2val,x=n.val2lin;_.ordinalPositions?we(b)>1&&(g&&_i(g,function(t){t.setState()}),0>b?(l=_,h=n.ordinalPositions?n:_):(l=n.ordinalPositions?n:_,h=_),a=h.ordinalPositions,d>a[a.length-1]&&a.push(d),i.fixedRange=f-p,s=n.toFixedRange(null,null,w.apply(l,[x.apply(l,[p,!0])+b,!0]),w.apply(h,[x.apply(h,[f,!0])+b,!0])),s.min>=_e(u.dataMin,p)&&s.max<=be(d,f)&&n.setExtremes(s.min,s.max,!0,!1,{trigger:"pan"}),i.mouseDownX=o,m(i.container,{cursor:"move"})):r=!0}else r=!0;r&&t.apply(this,Array.prototype.slice.call(arguments,1))}),_(Zi.prototype,"getSegments",function(t){var e,i=this,n=i.options.gapSize,o=i.xAxis;t.apply(this,Array.prototype.slice.call(arguments,1)),n&&(e=i.segments,_i(e,function(t,i){for(var r=t.length-1;r--;)t[r+1].x-t[r].x>o.closestPointRange*n&&e.splice(i+1,0,t.splice(r+1,t.length-r))}))});var sn="dataGrouping",an=Zi.prototype,ln=Wi.prototype,hn=an.processData,cn=an.generatePoints,un=an.destroy,dn=ln.tooltipHeaderFormatter,pn="number",fn={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:i(oi,["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],ri,["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],si,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],ai,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],li,["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],hi,["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],ci,["%B %Y","%B","-%B %Y"],ui,["%Y","%Y","-%Y"])},mn={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},gn=[[oi,[1,2,5,10,20,25,50,100,200,500]],[ri,[1,2,5,10,15,30]],[si,[1,2,5,10,15,30]],[ai,[1,2,3,4,6,8,12]],[li,[1]],[hi,[1]],[ci,[1,3,6]],[ui,null]],vn={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,i=vn.sum(t);return typeof i===pn&&e&&(i/=e),i},open:function(t){return t.length?t[0]:t.hasNulls?null:$},high:function(t){return t.length?E(t):t.hasNulls?null:$},low:function(t){return t.length?P(t):t.hasNulls?null:$},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:$},ohlc:function(t,e,i,n){return t=vn.open(t),e=vn.high(e),i=vn.low(i),n=vn.close(n),typeof t===pn||typeof e===pn||typeof i===pn||typeof n===pn?[t,e,i,n]:void 0},range:function(t,e){return t=vn.low(t),e=vn.high(e),typeof t===pn||typeof e===pn?[t,e]:void 0}};an.groupData=function(t,e,i,n){var o,r,s,a,l=this,h=l.data,c=l.options.data,u=[],d=[],p=t.length,f=!!e,m=[[],[],[],[]],g="function"==typeof n?n:vn[n],v=l.pointArrayMap,y=v&&v.length;for(a=0;p>=a&&!(t[a]>=i[0]);a++);for(;p>=a;a++){for(;(i[1]!==$&&t[a]>=i[1]||a===p)&&(o=i.shift(),s=g.apply(0,m),s!==$&&(u.push(o),d.push(s)),m[0]=[],m[1]=[],m[2]=[],m[3]=[],a!==p););if(a===p)break;if(v){var b,_,w=l.cropStart+a,x=h&&h[w]||l.pointClass.prototype.applyOptions.apply({series:l},[c[w]]);for(b=0;y>b;b++)_=x[v[b]],typeof _===pn?m[b].push(_):null===_&&(m[b].hasNulls=!0)}else r=f?e[a]:null,typeof r===pn?m[0].push(r):null===r&&(m[0].hasNulls=!0)}return[u,d]},an.processData=function(){var t,e=this,i=e.chart,n=e.options,o=n[sn],r=o&&f(o.enabled,i.options._stock);if(e.forceCrop=r,e.groupPixelWidth=null,e.hasProcessed=!0,hn.apply(e,arguments)!==!1&&r){e.destroyGroupedData();var s,a=e.processedXData,l=e.processedYData,h=i.plotSizeX,c=e.xAxis,d=c.options.ordinal,p=e.groupPixelWidth=c.getGroupPixelWidth&&c.getGroupPixelWidth(),m=e.pointRange;if(p){t=!0,e.points=null;var g=c.getExtremes(),v=g.min,y=g.max,b=d&&c.getGroupIntervalFactor(v,y,e)||1,_=p*(y-v)/h*b,w=c.getTimeTicks(c.normalizeTimeTickInterval(_,o.units||gn),v,y,null,a,e.closestPointRange),x=an.groupData.apply(e,[a,l,w,o.approximation]),C=x[0],k=x[1];if(o.smoothed){for(s=C.length-1,C[s]=y;s--&&s>0;)C[s]+=_/2;C[0]=v}e.currentDataGrouping=w.info,null===n.pointRange&&(e.pointRange=w.info.totalRange),e.closestPointRange=w.info.totalRange,u(C[0])&&C[0]<c.dataMin&&(c.dataMin=C[0]),e.processedXData=C,e.processedYData=k}else e.currentDataGrouping=null,e.pointRange=m;e.hasGroupedData=t}},an.destroyGroupedData=function(){var t=this.groupedData;_i(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)}),this.groupedData=null},an.generatePoints=function(){cn.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},ln.tooltipHeaderFormatter=function(t){var e,i,n,o,r,s,l,h=this,c=t.series,u=c.options,d=c.tooltipOptions,p=u.dataGrouping,f=d.xDateFormat,m=c.xAxis;if(m&&"datetime"===m.options.type&&p&&a(t.key)){if(i=c.currentDataGrouping,n=p.dateTimeLabelFormats,i)o=n[i.unitName],1===i.count?f=o[0]:(f=o[1],e=o[2]);else if(!f&&n)for(s in Q)if(Q[s]>=m.closestPointRange||Q[s]<=Q[li]&&t.key%Q[s]>0){f=n[s][0];break}r=X(f,t.key),e&&(r+=X(e,t.key+i.totalRange-1)),l=d.headerFormat.replace("{point.key}",r)}else l=dn.call(h,t);return l},an.destroy=function(){for(var t=this,e=t.groupedData||[],i=e.length;i--;)e[i]&&e[i].destroy();un.apply(t)},_(an,"setOptions",function(t,i){var n=t.call(this,i),o=this.type,r=this.chart.options.plotOptions,s=Mi[o].dataGrouping;return mn[o]&&(s||(s=e(fn,mn[o])),n.dataGrouping=e(s,r.series&&r.series.dataGrouping,r[o].dataGrouping,i.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),n}),_(z.prototype,"setScale",function(t){t.call(this),_i(this.series,function(t){t.hasProcessed=!1})}),z.prototype.getGroupPixelWidth=function(){var t,e,i,n=this.series,o=n.length,r=0,s=!1;for(t=o;t--;)i=n[t].options.dataGrouping,i&&(r=be(r,i.groupPixelWidth));for(t=o;t--;)i=n[t].options.dataGrouping,i&&n[t].hasProcessed&&(e=(n[t].processedXData||n[t].data).length,(n[t].groupPixelWidth||e>this.chart.plotSizeX/r||e&&i.forced)&&(s=!0));return s?r:0};var yn,bn=[].concat(gn);bn[4]=[li,[1,2,3,4]],bn[5]=[hi,[1,2,3]],yn=pi.areaspline===$?"line":"areaspline",t(Y,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:yn,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:bn},dataLabels:{enabled:!1,zIndex:2},id:Ye+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:Ae?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Oe&&!Ae}}),U.prototype={drawHandle:function(t,e){var i,n=this,o=n.chart,r=o.renderer,s=n.elementsToDestroy,a=n.handles,l=n.navigatorOptions.handles,h={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":1};n.rendered||(a[e]=r.g("navigator-handle-"+["left","right"][e]).css({cursor:"e-resize"}).attr({zIndex:4-e}).add(),i=r.rect(-4.5,0,9,16,0,1).attr(h).add(a[e]),s.push(i),i=r.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(h).add(a[e]),s.push(i)),a[e][o.isResizing?"animate":"attr"]({translateX:n.scrollerLeft+n.scrollbarHeight+parseInt(t,10),translateY:n.top+n.height/2-8})},drawScrollbarButton:function(t){var e,i=this,n=i.chart,o=n.renderer,r=i.elementsToDestroy,s=i.scrollbarButtons,a=i.scrollbarHeight,l=i.scrollbarOptions;i.rendered||(s[t]=o.g().add(i.scrollbarGroup),e=o.rect(-.5,-.5,a+1,a+1,l.buttonBorderRadius,l.buttonBorderWidth).attr({stroke:l.buttonBorderColor,"stroke-width":l.buttonBorderWidth,fill:l.buttonBackgroundColor}).add(s[t]),r.push(e),e=o.path(["M",a/2+(t?-1:1),a/2-3,"L",a/2+(t?-1:1),a/2+3,a/2+(t?2:-2),a/2]).attr({fill:l.buttonArrowColor}).add(s[t]),r.push(e)),t&&s[t].attr({translateX:i.scrollerWidth-a})},render:function(t,e,i,n){var o,r,s,a,l,h,c,u,d,p,m,g,v,y=this,b=y.chart,_=b.renderer,w=y.scrollbarGroup,x=y.navigatorGroup,C=y.scrollbar,k=y.xAxis,S=y.scrollbarTrack,T=y.scrollbarHeight,P=y.scrollbarEnabled,E=y.navigatorOptions,D=y.scrollbarOptions,L=D.minWidth,M=y.height,A=y.top,R=y.navigatorEnabled,O=E.outlineWidth,I=O/2,N=0,j=y.outlineHeight,H=D.barBorderRadius,z=D.barBorderWidth,B=A+I;isNaN(t)||(y.navigatorLeft=o=f(k.left,b.plotLeft+T),y.navigatorWidth=r=f(k.len,b.plotWidth-2*T),y.scrollerLeft=s=o-T,y.scrollerWidth=a=a=r+2*T,k.getExtremes&&(v=y.getUnionExtremes(!0),!v||v.dataMin===k.min&&v.dataMax===k.max||k.setExtremes(v.dataMin,v.dataMax,!0,!1)),i=f(i,k.translate(t)),n=f(n,k.translate(e)),(isNaN(i)||1/0===we(i))&&(i=0,n=a),k.translate(n,!0)-k.translate(i,!0)<b.xAxis[0].minRange||(y.zoomedMax=_e(be(i,n),r),y.zoomedMin=be(y.fixedWidth?y.zoomedMax-y.fixedWidth:_e(i,n),0),y.range=y.zoomedMax-y.zoomedMin,h=ge(y.zoomedMax),l=ge(y.zoomedMin),c=h-l,y.rendered||(R&&(y.navigatorGroup=x=_.g("navigator").attr({zIndex:3}).add(),y.leftShade=_.rect().attr({fill:E.maskFill}).add(x),E.maskInside||(y.rightShade=_.rect().attr({fill:E.maskFill}).add(x)),y.outline=_.path().attr({"stroke-width":O,stroke:E.outlineColor}).add(x)),P&&(y.scrollbarGroup=w=_.g("scrollbar").add(),p=D.trackBorderWidth,y.scrollbarTrack=S=_.rect().attr({x:0,y:-p%2/2,fill:D.trackBackgroundColor,stroke:D.trackBorderColor,"stroke-width":p,r:D.trackBorderRadius||0,height:T}).add(w),y.scrollbar=C=_.rect().attr({y:-z%2/2,height:T,fill:D.barBackgroundColor,stroke:D.barBorderColor,"stroke-width":z,r:H}).add(w),y.scrollbarRifles=_.path().attr({stroke:D.rifleColor,"stroke-width":1}).add(w))),g=b.isResizing?"animate":"attr",R&&(y.leftShade[g](E.maskInside?{x:o+l,y:A,width:h-l,height:M}:{x:o,y:A,width:l,height:M}),y.rightShade&&y.rightShade[g]({x:o+h,y:A,width:r-h,height:M}),y.outline[g]({d:[Qe,s,B,Je,o+l+I,B,o+l+I,B+j,Je,o+h-I,B+j,Je,o+h-I,B,s+a,B].concat(E.maskInside?[Qe,o+l+I,B,Je,o+h-I,B]:[])}),y.drawHandle(l+I,0),y.drawHandle(h+I,1)),P&&w&&(y.drawScrollbarButton(0),y.drawScrollbarButton(1),w[g]({translateX:s,translateY:ge(B+M)}),S[g]({width:a}),u=T+l,d=c-z,L>d&&(N=(L-d)/2,d=L,u-=N),y.scrollbarPad=N,C[g]({x:ve(u)+z%2/2,width:d}),m=T+l+c/2-.5,y.scrollbarRifles.attr({visibility:c>12?Xe:Ve})[g]({d:[Qe,m-3,T/4,Je,m-3,2*T/3,Qe,m,T/4,Je,m,2*T/3,Qe,m+3,T/4,Je,m+3,2*T/3]})),y.scrollbarPad=N,y.rendered=!0))},addEvents:function(){var t,e=this.chart.container,i=this.mouseDownHandler,n=this.mouseMoveHandler,o=this.mouseUpHandler;t=[[e,"mousedown",i],[e,"mousemove",n],[document,"mouseup",o]],q&&t.push([e,"touchstart",i],[e,"touchmove",n],[document,"touchend",o]),_i(t,function(t){ki.apply(null,t)}),this._events=t},removeEvents:function(){_i(this._events,function(t){Si.apply(null,t)}),this._events=$,this.navigatorEnabled&&this.baseSeries&&Si(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,i,n,o,r,s=this,a=s.chart,l=s.scrollbarHeight,h=s.navigatorOptions,c=s.height,u=s.top,d=document.body.style,p=s.baseSeries;s.mouseDownHandler=function(e){e=a.pointer.normalize(e);var i,o,l,h,u=s.zoomedMin,p=s.zoomedMax,f=s.top,m=s.scrollbarHeight,g=s.scrollerLeft,v=s.scrollerWidth,y=s.navigatorLeft,b=s.navigatorWidth,_=s.scrollbarPad,w=s.range,x=e.chartX,C=e.chartY,k=a.xAxis[0],S=Ae?10:7;C>f&&f+c+m>C&&(h=!s.scrollbarEnabled||f+c>C,h&&me.abs(x-u-y)<S?(s.grabbedLeft=!0,s.otherHandlePos=p,s.fixedExtreme=k.max,a.fixedRange=null):h&&me.abs(x-p-y)<S?(s.grabbedRight=!0,s.otherHandlePos=u,s.fixedExtreme=k.min,a.fixedRange=null):x>y+u-_&&y+p+_>x?(s.grabbedCenter=x,s.fixedWidth=w,a.renderer.isSVG&&(r=d.cursor,d.cursor="ew-resize"),n=x-u):x>g&&g+v>x&&(l=h?x-y-w/2:y>x?u-.2*w:x>g+v-m?u+.2*w:y+u>x?u-w:p,0>l?l=0:l+w>=b&&(l=b-w,i=t.dataMax),l!==u&&(s.fixedWidth=w,o=t.toFixedRange(l,l+w,null,i),k.setExtremes(o.min,o.max,!0,!1,{trigger:"navigator"}))))},s.mouseMoveHandler=function(t){var e,i=s.scrollbarHeight,r=s.navigatorLeft,l=s.navigatorWidth,h=s.scrollerLeft,c=s.scrollerWidth,u=s.range;0!==t.pageX&&(t=a.pointer.normalize(t),e=t.chartX,r>e?e=r:e>h+c-i&&(e=h+c-i),s.grabbedLeft?(o=!0,s.render(0,0,e-r,s.otherHandlePos)):s.grabbedRight?(o=!0,s.render(0,0,s.otherHandlePos,e-r)):s.grabbedCenter&&(o=!0,n>e?e=n:e>l+n-u&&(e=l+n-u),s.render(0,0,e-n,e-n+u)),o&&s.scrollbarOptions.liveRedraw&&setTimeout(function(){s.mouseUpHandler(t)},0))},s.mouseUpHandler=function(e){var i,l,h;o&&(s.zoomedMin===s.otherHandlePos?l=s.fixedExtreme:s.zoomedMax===s.otherHandlePos&&(h=s.fixedExtreme),i=t.toFixedRange(s.zoomedMin,s.zoomedMax,l,h),a.xAxis[0].setExtremes(i.min,i.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(s.grabbedLeft=s.grabbedRight=s.grabbedCenter=s.fixedWidth=s.fixedExtreme=s.otherHandlePos=o=n=null,d.cursor=r||"")};var m=a.xAxis.length,g=a.yAxis.length;a.extraBottomMargin=s.outlineHeight+h.margin,s.navigatorEnabled?(s.xAxis=t=new z(a,e({ordinal:p&&p.xAxis.options.ordinal},h.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:m,height:c,offset:0,offsetLeft:l,offsetRight:-l,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),s.yAxis=i=new z(a,e(h.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:c,offset:0,index:g,zoomEnabled:!1})),p||h.series.data?s.addBaseSeries():0===a.series.length&&_(a,"redraw",function(t,e){a.series.length>0&&!s.series&&(s.setBaseSeries(),a.redraw=t),t.call(a,e)})):s.xAxis=t={translate:function(t,e){var i=a.xAxis[0].getExtremes(),n=a.plotWidth-2*l,o=i.dataMin,r=i.dataMax-o;return e?t*r/n+o:n*(t-o)/r},toFixedRange:z.prototype.toFixedRange},_(a,"getMargins",function(e){var n=this.legend,o=n.options;e.call(this),s.top=u=s.navigatorOptions.top||this.chartHeight-s.height-s.scrollbarHeight-this.spacing[2]-("bottom"===o.verticalAlign&&o.enabled&&!o.floating?n.legendHeight+f(o.margin,10):0),t&&i&&(t.options.top=i.options.top=u,t.setAxisSize(),i.setAxisSize())}),s.addEvents()},getUnionExtremes:function(t){var e=this.chart.xAxis[0],i=this.xAxis,n=i.options;return t&&null===e.dataMin?void 0:{dataMin:f(n&&n.min,(u(e.dataMin)&&u(i.dataMin)?_e:f)(e.dataMin,i.dataMin)),dataMax:f(n&&n.max,(u(e.dataMax)&&u(i.dataMax)?be:f)(e.dataMax,i.dataMax))}},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var i,n,o=this.baseSeries,r=o?o.options:{},s=r.data,a=this.navigatorOptions.series;n=a.data,this.hasNavigatorData=!!n,i=e(r,a,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),i.data=n||s,this.series=this.chart.initSeries(i),o&&this.navigatorOptions.adaptToUpdatedData!==!1&&(ki(o,"updatedData",this.updatedDataHandler),o.userOptions.events=t(o.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var t,e,i,n,o,r=this.chart.scroller,s=r.baseSeries,a=s.xAxis,l=a.getExtremes(),h=l.min,c=l.max,u=l.dataMin,d=l.dataMax,p=c-h,f=r.series,m=f.xData,g=!!a.setExtremes;e=c>=m[m.length-1]-(this.closestPointRange||0),t=u>=h,r.hasNavigatorData||(f.options.pointStart=s.xData[0],f.setData(s.options.data,!1),o=!0),t&&(n=u,i=n+p),e&&(i=d,t||(n=be(i-p,f.xData[0]))),g&&(t||e)?isNaN(n)||a.setExtremes(n,i,!0,!1,{trigger:"updatedData"}):(o&&this.chart.redraw(!1),r.render(be(h,u),_e(c,d)))},destroy:function(){var t=this;t.removeEvents(),_i([t.xAxis,t.yAxis,t.leftShade,t.rightShade,t.outline,t.scrollbarTrack,t.scrollbarRifles,t.scrollbarGroup,t.scrollbar],function(t){t&&t.destroy&&t.destroy()}),t.xAxis=t.yAxis=t.leftShade=t.rightShade=t.outline=t.scrollbarTrack=t.scrollbarRifles=t.scrollbarGroup=t.scrollbar=null,_i([t.scrollbarButtons,t.handles,t.elementsToDestroy],function(t){D(t)})}},fi.Scroller=U,_(z.prototype,"zoom",function(t,e,i){var n,o,r=this.chart,s=r.options,a=s.chart.zoomType,l=s.navigator,h=s.rangeSelector;return this.isXAxis&&(l&&l.enabled||h&&h.enabled)&&("x"===a?r.resetZoomButton="blocked":"y"===a?o=!1:"xy"===a&&(n=this.previousZoom,u(e)?this.previousZoom=[this.min,this.max]:n&&(e=n[0],i=n[1],delete this.previousZoom))),o!==$?o:t.call(this,e,i)}),_(B.prototype,"init",function(t,e,i){ki(this,"beforeRender",function(){var t=this.options;
(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new U(this))}),t.call(this,e,i)}),_(Zi.prototype,"addPoint",function(t,e,i,n,o){var a=this.options.turboThreshold;a&&this.xData.length>a&&r(e)&&!s(e)&&this.chart.scroller&&M(20,!0),t.call(this,e,i,n,o)}),t(Y,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),Y.lang=e(Y.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),W.prototype={clickButton:function(t,i){var n,o,r,s,a,l,h=this,c=h.selected,u=h.chart,d=h.buttons,p=h.buttonOptions[t],m=u.xAxis[0],g=u.scroller&&u.scroller.getUnionExtremes()||m||{},v=g.dataMin,y=g.dataMax,b=m&&ge(_e(m.max,f(y,m.max))),_=new Date(b),w=p.type,x=p.count,C=p._range;if(null!==v&&null!==y&&t!==h.selected){if("month"===w||"year"===w)l={month:"Month",year:"FullYear"}[w],_["set"+l](_["get"+l]()-x),n=_.getTime(),v=f(v,Number.MIN_VALUE),isNaN(n)||v>n?(n=v,b=_e(n+C,y)):C=b-n;else if(C)n=be(b-C,v),b=_e(n+C,y);else if("ytd"===w){if(!m)return void ki(u,"beforeRender",function(){h.clickButton(t)});y===$&&(v=Number.MAX_VALUE,y=Number.MIN_VALUE,_i(u.series,function(t){var e=t.xData;v=_e(e[0],v),y=be(e[e.length-1],y)}),i=!1),o=new Date(y),a=o.getFullYear(),n=s=be(v||0,Date.UTC(a,0,1)),o=o.getTime(),b=_e(y||o,o)}else"all"===w&&m&&(n=v,b=y);d[c]&&d[c].setState(0),d[t]&&d[t].setState(2),u.fixedRange=C,m?(m.setExtremes(n,b,f(i,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:p}),h.setSelected(t)):(r=u.options.xAxis,r[0]=e(r[0],{range:C,min:s}),h.setSelected(t))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),o=i.selected,r=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur(),i&&i.blur()};e.chart=t,e.options=i,e.buttons=[],t.extraTopMargin=35,e.buttonOptions=n,ki(t.container,"mousedown",r),ki(t,"resize",r),_i(n,e.computeButtonRange),o!==$&&n[o]&&this.clickButton(o,!1),ki(t,"load",function(){ki(t.xAxis[0],"afterSetExtremes",function(){e.updateButtonStates(!0)})})},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],o=i.scroller&&i.scroller.getUnionExtremes()||n,r=o.dataMin,s=o.dataMax,a=e.selected,l=e.buttons;t&&i.fixedRange!==ge(n.max-n.min)&&(l[a]&&l[a].setState(0),e.setSelected(null)),_i(e.buttonOptions,function(t,i){var o=t._range,h=o>s-r,c=o<n.minRange,u="all"===t.type&&n.max-n.min>=s-r&&2!==l[i].state,d="ytd"===t.type&&X("%Y",r)===X("%Y",s);o===ge(n.max-n.min)&&i!==a?(e.setSelected(i),l[i].setState(2)):h||c||u||d?l[i].setState(3):3===l[i].state&&l[i].setState(0)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:("month"===e||"year"===e)&&(t._range=24*{month:30,year:365}[e]*36e5*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;u(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=X(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:X(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},drawInput:function(i){var o,r,s,a=this,l=a.chart,h=l.renderer.style,c=l.renderer,u=l.options.rangeSelector,d=Y.lang,p=a.div,f="min"===i,v=this.inputGroup;this[i+"Label"]=r=c.label(d[f?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(e(h,u.labelStyle)).add(v),v.offset+=r.width+5,this[i+"DateBox"]=s=c.label("",v.offset).attr({padding:2,width:u.inputBoxWidth||90,height:u.inputBoxHeight||17,stroke:u.inputBoxBorderColor||"silver","stroke-width":1}).css(e({textAlign:"center",color:"#444"},h,u.inputStyle)).on("click",function(){a[i+"Input"].focus()}).add(v),v.offset+=s.width+(f?10:0),this[i+"Input"]=o=g("input",{name:i,className:Ye+"range-selector",type:"text"},t({position:Ge,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:h.fontSize,fontFamily:h.fontFamily,top:l.plotTop+Ze},u.inputStyle),p),o.onfocus=function(){m(this,{left:v.translateX+s.x+Ze,top:v.translateY+Ze,width:s.width-2+Ze,height:s.height-2+Ze,border:"2px solid silver"})},o.onblur=function(){m(this,{border:0,width:"1px",height:"1px"}),a.setInputValue(i)},o.onchange=function(){var t=o.value,e=(u.inputDateParser||Date.parse)(t),i=l.xAxis[0],r=i.dataMin,s=i.dataMax;isNaN(e)&&(e=t.split("-"),e=Date.UTC(n(e[0]),n(e[1])-1,n(e[2]))),isNaN(e)||(Y.global.useUTC||(e+=60*(new Date).getTimezoneOffset()*1e3),f?e>a.maxInput.HCTime?e=$:r>e&&(e=r):e<a.minInput.HCTime?e=$:e>s&&(e=s),e!==$&&l.xAxis[0].setExtremes(f?e:i.min,f?i.max:e,$,$,{trigger:"rangeSelectorInput"}))}},render:function(e,i){var n,o,r=this,s=r.chart,a=s.renderer,l=s.container,h=s.options,c=h.exporting&&h.navigation&&h.navigation.buttonOptions,u=h.rangeSelector,d=r.buttons,p=Y.lang,m=r.div,v=r.inputGroup,y=u.buttonTheme,b=u.inputEnabled!==!1,_=y&&y.states,w=s.plotLeft;r.rendered||(r.zoomText=a.text(p.rangeSelectorZoom,w,s.plotTop-20).css(u.labelStyle).add(),o=w+r.zoomText.getBBox().width+5,_i(r.buttonOptions,function(t,e){d[e]=a.button(t.text,o,s.plotTop-35,function(){r.clickButton(e),r.isActive=!0},y,_&&_.hover,_&&_.select).css({textAlign:"center"}).add(),o+=d[e].width+f(u.buttonSpacing,5),r.selected===e&&d[e].setState(2)}),r.updateButtonStates(),b&&(r.div=m=g("div",null,{position:"relative",height:0,zIndex:1}),l.parentNode.insertBefore(m,l),r.inputGroup=v=a.g("input-group").add(),v.offset=0,r.drawInput("min"),r.drawInput("max"))),b&&(n=s.plotTop-45,v.align(t({y:n,width:v.offset,x:c&&n<(c.y||0)+c.height-s.spacing[0]?-40:0},u.inputPosition),!0,s.spacingBox),r.setInputValue("min",e),r.setInputValue("max",i)),r.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,o=this.blurInputs;Si(n.container,"mousedown",o),Si(n,"resize",o),D(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null);for(t in this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&L(this[t])),this[t]=null}},z.prototype.toFixedRange=function(t,e,i,n){var o=this.chart&&this.chart.fixedRange,r=f(i,this.translate(t,!0)),s=f(n,this.translate(e,!0)),a=o&&(s-r)/o;return a>.7&&1.3>a&&(n?r=s-o:s=r+o),{min:r,max:s}},_(B.prototype,"init",function(t,e,i){ki(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new W(this))}),t.call(this,e,i)}),fi.RangeSelector=W,B.prototype.callbacks.push(function(t){function e(){s=t.xAxis[0].getExtremes(),a.render(s.min,s.max)}function i(){s=t.xAxis[0].getExtremes(),isNaN(s.min)||l.render(s.min,s.max)}function n(t){"navigator-drag"!==t.triggerOp&&a.render(t.min,t.max)}function o(t){l.render(t.min,t.max)}function r(){a&&Si(t.xAxis[0],"afterSetExtremes",n),l&&(Si(t,"resize",i),Si(t.xAxis[0],"afterSetExtremes",o))}var s,a=t.scroller,l=t.rangeSelector;a&&(ki(t.xAxis[0],"afterSetExtremes",n),_(t,"drawChartBox",function(t){var i=this.isDirtyBox;t.call(this),i&&e()}),e()),l&&(ki(t.xAxis[0],"afterSetExtremes",o),ki(t,"resize",i),i()),ki(t,"destroy",r)}),fi.StockChart=function(t,i){var n,o=t.series,r=f(t.navigator&&t.navigator.enabled,!0),s=r?{startOnTick:!1,endOnTick:!1}:null,a={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},l={shadow:!1,borderWidth:0};return t.xAxis=Ci(p(t.xAxis||{}),function(t){return e({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},s)}),t.yAxis=Ci(p(t.yAxis||{}),function(t){return n=f(t.opposite,!0),e({labels:{y:-2},opposite:n,showLastLabel:!1,title:{text:null}},t)}),t.series=null,t=e({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:a,spline:a,area:a,areaspline:a,arearange:a,areasplinerange:a,column:l,columnrange:l,candlestick:l,ohlc:l}},t,{_stock:!0,chart:{inverted:!1}}),t.series=o,new B(t,i)},_(Gi.prototype,"init",function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i),this.pinchX=this.pinchHor=-1!==n.indexOf("x"),this.pinchY=this.pinchVert=-1!==n.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),_(z.prototype,"autoLabelAlign",function(t){return this.chart.options._stock&&"yAxis"===this.coll&&0===bi(this,this.chart.yAxis)?(15===this.options.labels.x&&(this.options.labels.x=0),"right"):t.call(this)}),z.prototype.getPlotLinePath=function(t,e,i,n,o){var r,s,a,l,h,c,d,p=this,m=this.isLinked&&!this.series?this.linkedParent.series:this.series,g=p.chart,v=g.renderer,y=p.left,b=p.top,_=[];return h=p.isXAxis?u(p.options.yAxis)?[g.yAxis[p.options.yAxis]]:Ci(m,function(t){return t.yAxis}):u(p.options.xAxis)?[g.xAxis[p.options.xAxis]]:Ci(m,function(t){return t.xAxis}),c=p.isXAxis?g.yAxis:g.xAxis,_i(c,function(t){if(u(t.options.id)?-1===t.options.id.indexOf("navigator"):!0){var e=t.isXAxis?"yAxis":"xAxis",i=u(t.options[e])?g[e][t.options[e]]:g[e][0];p===i&&h.push(t)}}),d=h.length?[]:[p],_i(h,function(t){-1===bi(t,d)&&d.push(t)}),o=f(o,p.translate(t,null,null,i)),isNaN(o)||(p.horiz?_i(d,function(t){s=t.top,l=s+t.len,r=a=ge(o+p.transB),(r>=y&&r<=y+p.width||n)&&_.push("M",r,s,"L",a,l)}):_i(d,function(t){r=t.left,a=r+t.width,s=l=ge(b+p.height-o),(s>=b&&s<=b+p.height||n)&&_.push("M",r,s,"L",a,l)})),_.length>0?v.crispPolyLine(_,e||1):void 0},z.prototype.getPlotBandPath=function(t,e){var i,n=this.getPlotLinePath(e),o=this.getPlotLinePath(t),r=[];if(o&&n)for(i=0;i<o.length;i+=6)r.push("M",o[i+1],o[i+2],"L",o[i+4],o[i+5],n[i+4],n[i+5],n[i+1],n[i+2]);else r=null;return r},ji.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=ge(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=ge(t[i+2])+e%2/2);return t},G===fi.VMLRenderer&&(Hi.prototype.crispPolyLine=ji.prototype.crispPolyLine),_(z.prototype,"hideCrosshair",function(t,e){t.call(this,e),u(this.crossLabelArray)&&(u(e)?this.crossLabelArray[e]&&this.crossLabelArray[e].hide():_i(this.crossLabelArray,function(t){t.hide()}))}),_(z.prototype,"drawCrosshair",function(e,i,n){if(e.call(this,i,n),u(this.crosshair.label)&&this.crosshair.label.enabled&&u(n)){var o,r,s,a,l=this.chart,h=this.options.crosshair.label,c=this.isXAxis?"x":"y",d=this.horiz,p=this.opposite,m=this.left,g=this.top,v=this.crossLabel,y=h.format,b="";if(v||(v=this.crossLabel=l.renderer.label().attr({align:h.align||(d?"center":p?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:d?16:$,fill:h.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:f(h.padding,2),stroke:h.borderColor||null,"stroke-width":h.borderWidth||0}).css(t({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},h.style)).add()),d?(o=n.plotX+m,r=g+(p?0:this.height)):(o=p?this.width+m:0,r=n.plotY+g),g>r||r>g+this.height)return void this.hideCrosshair();y||h.formatter||(this.isDatetimeAxis&&(b="%b %d, %Y"),y="{value"+(b?":"+b:"")+"}"),v.attr({text:y?x(y,{value:n[c]}):h.formatter.call(this,n[c]),x:o,y:r,visibility:Xe}),s=v.getBBox(),d?("inside"===this.options.tickPosition&&!p||"inside"!==this.options.tickPosition&&p)&&(r=v.y-s.height):r=v.y-s.height/2,a=d?{left:m-s.x,right:m+this.width-s.x}:{left:"left"===this.labelAlign?m:0,right:"right"===this.labelAlign?m+this.width:l.chartWidth},v.translateX<a.left&&(o+=a.left-v.translateX),v.translateX+s.width>=a.right&&(o-=v.translateX+s.width-a.right),v.attr({x:o,y:r,visibility:Xe})}});var _n=an.init,wn=an.processData,xn=Xi.prototype.tooltipFormatter;an.init=function(){_n.apply(this,arguments),this.setCompare(this.options.compare)},an.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;return e!==$&&(e="value"===t?e-n:e=100*(e/n)-100,i&&(i.change=e)),e}:null,this.chart.hasRendered&&(this.isDirty=!0)},an.processData=function(){var t,e,i,n=this,o=0;if(wn.apply(this,arguments),n.xAxis&&n.processedYData)for(t=n.processedXData,e=n.processedYData,i=e.length;i>o;o++)if(typeof e[o]===pn&&t[o]>=n.xAxis.min){n.compareValue=e[o];break}},_(an,"getExtremes",function(t){t.call(this),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),z.prototype.setCompare=function(t,e){this.isXAxis||(_i(this.series,function(e){e.setCompare(t)}),f(e,!0)&&this.chart.redraw())},Xi.prototype.tooltipFormatter=function(t){var e=this;return t=t.replace("{point.change}",(e.change>0?"+":"")+y(e.change,f(e.series.tooltipOptions.changeDecimals,2))),xn.apply(this,[t])},_(Zi.prototype,"render",function(t){this.isCartesian&&this.chart.options._stock&&(this.clipBox?this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}):(this.clipBox=e(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len)),t.call(this)}),t(fi,{Axis:z,Chart:B,Color:Ni,Point:Xi,Tick:H,Renderer:G,Series:Zi,SVGElement:j,SVGRenderer:ji,arrayMin:P,arrayMax:E,charts:Be,dateFormat:X,format:x,pathAnim:K,getOptions:N,hasBidiBug:Ie,isTouchDevice:Ae,numberFormat:y,seriesTypes:pi,setOptions:I,addEvent:ki,removeEvent:Si,createElement:g,discardElement:L,css:m,each:_i,extend:t,map:Ci,merge:e,pick:f,splat:p,extendClass:v,pInt:n,wrap:_,svg:Oe,canvas:Ne,vml:!Oe&&!Ne,product:Ue,version:We})}(),function(t){"use strict";function e(t,e,i){var n=[Math.round(t[0]+(e[0]-t[0])*i),Math.round(t[1]+(e[1]-t[1])*i),Math.round(t[2]+(e[2]-t[2])*i),t[3]+(e[3]-t[3])*i];return"rgba("+n.join(",")+")"}var i=function(){},n=t.getOptions(),o=t.each,r=t.extend,s=t.format,a=t.wrap,l=t.Chart,h=t.seriesTypes,c=h.pie,u=h.column,d=HighchartsAdapter.fireEvent,p=HighchartsAdapter.inArray;r(n.lang,{drillUpText:"\u25c1 Back to {series.name}"}),n.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},t.SVGRenderer.prototype.Element.prototype.fadeIn=function(t){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:1},t||{duration:250})},l.prototype.addSeriesAsDrilldown=function(t,e){this.addSingleSeriesAsDrilldown(t,e),this.applyDrilldown()},l.prototype.addSingleSeriesAsDrilldown=function(t,e){var n,s,a,l,h=t.series,c=h.xAxis,u=h.yAxis,d=t.color||h.color,f=[],m=[];l=h.levelNumber||0,e=r({color:d},e),s=p(t,h.points),o(h.chart.series,function(t){t.xAxis===c&&(f.push(t),m.push(t.userOptions),t.levelNumber=t.levelNumber||0)}),a={levelNumber:l,seriesOptions:h.userOptions,levelSeriesOptions:m,levelSeries:f,shapeArgs:t.shapeArgs,bBox:t.graphic.getBBox(),color:d,lowerSeriesOptions:e,pointOptions:h.options.data[s],pointIndex:s,oldExtremes:{xMin:c&&c.userMin,xMax:c&&c.userMax,yMin:u&&u.userMin,yMax:u&&u.userMax}},this.drilldownLevels||(this.drilldownLevels=[]),this.drilldownLevels.push(a),n=a.lowerSeries=this.addSeries(e,!1),n.levelNumber=l+1,c&&(c.oldPos=c.pos,c.userMin=c.userMax=null,u.userMin=u.userMax=null),h.type===n.type&&(n.animate=n.animateDrilldown||i,n.options.animation=!0)},l.prototype.applyDrilldown=function(){var t=this.drilldownLevels,e=t[t.length-1].levelNumber;o(this.drilldownLevels,function(t){t.levelNumber===e&&o(t.levelSeries,function(t){t.levelNumber===e&&t.remove(!1)})}),this.redraw(),this.showDrillUpButton()},l.prototype.getDrilldownBackText=function(){var t=this.drilldownLevels[this.drilldownLevels.length-1];return t.series=t.seriesOptions,s(this.options.lang.drillUpText,t)},l.prototype.showDrillUpButton=function(){var t,e,i=this,n=this.getDrilldownBackText(),o=i.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:n}).align():(t=o.theme,e=t&&t.states,this.drillUpButton=this.renderer.button(n,null,null,function(){i.drillUp()},t,e&&e.hover,e&&e.select).attr({align:o.position.align,zIndex:9}).add().align(o.position,!1,o.relativeTo||"plotBox"))},l.prototype.drillUp=function(){for(var t,e,i,n,r=this,s=r.drilldownLevels,a=s[s.length-1].levelNumber,l=s.length,h=r.series,c=h.length,u=function(n){var s;o(h,function(t){t.userOptions===n&&(s=t)}),s=s||r.addSeries(n,!1),s.type===e.type&&s.animateDrillupTo&&(s.animate=s.animateDrillupTo),n===t.seriesOptions&&(i=s)};l--;)if(t=s[l],t.levelNumber===a){if(s.pop(),e=t.lowerSeries,!e.chart)for(;c--;)if(h[c].options.id===t.lowerSeriesOptions.id){e=h[c];break}e.xData=[],o(t.levelSeriesOptions,u),d(r,"drillup",{seriesOptions:t.seriesOptions}),i.type===e.type&&(i.drilldownLevel=t,i.options.animation=r.options.drilldown.animation,e.animateDrillupFrom&&e.animateDrillupFrom(t)),i.levelNumber=a,e.remove(!1),i.xAxis&&(n=t.oldExtremes,i.xAxis.setExtremes(n.xMin,n.xMax,!1),i.yAxis.setExtremes(n.yMin,n.yMax,!1))}this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align()},u.prototype.supportsDrilldown=!0,u.prototype.animateDrillupTo=function(t){if(!t){var e=this,n=e.drilldownLevel;o(this.points,function(t){t.graphic.hide(),t.dataLabel&&t.dataLabel.hide(),t.connector&&t.connector.hide()}),setTimeout(function(){o(e.points,function(t,e){var i=e===(n&&n.pointIndex)?"show":"fadeIn",o="show"===i?!0:void 0;t.graphic[i](o),t.dataLabel&&t.dataLabel[i](o),t.connector&&t.connector[i](o)})},Math.max(this.chart.options.drilldown.animation.duration-50,0)),this.animate=i}},u.prototype.animateDrilldown=function(t){var e=this,i=this.chart.drilldownLevels,n=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1].shapeArgs,r=this.chart.options.drilldown.animation;t||(o(i,function(t){e.userOptions===t.lowerSeriesOptions&&(n=t.shapeArgs)}),n.x+=this.xAxis.oldPos-this.xAxis.pos,o(this.points,function(t){t.graphic&&t.graphic.attr(n).animate(t.shapeArgs,r),t.dataLabel&&t.dataLabel.fadeIn(r)}),this.animate=null)},u.prototype.animateDrillupFrom=function(i){var n=this.chart.options.drilldown.animation,r=this.group,s=this;o(s.trackerGroups,function(t){s[t]&&s[t].on("mouseover")}),delete this.group,o(this.points,function(o){var s=o.graphic,a=t.Color(o.color).rgba,l=t.Color(i.color).rgba,h=function(){s.destroy(),r&&(r=r.destroy())};s&&(delete o.graphic,n?s.animate(i.shapeArgs,t.merge(n,{step:function(t,i){"start"===i.prop&&4===a.length&&4===l.length&&this.attr({fill:e(a,l,i.pos)})},complete:h})):(s.attr(i.shapeArgs),h()))})},c&&r(c.prototype,{supportsDrilldown:!0,animateDrillupTo:u.prototype.animateDrillupTo,animateDrillupFrom:u.prototype.animateDrillupFrom,animateDrilldown:function(i){var n=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],r=this.chart.options.drilldown.animation,s=n.shapeArgs,a=s.start,l=s.end-a,h=l/this.points.length,c=t.Color(n.color).rgba;i||(o(this.points,function(i,n){var o=t.Color(i.color).rgba;i.graphic.attr(t.merge(s,{start:a+n*h,end:a+(n+1)*h}))[r?"animate":"attr"](i.shapeArgs,t.merge(r,{step:function(t,i){"start"===i.prop&&4===c.length&&4===o.length&&this.attr({fill:e(c,o,i.pos)})}}))}),this.animate=null)}}),t.Point.prototype.doDrilldown=function(t){for(var e,i=this.series,n=i.chart,o=n.options.drilldown,r=(o.series||[]).length;r--&&!e;)o.series[r].id===this.drilldown&&(e=o.series[r]);d(n,"drilldown",{point:this,seriesOptions:e}),e&&(t?n.addSingleSeriesAsDrilldown(this,e):n.addSeriesAsDrilldown(this,e))},a(t.Point.prototype,"init",function(e,i,n,r){var s=e.call(this,i,n,r),a=i.chart,l=i.xAxis&&i.xAxis.ticks[r],h=l&&l.label;return s.drilldown?(t.addEvent(s,"click",function(){s.doDrilldown()}),h&&(h._basicStyle||(h._basicStyle=h.element.getAttribute("style")),h.addClass("highcharts-drilldown-axis-label").css(a.options.drilldown.activeAxisLabelStyle).on("click",function(){o(h.ddPoints,function(t){t.doDrilldown&&t.doDrilldown(!0)}),a.applyDrilldown()}),h.ddPoints||(h.ddPoints=[]),h.ddPoints.push(s))):h&&h._basicStyle&&h.element.setAttribute("style",h._basicStyle),s}),a(t.Series.prototype,"drawDataLabels",function(t){var e=this.chart.options.drilldown.activeDataLabelStyle;t.call(this),o(this.points,function(t){t.drilldown&&t.dataLabel&&t.dataLabel.attr({"class":"highcharts-drilldown-data-label"}).css(e).on("click",function(){t.doDrilldown()})})});var f,m=function(t){t.call(this),o(this.points,function(t){t.drilldown&&t.graphic&&t.graphic.attr({"class":"highcharts-drilldown-point"}).css({cursor:"pointer"})})};for(f in h)h[f].prototype.supportsDrilldown&&a(h[f].prototype,"drawTracker",m)}(Highcharts),// copyright chris wanstrath
function(t){function e(e,i,o){var r=this;return this.on("click.pjax",e,function(e){var s=t.extend({},p(i,o));s.container||(s.container=t(this).attr("data-pjax")||r),n(e,s)})}function i(t){var e=t.hash,i=t.href.indexOf("#");return!e&&i>-1&&(e=t.href.substring(i)),e}function n(e,n,o){o=p(n,o);var s=e.currentTarget;if("A"!==s.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)&&location.protocol===s.protocol&&location.hostname===s.hostname){var a=i(s),l=i(location);if(s.href.replace(a,"")===location.href.replace(l,""))return void e.preventDefault();if(s.href!==location.href+"#"&&!e.isDefaultPrevented()){var h={url:s.href,container:t(s).attr("data-pjax"),target:s},c=t.extend({},h,o),u=t.Event("pjax:click");t(s).trigger(u,[c]),u.isDefaultPrevented()||(r(c),e.preventDefault(),t(s).trigger("pjax:clicked",[c]))}}}function o(e,i,n){n=p(i,n);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:o.method.toUpperCase(),url:o.action,data:t(o).serializeArray(),container:t(o).attr("data-pjax"),target:o};r(t.extend({},s,n)),e.preventDefault()}function r(e){function i(e,i,o){o||(o={}),o.relatedTarget=n;var r=t.Event(e,o);return s.trigger(r,i),!r.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,r.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,o=d(e.url).hash,s=e.context=f(e.container);e.data||(e.data={}),e.data._pjax=s.selector;var l;e.beforeSend=function(t,n){return"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",s.selector),i("pjax:beforeSend",[t,n])?(n.timeout>0&&(l=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),void(e.requestUrl=d(n.url).href)):!1},e.complete=function(t,n){l&&clearTimeout(l),i("pjax:complete",[t,n,e]),i("pjax:end",[t,e])},e.error=function(t,n,o){var r=v("",t,e),s=i("pjax:error",[t,n,o,e]);"GET"==e.type&&"abort"!==n&&s&&a(r.url)},e.success=function(n,l,h){var u=r.state,p="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,f=h.getResponseHeader("X-PJAX-Version"),m=v(n,h,e);if(p&&f&&p!==f)return void a(m.url);if(!m.contents)return void a(m.url);r.state={id:e.id||c(),url:m.url,title:m.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(r.state,m.title,m.url);try{document.activeElement.blur()}catch(g){}m.title&&(document.title=m.title),i("pjax:beforeReplace",[m.contents,e],{state:r.state,previousState:u}),s.html(m.contents);var b=s.find("input[autofocus], textarea[autofocus]").last()[0];if(b&&document.activeElement!==b&&b.focus(),y(m.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==o){var _=d(m.url);_.hash=o,r.state.url=_.href,window.history.replaceState(r.state,m.title,_.href)}i("pjax:success",[n,l,h,e])},r.state||(r.state={id:c(),url:window.location.href,title:document.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(r.state,document.title));var h=r.xhr;h&&h.readyState<4&&(h.onreadystatechange=t.noop,h.abort()),r.options=e;var h=r.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(b(r.state.id,s.clone().contents()),window.history.pushState(null,"",u(e.requestUrl))),i("pjax:start",[h,e]),i("pjax:send",[h,e])),r.xhr}function s(e,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(t.extend(n,p(e,i)))}function a(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function l(e){var i=r.state,n=e.state;if(n&&n.container){if(k&&S==n.url)return;if(r.state&&r.state.id===n.id)return;var o=t(n.container);if(o.length){var s,l=P[n.id];r.state&&(s=r.state.id<n.id?"forward":"back",_(s,r.state.id,o.clone().contents()));var h=t.Event("pjax:popstate:start",{state:n,direction:s});o.trigger(h);var c={id:n.id,url:n.url,container:o,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};if(l){o.trigger("pjax:start",[null,c]),r.state=n,n.title&&(document.title=n.title);var u=t.Event("pjax:beforeReplace",{state:n,previousState:i});o.trigger(u,[l,c]),o.html(l),o.trigger("pjax:end",[null,c])}else r(c);h=t.Event("pjax:popstate:end",{state:n,direction:s}),o.trigger(h),o[0].offsetHeight}else a(location.href)}k=!1}function h(e){var i=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",o=t("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&o.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r=e.data;if("string"==typeof r)t.each(r.split("&"),function(e,i){var n=i.split("=");o.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof r)for(key in r)o.append(t("<input>",{type:"hidden",name:key,value:r[key]}));t(document.body).append(o),o.submit()}function c(){return(new Date).getTime()}function u(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(t){var e=document.createElement("a");return e.href=t,e}function p(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=f(i.container)),i}function f(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function m(t,e){return t.filter(e).add(t.find(e))}function g(e){return t.parseHTML(e,document,!0)}function v(e,i,n){var o={};if(o.url=n.url,/<html/i.test(e))var r=t(g(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),s=t(g(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var r=s=t(g(e));if(0===s.length)return o;if(o.title=m(r,"title").last().text(),n.fragment){if("body"===n.fragment)var a=s;else var a=m(s,n.fragment).first();a.length&&(o.contents=a.contents(),o.title||(o.title=a.attr("title")||a.data("title")))}else/<html/i.test(e)||(o.contents=s);return o.contents&&(o.contents=o.contents.not(function(){return t(this).is("title")}),o.contents.find("title").remove(),o.scripts=m(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=t.trim(o.title)),o}function y(e){if(e){var i=t("script[src]");e.each(function(){var e=this.src,n=i.filter(function(){return this.src===e});if(!n.length){var o=document.createElement("script");o.type=t(this).attr("type"),o.src=t(this).attr("src"),document.head.appendChild(o)}})}}function b(t,e){for(P[t]=e,D.push(t);E.length;)delete P[E.shift()];for(;D.length>r.defaults.maxCacheLength;)delete P[D.shift()]}function _(t,e,i){var n,o;P[e]=i,"forward"===t?(n=D,o=E):(n=E,o=D),n.push(e),(e=o.pop())&&delete P[e]}function w(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function x(){t.fn.pjax=e,t.pjax=r,t.pjax.enable=t.noop,t.pjax.disable=C,t.pjax.click=n,t.pjax.submit=o,t.pjax.reload=s,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:w},t(window).on("popstate.pjax",l)}function C(){t.fn.pjax=function(){return this},t.pjax=h,t.pjax.enable=x,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",l)}var k=!0,S=window.location.href,T=window.history.state;T&&T.container&&(r.state=T),"state"in window.history&&(k=!1);var P={},E=[],D=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.pjax?x():C()}(jQuery),//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function n(){}function o(t){_(t),s(this,t)}function r(t){var e=f(t),i=e.year||0,n=e.month||0,o=e.week||0,r=e.day||0,s=e.hour||0,a=e.minute||0,l=e.second||0,h=e.millisecond||0;this._input=t,this._milliseconds=+h+1e3*l+6e4*a+36e5*s,this._days=+r+7*o,this._months=+n+12*i,this._data={},this._bubble()}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function h(t,e,i,n){var o,r,s=e._milliseconds,a=e._days,l=e._months;s&&t._d.setTime(+t._d+s*i),(a||l)&&(o=t.minute(),r=t.hour()),a&&t.date(t.date()+a*i),l&&t.month(t.month()+l*i),s&&!n&&ee.updateOffset(t),(a||l)&&(t.minute(o),t.hour(r))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function d(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&s++;return s+r}function p(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ne[t]||je[e]||e}return t}function f(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=p(i),e&&(n[e]=t[i]));return n}function m(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}ee[e]=function(o,r){var s,a,l=ee.fn._lang[e],h=[];if("number"==typeof o&&(r=o,o=t),a=function(t){var e=ee().utc().set(n,t);return l.call(ee.fn._lang,e,o||"")},null!=r)return a(r);for(s=0;i>s;s++)h.push(a(s));return h}}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function v(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function y(t){return b(t)?366:365}function b(t){return 0===t%4&&0!==t%100||0===t%400}function _(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[se]<0||t._a[se]>11?se:t._a[ae]<1||t._a[ae]>v(t._a[re],t._a[se])?ae:t._a[le]<0||t._a[le]>23?le:t._a[he]<0||t._a[he]>59?he:t._a[ce]<0||t._a[ce]>59?ce:t._a[ue]<0||t._a[ue]>999?ue:-1,t._pf._overflowDayOfYear&&(re>e||e>ae)&&(e=ae),t._pf.overflow=e)}function w(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function C(t){return t?t.toLowerCase().replace("_","-"):t}function k(t,e){return e.abbr=t,de[t]||(de[t]=new n),de[t].set(e),de[t]}function S(t){delete de[t]}function T(t){var e,i,n,o,r=0,s=function(t){if(!de[t]&&pe)try{require("./lang/"+t)}catch(e){}return de[t]};if(!t)return ee.fn._lang;if(!c(t)){if(i=s(t))return i;t=[t]}for(;r<t.length;){for(o=C(t[r]).split("-"),e=o.length,n=C(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=s(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&d(o,n,!0)>=e-1)break;e--}r++}return ee.fn._lang}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function E(t){var e,i,n=t.match(ve);for(e=0,i=n.length;i>e;e++)n[e]=Fe[n[e]]?Fe[n[e]]:P(n[e]);return function(o){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(o,t):n[e];return r}}function D(t,e){return t.isValid()?(e=L(e,t.lang()),He[e]||(He[e]=E(e)),He[e](t)):t.lang().invalidDate()}function L(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ye.lastIndex=0;n>=0&&ye.test(t);)t=t.replace(ye,i),ye.lastIndex=0,n-=1;return t}function M(t,e){var i;switch(t){case"DDDD":return we;case"YYYY":case"GGGG":case"gggg":return xe;case"YYYYY":case"GGGGG":case"ggggg":return Ce;case"S":case"SS":case"SSS":case"DDD":return _e;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Se;case"a":case"A":return T(e._l)._meridiemParse;case"X":return Ee;case"Z":case"ZZ":return Te;case"T":return Pe;case"SSSS":return ke;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return be;default:return i=new RegExp(z(H(t.replace("\\","")),"i"))}}function A(t){var e=(Te.exec(t)||[])[0],i=(e+"").match(Re)||["-",0,0],n=+(60*i[1])+g(i[2]);return"+"===i[0]?-n:n}function R(t,e,i){var n,o=i._a;switch(t){case"M":case"MM":null!=e&&(o[se]=g(e)-1);break;case"MMM":case"MMMM":n=T(i._l).monthsParse(e),null!=n?o[se]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[ae]=g(e));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=g(e));break;case"YY":o[re]=g(e)+(g(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":o[re]=g(e);break;case"a":case"A":i._isPm=T(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":o[le]=g(e);break;case"m":case"mm":o[he]=g(e);break;case"s":case"ss":o[ce]=g(e);break;case"S":case"SS":case"SSS":case"SSSS":o[ue]=g(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=A(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function O(t){var e,i,n,o,r,s,a,l,h,c,u=[];if(!t._d){for(n=N(t),t._w&&null==t._a[ae]&&null==t._a[se]&&(r=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[re]?ee().weekYear():t._a[re]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=X(r(s.GG),s.W||1,s.E,4,1):(l=T(t._l),h=null!=s.d?G(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,c=parseInt(s.w,10)||1,null!=s.d&&h<l._week.dow&&c++,a=X(r(s.gg),c,h,l._week.doy,l._week.dow)),t._a[re]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(o=null==t._a[re]?n[re]:t._a[re],t._dayOfYear>y(o)&&(t._pf._overflowDayOfYear=!0),i=$(o,0,t._dayOfYear),t._a[se]=i.getUTCMonth(),t._a[ae]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=u[e]=n[e];for(;7>e;e++)t._a[e]=u[e]=null==t._a[e]?2===e?1:0:t._a[e];u[le]+=g((t._tzm||0)/60),u[he]+=g((t._tzm||0)%60),t._d=(t._useUTC?$:W).apply(null,u)}}function I(t){var e;t._d||(e=f(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],O(t))}function N(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function j(t){t._a=[],t._pf.empty=!0;var e,i,n,o,r,s=T(t._l),a=""+t._i,l=a.length,h=0;for(n=L(t._f,s).match(ve)||[],e=0;e<n.length;e++)o=n[e],i=(M(o,t).exec(a)||[])[0],i&&(r=a.substr(0,a.indexOf(i)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(i)+i.length),h+=i.length),Fe[o]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(o),R(o,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-h,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[le]<12&&(t._a[le]+=12),t._isPm===!1&&12===t._a[le]&&(t._a[le]=0),O(t),_(t)}function H(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})}function z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(t){var e,i,n,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=s({},t),w(e),e._f=t._f[o],j(e),x(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==n||n>r)&&(n=r,i=e));s(t,i||e)}function F(t){var e,i=t._i,n=De.exec(i);if(n){for(t._pf.iso=!0,e=4;e>0;e--)if(n[e]){t._f=Me[e-1]+(n[6]||" ");break}for(e=0;4>e;e++)if(Ae[e][1].exec(i)){t._f+=Ae[e][0];break}Te.exec(i)&&(t._f+="Z"),j(t)}else t._d=new Date(i)}function U(e){var i=e._i,n=fe.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?F(e):c(i)?(e._a=i.slice(0),O(e)):u(i)?e._d=new Date(+i):"object"==typeof i?I(e):e._d=new Date(i)}function W(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return 1970>t&&a.setFullYear(t),a}function $(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function G(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function q(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function V(t,e,i){var n=oe(Math.abs(t)/1e3),o=oe(n/60),r=oe(o/60),s=oe(r/24),a=oe(s/365),l=45>n&&["s",n]||1===o&&["m"]||45>o&&["mm",o]||1===r&&["h"]||22>r&&["hh",r]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",oe(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,q.apply({},l)}function Y(t,e,i){var n,o=i-e,r=i-t.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=ee(t).add("d",r),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function X(t,e,i,n,o){var r,s,a=new Date(Date.UTC(t,0)).getUTCDay();return i=null!=i?i:o,r=o-a+(a>n?7:0),s=7*(e-1)+(i-o)+r+1,{year:s>0?t:t-1,dayOfYear:s>0?s:y(t-1)+s}}function Z(t){var e=t._i,i=t._f;return"undefined"==typeof t._pf&&w(t),null===e?ee.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),ee.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):i?c(i)?B(t):j(t):U(t),new o(t))}function K(t,e){ee.fn[t]=ee.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),ee.updateOffset(this),this):this._d["get"+i+e]()}}function Q(t){ee.duration.fn[t]=function(){return this._data[t]}}function J(t,e){ee.duration.fn["as"+t]=function(){return+this/e}}function te(t){var e=!1,i=ee;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)}:ee)}for(var ee,ie,ne="2.4.0",oe=Math.round,re=0,se=1,ae=2,le=3,he=4,ce=5,ue=6,de={},pe="undefined"!=typeof module&&module.exports,fe=/^\/?Date\((\-?\d+)/i,me=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ge=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ve=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ye=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,be=/\d\d?/,_e=/\d{1,3}/,we=/\d{3}/,xe=/\d{1,4}/,Ce=/[+\-]?\d{1,6}/,ke=/\d+/,Se=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Te=/Z|[\+\-]\d\d:?\d\d/i,Pe=/T/i,Ee=/[\+\-]?\d+(\.\d{1,3})?/,De=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Le="YYYY-MM-DDTHH:mm:ssZ",Me=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ae=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Re=/([\+\-]|\d\d)/gi,Oe="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ie={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ne={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},je={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},He={},ze="DDD w W M D d".split(" "),Be="M D H h m s w W".split(" "),Fe={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return l(g(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(t/60),2)+":"+l(g(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ue=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ze.length;)ie=ze.pop(),Fe[ie+"o"]=i(Fe[ie],ie);for(;Be.length;)ie=Be.pop(),Fe[ie+ie]=e(Fe[ie],2);for(Fe.DDDD=e(Fe.DDD,3),s(n.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=ee.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=ee([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Y(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ee=function(e,i,n,o){return"boolean"==typeof n&&(o=n,n=t),Z({_i:e,_f:i,_l:n,_strict:o,_isUTC:!1})},ee.utc=function(e,i,n,o){var r;return"boolean"==typeof n&&(o=n,n=t),r=Z({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:i,_strict:o}).utc()},ee.unix=function(t){return ee(1e3*t)},ee.duration=function(t,e){var i,n,o,s=ee.isDuration(t),a="number"==typeof t,l=s?t._input:a?{}:t,h=null;return a?e?l[e]=t:l.milliseconds=t:(h=me.exec(t))?(i="-"===h[1]?-1:1,l={y:0,d:g(h[ae])*i,h:g(h[le])*i,m:g(h[he])*i,s:g(h[ce])*i,ms:g(h[ue])*i}):(h=ge.exec(t))&&(i="-"===h[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},l={y:o(h[2]),M:o(h[3]),d:o(h[4]),h:o(h[5]),m:o(h[6]),s:o(h[7]),w:o(h[8])}),n=new r(l),s&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},ee.version=ne,ee.defaultFormat=Le,ee.updateOffset=function(){},ee.lang=function(t,e){var i;return t?(e?k(C(t),e):null===e?(S(t),t="en"):de[t]||T(t),i=ee.duration.fn._lang=ee.fn._lang=T(t),i._abbr):ee.fn._lang._abbr},ee.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},ee.isMoment=function(t){return t instanceof o},ee.isDuration=function(t){return t instanceof r},ie=Ue.length-1;ie>=0;--ie)m(Ue[ie]);for(ee.normalizeUnits=function(t){return p(t)},ee.invalid=function(t){var e=ee.utc(0/0);return null!=t?s(e._pf,t):e._pf.userInvalidated=!0,e},ee.parseZone=function(t){return ee(t).parseZone()},s(ee.fn=o.prototype,{clone:function(){return ee(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return D(ee(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&d(this._a,(this._isUTC?ee.utc(this._a):ee(this._a)).toArray())>0:!1},parsingFlags:function(){return s({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=D(this,t||ee.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),h(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),h(this,i,-1),this},diff:function(t,e,i){var n,o,r=this._isUTC?ee(t).zone(this._offset||0):ee(t).local(),s=6e4*(this.zone()-r.zone());return e=p(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-ee(this).startOf("month")-(r-ee(r).startOf("month")))/n,o-=6e4*(this.zone()-ee(this).startOf("month").zone()-(r.zone()-ee(r).startOf("month").zone()))/n,"year"===e&&(o/=12)):(n=this-r,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?o:a(o)},from:function(t,e){return ee.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ee(),t)},calendar:function(){var t=this.diff(ee().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return b(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=G(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,i=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+i+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ee.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(t){switch(t=p(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=p(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ee(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ee(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+ee(t).startOf(e)},min:function(t){return t=ee.apply(null,arguments),this>t?this:t},max:function(t){return t=ee.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=A(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&h(this,ee.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ee(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(t){var e=oe((ee(this).startOf("day")-ee(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Y(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Y(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=p(t),this[t]()},set:function(t,e){return t=p(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),ie=0;ie<Oe.length;ie++)K(Oe[ie].toLowerCase().replace(/s$/,""),Oe[ie]);K("year","FullYear"),ee.fn.days=ee.fn.day,ee.fn.months=ee.fn.month,ee.fn.weeks=ee.fn.week,ee.fn.isoWeeks=ee.fn.isoWeek,ee.fn.toJSON=ee.fn.toISOString,s(ee.duration.fn=r.prototype,{_bubble:function(){var t,e,i,n,o=this._milliseconds,r=this._days,s=this._months,l=this._data;l.milliseconds=o%1e3,t=a(o/1e3),l.seconds=t%60,e=a(t/60),l.minutes=e%60,i=a(e/60),l.hours=i%24,r+=a(i/24),l.days=r%30,s+=a(r/30),l.months=s%12,n=a(s/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(t){var e=+this,i=V(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=ee.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=ee.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=p(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=p(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ee.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||r?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"}});for(ie in Ie)Ie.hasOwnProperty(ie)&&(J(ie,Ie[ie]),Q(ie.toLowerCase()));J("Weeks",6048e5),ee.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ee.lang("en",{ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),pe?(module.exports=ee,te(!0)):"function"==typeof define&&define.amd?define("moment",function(e,i,n){return n.config().noGlobal!==!0&&te(n.config().noGlobal===t),ee}):te()}.call(this),/**
 * SheetClip - Spreadsheet Clipboard Parser
 * version 0.2
 *
 * This tiny library transforms JavaScript arrays to strings that are pasteable by LibreOffice, OpenOffice,
 * Google Docs and Microsoft Excel.
 *
 * Copyright 2012, Marcin Warpechowski
 * Licensed under the MIT license.
 * http://github.com/warpech/sheetclip/
 */
function(t){"use strict";function e(t){return t.split('"').length-1}var i={parse:function(t){var i,n,o,r,s,a,l,h=[],c=0;for(o=t.split("\n"),o.length>1&&""===o[o.length-1]&&o.pop(),i=0,n=o.length;n>i;i+=1){for(o[i]=o[i].split("	"),r=0,s=o[i].length;s>r;r+=1)h[c]||(h[c]=[]),a&&0===r?(l=h[c].length-1,h[c][l]=h[c][l]+"\n"+o[i][0],a&&1&e(o[i][0])&&(a=!1,h[c][l]=h[c][l].substring(0,h[c][l].length-1).replace(/""/g,'"'))):r===s-1&&0===o[i][r].indexOf('"')&&1&e(o[i][r])?(h[c].push(o[i][r].substring(1).replace(/""/g,'"')),a=!0):(h[c].push(o[i][r].replace(/""/g,'"')),a=!1);a||(c+=1)}return h},stringify:function(t){var e,i,n,o,r,s="";for(e=0,i=t.length;i>e;e+=1){for(o=t[e].length,n=0;o>n;n+=1)n>0&&(s+="	"),r=t[e][n],s+="string"==typeof r?r.indexOf("\n")>-1?'"'+r.replace(/"/g,'""')+'"':r:null===r||void 0===r?"":r;s+="\n"}return s}};"undefined"!=typeof exports?(exports.parse=i.parse,exports.stringify=i.stringify):t.SheetClip=i}(window),"undefined"!=typeof exports&&(module.exports=autoResize);var instance;"undefined"!=typeof exports&&(module.exports=copyPaste),CopyPasteClass.prototype.init=function(){var t,e;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],e=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("div"),this.elDiv.id="CopyPasteDiv",t=this.elDiv.style,t.position="fixed",t.top="-10000px",t.left="-10000px",e.appendChild(this.elDiv),this.elTextarea=document.createElement("textarea"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(t){var e,i;return"WebkitAppearance"in document.documentElement.style?(e=t.clipboardData.getData("Text"),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(i=e.split("\n"),i.pop(),e=i.join("\n")),this.value=e,!1):void 0},t=this.elTextarea.style,t.width="10000px",t.height="10000px",t.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof t.opacity&&(t.opacity=0)),this.onKeyDownRef=this.onKeyDown.bind(this),document.documentElement.addEventListener("keydown",this.onKeyDownRef,!1)},CopyPasteClass.prototype.onKeyDown=function(t){function e(){var t=document.activeElement;return t.shadowRoot&&t.shadowRoot.activeElement&&(t=t.shadowRoot.activeElement),["INPUT","SELECT","TEXTAREA"].indexOf(t.nodeName)>-1||"true"===t.contentEditable}var i=this,n=!1;if(t.metaKey?n=!0:t.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(n=!0),n){if(document.activeElement!==this.elTextarea&&(""!==this.getSelectionText()||e()))return;this.selectNodeText(this.elTextarea),setTimeout(function(){document.activeElement!==i.elTextarea&&i.selectNodeText(i.elTextarea)},0)}!n||67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode||(88===t.keyCode?setTimeout(function(){i.triggerCut(t)},0):86===t.keyCode&&setTimeout(function(){i.triggerPaste(t)},0))},CopyPasteClass.prototype.selectNodeText=function(t){t&&t.select()},CopyPasteClass.prototype.getSelectionText=function(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(t=document.selection.createRange().text),t},CopyPasteClass.prototype.copyable=function(t){if("string"!=typeof t&&void 0===t.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=t,this.selectNodeText(this.elTextarea)},CopyPasteClass.prototype.onCut=function(t){this.cutCallbacks.push(t)},CopyPasteClass.prototype.onPaste=function(t){this.pasteCallbacks.push(t)},CopyPasteClass.prototype.removeCallback=function(t){var e,i;for(e=0,i=this.copyCallbacks.length;i>e;e++)if(this.copyCallbacks[e]===t)return this.copyCallbacks.splice(e,1),!0;for(e=0,i=this.cutCallbacks.length;i>e;e++)if(this.cutCallbacks[e]===t)return this.cutCallbacks.splice(e,1),!0;for(e=0,i=this.pasteCallbacks.length;i>e;e++)if(this.pasteCallbacks[e]===t)return this.pasteCallbacks.splice(e,1),!0;return!1},CopyPasteClass.prototype.triggerCut=function(t){var e=this;e.cutCallbacks&&setTimeout(function(){for(var i=0,n=e.cutCallbacks.length;n>i;i++)e.cutCallbacks[i](t)},50)},CopyPasteClass.prototype.triggerPaste=function(t,e){var i=this;i.pasteCallbacks&&setTimeout(function(){for(var n=e||i.elTextarea.value,o=0,r=i.pasteCallbacks.length;r>o;o++)i.pasteCallbacks[o](n,t)},50)},CopyPasteClass.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),document.documentElement.removeEventListener("keydown",this.onKeyDownRef))},CopyPasteClass.prototype.hasBeenDestroyed=function(){return!this.refCounter};var jsonpatch;!function(t){function e(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function i(t,n){var o;for(var r in t)if(t.hasOwnProperty(r)){if(t[r]===n)return e(r)+"/";if("object"==typeof t[r]&&(o=i(t[r],n),""!=o))return e(r)+"/"+o}return""}function n(t,e){if(t===e)return"/";var n=i(t,e);if(""===n)throw new Error("Object not found in root");return"/"+n}function o(t){for(var e=0,i=v.length;i>e;e++)if(v[e].obj===t)return v[e]}function r(t,e){for(var i=0,n=t.observers.length;n>i;i++)if(t.observers[i].callback===e)return t.observers[i].observer}function s(t,e){for(var i=0,n=t.observers.length;n>i;i++)if(t.observers[i].observer===e)return void t.observers.splice(i,1)}function a(t,e){u(e),Object.observe?c(e,t):clearTimeout(e.next);var i=o(t);s(i,e)}function l(t,e){var i,s=[],a=t,l=o(t);if(l?i=r(l,e):(l=new y(t),v.push(l)),i)return i;if(Object.observe)i=function(o){c(i,t),h(i,t);for(var r=0,l=o.length;l>r;){if(("length"!==o[r].name||!w(o[r].object))&&"__Jasmine_been_here_before__"!==o[r].name){var u=o[r].type;switch(u){case"new":u="add";break;case"deleted":u="delete";break;case"updated":u="update"}g[u].call(o[r],s,n(a,o[r].object))}r++}s&&e&&e(s),i.patches=s,s=[]};else if(i={},l.value=JSON.parse(JSON.stringify(t)),e){i.callback=e,i.next=null;var d=this.intervals||[100,1e3,1e4,6e4],p=0,f=function(){u(i)},m=function(){clearTimeout(i.next),i.next=setTimeout(function(){f(),p=0,i.next=setTimeout(_,d[p++])},0)},_=function(){f(),p==d.length&&(p=d.length-1),i.next=setTimeout(_,d[p++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",m),window.addEventListener("mouseup",m),window.addEventListener("keydown",m)):(window.attachEvent("onmousedown",m),window.attachEvent("onmouseup",m),window.attachEvent("onkeydown",m))),i.next=setTimeout(_,d[p++])}return i.patches=s,i.object=t,l.observers.push(new b(e,i)),h(i,t)}function h(t,e){if(Object.observe){Object.observe(e,t);for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n&&"object"==typeof n&&h(t,n)}}return t}function c(t,e){if(Object.observe){Object.unobserve(e,t);for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n&&"object"==typeof n&&c(t,n)}}return t}function u(t){if(Object.observe)Object.deliverChangeRecords(t);else{for(var e,i=0,n=v.length;n>i;i++)if(v[i].obj===t.object){e=v[i];break}d(e.value,t.object,t.patches,"")}var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function d(t,i,n,o){for(var r=_(i),s=_(t),a=!1,l=!1,h=s.length-1;h>=0;h--){var c=s[h],u=t[c];if(i.hasOwnProperty(c)){var p=i[c];u instanceof Object?d(u,p,n,o+"/"+e(c)):u!=p&&(a=!0,n.push({op:"replace",path:o+"/"+e(c),value:p}),t[c]=p)}else n.push({op:"remove",path:o+"/"+e(c)}),delete t[c],l=!0}if(l||r.length!=s.length)for(var h=0;h<r.length;h++){var c=r[h];t.hasOwnProperty(c)||(n.push({op:"add",path:o+"/"+e(c),value:i[c]}),t[c]=JSON.parse(JSON.stringify(i[c])))}}function p(t,e){for(var i,n=!1,o=0,r=e.length;r>o;){i=e[o];for(var s=i.path.split("/"),a=t,l=1,h=s.length;;)if(w(a)){var c=parseInt(s[l],10);if(l++,l>=h){n=m[i.op].call(i,a,c,t);break}a=a[c]}else{var u=s[l];if(-1!=u.indexOf("~")&&(u=u.replace(/~1/g,"/").replace(/~0/g,"~")),l++,l>=h){n=f[i.op].call(i,a,u,t);break}a=a[u]}o++}return n}var f={add:function(t,e){return t[e]=this.value,!0},remove:function(t,e){return delete t[e],!0},replace:function(t,e){return t[e]=this.value,!0},move:function(t,e,i){var n={op:"_get",path:this.from};return p(i,[n]),p(i,[{op:"remove",path:this.from}]),p(i,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(t,e,i){var n={op:"_get",path:this.from};return p(i,[n]),p(i,[{op:"add",path:this.path,value:n.value}]),!0},test:function(t,e){return JSON.stringify(t[e])===JSON.stringify(this.value)},_get:function(t,e){this.value=t[e]}},m={add:function(t,e){return t.splice(e,0,this.value),!0},remove:function(t,e){return t.splice(e,1),!0},replace:function(t,e){return t[e]=this.value,!0},move:f.move,copy:f.copy,test:f.test,_get:f._get},g={add:function(t,i){var n={op:"add",path:i+e(this.name),value:this.object[this.name]};t.push(n)},"delete":function(t,i){var n={op:"remove",path:i+e(this.name)};t.push(n)},update:function(t,i){var n={op:"replace",path:i+e(this.name),value:this.object[this.name]};t.push(n)}},v=[];t.intervals;var y=function(){function t(t){this.observers=[],this.obj=t}return t}(),b=function(){function t(t,e){this.callback=t,this.observer=e}return t}();t.unobserve=a,t.observe=l,t.generate=u;var _;_=Object.keys?Object.keys:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};var w;w=Array.isArray?Array.isArray:function(t){return t.push&&"number"==typeof t.length},t.apply=p}(jsonpatch||(jsonpatch={})),"undefined"!=typeof exports&&(exports.apply=jsonpatch.apply,exports.observe=jsonpatch.observe,exports.unobserve=jsonpatch.unobserve,exports.generate=jsonpatch.generate),/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
function(){function t(t){this._value=t}function e(t,e,i,n){var o,r,s=Math.pow(10,e);return r=(i(t*s)/s).toFixed(e),n&&(o=new RegExp("0{1,"+n+"}$"),r=r.replace(o,"")),r}function i(t,e,i){var n;return n=e.indexOf("$")>-1?o(t,e,i):e.indexOf("%")>-1?r(t,e,i):e.indexOf(":")>-1?s(t,e):l(t._value,e,i)}function n(t,e){var i,n,o,r,s,l=e,h=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(e.indexOf(":")>-1)t._value=a(e);else if(e===g)t._value=0;else{for("."!==f[m].delimiters.decimal&&(e=e.replace(/\./g,"").replace(f[m].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+f[m].abbreviations.thousand+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+f[m].abbreviations.million+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+f[m].abbreviations.billion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+f[m].abbreviations.trillion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),s=0;s<=h.length&&!(c=e.indexOf(h[s])>-1?Math.pow(1024,s+1):!1);s++);t._value=(c?c:1)*(l.match(i)?Math.pow(10,3):1)*(l.match(n)?Math.pow(10,6):1)*(l.match(o)?Math.pow(10,9):1)*(l.match(r)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=c?Math.ceil(t._value):t._value}return t._value}function o(t,e,i){var n,o,r=e.indexOf("$"),s=e.indexOf("("),a=e.indexOf("-"),h="";return e.indexOf(" $")>-1?(h=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(h=" ",e=e.replace("$ ","")):e=e.replace("$",""),o=l(t._value,e,i),1>=r?o.indexOf("(")>-1||o.indexOf("-")>-1?(o=o.split(""),n=1,(s>r||a>r)&&(n=0),o.splice(n,0,f[m].currency.symbol+h),o=o.join("")):o=f[m].currency.symbol+h+o:o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,h+f[m].currency.symbol),o=o.join("")):o=o+h+f[m].currency.symbol,o}function r(t,e,i){var n,o="",r=100*t._value;return e.indexOf(" %")>-1?(o=" ",e=e.replace(" %","")):e=e.replace("%",""),n=l(r,e,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,o+"%"),n=n.join("")):n=n+o+"%",n}function s(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*i);return e+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function a(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function l(t,i,n){var o,r,s,a,l,h,c=!1,u=!1,d=!1,p="",v=!1,y=!1,b=!1,_=!1,w=!1,x="",C="",k=Math.abs(t),S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",P=!1;if(0===t&&null!==g)return g;if(i.indexOf("(")>-1?(c=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(u=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(v=i.indexOf("aK")>=0,y=i.indexOf("aM")>=0,b=i.indexOf("aB")>=0,_=i.indexOf("aT")>=0,w=v||y||b||_,i.indexOf(" a")>-1?(p=" ",i=i.replace(" a","")):i=i.replace("a",""),k>=Math.pow(10,12)&&!w||_?(p+=f[m].abbreviations.trillion,t/=Math.pow(10,12)):k<Math.pow(10,12)&&k>=Math.pow(10,9)&&!w||b?(p+=f[m].abbreviations.billion,t/=Math.pow(10,9)):k<Math.pow(10,9)&&k>=Math.pow(10,6)&&!w||y?(p+=f[m].abbreviations.million,t/=Math.pow(10,6)):(k<Math.pow(10,6)&&k>=Math.pow(10,3)&&!w||v)&&(p+=f[m].abbreviations.thousand,t/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(x=" ",i=i.replace(" b","")):i=i.replace("b",""),s=0;s<=S.length;s++)if(o=Math.pow(1024,s),r=Math.pow(1024,s+1),t>=o&&r>t){x+=S[s],o>0&&(t/=o);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(C=" ",i=i.replace(" o","")):i=i.replace("o",""),C+=f[m].ordinal(t)),i.indexOf("[.]")>-1&&(d=!0,i=i.replace("[.]",".")),a=t.toString().split(".")[0],l=i.split(".")[1],h=i.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),T=e(t,l[0].length+l[1].length,n,l[1].length)):T=e(t,l.length,n),a=T.split(".")[0],T=T.split(".")[1].length?f[m].delimiters.decimal+T.split(".")[1]:"",d&&0===Number(T.slice(1))&&(T="")):a=e(t,null,n),a.indexOf("-")>-1&&(a=a.slice(1),P=!0),h>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f[m].delimiters.thousands)),0===i.indexOf(".")&&(a=""),(c&&P?"(":"")+(!c&&P?"-":"")+(!P&&u?"+":"")+a+T+(C?C:"")+(p?p:"")+(x?x:"")+(c&&P?")":"")}function h(t,e){f[t]=e}function c(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function u(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var i=c(t),n=c(e);return i>n?i:n},-1/0)}var d,p="1.5.3",f={},m="en",g=null,v="0,0",y="undefined"!=typeof module&&module.exports;d=function(e){return d.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=d.fn.unformat(e)),new t(Number(e))},d.version=p,d.isNumeral=function(e){return e instanceof t},d.language=function(t,e){if(!t)return m;if(t&&!e){if(!f[t])throw new Error("Unknown language : "+t);m=t}return(e||!f[t])&&h(t,e),d},d.languageData=function(t){if(!t)return f[m];if(!f[t])throw new Error("Unknown language : "+t);return f[t]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(t){g="string"==typeof t?t:null},d.defaultFormat=function(t){v="string"==typeof t?t:"0.0"},d.validate=function(t,e){var i,n,o,r,s,a,l,h;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),""===t)return!1;t=t.replace(/^[+-]?/,"");try{l=d.languageData(e)}catch(c){l=d.languageData(d.language())}return o=l.currency.symbol,s=l.abbreviations,i=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,h=t.match(/^[^\d]+/),null!==h&&(t=t.substr(1),h[0]!==o)?!1:(h=t.match(/[^\d]+$/),null!==h&&(t=t.slice(0,-1),h[0]!==s.thousand&&h[0]!==s.million&&h[0]!==s.billion&&h[0]!==s.trillion)?!1:t.match(/^\d+$/)?!0:(a=new RegExp(n+"{2}"),t.match(/[^\d.,]/g)?!1:(r=t.split(i),r.length>2?!1:r.length<2?!!r[0].match(/^\d+.*\d$/)&&!r[0].match(a):1===r[0].length?!!r[0].match(/^\d+$/)&&!r[0].match(a)&&!!r[1].match(/^\d+$/):!!r[0].match(/^\d+.*\d$/)&&!r[0].match(a)&&!!r[1].match(/^\d+$/))))},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,n,o=this.length>>>0,r=!1;for(1<arguments.length&&(n=e,r=!0),i=0;o>i;++i)this.hasOwnProperty(i)&&(r?n=t(n,this[i],i,this):(n=this[i],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n}),d.fn=t.prototype={clone:function(){return d(this)},format:function(t,e){return i(this,t?t:v,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:n(this,t?t:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+i*e}var i=u.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e){return t-i*e}var i=u.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e){var i=u(t,e);return t*i*e*i/(i*i)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var i=u(t,e);return t*i/(e*i)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(d(this._value).subtract(t).value())}},y&&(module.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define([],function(){return d})}.call(window),/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
function(t,e){"use strict";var i;if("object"==typeof exports){try{i=require("moment")}catch(n){}module.exports=e(i)}else"function"==typeof define&&define.amd?define(function(t){var n="moment";try{i=t(n)}catch(o){}return e(i)}):t.Pikaday=e(t.moment)}(this,function(t){"use strict";var e="function"==typeof t,i=!!window.addEventListener,n=window.document,o=window.setTimeout,r=function(t,e,n,o){i?t.addEventListener(e,n,!!o):t.attachEvent("on"+e,n)},s=function(t,e,n,o){i?t.removeEventListener(e,n,!!o):t.detachEvent("on"+e,n)},a=function(t,e,i){var o;n.createEvent?(o=n.createEvent("HTMLEvents"),o.initEvent(e,!0,!1),o=b(o,i),t.dispatchEvent(o)):n.createEventObject&&(o=n.createEventObject(),o=b(o,i),t.fireEvent("on"+e,o))},l=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},h=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},c=function(t,e){h(t,e)||(t.className=""===t.className?e:t.className+" "+e)},u=function(t,e){t.className=l((" "+t.className+" ").replace(" "+e+" "," "))},d=function(t){return/Array/.test(Object.prototype.toString.call(t))},p=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},f=function(t){var e=t.getDay();return 0===e||6===e},m=function(t){return t%4===0&&t%100!==0||t%400===0},g=function(t,e){return[31,m(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},v=function(t){p(t)&&t.setHours(0,0,0,0)},y=function(t,e){return t.getTime()===e.getTime()},b=function(t,e,i){var n,o;for(n in e)o=void 0!==t[n],o&&"object"==typeof e[n]&&null!==e[n]&&void 0===e[n].nodeName?p(e[n])?i&&(t[n]=new Date(e[n].getTime())):d(e[n])?i&&(t[n]=e[n].slice(0)):t[n]=b({},e[n],i):(i||!o)&&(t[n]=e[n]);return t},_=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},w={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},x=function(t,e,i){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},C=function(t,e,i,n,o,r,s){if(s)return'<td class="is-empty"></td>';var a=[];return r&&a.push("is-disabled"),o&&a.push("is-today"),n&&a.push("is-selected"),'<td data-day="'+t+'" class="'+a.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+i+'" data-pika-month="'+e+'" data-pika-day="'+t+'">'+t+"</button></td>"},k=function(t,e,i){var n=new Date(i,0,1),o=Math.ceil(((new Date(i,e,t)-n)/864e5+n.getDay()+1)/7);return'<td class="pika-week">'+o+"</td>"},S=function(t,e){return"<tr>"+(e?t.reverse():t).join("")+"</tr>"},T=function(t){return"<tbody>"+t.join("")+"</tbody>"},P=function(t){var e,i=[];for(t.showWeekNumber&&i.push("<th></th>"),e=0;7>e;e++)i.push('<th scope="col"><abbr title="'+x(t,e)+'">'+x(t,e,!0)+"</abbr></th>");return"<thead>"+(t.isRTL?i.reverse():i).join("")+"</thead>"},E=function(t,e,i,n,o){var r,s,a,l,h,c=t._o,u=i===c.minYear,p=i===c.maxYear,f='<div class="pika-title">',m=!0,g=!0;for(a=[],r=0;12>r;r++)a.push('<option value="'+(i===o?r-e:12+r-e)+'"'+(r===n?" selected":"")+(u&&r<c.minMonth||p&&r>c.maxMonth?"disabled":"")+">"+c.i18n.months[r]+"</option>");for(l='<div class="pika-label">'+c.i18n.months[n]+'<select class="pika-select pika-select-month">'+a.join("")+"</select></div>",d(c.yearRange)?(r=c.yearRange[0],s=c.yearRange[1]+1):(r=i-c.yearRange,s=1+i+c.yearRange),a=[];s>r&&r<=c.maxYear;r++)r>=c.minYear&&a.push('<option value="'+r+'"'+(r===i?" selected":"")+">"+r+"</option>");return h='<div class="pika-label">'+i+c.yearSuffix+'<select class="pika-select pika-select-year">'+a.join("")+"</select></div>",f+=c.showMonthAfterYear?h+l:l+h,u&&(0===n||c.minMonth>=n)&&(m=!1),p&&(11===n||c.maxMonth<=n)&&(g=!1),0===e&&(f+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(f+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),f+="</div>"},D=function(t,e){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+P(t)+T(e)+"</table>"},L=function(s){var a=this,l=a.config(s);a._onMouseDown=function(t){if(a._v){t=t||window.event;var e=t.target||t.srcElement;if(e){if(!h(e,"is-disabled")){if(h(e,"pika-button")&&!h(e,"is-empty"))return a.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),void(l.bound&&o(function(){a.hide(),l.field&&l.field.blur()},100));h(e,"pika-prev")?a.prevMonth():h(e,"pika-next")&&a.nextMonth()}if(h(e,"pika-select"))a._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},a._onChange=function(t){t=t||window.event;var e=t.target||t.srcElement;e&&(h(e,"pika-select-month")?a.gotoMonth(e.value):h(e,"pika-select-year")&&a.gotoYear(e.value))},a._onInputChange=function(i){var n;i.firedBy!==a&&(e?(n=t(l.field.value,l.format),n=n&&n.isValid()?n.toDate():null):n=new Date(Date.parse(l.field.value)),a.setDate(p(n)?n:null),a._v||a.show())},a._onInputFocus=function(){a.show()},a._onInputClick=function(){a.show()},a._onInputBlur=function(){var t=n.activeElement;do if(h(t,"pika-single"))return;while(t=t.parentNode);a._c||(a._b=o(function(){a.hide()},50)),a._c=!1},a._onClick=function(t){t=t||window.event;var e=t.target||t.srcElement,n=e;if(e){!i&&h(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),r(e,"change",a._onChange)));do if(h(n,"pika-single")||n===l.trigger)return;while(n=n.parentNode);a._v&&e!==l.trigger&&n!==l.trigger&&a.hide()}},a.el=n.createElement("div"),a.el.className="pika-single"+(l.isRTL?" is-rtl":""),r(a.el,"mousedown",a._onMouseDown,!0),r(a.el,"change",a._onChange),l.field&&(l.container?l.container.appendChild(a.el):l.bound?n.body.appendChild(a.el):l.field.parentNode.insertBefore(a.el,l.field.nextSibling),r(l.field,"change",a._onInputChange),l.defaultDate||(l.defaultDate=e&&l.field.value?t(l.field.value,l.format).toDate():new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var c=l.defaultDate;p(c)?l.setDefaultDate?a.setDate(c,!0):a.gotoDate(c):a.gotoDate(new Date),l.bound?(this.hide(),a.el.className+=" is-bound",r(l.trigger,"click",a._onInputClick),r(l.trigger,"focus",a._onInputFocus),r(l.trigger,"blur",a._onInputBlur)):this.show()};return L.prototype={config:function(t){this._o||(this._o=b({},w,!0));var e=b(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var i=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=i>4?4:i,p(e.minDate)||(e.minDate=!1),p(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&(v(e.minDate),e.minYear=e.minDate.getFullYear(),e.minMonth=e.minDate.getMonth()),e.maxDate&&(v(e.maxDate),e.maxYear=e.maxDate.getFullYear(),e.maxMonth=e.maxDate.getMonth()),d(e.yearRange)){var n=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||n,e.yearRange[1]=parseInt(e.yearRange[1],10)||n}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||w.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(i){return p(this._d)?e?t(this._d).format(i||this._o.format):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(i,n){e&&t.isMoment(i)&&this.setDate(i.toDate(),n)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),p(t)){var i=this._o.minDate,n=this._o.maxDate;p(i)&&i>t?t=i:p(n)&&t>n&&(t=n),this._d=new Date(t.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(t){var e=!0;if(p(t)){if(this.calendars){var i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=t.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),e=o<i.getTime()||n.getTime()<o}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=_(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=_({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){this._o.minDate=t},setMaxDate:function(t){this._o.maxDate=t},draw:function(t){if(this._v||t){var e=this._o,i=e.minYear,n=e.maxYear,r=e.minMonth,s=e.maxMonth,a="";this._y<=i&&(this._y=i,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=n&&(this._y=n,!isNaN(s)&&this._m>s&&(this._m=s));for(var l=0;l<e.numberOfMonths;l++)a+='<div class="pika-lendar">'+E(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year)+this.render(this.calendars[l].year,this.calendars[l].month)+"</div>";if(this.el.innerHTML=a,e.bound&&"hidden"!==e.field.type&&o(function(){e.trigger.focus()},1),"function"==typeof this._o.onDraw){var h=this;o(function(){h._o.onDraw.call(h)},0)}}},adjustPosition:function(){if(!this._o.container){var t,e,i,o=this._o.trigger,r=o,s=this.el.offsetWidth,a=this.el.offsetHeight,l=window.innerWidth||n.documentElement.clientWidth,h=window.innerHeight||n.documentElement.clientHeight,c=window.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop;if("function"==typeof o.getBoundingClientRect)i=o.getBoundingClientRect(),t=i.left+window.pageXOffset,e=i.bottom+window.pageYOffset;else for(t=r.offsetLeft,e=r.offsetTop+r.offsetHeight;r=r.offsetParent;)t+=r.offsetLeft,e+=r.offsetTop;(this._o.reposition&&t+s>l||this._o.position.indexOf("right")>-1&&t-s+o.offsetWidth>0)&&(t=t-s+o.offsetWidth),(this._o.reposition&&e+a>h+c||this._o.position.indexOf("top")>-1&&e-a-o.offsetHeight>0)&&(e=e-a-o.offsetHeight),this.el.style.cssText=["position: absolute","left: "+t+"px","top: "+e+"px"].join(";")}},render:function(t,e){var i=this._o,n=new Date,o=g(t,e),r=new Date(t,e,1).getDay(),s=[],a=[];v(n),i.firstDay>0&&(r-=i.firstDay,0>r&&(r+=7));for(var l=o+r,h=l;h>7;)h-=7;l+=7-h;for(var c=0,u=0;l>c;c++){var d=new Date(t,e,1+(c-r)),m=p(this._d)?y(d,this._d):!1,b=y(d,n),_=r>c||c>=o+r,w=i.minDate&&d<i.minDate||i.maxDate&&d>i.maxDate||i.disableWeekends&&f(d)||i.disableDayFn&&i.disableDayFn(d);a.push(C(1+(c-r),e,t,m,b,w,_)),7===++u&&(i.showWeekNumber&&a.unshift(k(c-r,e,t)),s.push(S(a,i.isRTL)),a=[],u=0)}return D(i,s)},isVisible:function(){return this._v},show:function(){this._v||(u(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(r(n,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;t!==!1&&(this._o.bound&&s(n,"click",this._onClick),this.el.style.cssText="",c(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},L}),/*! jQuery UI - v1.11.4 - 2015-05-12
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, button.js, datepicker.js, slider.js, effect.js, effect-bounce.js, effect-drop.js, effect-fade.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var o,r,s,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap='#"+r+"']")[0],!!s&&i(s)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}function n(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function o(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=r(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",s)}function s(){t.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")?!1:o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,r){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?s["inner"+i].call(this):this.each(function(){t(this).css(r,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(r,n(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o,r=t.ui[e].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}};/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var l=0,h=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=t._data(o,"events"),n&&n.remove&&t(o).triggerHandler("remove")}catch(s){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,r,s,a,l={},h=e.split(".")[0];return e=e.split(".")[1],o=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[h]=t[h]||{},r=t[h][e],s=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}()):void(l[e]=n)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},l,{constructor:s,namespace:h,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,n,o=h.call(arguments,1),r=0,s=o.length;s>r;r++)for(i in o[r])n=o[r][i],o[r].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,s=h.call(arguments,1),a=this;return r?this.each(function(){var i,r=t.data(this,n);return"instance"===o?(a=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,s),i!==r&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,s){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+r.eventNamespace,c=l[2];c?o.delegate(c,h,a):i.bind(h,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}});var c=(t.widget,!1);t(document).mouseup(function(){c=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),c=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
!function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,r,s=Math.max,a=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return t("body").append(n),e=r.offsetWidth,n.css("overflow","scroll"),i=r.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),o=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,r="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=t.extend({},o);var p,m,g,v,y,b,_=t(o.of),w=t.position.getWithinInfo(o.within),x=t.position.getScrollInfo(w),C=(o.collision||"flip").split(" "),k={};return b=n(_),_[0].preventDefault&&(o.at="left top"),m=b.width,g=b.height,v=b.offset,y=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=h.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=h.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",t=u.exec(i[0]),e=u.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],o[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===o.at[0]?y.left+=m:"center"===o.at[0]&&(y.left+=m/2),"bottom"===o.at[1]?y.top+=g:"center"===o.at[1]&&(y.top+=g/2),p=e(k.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var n,h,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),S=u+f+i(this,"marginRight")+x.width,T=d+b+i(this,"marginBottom")+x.height,P=t.extend({},y),E=e(k.my,c.outerWidth(),c.outerHeight());"right"===o.my[0]?P.left-=u:"center"===o.my[0]&&(P.left-=u/2),"bottom"===o.my[1]?P.top-=d:"center"===o.my[1]&&(P.top-=d/2),P.left+=E[0],P.top+=E[1],r||(P.left=l(P.left),P.top=l(P.top)),n={marginLeft:f,marginTop:b},t.each(["left","top"],function(e,i){t.ui.position[C[e]]&&t.ui.position[C[e]][i](P,{targetWidth:m,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:S,collisionHeight:T,offset:[p[0]+E[0],p[1]+E[1]],my:o.my,at:o.at,within:w,elem:c})}),o.using&&(h=function(t){var e=v.left-P.left,i=e+m-u,n=v.top-P.top,r=n+g-d,l={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:c,left:P.left,top:P.top,width:u,height:d},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};u>m&&a(e+i)<m&&(l.horizontal="center"),d>g&&a(n+r)<g&&(l.vertical="middle"),l.important=s(a(e),a(i))>s(a(n),a(r))?"horizontal":"vertical",o.using.call(this,t,l)}),c.offset(t.extend(P,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,h=a+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&0>=h?(i=t.left+l+e.collisionWidth-r-o,t.left+=l-i):t.left=h>0&&0>=l?o:l>h?o+r-e.collisionWidth:o:l>0?t.left+=l:h>0?t.left-=h:t.left=s(t.left-a,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,h=a+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&0>=h?(i=t.top+l+e.collisionHeight-r-o,t.top+=l-i):t.top=h>0&&0>=l?o:l>h?o+r-e.collisionHeight:o:l>0?t.top+=l:h>0?t.top-=h:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-s-r,(0>i||i<a(c))&&(t.left+=d+p+f)):u>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||a(n)<u)&&(t.left+=d+p+f))},top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(n=t.top+p+f+m+e.collisionHeight-s-r,(0>n||n<a(c))&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,(i>0||a(i)<u)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(l),i=a||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,r=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}();t.ui.position;/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(n){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),o=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),n=i[0],void(n&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,h=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var o=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var o=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,i,n){t.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",e),n.dropped=r.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(e),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var o=t("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,i,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,i,n){var o=n.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var o,r,s,a,l,h,c,u,d,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)l=n.snapElements[d].left-n.margins.left,h=l+n.snapElements[d].width,c=n.snapElements[d].top-n.margins.top,u=c+n.snapElements[d].height,l-m>v||g>h+m||c-m>b||y>u+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(c-b)<=m,r=Math.abs(u-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(h-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(c-y)<=m,r=Math.abs(u-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(h-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=o||r||s||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var o,r=n.options,s=t.makeArray(t(r.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,i,n){var o=n.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}});t.ui.draggable;/*!
 * jQuery UI Droppable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
t.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,o){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=s+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,d=c+i.proportions().height;switch(n){case"fit":return r>=h&&u>=a&&s>=c&&d>=l;case"intersect":return h<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&c<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(o.pageY,c,i.proportions().height)&&t(o.pageX,h,i.proportions().width);case"touch":return(s>=c&&d>=s||l>=c&&d>=l||c>s&&l>d)&&(r>=h&&u>=r||a>=h&&u>=a||h>r&&a>u);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=t.ui.intersect(e,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o}),r.length&&(n=t(r[0]).droppable("instance"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}};t.ui.droppable;/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[n]>0?!0:(e[n]=1,o=e[n]>0,e[n]=0,o)},_create:function(){var e,i,n,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),r="ui-resizable-"+n,o=t("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(e){var i,n,o,r;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,n,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=t(r.containment).scrollLeft()||0,n+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),s.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,o=this.originalMousePosition,r=this.axis,s=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),l?(i=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,n,o,r,s,a,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,r=n?0:c.sizeDiff.width,s={width:c.helper.width()-r,height:c.helper.height()-o},a=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(s,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),s&&c&&(t.top=l-e.minHeight),o&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseInt(n[e],10)||0,i[e]+=parseInt(o[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,o,r,s,a,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:r,a=l._hasScroll(d)?d.scrollHeight:o,l.parentData={element:d,left:n.left,top:n.top,width:s,height:a}))},resize:function(e){var i,n,o,r,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,h=s.position,c=s._aspectRatio||e.shiftKey,u={top:0,left:0},d=s.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),c&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),h.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,c&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,c&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,h=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var n=t(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};t(o.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},r=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,c=l[1]||1,u=Math.round((o.width-r.width)/h)*h,d=Math.round((o.height-r.height)/c)*c,p=r.width+u,f=r.height+d,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,y=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=h),y&&(f+=c),m&&(p-=h),g&&(f-=c),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=s.top-d):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=s.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=s.top-d):(f=c-e.height,i.size.height=f,i.position.top=s.top+r.height-f),p-h>0?(i.size.width=p,i.position.left=s.left-u):(p=h-e.width,i.size.width=p,i.position.left=s.left+r.width-p))}});var u,d=(t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,o=t.data(this,"selectable-item");return o?(n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?h=!(i.left>a||i.right<r||i.top>l||i.bottom<s):"fit"===o.tolerance&&(h=i.left>r&&i.right<a&&i.top>s&&i.bottom<l),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(n=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),n&&(!this.options.handle||i||(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n+h>a&&l>n+h,d="y"===this.options.axis||e+c>r&&s>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return n?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var n,o,r,s,a=[],l=[],h=this._connectWith();if(h&&e)for(n=h.length-1;n>=0;n--)for(r=t(h[n],this.document[0]),o=r.length-1;o>=0;o--)s=t.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);
return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(o=t(d[i],this.document[0]),n=o.length-1;n>=0;n--)r=t.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(u.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(s=u[i][1],a=u[i][0],n=0,h=a.length;h>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===n?e._createTrPlaceholder(e.currentItem,o):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,o,r,s,a,l,h,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,c=d.floating||this._isFloating(this.currentItem),s=c?"left":"top",a=c?"width":"height",u=c?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],h=!1,e[u]-l>this.items[n][a]/2&&(h=!0),Math.abs(e[u]-l)<o&&(o=Math.abs(e[u]-l),r=this.items[n],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<o.length;n++)o[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,o=this.headers.index(e.target),r=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),r.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),o=n.uniqueId().attr("id");e.attr("aria-controls",o),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=o.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,o=t(e.currentTarget),r=o[0]===n[0],s=r&&i.collapsible,a=s?t():o.next(),l=n.next(),h={oldHeader:n,oldPanel:l,newHeader:s?t():o,newPanel:a};e.preventDefault(),r&&!i.collapsible||this._trigger("beforeActivate",e,h)===!1||(i.active=s?!1:this.headers.index(o),this.active=r?t():o,this._toggle(h),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),r||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,o,r,s=this,a=0,l=t.css("box-sizing"),h=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=h&&c.down||c,d=function(){s._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||c.easing,r=r||u.duration||c.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==s.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),"ui-button ui-widget ui-state-default ui-corner-all"),p="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},m=function(e){var i=e.name,n=e.form,o=t([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?t(n).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),o};t.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,n="checkbox"===this.type||"radio"===this.type,o=n?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(d).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===u&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||t(this).removeClass(o)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),n&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];m(n).not(n).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(t(this).addClass("ui-state-active"),u=this,void e.document.one("mouseup",function(){u=null}))}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return i.disabled?!1:void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(d+" ui-state-active "+p).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?m(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(p),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}}),t.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});t.ui.button;/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
t.extend(t.ui,{datepicker:{version:"1.11.4"}});var g;t.extend(o.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,o,r;n=e.nodeName.toLowerCase(),o="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),o),r.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,r):o&&this._inlineDatepicker(e,r)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?r(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,o,r,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[a?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(o=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:o,title:o}):o)),e[a?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(i=0,n=0,o=0;o<t.length;o++)t[o].length>i&&(i=t[o].length,n=o);return n},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,r){var s,l,h,c,u,d=this._dialogInst;return d||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty(),g===o&&(g=null))},_enableDatepicker:function(e){var i,n,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var o,r,s,l,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(o=i||{},"string"==typeof i&&(o={},o[i]=n),void(h&&(this._curInst===h&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),a(h.settings,o),null!==s&&void 0!==o.dateFormat&&void 0===o.minDate&&(h.settings.minDate=this._formatDate(h,s)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,r),this._updateAlternate(h),this._updateDatepicker(h))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,o,r=t.datepicker._getInst(e.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),o[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,o[0]),i=t.datepicker._get(r,"onSelect"),i?(n=t.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,o=t.datepicker._getInst(e.target);return t.datepicker._get(o,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(o){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,o,r,s,l,h,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),o=t.datepicker._get(i,"beforeShow"),r=o?o.apply(e,[e,i]):{},r!==!1&&(a(i.settings,r),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,s),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",n(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),c):i.dpDiv[h||"show"](h?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,g=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),o=n[1],r=17,a=e.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&s.apply(a.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var o=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?o-s:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+r>h&&h>r?Math.abs(r+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),o=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,o,r,s=this._curInst;!s||e&&s!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),o=function(){t.datepicker._tidyDialog(s)},t.effects&&(t.effects.effect[i]||t.effects[i])?s.dpDiv.hide(i,t.datepicker._get(s,"showOptions"),n,o):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,r=this._get(s,"onClose"),r&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var o=t(e),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,i+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(e){var i,n=t(e),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var o=t(e),r=this._getInst(o[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(e,i,n,o){var r,s=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",o).html(),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,o=t(e),r=this._getInst(o[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),n=this._get(r,"onSelect"),n?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,o,r=this._get(e,"altField");r&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e)),t(r).each(function(){t(this).val(o)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var o,r,s,a,l=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(t){var i=o+1<e.length&&e.charAt(o+1)===t;return i&&o++,i},w=function(t){var e=_(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o="y"===t?n:1,r=new RegExp("^\\d{"+o+","+n+"}"),s=i.substring(l).match(r);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},x=function(e,n,o){var r=-1,s=t.map(_(e)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=e[0],l+=n.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(b)"'"!==e.charAt(o)||_("'")?C():b=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":x("D",u,d);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":a=new Date(w("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":_("'")?C():b=!0;break;default:C()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),y>-1)for(g=1,v=y;;){if(r=this._getDaysInMonth(m,g-1),r>=v)break;g++,v-=r}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},c=function(t,e,i,n){return l(t)?n[e]:i[e]},u="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),o,r);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),s,a);break;case"y":u+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){var e,i="",n=!1,o=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||o("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(i,n,s)||o}catch(a){n=e?"":n}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=n?r.getDate():0,t.currentMonth=n?r.getMonth():0,t.currentYear=n?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var o=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=o.getFullYear(),s=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":a+=parseInt(h[1],10);break;case"w":case"W":a+=7*parseInt(h[1],10);break;case"m":case"M":s+=parseInt(h[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(h[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(r,s))}h=l.exec(i)}return new Date(r,s,a)},s=null==i||""===i?n:"string"==typeof i?r(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return s=s&&"Invalid Date"===s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,y,b,_,w,x,C,k,S,T,P,E,D,L,M,A,R,O,I,N,j,H,z,B=new Date,F=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),U=this._get(t,"isRTL"),W=this._get(t,"showButtonPanel"),$=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),q=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),Y=this._get(t,"stepMonths"),X=1!==q[0]||1!==q[1],Z=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),K=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-V,te=t.drawYear;if(0>J&&(J+=12,te--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-q[0]*q[1]+1,Q.getDate())),e=K&&K>e?K:e;this._daylightSavingAdjust(new Date(te,J,1))>e;)J--,0>J&&(J=11,te--);for(t.drawMonth=J,t.drawYear=te,i=this._get(t,"prevText"),i=G?this.formatDate(i,this._daylightSavingAdjust(new Date(te,J-Y,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,te,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>",o=this._get(t,"nextText"),o=G?this.formatDate(o,this._daylightSavingAdjust(new Date(te,J+Y,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,te,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+o+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?Z:F,s=G?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(U?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),_="",x=0;x<q[0];x++){for(C="",this.maxRows=4,k=0;k<q[1];k++){if(S=this._daylightSavingAdjust(new Date(te,J,t.selectedDay)),T=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",q[1]>1)switch(k){case 0:P+=" ui-datepicker-group-first",T=" ui-corner-"+(U?"right":"left");break;case q[1]-1:P+=" ui-datepicker-group-last",T=" ui-corner-"+(U?"left":"right");break;default:P+=" ui-datepicker-group-middle",T=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?U?r:n:"")+(/all|right/.test(T)&&0===x?U?n:r:"")+this._generateMonthYearHeader(t,J,te,K,Q,x>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)D=(w+c)%7,E+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[D]+"'>"+p[D]+"</span></th>";for(P+=E+"</tr></thead><tbody>",L=this._getDaysInMonth(te,J),te===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,L)),M=(this._getFirstDayOfMonth(te,J)-c+7)%7,A=Math.ceil((M+L)/7),R=X&&this.maxRows>A?this.maxRows:A,this.maxRows=R,O=this._daylightSavingAdjust(new Date(te,J,1-M)),I=0;R>I;I++){for(P+="<tr>",N=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",w=0;7>w;w++)j=g?g.apply(t.input?t.input[0]:null,[O]):[!0,""],H=O.getMonth()!==J,z=H&&!y||!j[0]||K&&K>O||Q&&O>Q,N+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(H?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===O.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(H&&!v?"":" "+j[1]+(O.getTime()===Z.getTime()?" "+this._currentClass:"")+(O.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(H&&!v||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(H&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===F.getTime()?" ui-state-highlight":"")+(O.getTime()===Z.getTime()?" ui-state-active":"")+(H?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);P+=N+"</tr>"}J++,J>11&&(J=0,te++),P+="</tbody></table>"+(X?"</div>"+(q[0]>0&&k===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=P}_+=C}return _+=h,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,i,n,o,r,s,a){var l,h,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(r||!g)_+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=n&&n.getFullYear()===i,h=o&&o.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!h||c<=o.getMonth())&&(_+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");_+="</select>"}if(y||(b+=_+(!r&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),o=t.drawMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&i>e?i:e;return n&&o>n?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,n+(0>e?e:o[0]*o[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)
}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new o,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4";var v=(t.datepicker,t.widget("ui.slider",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",s=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;i>e;e++)s.push(r);this.handles=o.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,r,s,a,l,h,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-c.values(e));(o>i||o===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(o=i,r=t(this),s=e)}),a=this._start(e,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-r.width()/2,top:e.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,o,r;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(o=this.values(),o[e]=i,r=this._trigger("slide",t,{handle:this.handles[e],value:i,values:o}),n=this.values(e?0:1),r!==!1&&this.values(e,i))):i!==this.value()&&(r=this._trigger("slide",t,{handle:this.handles[e],value:i}),r!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,o=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,o=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!i),this._super(e,i),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.floor(+(t-e).toFixed(this._precision())/i)*i;t=n+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,n,o,r,s=this.options.range,a=this.options,l=this,h=this._animateOff?!1:a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var i,n,o,r,s=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,s),i===!1))return}switch(r=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(s):this.value(),e.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-r)}this._slide(e,s,o)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}}),"ui-effects-"),y=t;t.effects={effect:{}},/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){function i(t,e,i){var n=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=h(),n=i._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=i[l](a),i[c[l].cache]=r[c[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,r.transparent),i):r[e]}function o(t,e,i){return i=(i+1)%1,1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(o,s,a,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=e);var u=this,d=t.type(o),p=this._rgba=[];return s!==e&&(o=[o,s,a,l],d="array"),"string"===d?this.parse(n(o)||r._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(o[e.idx],e)}),this):"object"===d?(o instanceof h?f(c,function(t,e){o[e.cache]&&(u[e.cache]=o[e.cache].slice())}):f(c,function(e,n){var r=n.cache;f(n.props,function(t,e){if(!u[r]&&n.to){if("alpha"===t||null==o[t])return;u[r]=n.to(u._rgba)}u[r][e.idx]=i(o[t],e,!0)}),u[r]&&t.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,n.from&&(u._rgba=n.from(u[r])))}),this):void 0},is:function(t){var e=h(t),i=!0,n=this;return f(c,function(t,o){var r,s=e[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,e){return null!=s[e.idx]?i=s[e.idx]===r[e.idx]:void 0})),i}),i},_space:function(){var t=[],e=this;return f(c,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=h(t),o=n._space(),r=c[o],s=0===this.alpha()?h("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],h=n[r],c=u[o.type]||{};null!==h&&(null===s?l[r]=h:(c.mod&&(h-s>c.mod/2?s+=c.mod:s-h>c.mod/2&&(s-=c.mod)),l[r]=i((h-s)*e+s,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=h(e)._rgba;return h(t.map(i,function(t,e){return(1-n)*o[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),h=a-l,c=a+l,u=.5*c;return e=l===a?0:n===a?60*(o-r)/h+360:o===a?60*(r-n)/h+120:60*(n-o)/h+240,i=0===h?0:.5>=u?h/c:h/(2-c),[Math.round(e)%360,i,u,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],r=t[3],s=.5>=n?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(c,function(n,o){var r=o.props,s=o.cache,l=o.to,c=o.from;h.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===e)return this[s].slice();var o,a=t.type(n),u="array"===a||"object"===a?n:arguments,d=this[s].slice();return f(r,function(t,e){var n=u["object"===a?t:e.idx];null==n&&(n=d[e.idx]),d[e.idx]=i(n,e)}),c?(o=h(c(d)),o[s]=d,o):h(d)},f(r,function(e,i){h.fn[e]||(h.fn[e]=function(o){var r,s=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":n,h=this[l](),c=h[i.idx];return"undefined"===s?c:("function"===s&&(o=o.call(this,c),s=t.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o),r&&(o=c+parseFloat(r[2])*("+"===r[1]?1:-1))),h[i.idx]=o,this[l](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=n(o)))){if(o=h(r||o),!d.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[i]=o}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(y),function(){function e(e){var i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(r[t.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function i(e,i){var n,r,s={};for(n in i)r=i[n],e[n]!==r&&(o[n]||(t.fx.step[n]||!isNaN(parseFloat(r)))&&(s[n]=r));return s}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(y.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(o,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",h=l.children?s.find("*").addBack():s;h=h.map(function(){var i=t(this);return{el:i,start:e(this)}}),r=function(){t.each(n,function(t,e){o[e]&&s[e+"Class"](o[e])})},r(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(i,n,o,r){return n?t.effects.animateClass.call(this,{add:i},n,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?t.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,o,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,r)}})}(),function(){function e(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),t.isFunction(n)&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function i(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.11.4",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data(v+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;n<e.length;n++)null!==e[n]&&(i=t.data(v+e[n]),void 0===i&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,o){return o=o||{},t.each(i,function(t,i){var r=e.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(r)&&r.call(o[0]),t.isFunction(e)&&e()}var o=t(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=e.apply(this,arguments),o=n.mode,r=n.queue,s=t.effects.effect[n.effect];return t.fx.off||!s?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):r===!1?this.each(i):this.queue(r||"fx",i)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();t.effects,t.effects.effect.bounce=function(e,i){var n,o,r,s=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"effect"),h="hide"===l,c="show"===l,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||h?1:0),m=e.duration/f,g=e.easing,v="up"===u||"down"===u?"top":"left",y="up"===u||"left"===u,b=s.queue(),_=b.length;for((c||h)&&a.push("opacity"),t.effects.save(s,a),s.show(),t.effects.createWrapper(s),d||(d=s["top"===v?"outerHeight":"outerWidth"]()/3),c&&(r={opacity:1},r[v]=0,s.css("opacity",0).css(v,y?2*-d:2*d).animate(r,m,g)),h&&(d/=Math.pow(2,p-1)),r={},r[v]=0,n=0;p>n;n++)o={},o[v]=(y?"-=":"+=")+d,s.animate(o,m,g).animate(r,m,g),d=h?2*d:d/2;h&&(o={opacity:0},o[v]=(y?"-=":"+=")+d,s.animate(o,m,g)),s.queue(function(){h&&s.hide(),t.effects.restore(s,a),t.effects.removeWrapper(s),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),s.dequeue()},t.effects.effect.drop=function(e,i){var n,o=t(this),r=["position","top","bottom","left","right","opacity","height","width"],s=t.effects.setMode(o,e.mode||"hide"),a="show"===s,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:a?1:0};t.effects.save(o,r),o.show(),t.effects.createWrapper(o),n=e.distance||o["top"===h?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(h,"pos"===c?-n:n),u[h]=(a?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,o.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}})},t.effects.effect.fade=function(e,i){var n=t(this),o=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}),/*
 * jQuery File Upload Plugin 5.42.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";function e(e){var i="dragover"===e;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var o=n.dataTransfer;o&&-1!==t.inArray("Files",o.types)&&this._trigger(e,t.Event(e,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(o.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,i){return e=this.messages[e]||e.toString(),i&&t.each(i,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(t){return t.serializeArray()},add:function(e,i){return e.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},_initProgressObject:function(e){var i={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,i):e._progress=i},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,i){if(e.lengthComputable){var n,o=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&o-i._time<i.progressInterval&&e.loaded!==e.total)return;i._time=o,n=Math.floor(e.loaded/e.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(o,n,i.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),i),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var i=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,i._onProgress(t,e)}),e.xhr=function(){return n})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var i,n=this,o=e.files[0],r=e.multipart||!t.support.xhrFileUpload,s="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r&&!e.blob&&this._isInstanceOf("File",o)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),r?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:s,value:e.blob}):t.each(e.files,function(n,o){i.push({name:"array"===t.type(e.paramName)&&e.paramName[n]||s,value:o})})):(n._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?i.append(s,e.blob,o.name):t.each(e.files,function(o,r){(n._isInstanceOf("File",r)||n._isInstanceOf("Blob",r))&&i.append("array"===t.type(e.paramName)&&e.paramName[o]||s,r,r.uploadName||r.name)})),e.data=i):(e.contentType=o.type||"application/octet-stream",e.data=e.blob||o),e.blob=null},_initIframeSettings:function(e){var i=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&i&&i!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var i=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",o=(e.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,i,n){var o=t.Deferred(),r=o.promise();return i=i||this.options.context||r,e===!0?o.resolveWith(i,n):e===!1&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(e,i){var n=this,o=function(e){return t.Deferred().resolveWith(n,e).promise()};i.process=function(e,r){return(e||r)&&(i._processQueue=this._processQueue=(this._processQueue||o([this])).pipe(function(){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():o(arguments)}).pipe(e,r)),this._processQueue||o([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)!==!1&&n._onSend(e,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(e,i){e.uploadedBytes=e.uploadedBytes||0;var n,o,r=this,s=e.files[0],a=s.size,l=e.uploadedBytes,h=e.maxChunkSize||a,c=this._blobSlice,u=t.Deferred(),d=u.promise();return this._isXHRUpload(e)&&c&&(l||a>h)&&!e.data?i?!0:l>=a?(s.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",s.error])):(o=function(){var i=t.extend({},e),d=i._progress.loaded;i.blob=c.call(s,l,l+h,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(r._trigger("chunksend",null,i)!==!1&&t.ajax(i)||r._getXHRPromise(!1,i.context)).done(function(n,s,h){l=r._getUploadedBytes(h)||l+i.chunkSize,d+i.chunkSize-i._progress.loaded&&r._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=h,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),a>l?o():u.resolveWith(i.context,[n,s,h])}).fail(function(t,e,n){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),u.rejectWith(i.context,[t,e,n])})},this._enhancePromise(d),d.abort=function(){return n.abort()},o(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,i,n,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=e,s.textStatus=o.textStatus=i,s.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(t,e,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=t,o.textStatus=n.textStatus=e,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(t,e,i,n){this._trigger("always",null,n)},_onSend:function(e,i){i.submit||this._addConvenienceMethods(e,i);var n,o,r,s,a=this,l=a._getAJAXSettings(i),h=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||a._trigger("send",t.Event("send",{delegatedEvent:e}),l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||t.ajax(l)).done(function(t,e,i){a._onDone(t,e,i,l)}).fail(function(t,e,i){a._onFail(t,e,i,l)}).always(function(t,e,i){if(a._onAlways(t,e,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=t.Deferred(),this._slots.push(r),s=r.pipe(h)):(this._sequence=this._sequence.pipe(h,h),s=this._sequence),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),h())},this._enhancePromise(s)):h()},_onAdd:function(e,i){var n,o,r,s,a=this,l=!0,h=t.extend({},this.options,i),c=i.files,u=c.length,d=h.limitMultiFileUploads,p=h.limitMultiFileUploadSize,f=h.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(h),v=0;if(!p||u&&void 0!==c[0].size||(p=void 0),(h.singleFileUploads||d||p)&&this._isXHRUpload(h))if(h.singleFileUploads||p||!d)if(!h.singleFileUploads&&p)for(r=[],n=[],s=0;u>s;s+=1)m+=c[s].size+f,(s+1===u||m+c[s+1].size+f>p||d&&s+1-v>=d)&&(r.push(c.slice(v,s+1)),o=g.slice(v,s+1),o.length||(o=g),n.push(o),v=s+1,m=0);else n=g;else for(r=[],n=[],s=0;u>s;s+=d)r.push(c.slice(s,s+d)),o=g.slice(s,s+d),o.length||(o=g),n.push(o);else r=[c],n=[g];return i.originalFiles=c,t.each(r||c,function(o,s){var h=t.extend({},i);return h.files=r?s:[s],h.paramName=n[o],a._initResponseObject(h),a._initProgressObject(h),a._addConvenienceMethods(e,h),l=a._trigger("add",t.Event("add",{delegatedEvent:e}),h)}),l},_replaceFileInput:function(e){var i=e.fileInput,n=i.clone(!0);e.fileInputClone=n,t("<form></form>").append(n)[0].reset(),i.after(n).detach(),t.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===i[0]?n[0]:e}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,i){var n,o=this,r=t.Deferred(),s=function(t){t&&!t.entry&&(t.entry=e),r.resolve([t])},a=function(t){o._handleFileTreeEntries(t,i+e.name+"/").done(function(t){r.resolve(t)}).fail(s)},l=function(){n.readEntries(function(t){t.length?(h=h.concat(t),l()):a(h)},s)},h=[];return i=i||"",e.isFile?e._file?(e._file.relativePath=i,r.resolve(e._file)):e.file(function(t){t.relativePath=i,r.resolve(t)},s):e.isDirectory?(n=e.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(e,i){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var i=e.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var i,n,o=e.prop("webkitEntries")||e.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(i=t.makeArray(e.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&t.each(i,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(n=e.prop("value"),!n)return t.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var i=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(o){n.files=o,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",t.Event("change",{delegatedEvent:e}),n)!==!1&&i._onAdd(e,n)})},_onPaste:function(e){var i=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(t.each(i,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&n.files.push(i)}),this._trigger("paste",t.Event("paste",{delegatedEvent:e}),n)!==!1&&this._onAdd(e,n))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=this,n=e.dataTransfer,o={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){o.files=n,i._trigger("drop",t.Event("drop",{delegatedEvent:e}),o)!==!1&&i._onAdd(e,o)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,i){var n=-1!==t.inArray(e,this._specialOptions);n&&this._destroyEventHandlers(),this._super(e,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),i=e.pop();return e.shift(),new RegExp(e.join("/"),i)},_isRegExpOption:function(e,i){return"url"!==e&&"string"===t.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var e=this,i=this.options,n=t(this.element[0].cloneNode(!1));t.each(n.data(),function(t,o){var r="data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n.attr(r)&&(e._isRegExpOption(t,o)&&(o=e._getRegExp(o)),i[t]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,n,o=this,r=t.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(e.fileInput).always(function(t){if(!n){if(!t.length)return void r.reject();e.files=t,i=o._onSend(null,e),i.then(function(t,e,i){r.resolve(t,e,i)},function(t,e,i){r.reject(t,e,i)})}}),this._enhancePromise(s)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],t):t(window.jQuery)}(function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var o=t(this);n.process(function(){return o.fileupload("process",n)}),e.call(this,i,n)}},processActions:{},_processFile:function(e,i){var n=this,o=t.Deferred().resolveWith(n,[e]),r=o.promise();return this._trigger("process",null,e),t.each(e.processQueue,function(e,o){var s=function(e){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():n.processActions[o.action].call(n,e,o)};r=r.pipe(s,o.always&&s)}),r.done(function(){n._trigger("processdone",null,e),n._trigger("processalways",null,e)}).fail(function(){n._trigger("processfail",null,e),n._trigger("processalways",null,e)}),r},_transformProcessQueue:function(e){var i=[];t.each(e.processQueue,function(){var n={},o=this.action,r=this.prefix===!0?o:this.prefix;t.each(this,function(i,o){n[i]="string"===t.type(o)&&"@"===o.charAt(0)?e[o.slice(1)||(r?r+i.charAt(0).toUpperCase()+i.slice(1):i)]:o}),i.push(n)}),e.processQueue=i},processing:function(){return this._processing},process:function(e){var i=this,n=t.extend({},this.options,e);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),t.each(e.files,function(o){var r=o?t.extend({},n):n,s=function(){return e.errorThrown?t.Deferred().rejectWith(i,[e]).promise():i._processFile(r,e)};r.index=o,i._processing+=1,i._processingQueue=i._processingQueue.pipe(s,s).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}),/*!
 * Amplify 1.1.2
 *
 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
function(t){{var e=[].slice,i={};t.amplify={publish:function(t){if("string"!=typeof t)throw new Error("You must provide a valid topic to publish.");var n,o,r,s,a=e.call(arguments,1),l=0;if(!i[t])return!0;for(n=i[t].slice(),r=n.length;r>l&&(o=n[l],s=o.callback.apply(o.context,a),s!==!1);l++);return s!==!1},subscribe:function(t,e,n,o){if("string"!=typeof t)throw new Error("You must provide a valid topic to create a subscription.");3===arguments.length&&"number"==typeof n&&(o=n,n=e,e=null),2===arguments.length&&(n=e,e=null),o=o||10;for(var r,s=0,a=t.split(/\s/),l=a.length;l>s;s++){t=a[s],r=!1,i[t]||(i[t]=[]);for(var h=i[t].length-1,c={callback:n,context:e,priority:o};h>=0;h--)if(i[t][h].priority<=o){i[t].splice(h+1,0,c),r=!0;break}r||i[t].unshift(c)}return n},unsubscribe:function(t,e,n){if("string"!=typeof t)throw new Error("You must provide a valid topic to remove a subscription.");if(2===arguments.length&&(n=e,e=null),i[t])for(var o=i[t].length,r=0;o>r;r++)i[t][r].callback===n&&(e&&i[t][r].context!==e||(i[t].splice(r,1),r--,o--))}}}}(this),function(t,e){function i(t,i){n.addType(t,function(r,s,a){var l,h,c,u,d=s,p=(new Date).getTime();if(!r){d={},u=[],c=0;try{for(r=i.length;r=i.key(c++);)o.test(r)&&(h=JSON.parse(i.getItem(r)),h.expires&&h.expires<=p?u.push(r):d[r.replace(o,"")]=h.data);for(;r=u.pop();)i.removeItem(r)}catch(f){}return d}if(r="__amplify__"+r,s===e){if(l=i.getItem(r),h=l?JSON.parse(l):{expires:-1},!(h.expires&&h.expires<=p))return h.data;i.removeItem(r)}else if(null===s)i.removeItem(r);else{h=JSON.stringify({data:s,expires:a.expires?p+a.expires:null});try{i.setItem(r,h)}catch(f){n[t]();try{i.setItem(r,h)}catch(f){throw n.error()}}}return d})}var n=t.store=function(t,e,i){var o=n.type;return i&&i.type&&i.type in n.types&&(o=i.type),n.types[o](t,e,i||{})};n.types={},n.type=null,n.addType=function(t,e){n.type||(n.type=t),n.types[t]=e,n[t]=function(e,i,o){return o=o||{},o.type=t,n(e,i,o)}},n.error=function(){return"amplify.store quota exceeded"};var o=/^__amplify__/;for(var r in{localStorage:1,sessionStorage:1})try{window[r].setItem("__amplify__","x"),window[r].removeItem("__amplify__"),i(r,window[r])}catch(s){}if(!n.types.localStorage&&window.globalStorage)try{i("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===n.type&&(n.type="globalStorage")}catch(s){}!function(){if(!n.types.localStorage){var t=document.createElement("div"),i="amplify";t.style.display="none",document.getElementsByTagName("head")[0].appendChild(t);try{t.addBehavior("#default#userdata"),t.load(i)}catch(o){return void t.parentNode.removeChild(t)}n.addType("userData",function(o,r,s){t.load(i);var a,l,h,c,u,d=r,p=(new Date).getTime();if(!o){for(d={},u=[],c=0;a=t.XMLDocument.documentElement.attributes[c++];)l=JSON.parse(a.value),l.expires&&l.expires<=p?u.push(a.name):d[a.name]=l.data;for(;o=u.pop();)t.removeAttribute(o);return t.save(i),d}if(o=o.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),o=o.replace(/^-/,"_-"),r===e){if(a=t.getAttribute(o),l=a?JSON.parse(a):{expires:-1},!(l.expires&&l.expires<=p))return l.data;t.removeAttribute(o)}else null===r?t.removeAttribute(o):(h=t.getAttribute(o),l=JSON.stringify({data:r,expires:s.expires?p+s.expires:null}),t.setAttribute(o,l));try{t.save(i)}catch(f){null===h?t.removeAttribute(o):t.setAttribute(o,h),n.userData();try{t.setAttribute(o,l),t.save(i)}catch(f){throw null===h?t.removeAttribute(o):t.setAttribute(o,h),n.error()}}return d})}}(),function(){function t(t){return t===e?e:JSON.parse(JSON.stringify(t))}var i={},o={};n.addType("memory",function(n,r,s){return n?r===e?t(i[n]):(o[n]&&(clearTimeout(o[n]),delete o[n]),null===r?(delete i[n],null):(i[n]=r,s.expires&&(o[n]=setTimeout(function(){delete i[n],delete o[n]},s.expires)),r)):t(i)})}()}(this.amplify=this.amplify||{}),function(t){"use strict";function e(){}function i(t){return"[object Function]"==={}.toString.call(t)}function n(t){var e=!1;return setTimeout(function(){e=!0},1),function(){var i=this,n=arguments;e?t.apply(i,n):setTimeout(function(){t.apply(i,n)},1)}}t.request=function(o,r,s){var a=o||{};"string"==typeof a&&(i(r)&&(s=r,r={}),a={resourceId:o,data:r||{},success:s});var l={abort:e},h=t.request.resources[a.resourceId],c=a.success||e,u=a.error||e;if(a.success=n(function(e,i){i=i||"success",t.publish("request.success",a,e,i),t.publish("request.complete",a,e,i),c(e,i)}),a.error=n(function(e,i){i=i||"error",t.publish("request.error",a,e,i),t.publish("request.complete",a,e,i),u(e,i)}),!h){if(!a.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+a.resourceId}return t.publish("request.before",a)?(t.request.resources[a.resourceId](a,l),l):void a.error(null,"abort")},t.request.types={},t.request.resources={},t.request.define=function(e,i,n){if("string"==typeof i){if(!(i in t.request.types))throw"amplify.request.define: unknown type: "+i;n.resourceId=e,t.request.resources[e]=t.request.types[i](n)}else t.request.resources[e]=i}}(amplify),function(t,e,i){"use strict";var n=["status","statusText","responseText","responseXML","readyState"],o=/\{([^\}]+)\}/g;t.request.types.ajax=function(o){return o=e.extend({type:"GET"},o),function(r,s){var a,l,h=(o.url,s.abort),c=e.extend(!0,{},o,{data:r.data}),u=!1,d={readyState:0,setRequestHeader:function(t,e){return a.setRequestHeader(t,e)},getAllResponseHeaders:function(){return a.getAllResponseHeaders()},getResponseHeader:function(t){return a.getResponseHeader(t)},overrideMimeType:function(t){return a.overrideMimeType(t)},abort:function(){u=!0;try{a.abort()}catch(t){}l(null,"abort")},success:function(t,e){r.success(t,e)},error:function(t,e){r.error(t,e)}};l=function(t,o){e.each(n,function(t,e){try{d[e]=a[e]}catch(i){}}),/OK$/.test(d.statusText)&&(d.statusText="success"),t===i&&(t=null),u&&(o="abort"),/timeout|error|abort/.test(o)?d.error(t,o):d.success(t,o),l=e.noop},t.publish("request.ajax.preprocess",o,r,c,d),e.extend(c,{isJSONP:function(){return/jsonp/gi.test(this.dataType)},cacheURL:function(){if(!this.isJSONP())return this.url;var t="callback";this.hasOwnProperty("jsonp")&&(this.jsonp!==!1?t=this.jsonp:this.hasOwnProperty("jsonpCallback")&&(t=this.jsonpCallback));var e=new RegExp("&?"+t+"=[^&]*&?","gi");return this.url.replace(e,"")},success:function(t,e){l(t,e)},error:function(t,e){l(null,e)},beforeSend:function(e,i){a=e,c=i;var n=o.beforeSend?o.beforeSend.call(this,d,c):!0;return n&&t.publish("request.before.ajax",o,r,c,d)}}),c.cache&&c.isJSONP()&&e.extend(c,{cache:!0}),e.ajax(c),s.abort=function(){d.abort(),h.call(this)}}},t.subscribe("request.ajax.preprocess",function(t,i,n){var r=[],s=n.data;"string"!=typeof s&&(s=e.extend(!0,{},t.data,s),n.url=n.url.replace(o,function(t,e){return e in s?(r.push(e),s[e]):void 0}),e.each(r,function(t,e){delete s[e]}),n.data=s)}),t.subscribe("request.ajax.preprocess",function(t,i,n){var o=n.data,r=t.dataMap;r&&"string"!=typeof o&&(e.isFunction(r)?n.data=r(o):(e.each(t.dataMap,function(t,e){t in o&&(o[e]=o[t],delete o[t])}),n.data=o))});var r=t.request.cache={_key:function(t,e,i){function n(t){var e,i,n=0,o=t.length;if(0===o)return n;for(e=0;o>e;e++)i=t.charCodeAt(e),n=(n<<5)-n+i,n|=0;return n}return"request-"+t+"-"+n(e+i).toString(16)},_default:function(){var t={};return function(e,i,n,o){var s=r._key(i.resourceId,n.cacheURL(),n.data),a=e.cache;if(s in t)return o.success(t[s]),!1;var l=o.success;o.success=function(e){t[s]=e,"number"==typeof a&&setTimeout(function(){delete t[s]},a),l.apply(this,arguments)}}}()};t.store&&(e.each(t.store.types,function(e){r[e]=function(i,n,o,s){var a=r._key(n.resourceId,o.cacheURL(),o.data),l=t.store[e](a);if(l)return o.success(l),!1;var h=s.success;s.success=function(n){t.store[e](a,n,{expires:i.cache.expires}),h.apply(this,arguments)}}}),r.persist=r[t.store.type]),t.subscribe("request.before.ajax",function(t){var e=t.cache;return e?(e=e.type||e,r[e in r?e:"_default"].apply(this,arguments)):void 0}),t.request.decoders={jsend:function(t,e,i,n,o){"success"===t.status?n(t.data):"fail"===t.status?o(t.data,"fail"):"error"===t.status?(delete t.status,o(t,"error")):o(null,"error")}},t.subscribe("request.before.ajax",function(i,n,o,r){function s(t,e){l(t,e)}function a(t,e){h(t,e)}var l=r.success,h=r.error,c=e.isFunction(i.decoder)?i.decoder:i.decoder in t.request.decoders?t.request.decoders[i.decoder]:t.request.decoders._default;c&&(r.success=function(t,e){c(t,e,r,s,a)},r.error=function(t,e){c(t,e,r,s,a)})})}(amplify,jQuery),/*! X-editable - v1.5.1 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,n=this.$form.find(".control-group"),o=this.$form.find(".editable-error-block");if(e===!1)n.removeClass(t.fn.editableform.errorGroupClass),o.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=(""+e).split("\n");for(var r=0;r<i.length;r++)i[r]=t("<div>").text(i[r]).html();e=i.join("<br>")}n.addClass(t.fn.editableform.errorGroupClass),o.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i=this.input.input2value(),n=this.validate(i);if("object"===t.type(n)&&void 0!==n.newValue){if(i=n.newValue,this.input.value2input(i),"string"==typeof n.msg)return this.error(n.msg),void this.showForm()}else if(n)return this.error(n),void this.showForm();if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var o=this.input.value2submit(i);this.isSaving=!0,t.when(this.save(o)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,void this.$div.triggerHandler("save",{newValue:i,submitValue:o,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,i):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,o=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n));return o?(this.showLoading(),i={name:this.options.name||"",value:e,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var n=arguments;return this.each(function(){var o=t(this),r=o.data("editableform"),s="object"==typeof i&&i;r||o.data("editableform",r=new e(this,s)),"string"==typeof i&&r[i].apply(r,Array.prototype.slice.call(n,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,n){var o,r,s={};if(!t.isArray(i)||!i.length)return s;for(var a=0;a<i.length;a++)o=i[a],e.hasOwnProperty(o)&&(s[o]=e[o]),n!==!0&&(r=o.toLowerCase(),e.hasOwnProperty(r)&&(s[o]=e[r]));return s},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,n){if(!i||null===e)return[];if("function"!=typeof n){var o=n||"value";n=function(t){return t[o]}}var r=t.isArray(e),s=[],a=this;return t.each(i,function(i,o){if(o.children)s=s.concat(a.itemsByValue(e,o.children,n));else if(r)t.grep(e,function(t){return t==(o&&"object"==typeof o?n(o):o)}).length&&s.push(o);else{var l=o&&"object"==typeof o?n(o):o;e==l&&s.push(o)}}),s},createInput:function(e){var i,n,o,r=e.type;return"date"===r&&("inline"===e.mode?t.fn.editabletypes.datefield?r="datefield":t.fn.editabletypes.dateuifield&&(r="dateuifield"):t.fn.editabletypes.date?r="date":t.fn.editabletypes.dateui&&(r="dateui"),"date"!==r||t.fn.editabletypes.date||(r="combodate")),"datetime"===r&&"inline"===e.mode&&(r="datetimefield"),"wysihtml5"!==r||t.fn.editabletypes[r]||(r="textarea"),"function"==typeof t.fn.editabletypes[r]?(i=t.fn.editabletypes[r],n=this.sliceObj(e,this.objectKeys(i.defaults)),o=new i(n)):(t.error("Unknown type: "+r),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<n.length;o++)if("string"==typeof e[n[o]+i])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var n,o=t(i.target),r=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,i.target)&&!o.is(document)){for(n=0;n<r.length;n++)if(o.is(r[n])||o.parents(r[n]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,n){if(n!==e&&!t(n).find(e).length){var o=t(n),r=o.data("editableContainer");r&&("cancel"===r.options.onblur?o.data("editableContainer").hide("onblur"):"submit"===r.options.onblur&&o.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(n){var o=arguments;return this.each(function(){var r=t(this),s="editableContainer",a=r.data(s),l="object"==typeof n&&n,h="inline"===l.mode?i:e;a||r.data(s,a=new h(this,l)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(o,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:e=!1}t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this)):(this.options[e]=i,"disabled"===e?i?this.disable():this.enable():("value"===e&&this.setValue(i),this.container&&this.container.option(e,i),void(this.input.option&&this.input.option(e,i))))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||this.options.display===!1,i=i||void 0!==e.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,o=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===o&&(o=""),n.css("background-color",o),n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,i,n){this.value=i?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(n)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var n={},o=arguments,r="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this),o=i.data(r);o&&(e=o.validate())&&(n[o.options.name]=e)}),n;case"getValue":return 2===arguments.length&&arguments[1]===!0?n=this.eq(0).data(r).value:this.each(function(){var e=t(this),i=e.data(r);i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var s=arguments[1]||{},a=this,l=this.editable("validate");if(t.isEmptyObject(l)){var h={};if(1===a.length){var c=a.data("editable"),u={name:c.options.name||"",value:c.input.value2submit(c.value),pk:"function"==typeof c.options.pk?c.options.pk.call(c.options.scope):c.options.pk};"function"==typeof c.options.params?u=c.options.params.call(c.options.scope,u):(c.options.params=t.fn.editableutils.tryParseJson(c.options.params,!0),t.extend(u,c.options.params)),h={url:c.options.url,data:u,type:"POST"},s.success=s.success||c.options.success,s.error=s.error||c.options.error}else{var d=this.editable("getValue");h={url:s.url,data:d,type:"POST"}}h.success="function"==typeof s.success?function(t){s.success.call(a,t,s)}:t.noop,h.error="function"==typeof s.error?function(){s.error.apply(a,arguments)}:t.noop,s.ajaxOptions&&t.extend(h,s.ajaxOptions),s.data&&t.extend(h.data,s.data),t.ajax(h)}else"function"==typeof s.error&&s.error.call(a,l);return this}return this.each(function(){var n=t(this),s=n.data(r),a="object"==typeof i&&i;return a&&a.selector?void(s=new e(this,a)):(s||n.data(r,s=new e(this,a)),void("string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,n){this.type=e,this.options=t.extend({},n,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,i,n,o){var r=t.Deferred(),s=function(){"function"==typeof n?n.call(i,e,this.sourceData,o):this.value2htmlFinal(e,i),r.resolve()};return null===e?s.call(this):this.onSourceReady(s,function(){r.resolve()}),r.promise()},onSourceReady:function(e,i){var n;if(t.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{n=t.fn.editableutils.tryParseJson(n,!1)}catch(o){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var r,s=n;if(t(document).data(s)||t(document).data(s,{}),r=t(document).data(s),r.loading===!1&&r.sourceData)return this.sourceData=r.sourceData,this.doPrepend(),void e.call(this);if(r.loading===!0)return r.callbacks.push(t.proxy(function(){this.sourceData=r.sourceData,this.doPrepend(),e.call(this)},this)),void r.err_callbacks.push(t.proxy(i,this));r.loading=!0,r.callbacks=[],r.err_callbacks=[]}var a=t.extend({url:n,type:"get",cache:!1,dataType:"json",success:t.proxy(function(n){r&&(r.loading=!1),this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(r&&(r.sourceData=this.sourceData,t.each(r.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),r&&t.each(r.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),r&&(r.loading=!1,t.each(r.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(a)}else this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var i,n,o,r,s=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){r=function(t,e){return n={value:t,text:e},i++>=2?!1:void 0};for(var a=0;a<e.length;a++)o=e[a],"object"==typeof o?(i=0,t.each(o,r),1===i?s.push(n):i>1&&(o.children&&(o.children=this.makeArray(o.children)),s.push(o))):s.push({value:o,text:o})}else t.each(e,function(t,e){s.push({value:t,text:e})});return s},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,e=this.$clear.is(":visible");t&&!e&&this.$clear.show(),!t&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(i,n){var o;if(t.isArray(n))for(var r=0;r<n.length;r++)o={},n[r].children?(o.label=n[r].text,i.append(e(t("<optgroup>",o),n[r].children))):(o.value=n[r].value,n[r].disabled&&(o.disabled=!0),i.append(t("<option>",o).text(n[r].text)));return i};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var n="",o=t.fn.editableutils.itemsByValue(e,this.sourceData);o.length&&(n=o[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(t("<span>").text(" "+this.sourceData[i].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,n=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),n=e.split(i)):n=t.isArray(e)?e:[e],n},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,n){var o=t(n);t.each(e,function(t,e){o.val()==e&&o.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,n){e.push(t(n).val())}),e},value2htmlFinal:function(e,i){var n=[],o=t.fn.editableutils.itemsByValue(e,this.sourceData),r=this.options.escape;o.length?(t.each(o,function(e,i){var o=r?t.fn.editableutils.escape(i.text):i.text;n.push(o)}),t(i).html(n.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()
}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;t.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.results||(i.select2.ajax.results=function(t){return{results:t}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var o=this.idFunc||"id";this.idFunc=function(t){return t[o]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var o,r="",s=this;this.options.select2.tags?o=i:this.sourceData&&(o=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(o)?(r=[],t.each(o,function(t,e){r.push(e&&"object"==typeof e?s.formatSelection(e):e)})):o&&(r=s.formatSelection(o)),r=t.isArray(r)?r.join(this.options.viewseparator):r,e.superclass.value2html.call(this,r,n)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.select2(this.options.select2),this.$input.val(e).trigger("change")),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var o=t(this.options.scope);if(!o.data("editable").isEmpty){var r={id:e,text:o.text()};this.$input.select2("data",r)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;i=i||this.getSeparator();var n,o,r;if(null===e||e.length<1)return null;for(n=e.split(i),o=0,r=n.length;r>o;o+=1)n[o]=t.trim(n[o]);return n},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||t.fn.select2.defaults.separator},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var i=0;i<e.length;i++)void 0!==e[i].value&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),/**
* Combodate - 1.0.5
* Dropdown date and time picker.
* Converts text input into dropdowns to pick day, month, year, hour, minute and second.
* Uses momentjs as datetime library http://momentjs.com.
* For i18n include corresponding file from https://github.com/timrwood/moment/tree/master/lang 
*
* Confusion at noon and midnight - see http://en.wikipedia.org/wiki/12-hour_clock#Confusion_at_noon_and_midnight
* In combodate: 
* 12:00 pm --> 12:00 (24-h format, midday)
* 12:00 am --> 00:00 (24-h format, midnight, start of day)
* 
* Differs from momentjs parse rules:
* 00:00 pm, 12:00 pm --> 12:00 (24-h format, day not change)
* 00:00 am, 12:00 am --> 00:00 (24-h format, day not change)
* 
* 
* Author: Vitaliy Potapov
* Project page: http://github.com/vitalets/combodate
* Copyright (c) 2012 Vitaliy Potapov. Released under MIT License.
**/
function(t){var e=function(e,i){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(e){this.$element.val(this.getValue()).change(),this.options.smartDays&&(t(e.target).is(".month")||t(e.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var n=new RegExp(i+"+"),o=i.length>1?i.substring(1,2):i;e=e.replace(n,"{"+o+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){i=i[0];var n=i.length>1?i.substring(1,2):i;e=e.replace("{"+n+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){for(var t in this.map){var e=this.$widget.find("."+t);this["$"+t]=e.length?e:null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var i="fill"+t.charAt(0).toUpperCase()+t.slice(1),n=this[i](),o=e.val();e.empty();for(var r=0;r<n.length;r++)e.append('<option value="'+n[r][0]+'">'+n[r][1]+"</option>");e.val(o)}},fillCommon:function(t){var e,i=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},fillDay:function(){var t,e,i=this.fillCommon("d"),n=-1!==this.options.template.indexOf("DD"),o=31;if(this.options.smartDays&&this.$month&&this.$year){var r=parseInt(this.$month.val(),10),s=parseInt(this.$year.val(),10);isNaN(r)||isNaN(s)||(o=moment([s,r]).daysInMonth())}for(e=1;o>=e;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.fillCommon("M"),n=-1!==this.options.template.indexOf("MMMM"),o=-1!==this.options.template.indexOf("MMM"),r=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=n?moment().date(1).month(e).format("MMMM"):o?moment().date(1).month(e).format("MMM"):r?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],n=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=n?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.fillCommon("y").concat(i)},fillHour:function(){var t,e,i=this.fillCommon("h"),n=-1!==this.options.template.indexOf("h"),o=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),r=n?1:0,s=n?12:23;for(e=r;s>=e;e++)t=o?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.fillCommon("m"),n=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.fillCommon("s"),n=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var i,n={},o=this,r=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return n[t]=o["$"+t]?parseInt(o["$"+t].val(),10):e,isNaN(n[t])?(r=!0,!1):void 0}}),r?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),e=void 0===e?this.options.format:e,null===e?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var n={};return e.children("option").each(function(e,o){var r,s=t(o).attr("value");""!==s&&(r=Math.abs(s-i),("undefined"==typeof n.distance||r<n.distance)&&(n={value:s,distance:r}))}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),o=this,r={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(r[t]=n[e[1]]())}),this.$ampm&&(r.hour>=12?(r.ampm="pm",r.hour>12&&(r.hour-=12)):(r.ampm="am",0===r.hour&&(r.hour=12))),t.each(r,function(t,e){o["$"+t]&&("minute"===t&&o.options.minuteStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),"second"===t&&o.options.secondStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),o["$"+t].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var n,o=Array.apply(null,arguments);return o.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,o):this.each(function(){var n=t(this),r=n.data("combodate"),s="object"==typeof i&&i;r||n.data("combodate",r=new e(this,s)),"string"==typeof i&&"function"==typeof r[i]&&r[i].apply(r,o)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var n=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||this.input.options.inputclass===!1,n="input-sm",o="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,o)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var r=this.$form.find(".editable-buttons"),s=i?[n]:this.input.options.inputclass.split(" "),a=0;a<s.length;a++)"input-lg"===s[a].toLowerCase()&&r.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,n=i.test(e);n&&(e=e.replace(i,"")||"top");var o=this.getPosition(),r=t[0].offsetWidth,s=t[0].offsetHeight;if(n){var a=this.$element.parent(),l=e,h=document.documentElement.scrollTop||document.body.scrollTop,c="body"==this.options.container?window.innerWidth:a.outerWidth(),u="body"==this.options.container?window.innerHeight:a.outerHeight(),d="body"==this.options.container?0:a.offset().left;e="bottom"==e&&o.top+o.height+s-h>u?"top":"top"==e&&o.top-h-s<0?"bottom":"right"==e&&o.right+r>c?"left":"left"==e&&o.left-r<d?"right":e,t.removeClass(l).addClass(e)}var p=this.getCalculatedOffset(e,o,r,s);this.applyPlacement(p,e)}).call(this.container())}})}(window.jQuery),/* =========================================================
 * bootstrap-datepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n,o=t(e).data(),r={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in o)i.test(a)&&(n=a.replace(s,function(t,e){return e.toLowerCase()}),r[n]=o[a]);return r}function n(e){var i={};if(c[e]||(e=e.split("-")[0],c[e])){var n=c[e];return t.each(h,function(t,e){e in n&&(i[e]=n[e])}),i}}var o=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(u.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};o.prototype={constructor:o,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(c[n]||(n=n.split("-")[0],c[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=u.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=u.parseDate(i.startDate,o,i.language)),1/0!==i.endDate&&(i.endDate=u.parseDate(i.endDate,o,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,o=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:e,date:o,format:t.proxy(function(t){var e=t||this.o.format;return u.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),u.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=u.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.viewDate=new Date(this.date<this.o.startDate?this.o.startDate:this.date>this.o.endDate?this.o.endDate:this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+c[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+c[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=this.date.valueOf(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<o?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==s.getFullYear()&&e.getUTCMonth()==s.getMonth()&&e.getUTCDate()==s.getDate()&&i.push("today"),r&&e.valueOf()==r&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){{var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),r=n.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,h=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf()}this.picker.find(".datepicker-days thead th.datepicker-switch").text(c[this.o.language].months[r]+" "+o),this.picker.find("tfoot th.today").text(c[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var d=e(o,r-1,28,0,0,0,0),p=u.getDaysInMonth(d.getUTCFullYear(),d.getUTCMonth());d.setUTCDate(p),d.setUTCDate(p-(d.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(d);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];d.valueOf()<f;){if(d.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+d+(this.o.weekStart-d.getUTCDay()-7)%7*864e5),y=new Date(+v+(11-v.getUTCDay())%7*864e5),b=new Date(+(b=e(y.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),_=(y-b)/864e5/7+1;g.push('<td class="cw">'+_+"</td>")}m=this.getClassNames(d),m.push("day");var w=this.o.beforeShowDay(d);void 0===w?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),w.enabled===!1&&m.push("disabled"),w.classes&&(m=m.concat(w.classes.split(/\s+/))),w.tooltip&&(i=w.tooltip),m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+d.getUTCDate()+"</td>"),d.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),d.setUTCDate(d.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var x=this.date&&this.date.getUTCFullYear(),C=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");x&&x==o&&C.eq(this.date.getUTCMonth()).addClass("active"),(s>o||o>l)&&C.addClass("disabled"),o==s&&C.slice(0,a).addClass("disabled"),o==l&&C.slice(h+1).addClass("disabled"),g="",o=10*parseInt(o/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var S=-1;11>S;S++)g+='<span class="year'+(-1==S?" old":10==S?" new":"")+(x==o?" active":"")+(s>o||o>l?" disabled":"")+'">'+o+"</span>",o+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=u.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var r=new Date;r=e(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),this.showMode(-2);var s="linked"==this.o.todayBtn?null:"view";this._setDate(r,s);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,h=n.parent().find("span").index(n),c=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(h),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(c,h,l,0,0,0,0))}else{var c=parseInt(n.text(),10)||0,l=1,h=0;this.viewDate.setUTCFullYear(c),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(c,h,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,c=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth();n.is(".old")?0===h?(h=11,c-=1):h-=1:n.is(".new")&&(11==h?(h=0,c+=1):h+=1),this._setDate(e(c,h,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,n,o=new Date(t.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return o.getUTCMonth()==s}:function(){return o.getUTCMonth()!=i},i=s+e,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(r),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--r),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,n,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(o){this._trigger("changeDate");var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+u.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var r=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};r.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),n=i.getUTCDate(),o=t.inArray(e.target,this.inputs),r=this.inputs.length;if(-1!=o){if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[o])for(;r>o&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var s=t.fn.datepicker,a=t.fn.datepicker=function(e){var s=Array.apply(null,arguments);s.shift();var a;return this.each(function(){var h=t(this),c=h.data("datepicker"),u="object"==typeof e&&e;if(!c){var d=i(this,"date"),p=t.extend({},l,d,u),f=n(p.language),m=t.extend({},l,f,d,u);if(h.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||h.find("input").toArray()};h.data("datepicker",c=new r(this,t.extend(m,g)))}else h.data("datepicker",c=new o(this,m))}return"string"==typeof e&&"function"==typeof c[e]&&(a=c[e].apply(c,s),void 0!==a)?!1:void 0}),void 0!==a?a:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},h=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=o;var c=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},u={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,u.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,r){if(i instanceof Date)return i;if("string"==typeof n&&(n=u.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var s,a,l=/([\-+]\d+)([dmwy])/,h=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var d=0;d<h.length;d++)switch(s=l.exec(h[d]),a=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=o.prototype.moveMonth.call(o.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=o.prototype.moveYear.call(o.prototype,i,a)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,s,h=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var y=n.parts.slice();if(h.length!=y.length&&(y=t(y).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),h.length==y.length){for(var d=0,b=y.length;b>d;d++){if(p=parseInt(h[d],10),s=y[d],isNaN(p))switch(s){case"MM":f=t(c[r].months).filter(function(){var t=this.slice(0,h[d].length),e=h[d].slice(0,t.length);return t==e}),p=t.inArray(f[0],c[r].months)+1;break;case"M":f=t(c[r].monthsShort).filter(function(){var t=this.slice(0,h[d].length),e=h[d].slice(0,t.length);return t==e}),p=t.inArray(f[0],c[r].monthsShort)+1}m[s]=p}for(var _,d=0;d<g.length;d++)_=g[d],_ in m&&!isNaN(m[_])&&v[_](i,m[_])}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=u.parseFormat(i));var o={d:e.getUTCDate(),D:c[n].daysShort[e.getUTCDay()],DD:c[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:c[n].monthsShort[e.getUTCMonth()],MM:c[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;for(var e=[],r=t.extend([],i.separators),s=0,a=i.parts.length;a>=s;s++)r.length&&e.push(r.shift()),e.push(o[i.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};u.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+u.headTemplate+"<tbody></tbody>"+u.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=u,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=s,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),a.call(i,"show"))}),t(function(){a.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datepicker.language),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var e=t(this).closest("form").parent();setTimeout(function(){e.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void e.superclass.value2html.call(this,n,i):n},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i,n=null;return t&&(n=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(i=this.dpg.formatDate(n,e,this.options.datetimepicker.language,this.options.formatType),t!==i&&(n=null))),n}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),!function(){function t(e,i){e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=i)}function e(t,e,i,n,o){this.stream=t,this.header=e,this.length=i,this.tag=n,this.sub=o}function i(t){var e,i,n="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),n+=ee.charAt(i>>6)+ee.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),n+=ee.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),n+=ee.charAt(i>>2)+ee.charAt((3&i)<<4));(3&n.length)>0;)n+=ie;return n}function n(t){var e,i,n,o="",r=0;for(e=0;e<t.length&&t.charAt(e)!=ie;++e)n=ee.indexOf(t.charAt(e)),0>n||(0==r?(o+=c(n>>2),i=3&n,r=1):1==r?(o+=c(i<<2|n>>4),i=15&n,r=2):2==r?(o+=c(i),o+=c(n>>2),i=3&n,r=3):(o+=c(i<<2|n>>4),o+=c(15&n),r=0));return 1==r&&(o+=c(i<<2)),o}function o(t){var e,i=n(t),o=new Array;for(e=0;2*e<i.length;++e)o[e]=parseInt(i.substring(2*e,2*e+2),16);return o}function r(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function s(){return new r(null)}function a(t,e,i,n,o,r){for(;--r>=0;){var s=e*this[t++]+i[n]+o;o=Math.floor(s/67108864),i[n++]=67108863&s}return o}function l(t,e,i,n,o,r){for(var s=32767&e,a=e>>15;--r>=0;){var l=32767&this[t],h=this[t++]>>15,c=a*l+h*s;l=s*l+((32767&c)<<15)+i[n]+(1073741823&o),o=(l>>>30)+(c>>>15)+a*h+(o>>>30),i[n++]=1073741823&l}return o}function h(t,e,i,n,o,r){for(var s=16383&e,a=e>>14;--r>=0;){var l=16383&this[t],h=this[t++]>>14,c=a*l+h*s;l=s*l+((16383&c)<<14)+i[n]+o,o=(l>>28)+(c>>14)+a*h,i[n++]=268435455&l}return o}function c(t){return le.charAt(t)}function u(t,e){var i=he[t.charCodeAt(e)];return null==i?-1:i}function d(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function p(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function f(t){var e=s();return e.fromInt(t),e}function m(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,o=!1,s=0;--n>=0;){var a=8==i?255&t[n]:u(t,n);0>a?"-"==t.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=i,s>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)}function g(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function v(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,o=!1,r="",s=this.t,a=this.DB-s*this.DB%e;if(s-->0)for(a<this.DB&&(i=this[s]>>a)>0&&(o=!0,r=c(i));s>=0;)e>a?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.DB-e)):(i=this[s]>>(a-=e)&n,0>=a&&(a+=this.DB,--s)),i>0&&(o=!0),o&&(r+=c(i));return o?r:"0"}function y(){var t=s();return r.ZERO.subTo(this,t),t}function b(){return this.s<0?this.negate():this}function _(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function w(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function x(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)}function C(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function k(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function S(t,e){var i,n=t%this.DB,o=this.DB-n,r=(1<<o)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>o|a,a=(this[i]&r)<<n;
for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function T(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var n=t%this.DB,o=this.DB-n,r=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&r)<<o,e[s-i]=this[s]>>n;n>0&&(e[this.t-i-1]|=(this.s&r)<<o),e.t=this.t-i,e.clamp()}function P(t,e){for(var i=0,n=0,o=Math.min(t.t,this.t);o>i;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=0>n?-1:0,-1>n?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function E(t,e){var i=this.abs(),n=t.abs(),o=i.t;for(e.t=o+n.t;--o>=0;)e[o]=0;for(o=0;o<n.t;++o)e[o+i.t]=i.am(0,n[o],e,o,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function D(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function L(t,e,i){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=s());var a=s(),l=this.s,h=t.s,c=this.DB-w(n[n.t-1]);c>0?(n.lShiftTo(c,a),o.lShiftTo(c,i)):(n.copyTo(a),o.copyTo(i));var u=a.t,d=a[u-1];if(0!=d){var p=d*(1<<this.F1)+(u>1?a[u-2]>>this.F2:0),f=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,v=i.t,y=v-u,b=null==e?s():e;for(a.dlShiftTo(y,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),r.ONE.dlShiftTo(u,b),b.subTo(a,a);a.t<u;)a[a.t++]=0;for(;--y>=0;){var _=i[--v]==d?this.DM:Math.floor(i[v]*f+(i[v-1]+g)*m);if((i[v]+=a.am(0,_,i,y,0,u))<_)for(a.dlShiftTo(y,b),i.subTo(b,i);i[v]<--_;)i.subTo(b,i)}null!=e&&(i.drShiftTo(u,e),l!=h&&r.ZERO.subTo(e,e)),i.t=u,i.clamp(),c>0&&i.rShiftTo(c,i),0>l&&r.ZERO.subTo(i,i)}}}function M(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function A(t){this.m=t}function R(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function I(t){t.divRemTo(this.m,null,t)}function N(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function j(t,e){t.squareTo(e),this.reduce(e)}function H(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function z(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function B(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function F(t){var e=s();return t.copyTo(e),this.reduce(e),e}function U(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function W(t,e){t.squareTo(e),this.reduce(e)}function $(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function G(){return 0==(this.t>0?1&this[0]:this.s)}function q(t,e){if(t>4294967295||1>t)return r.ONE;var i=s(),n=s(),o=e.convert(this),a=w(t)-1;for(o.copyTo(i);--a>=0;)if(e.sqrTo(i,n),(t&1<<a)>0)e.mulTo(n,o,i);else{var l=i;i=n,n=l}return e.revert(i)}function V(t,e){var i;return i=256>t||e.isEven()?new A(e):new z(e),this.exp(t,i)}function Y(t,e){return new r(t,e)}function X(t,e){if(e<t.length+11)throw new Error("Message too long for RSA");for(var i=new Array,n=t.length-1;n>=0&&e>0;){var o=t.charCodeAt(n--);128>o?i[--e]=o:o>127&&2048>o?(i[--e]=63&o|128,i[--e]=o>>6|192):(i[--e]=63&o|128,i[--e]=o>>6&63|128,i[--e]=o>>12|224)}i[--e]=0;for(var s=0,a=0,l=0;e>2;)0==l&&(a=ce.random.randomWords(1,0)[0]),s=a>>l&255,l=(l+8)%32,0!=s&&(i[--e]=s);return i[--e]=2,i[--e]=0,new r(i)}function Z(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function K(t,e){if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw new Error("Invalid RSA public key");this.n=Y(t,16),this.e=parseInt(e,16)}function Q(t){return t.modPowInt(this.e,this.n)}function J(t){var e=X(t,this.n.bitLength()+7>>3);if(null==e)return null;var i=this.doPublic(e);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}t.prototype.get=function(t){if(void 0==t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},t.prototype.hexDigits="0123456789ABCDEF",t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e){for(var i="",n=t;e>n;++n)switch(i+=this.hexByte(this.get(n)),15&n){case 7:i+="  ";break;case 15:i+="\n";break;default:i+=" "}return i},t.prototype.parseStringISO=function(t,e){for(var i="",n=t;e>n;++n)i+=String.fromCharCode(this.get(n));return i},t.prototype.parseStringUTF=function(t,e){for(var i="",n=0,o=t;e>o;){var n=this.get(o++);i+=String.fromCharCode(128>n?n:n>191&&224>n?(31&n)<<6|63&this.get(o++):(15&n)<<12|(63&this.get(o++))<<6|63&this.get(o++))}return i},t.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,t.prototype.parseTime=function(t,e){var i=this.parseStringISO(t,e),n=this.reTime.exec(i);return n?(i=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(i+=":"+n[5],n[6]&&(i+=":"+n[6],n[7]&&(i+="."+n[7]))),n[8]&&(i+=" UTC","Z"!=n[8]&&(i+=n[8],n[9]&&(i+=":"+n[9]))),i):"Unrecognized time: "+i},t.prototype.parseInteger=function(t,e){var i=e-t;if(i>4){i<<=3;var n=this.get(t);if(0==n)i-=8;else for(;128>n;)n<<=1,--i;return"("+i+" bit)"}for(var o=0,r=t;e>r;++r)o=o<<8|this.get(r);return o},t.prototype.parseBitString=function(t,e){var i=this.get(t),n=(e-t-1<<3)-i,o="("+n+" bit)";if(20>=n){var r=i;o+=" ";for(var s=e-1;s>t;--s){for(var a=this.get(s),l=r;8>l;++l)o+=a>>l&1?"1":"0";r=0}}return o},t.prototype.parseOctetString=function(t,e){var i=e-t,n="("+i+" byte) ";i>20&&(e=t+20);for(var o=t;e>o;++o)n+=this.hexByte(this.get(o));return i>20&&(n+=String.fromCharCode(8230)),n},t.prototype.parseOID=function(t,e){for(var i,n=0,o=0,r=t;e>r;++r){var s=this.get(r);n=n<<7|127&s,o+=7,128&s||(void 0==i?i=parseInt(n/40)+"."+n%40:i+="."+(o>=31?"bigint":n),n=o=0),i+=String.fromCharCode()}return i},e.prototype.typeName=function(){if(void 0==this.tag)return"unknown";var t=this.tag>>6,e=(this.tag>>5&1,31&this.tag);switch(t){case 0:switch(e){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+e.toString(16)}case 1:return"Application_"+e.toString(16);case 2:return"["+e+"]";case 3:return"Private_"+e.toString(16)}},e.prototype.content=function(){if(void 0==this.tag)return null;var t=this.tag>>6;if(0!=t)return null==this.sub?null:"("+this.sub.length+")";var e=31&this.tag,i=this.posContent(),n=Math.abs(this.length);switch(e){case 1:return 0==this.stream.get(i)?"false":"true";case 2:return this.stream.parseInteger(i,i+n);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(i,i+n);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(i,i+n);case 6:return this.stream.parseOID(i,i+n);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(i,i+n);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(i,i+n);case 23:case 24:return this.stream.parseTime(i,i+n)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null==this.sub?"null":this.sub.length)+"]"},e.prototype.print=function(t){if(void 0==t&&(t=""),document.writeln(t+this),null!=this.sub){t+="  ";for(var e=0,i=this.sub.length;i>e;++e)this.sub[e].print(t)}},e.prototype.toPrettyString=function(t){void 0==t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,32&this.tag?e+=" (constructed)":3!=this.tag&&4!=this.tag||null==this.sub||(e+=" (encapsulates)"),e+="\n",null!=this.sub){t+="  ";for(var i=0,n=this.sub.length;n>i;++i)e+=this.sub[i].toPrettyString(t)}return e},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0==i)return-1;e=0;for(var n=0;i>n;++n)e=e<<8|t.get();return e},e.hasContent=function(i,n,o){if(32&i)return!0;if(3>i||i>4)return!1;var r=new t(o);3==i&&r.get();var s=r.get();if(s>>6&1)return!1;try{var a=e.decodeLength(r);return r.pos-o.pos+a==n}catch(l){return!1}},e.decode=function(i){i instanceof t||(i=new t(i,0));var n=new t(i),o=i.get(),r=e.decodeLength(i),s=i.pos-n.pos,a=null;if(e.hasContent(o,r,i)){var l=i.pos;if(3==o&&i.get(),a=[],r>=0){for(var h=l+r;i.pos<h;)a[a.length]=e.decode(i);if(i.pos!=h)throw"Content size is not correct for container starting at offset "+l}else try{for(;;){var c=e.decode(i);if(0==c.tag)break;a[a.length]=c}r=l-i.pos}catch(u){throw"Exception while decoding undefined length content: "+u}}else i.pos+=r;return new e(n,s,r,o,a)};var te,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie="=",ne=0xdeadbeefcafe,oe=15715070==(16777215&ne);oe&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=l,te=30):oe&&"Netscape"!=navigator.appName?(r.prototype.am=a,te=26):(r.prototype.am=h,te=28),r.prototype.DB=te,r.prototype.DM=(1<<te)-1,r.prototype.DV=1<<te;var re=52;r.prototype.FV=Math.pow(2,re),r.prototype.F1=re-te,r.prototype.F2=2*te-re;var se,ae,le="0123456789abcdefghijklmnopqrstuvwxyz",he=new Array;for(se="0".charCodeAt(0),ae=0;9>=ae;++ae)he[se++]=ae;for(se="a".charCodeAt(0),ae=10;36>ae;++ae)he[se++]=ae;for(se="A".charCodeAt(0),ae=10;36>ae;++ae)he[se++]=ae;A.prototype.convert=R,A.prototype.revert=O,A.prototype.reduce=I,A.prototype.mulTo=N,A.prototype.sqrTo=j,z.prototype.convert=B,z.prototype.revert=F,z.prototype.reduce=U,z.prototype.mulTo=$,z.prototype.sqrTo=W,r.prototype.copyTo=d,r.prototype.fromInt=p,r.prototype.fromString=m,r.prototype.clamp=g,r.prototype.dlShiftTo=C,r.prototype.drShiftTo=k,r.prototype.lShiftTo=S,r.prototype.rShiftTo=T,r.prototype.subTo=P,r.prototype.multiplyTo=E,r.prototype.squareTo=D,r.prototype.divRemTo=L,r.prototype.invDigit=H,r.prototype.isEven=G,r.prototype.exp=q,r.prototype.toString=v,r.prototype.negate=y,r.prototype.abs=b,r.prototype.compareTo=_,r.prototype.bitLength=x,r.prototype.mod=M,r.prototype.modPowInt=V,r.ZERO=f(0),r.ONE=f(1),Z.prototype.doPublic=Q,Z.prototype.setPublic=K,Z.prototype.encrypt=J;var ce={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof module&&module.exports&&(module.exports=ce),ce.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,i,n,o,r,s=this._tables[0][4],a=this._tables[1],l=t.length,h=1;if(4!==l&&6!==l&&8!==l)throw new ce.exception.invalid("invalid aes key size");for(this._key=[o=t.slice(0),r=[]],e=l;4*l+28>e;e++)n=o[e-1],(e%l===0||8===l&&e%l===4)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[255&n],e%l===0&&(n=n<<8^n>>>24^h<<24,h=h<<1^283*(h>>7))),o[e]=o[e-l]^n;for(i=0;e;i++,e--)n=o[3&i?e:e-4],r[i]=4>=e||4>i?n:a[0][s[n>>>24]]^a[1][s[n>>16&255]]^a[2][s[n>>8&255]]^a[3][s[255&n]]},ce.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,i,n,o,r,s,a,l,h=this._tables[0],c=this._tables[1],u=h[4],d=c[4],p=[],f=[];for(t=0;256>t;t++)f[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!u[e];e^=n||1,i=f[i]||1)for(s=i^i<<1^i<<2^i<<3^i<<4,s=s>>8^255&s^99,u[e]=s,d[s]=e,r=p[o=p[n=p[e]]],l=16843009*r^65537*o^257*n^16843008*e,a=257*p[s]^16843008*s,t=0;4>t;t++)h[t][e]=a=a<<24^a>>>8,c[t][s]=l=l<<24^l>>>8;for(t=0;5>t;t++)h[t]=h[t].slice(0),c[t]=c[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new ce.exception.invalid("invalid aes block size");var i,n,o,r,s=this._key[e],a=t[0]^s[0],l=t[e?3:1]^s[1],h=t[2]^s[2],c=t[e?1:3]^s[3],u=s.length/4-2,d=4,p=[0,0,0,0],f=this._tables[e],m=f[0],g=f[1],v=f[2],y=f[3],b=f[4];for(r=0;u>r;r++)i=m[a>>>24]^g[l>>16&255]^v[h>>8&255]^y[255&c]^s[d],n=m[l>>>24]^g[h>>16&255]^v[c>>8&255]^y[255&a]^s[d+1],o=m[h>>>24]^g[c>>16&255]^v[a>>8&255]^y[255&l]^s[d+2],c=m[c>>>24]^g[a>>16&255]^v[l>>8&255]^y[255&h]^s[d+3],d+=4,a=i,l=n,h=o;for(r=0;4>r;r++)p[e?3&-r:r]=b[a>>>24]<<24^b[l>>16&255]<<16^b[h>>8&255]<<8^b[255&c]^s[d++],i=a,a=l,l=h,h=c,c=i;return p}},ce.bitArray={bitSlice:function(t,e,i){return t=ce.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===i?t:ce.bitArray.clamp(t,i-e)},extract:function(t,e,i){var n,o=Math.floor(-e-i&31);return n=-32&(e+i-1^e)?t[e/32|0]<<32-o^t[e/32+1|0]>>>o:t[e/32|0]>>>o,n&(1<<i)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var i=t[t.length-1],n=ce.bitArray.getPartial(i);return 32===n?t.concat(e):ce.bitArray._shiftRight(e,n,0|i,t.slice(0,t.length-1))},bitLength:function(t){var e,i=t.length;return 0===i?0:(e=t[i-1],32*(i-1)+ce.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var i=t.length;return e=31&e,i>0&&e&&(t[i-1]=ce.bitArray.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:function(t,e,i){return 32===t?e:(i?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(ce.bitArray.bitLength(t)!==ce.bitArray.bitLength(e))return!1;var i,n=0;for(i=0;i<t.length;i++)n|=t[i]^e[i];return 0===n},_shiftRight:function(t,e,i,n){var o,r,s=0;for(void 0===n&&(n=[]);e>=32;e-=32)n.push(i),i=0;if(0===e)return n.concat(t);for(o=0;o<t.length;o++)n.push(i|t[o]>>>e),i=t[o]<<32-e;return s=t.length?t[t.length-1]:0,r=ce.bitArray.getPartial(s),n.push(ce.bitArray.partial(e+r&31,e+r>32?i:n.pop(),1)),n},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},ce.codec.hex={fromBits:function(t){var e,i="";for(e=0;e<t.length;e++)i+=((0|t[e])+0xf00000000000).toString(16).substr(4);return i.substr(0,ce.bitArray.bitLength(t)/4)},toBits:function(t){var e,i,n=[];for(t=t.replace(/\s|0x/g,""),i=t.length,t+="00000000",e=0;e<t.length;e+=8)n.push(0^parseInt(t.substr(e,8),16));return ce.bitArray.clamp(n,4*i)}},ce.codec.utf8String={fromBits:function(t){var e,i,n="",o=ce.bitArray.bitLength(t);for(e=0;o/8>e;e++)0===(3&e)&&(i=t[e/4]),n+=String.fromCharCode(i>>>24),i<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,i=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t.charCodeAt(e),3===(3&e)&&(i.push(n),n=0);return 3&e&&i.push(ce.bitArray.partial(8*(3&e),n)),i}},ce.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,i){var n,o="",r=0,s=ce.codec.base64._chars,a=0,l=ce.bitArray.bitLength(t);for(i&&(s=s.substr(0,62)+"-_"),n=0;6*o.length<l;)o+=s.charAt((a^t[n]>>>r)>>>26),6>r?(a=t[n]<<6-r,r+=26,n++):(a<<=6,r-=6);for(;3&o.length&&!e;)o+="=";return o},toBits:function(t,e){t=t.replace(/\s|=/g,"");var i,n,o=[],r=0,s=ce.codec.base64._chars,a=0;for(e&&(s=s.substr(0,62)+"-_"),i=0;i<t.length;i++){if(n=s.indexOf(t.charAt(i)),0>n)throw new ce.exception.invalid("this isn't base64!");r>26?(r-=26,o.push(a^n>>>r),a=n<<32-r):(r+=6,a^=n<<32-r)}return 56&r&&o.push(ce.bitArray.partial(56&r,a,1)),o}},ce.codec.base64url={fromBits:function(t){return ce.codec.base64.fromBits(t,1,1)},toBits:function(t){return ce.codec.base64.toBits(t,1)}},void 0===ce.beware&&(ce.beware={}),ce.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){ce.mode.cbc={name:"cbc",encrypt:function(t,e,i,n){if(n&&n.length)throw new ce.exception.invalid("cbc can't authenticate data");if(128!==ce.bitArray.bitLength(i))throw new ce.exception.invalid("cbc iv must be 128 bits");var o,r=ce.bitArray,s=r._xor4,a=r.bitLength(e),l=0,h=[];if(7&a)throw new ce.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(o=0;a>=l+128;o+=4,l+=128)i=t.encrypt(s(i,e.slice(o,o+4))),h.splice(o,0,i[0],i[1],i[2],i[3]);return a=16843009*(16-(a>>3&15)),i=t.encrypt(s(i,r.concat(e,[a,a,a,a]).slice(o,o+4))),h.splice(o,0,i[0],i[1],i[2],i[3]),h},decrypt:function(t,e,i,n){if(n&&n.length)throw new ce.exception.invalid("cbc can't authenticate data");if(128!==ce.bitArray.bitLength(i))throw new ce.exception.invalid("cbc iv must be 128 bits");if(127&ce.bitArray.bitLength(e)||!e.length)throw new ce.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var o,r,s,a=ce.bitArray,l=a._xor4,h=[];for(n=n||[],o=0;o<e.length;o+=4)r=e.slice(o,o+4),s=l(i,t.decrypt(r)),h.splice(o,0,s[0],s[1],s[2],s[3]),i=r;if(r=255&h[o-1],0==r||r>16)throw new ce.exception.corrupt("pkcs#5 padding corrupt");if(s=16843009*r,!a.equal(a.bitSlice([s,s,s,s],0,8*r),a.bitSlice(h,32*h.length-8*r,32*h.length)))throw new ce.exception.corrupt("pkcs#5 padding corrupt");return a.bitSlice(h,0,32*h.length-8*r)}}},ce.misc.hmac=function(t,e){this._hash=e=e||ce.hash.sha256;var i,n=[[],[]],o=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>o&&(t=e.hash(t)),i=0;o>i;i++)n[0][i]=909522486^t[i],n[1][i]=1549556828^t[i];this._baseHash[0].update(n[0]),this._baseHash[1].update(n[1])},ce.misc.hmac.prototype.encrypt=ce.misc.hmac.prototype.mac=function(t,e){var i=new this._hash(this._baseHash[0]).update(t,e).finalize();return new this._hash(this._baseHash[1]).update(i).finalize()},ce.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},ce.hash.sha256.hash=function(t){return(new ce.hash.sha256).update(t).finalize()},ce.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=ce.codec.utf8String.toBits(t));var e,i=this._buffer=ce.bitArray.concat(this._buffer,t),n=this._length,o=this._length=n+ce.bitArray.bitLength(t);for(e=512+n&-512;o>=e;e+=512)this._block(i.splice(0,16));return this},finalize:function(){var t,e=this._buffer,i=this._h;for(e=ce.bitArray.concat(e,[ce.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),i},_init:[],_key:[],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,i=0,n=2;t:for(;64>i;n++){for(e=2;n>=e*e;e++)if(n%e===0)continue t;8>i&&(this._init[i]=t(Math.pow(n,.5))),this._key[i]=t(Math.pow(n,1/3)),i++}},_block:function(t){var e,i,n,o,r=t.slice(0),s=this._h,a=this._key,l=s[0],h=s[1],c=s[2],u=s[3],d=s[4],p=s[5],f=s[6],m=s[7];for(e=0;64>e;e++)16>e?i=r[e]:(n=r[e+1&15],o=r[e+14&15],i=r[15&e]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+r[15&e]+r[e+9&15]|0),i=i+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(f^d&(p^f))+a[e],m=f,f=p,p=d,d=u+i|0,u=c,c=h,h=l,l=i+(h&c^u&(h^c))+(h>>>2^h>>>13^h>>>22^h<<30^h<<19^h<<10)|0;s[0]=s[0]+l|0,s[1]=s[1]+h|0,s[2]=s[2]+c|0,s[3]=s[3]+u|0,s[4]=s[4]+d|0,s[5]=s[5]+p|0,s[6]=s[6]+f|0,s[7]=s[7]+m|0}},ce.random={randomWords:function(t,e){var i,n,o=[],r=this.isReady(e);if(r===this._NOT_READY)throw new ce.exception.notReady("generator isn't seeded");for(r&this._REQUIRES_RESEED&&this._reseedFromPools(!(r&this._READY)),i=0;t>i;i+=4)(i+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),n=this._gen4words(),o.push(n[0],n[1],n[2],n[3]);return this._gate(),o.slice(0,t)},setDefaultParanoia:function(t){this._defaultParanoia=t},addEntropy:function(t,e,i){i=i||"user";var n,o,r,s=(new Date).valueOf(),a=this._robins[i],l=this.isReady(),h=0;switch(n=this._collectorIds[i],void 0===n&&(n=this._collectorIds[i]=this._collectorIdNext++),void 0===a&&(a=this._robins[i]=0),this._robins[i]=(this._robins[i]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[a].update([n,this._eventId++,1,e,s,1,0|t]);break;case"object":var c=Object.prototype.toString.call(t);if("[object Uint32Array]"===c){for(r=[],o=0;o<t.length;o++)r.push(t[o]);t=r}else for("[object Array]"!==c&&(h=1),o=0;o<t.length&&!h;o++)"number"!=typeof t[o]&&(h=1);if(!h){if(void 0===e)for(e=0,o=0;o<t.length;o++)for(r=t[o];r>0;)e++,r>>>=1;this._pools[a].update([n,this._eventId++,2,e,s,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[a].update([n,this._eventId++,3,e,s,t.length]),this._pools[a].update(t);break;default:h=1}if(h)throw new ce.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[a]+=e,this._poolStrength+=e,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new ce.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var i,n,o=this._callbacks[t],r=[];for(n in o)o.hasOwnProperty(n)&&o[n]===e&&r.push(n);for(i=0;i<r.length;i++)n=r[i],delete o[n]},_pools:[new ce.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new ce.cipher.aes(this._key)},_reseed:function(t){this._key=ce.hash.sha256.hash(this._key.concat(t)),this._cipher=new ce.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,i=[],n=0;for(this._nextReseed=i[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)i.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(i=i.concat(this._pools[e].finalize()),n+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new ce.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=n,n>this._strength&&(this._strength=n),this._reseedCount++,this._reseed(i)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,i=t.y||t.clientY||t.offsetY||0;ce.random.addEntropy([e,i],2,"mouse")},_loadTimeCollector:function(){ce.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(t,e){var i,n=ce.random._callbacks[t],o=[];for(i in n)n.hasOwnProperty(i)&&o.push(n[i]);for(i=0;i<o.length;i++)o[i](e)}},function(){try{var t=new Uint32Array(32);crypto.getRandomValues(t),ce.random.addEntropy(t,1024,"crypto.getRandomValues")}catch(e){}}(),function(){for(var t in ce.beware)ce.beware.hasOwnProperty(t)&&ce.beware[t]()}();var ue={sjcl:ce,version:"1.3.10"};ue.generateAesKey=function(){return{key:ce.random.randomWords(8,0),encrypt:function(t){return this.encryptWithIv(t,ce.random.randomWords(4,0))},encryptWithIv:function(t,e){var i=new ce.cipher.aes(this.key),n=ce.codec.utf8String.toBits(t),o=ce.mode.cbc.encrypt(i,n,e),r=ce.bitArray.concat(e,o);return ce.codec.base64.fromBits(r)}}},ue.create=function(t){return new ue.EncryptionClient(t)},ue.EncryptionClient=function(t){var n=this,r=[];n.publicKey=t,n.version=ue.version;var s=function(t,e){var i,n,o;i=document.createElement(t);for(n in e)e.hasOwnProperty(n)&&(o=e[n],i.setAttribute(n,o));return i},a=function(t){return window.jQuery&&t instanceof jQuery?t[0]:t.nodeType&&1===t.nodeType?t:document.getElementById(t)},l=function(t){var e,i,n,o,r=[];if("INTEGER"===t.typeName()&&(e=t.posContent(),i=t.posEnd(),n=t.stream.hexDump(e,i).replace(/[ \n]/g,""),r.push(n)),null!==t.sub)for(o=0;o<t.sub.length;o++)r=r.concat(l(t.sub[o]));return r},h=function(t){var e,i,n=[],o=t.children;for(i=0;i<o.length;i++)e=o[i],1===e.nodeType&&e.attributes["data-encrypted-name"]?n.push(e):e.children&&e.children.length>0&&(n=n.concat(h(e)));return n},c=function(){var i,n,r,s,a,h;try{a=o(t),i=e.decode(a)}catch(c){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(r=l(i),2!==r.length)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return s=r[0],n=r[1],h=new Z,h.setPublic(s,n),h},u=function(){return{key:ce.random.randomWords(8,0),sign:function(t){var e=new ce.misc.hmac(this.key,ce.hash.sha256),i=e.encrypt(t);return ce.codec.base64.fromBits(i)}}};n.encrypt=function(t){var e=c(),o=ue.generateAesKey(),r=u(),s=o.encrypt(t),a=r.sign(ce.codec.base64.toBits(s)),l=ce.bitArray.concat(o.key,r.key),h=ce.codec.base64.fromBits(l),d=e.encrypt(h),p="$bt4|javascript_"+n.version.replace(/\./g,"_")+"$",f=null;return d&&(f=i(d)),p+f+"$"+s+"$"+a},n.encryptForm=function(t){var e,i,o,l,c,u;for(t=a(t),u=h(t);r.length>0;){try{t.removeChild(r[0])}catch(d){}r.splice(0,1)}for(c=0;c<u.length;c++)e=u[c],o=e.getAttribute("data-encrypted-name"),i=n.encrypt(e.value),e.removeAttribute("name"),l=s("input",{value:i,type:"hidden",name:o}),r.push(l),t.appendChild(l)},n.onSubmitEncryptForm=function(t,e){var i;t=a(t),i=function(i){return n.encryptForm(t),e?e(i):i},window.jQuery?window.jQuery(t).submit(i):t.addEventListener?t.addEventListener("submit",i,!1):t.attachEvent&&t.attachEvent("onsubmit",i)},n.formEncrypter={encryptForm:n.encryptForm,extractForm:a,onSubmitEncryptForm:n.onSubmitEncryptForm},ce.random.startCollectors()},window.Braintree=ue}(),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.braintree=t()}}(function(){var define,module,exports;return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){(function(i){"use strict";function n(){}function o(t){if("CONFIGURATION"===t.type||"IMMEDIATE"===t.type)throw new Error(t.message);try{console.error(JSON.stringify(t))}catch(e){}}function r(t,e,i){if(!(e in p))throw new Error(e+" is an unsupported integration");d.isFunction(i[m.ROOT_SUCCESS_CALLBACK])&&(y=function(t){i[m.ROOT_SUCCESS_CALLBACK](v(t))}),d.isFunction(i[m.ROOT_ERROR_CALLBACK])&&(_=i[m.ROOT_ERROR_CALLBACK]),d.isFunction(i[m.ROOT_READY_CALLBACK])&&(b=i[m.ROOT_READY_CALLBACK]),g(b),f.on(f.events.ERROR,_),f.on(f.events.PAYMENT_METHOD_RECEIVED,y),f.on(f.events.WARNING,function(t){try{console.warn(t)}catch(e){}}),l.getConfiguration(t,function(t,n){t?f.emit(f.events.ERROR,{message:t.errors}):s(n,e,i)})}function s(t,e,n){t.sdkVersion="braintree/web/"+a,t.merchantAppId=i.location.host,n.configuration=t,n.integration=e,f.on(f.events.CONFIGURATION_REQUEST,function(t){t(n)}),f.emit(f.events.ASYNC_DEPENDENCY_INITIALIZING),p[e].initialize(t,n),f.emit(f.events.ASYNC_DEPENDENCY_READY)}var a="2.7.2",l=t("braintree-api"),h=t("braintree-paypal"),c=t("braintree-dropin"),u=t("braintree-form"),d=t("braintree-utilities"),p=t("./integrations"),f=t("braintree-bus"),m=t("./constants"),g=t("./lib/dependency-ready"),v=t("./lib/sanitize-payload"),y=n,b=n,_=o;e.exports={api:l,cse:i.Braintree,paypal:h,dropin:c,Form:u,setup:r,VERSION:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants":269,"./integrations":273,"./lib/dependency-ready":275,"./lib/sanitize-payload":276,"braintree-api":16,"braintree-bus":34,"braintree-dropin":177,"braintree-form":187,"braintree-paypal":247,"braintree-utilities":267}],2:[function(t,e){(function(i){"use strict";function n(t){var e=t.sdkVersion;return e||(e=i.braintree&&i.braintree.VERSION?"braintree/web/"+i.braintree.VERSION:""),e}function o(t){var e,o;this.attrs={},t.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=t.sharedCustomerIdentifier),e=a(t.clientToken),this.driver=t.driver||l,this.analyticsUrl=e.analytics?e.analytics.url:void 0,this.clientApiUrl=e.clientApiUrl,this.customerId=t.customerId,this.challenges=e.challenges,this.integration=t.integration||"",this.sdkVersion=n(e),this.merchantAppId=e.merchantAppId||i.location.host,o=s.create(this,{container:t.container,clientToken:e}),this.verify3DS=r.bind(o.verify,o),this.attrs.authorizationFingerprint=e.authorizationFingerprint,this.attrs.sharedCustomerIdentifierType=t.sharedCustomerIdentifierType,e.merchantAccountId&&(this.attrs.merchantAccountId=e.merchantAccountId),this.requestTimeout=t.hasOwnProperty("timeout")?t.timeout:6e4}var r=t("braintree-utilities"),s=t("braintree-3ds"),a=t("./parse-client-token"),l=t("./request-driver"),h=t("./util"),c=t("./sepa-mandate"),u=t("./europe-bank-account"),d=t("./credit-card"),p=t("./coinbase-account"),f=t("./paypal-account"),m=t("./normalize-api-fields").normalizeCreditCardFields;o.prototype.getCreditCards=function(t){this.driver.get(h.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(t){var e=0,i=t.paymentMethods.length,n=[];for(e;i>e;e++)n.push(new d(t.paymentMethods[e]));return n},t,this.requestTimeout)},o.prototype.tokenizeCoinbase=function(t,e){t.options={validate:!1},this.addCoinbase(t,function(t,i){t?e(t,null):i&&i.nonce?e(t,i):e("Unable to tokenize coinbase account.",null)})},o.prototype.tokenizePayPalAccount=function(t,e){t.options={validate:!1},this.addPayPalAccount(t,function(t,i){t?e(t,null):i&&i.nonce?e(null,i):e("Unable to tokenize paypal account.",null)})},o.prototype.tokenizeCard=function(t,e){t.options={validate:!1},this.addCreditCard(t,function(t,i){i&&i.nonce?e(t,i.nonce,{type:i.type,details:i.details}):e("Unable to tokenize card.",null)
})},o.prototype.lookup3DS=function(t,e){var i=h.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",t.nonce,"three_d_secure/lookup"]),n=h.mergeOptions(this.attrs,{amount:t.amount});this.driver.post(i,n,function(t){return t},e,this.requestTimeout)},o.prototype.createSEPAMandate=function(t,e){var i=h.mergeOptions(this.attrs,{sepaMandate:t});this.driver.post(h.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),i,function(t){return{sepaMandate:new c(t.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new u(t.europeBankAccounts[0])}},e,this.requestTimeout)},o.prototype.addCoinbase=function(t,e){var i;delete t.share,i=h.mergeOptions(this.attrs,{coinbaseAccount:t,_meta:{integration:this.integration||"custom",source:"coinbase"}}),this.driver.post(h.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),i,function(t){return new p(t.coinbaseAccounts[0])},e,this.requestTimeout)},o.prototype.addPayPalAccount=function(t,e){var i;delete t.share,i=h.mergeOptions(this.attrs,{paypalAccount:t,_meta:{integration:this.integration||"paypal",source:"paypal"}}),this.driver.post(h.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),i,function(t){return new f(t.paypalAccounts[0])},e,this.requestTimeout)},o.prototype.addCreditCard=function(t,e){var i,n,o=t.share;delete t.share,n=m(t),i=h.mergeOptions(this.attrs,{share:o,creditCard:n,_meta:{integration:this.integration||"custom",source:"form"}}),this.driver.post(h.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),i,function(t){return new d(t.creditCards[0])},e,this.requestTimeout)},o.prototype.unlockCreditCard=function(t,e,i){var n=h.mergeOptions(this.attrs,{challengeResponses:e});this.driver.put(h.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/",t.nonce]),n,function(t){return new d(t.paymentMethods[0])},i,this.requestTimeout)},o.prototype.sendAnalyticsEvents=function(t,e){var n,o,r=this.analyticsUrl,s=[];if(t=h.isArray(t)?t:[t],!r)return void(e&&e.apply(null,[null,{}]));for(o in t)t.hasOwnProperty(o)&&s.push({kind:t[o]});n=h.mergeOptions(this.attrs,{braintree_library_version:this.sdkVersion,analytics:s,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:i.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}}),this.driver.post(r,n,function(t){return t},e,this.requestTimeout)},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./coinbase-account":3,"./credit-card":4,"./europe-bank-account":5,"./normalize-api-fields":9,"./parse-client-token":10,"./paypal-account":11,"./request-driver":13,"./sepa-mandate":14,"./util":15,"braintree-3ds":24,"braintree-utilities":33}],3:[function(t,e){"use strict";function i(t){var e,i;for(e=0;e<n.length;e++)i=n[e],this[i]=t[i]}var n=["nonce","type","description","details"];e.exports=i},{}],4:[function(t,e){"use strict";function i(t){var e,i;for(e=0;e<n.length;e++)i=n[e],this[i]=t[i]}var n=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];e.exports=i},{}],5:[function(t,e){"use strict";function i(t){var e,i=["bic","maskedIBAN","nonce","accountHolderName"],n=0;for(n=0;n<i.length;n++)e=i[n],this[e]=t[e]}e.exports=i},{}],6:[function(t,e){"use strict";function i(t,e,i){var s=n(t),a={authorizationFingerprint:s.authorizationFingerprint};o.post(s.configUrl,a,function(t){return r.mergeOptions(s,t)},e,i)}var n=t("./parse-client-token"),o=t("./request-driver"),r=t("./util");e.exports=i},{"./parse-client-token":10,"./request-driver":13,"./util":15}],7:[function(t,e){"use strict";function i(t,e){return t.status>=400?[t,null]:[null,e(t)]}function n(){}function o(t,e,o,r,s,a){var l;s=s||n,null==a&&(a=6e4),l=r(t,e,function(t,e){h[e]&&(clearTimeout(h[e]),s.apply(null,i(t,function(t){return o(t)})))}),"number"==typeof a?h[l]=setTimeout(function(){h[l]=null,s.apply(null,[{errors:"Unknown error"},null])},a):s.apply(null,[{errors:"Timeout must be a number"},null])}function r(t,e,i,n,r){e._method="POST",o(t,e,i,l.get,n,r)}function s(t,e,i,n,r){o(t,e,i,l.get,n,r)}function a(t,e,i,n,r){e._method="PUT",o(t,e,i,l.get,n,r)}var l=t("./jsonp"),h=[];e.exports={get:s,post:r,put:a}},{"./jsonp":8}],8:[function(t,e){(function(i){"use strict";function n(t,e){var i=document.createElement("script"),n=!1;i.src=t,i.async=!0;var o=e||c.error;"function"==typeof o&&(i.onerror=function(e){o({url:t,event:e})}),i.onload=i.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,i.onload=i.onreadystatechange=null,i&&i.parentNode&&i.parentNode.removeChild(i))},a||(a=document.getElementsByTagName("head")[0]),a.appendChild(i)}function o(t,e){var i,n,r,s=[];for(var r in t)t.hasOwnProperty(r)&&(n=t[r],i=e?l.isArray(t)?e+"[]":e+"["+r+"]":r,s.push("object"==typeof n?o(n,i):encodeURIComponent(i)+"="+encodeURIComponent(n)));return s.join("&")}function r(t,e,i,r){var s=-1===(t||"").indexOf("?")?"?":"&";r=r||c.callbackName||"callback";var a=r+"_json"+l.generateUUID();return s+=o(e),h[a]=function(t){i(t,a);try{delete h[a]}catch(e){}h[a]=null},n(t+s+"&"+r+"="+a),a}function s(t){c=t}var a,l=t("./util"),h=i,c={};e.exports={get:r,init:s,stringify:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":15}],9:[function(t,e){"use strict";function i(t){var e,i={billingAddress:t.billingAddress||{}};for(e in t)if(t.hasOwnProperty(e))switch(e.replace(/_/,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":i.billingAddress[e]=t[e];break;default:i[e]=t[e]}return i}e.exports={normalizeCreditCardFields:i}},{}],10:[function(t,e){"use strict";function i(t){var e;if(!t)throw new Error("Braintree API Client Misconfigured: clientToken required.");if("object"==typeof t&&null!==t)e=t;else{try{t=window.atob(t)}catch(i){}try{e=JSON.parse(t)}catch(o){throw new Error("Braintree API Client Misconfigured: clientToken is invalid.")}}if(!e.hasOwnProperty("clientApiUrl")||!n.isWhitelistedDomain(e.clientApiUrl))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");return e}var n=t("braintree-utilities");t("./polyfill"),e.exports=i},{"./polyfill":12,"braintree-utilities":33}],11:[function(t,e){"use strict";function i(t){var e,i;for(e=0;e<n.length;e++)i=n[e],this[i]=t[i]}var n=["nonce","type","description","details"];e.exports=i},{}],12:[function(){(function(t){"use strict";t.atob=t.atob||function(t){var e=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="";if(!e.test(t))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");var o=0;do{var r=i.indexOf(t.charAt(o++)),s=i.indexOf(t.charAt(o++)),a=i.indexOf(t.charAt(o++)),l=i.indexOf(t.charAt(o++)),h=(63&r)<<2|s>>4&3,c=(15&s)<<4|a>>2&15,u=(3&a)<<6|63&l;n+=String.fromCharCode(h)+(c?String.fromCharCode(c):"")+(u?String.fromCharCode(u):"")}while(o<t.length);return n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e){"use strict";var i=t("./jsonp-driver");e.exports=i},{"./jsonp-driver":7}],14:[function(t,e){"use strict";function i(t){var e,i=0,n=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(i=0;i<n.length;i++)e=n[i],this[e]=t[e]}e.exports=i},{}],15:[function(t,e){"use strict";function i(t){var e,i,n=[];for(i=0;i<t.length;i++)e=t[i],"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===e.charAt(0)&&(e=e.substring(1)),n.push(e);return n.join("/")}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function o(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.floor(16*Math.random()),i="x"===t?e:3&e|8;return i.toString(16)})}function r(t,e){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}e.exports={joinUrlFragments:i,isArray:n,generateUUID:o,mergeOptions:r}},{}],16:[function(t,e){"use strict";function i(t){return new n(t)}var n=t("./lib/client"),o=t("./lib/jsonp"),r=t("./lib/jsonp-driver"),s=t("./lib/util"),a=t("./lib/parse-client-token"),l=t("./lib/get-configuration");e.exports={Client:n,configure:i,util:s,JSONP:o,JSONPDriver:r,parseClientToken:a,getConfiguration:l}},{"./lib/client":2,"./lib/get-configuration":6,"./lib/jsonp":8,"./lib/jsonp-driver":7,"./lib/parse-client-token":10,"./lib/util":15}],17:[function(t,e){"use strict";function i(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&(t instanceof jQuery||"jquery"in Object(t))&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)}e.exports={normalizeElement:i}},{}],18:[function(t,e){"use strict";function i(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)}function n(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)}e.exports={addEventListener:i,removeEventListener:n}},{}],19:[function(t,e){"use strict";function i(t){return"[object Function]"===o.call(t)}function n(t,e){return function(){t.apply(e,arguments)}}var o=Object.prototype.toString;e.exports={bind:n,isFunction:i}},{}],20:[function(t,e){"use strict";function i(){return"https:"===window.location.protocol}function n(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function o(t,e){var i,r,s=[];for(r in t)if(t.hasOwnProperty(r)){var a=t[r];i=e?e+"["+r+"]":r,"object"==typeof a?s.push(o(a,i)):void 0!==a&&null!==a&&s.push(n(i)+"="+n(a))}return s.join("&")}function r(t){for(var e={},i=t.split("&"),n=0;n<i.length;n++){var o=i[n].split("="),r=o[0],s=decodeURIComponent(o[1]);e[r]=s}return e}function s(t){var e=t.split("?");return 2!==e.length?{}:r(e[1])}e.exports={isBrowserHttps:i,makeQueryString:o,decodeQueryString:r,getParams:s}},{}],21:[function(t,e){var i=t("./lib/dom"),n=t("./lib/url"),o=t("./lib/fn"),r=t("./lib/events");e.exports={normalizeElement:i.normalizeElement,isBrowserHttps:n.isBrowserHttps,makeQueryString:n.makeQueryString,decodeQueryString:n.decodeQueryString,getParams:n.getParams,removeEventListener:r.removeEventListener,addEventListener:r.addEventListener,bind:o.bind,isFunction:o.isFunction}},{"./lib/dom":17,"./lib/events":18,"./lib/fn":19,"./lib/url":20}],22:[function(t,e){"use strict";function i(t,e){var i=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return i[e]}function n(){return{html:{height:r.style.height||"",overflow:i(r,"overflow"),position:i(r,"position")},body:{height:s.style.height||"",overflow:i(s,"overflow")}}}function o(t,e){this.assetsUrl=t,this.container=e||document.body,this.iframe=null,r=document.documentElement,s=document.body,this.merchantPageDefaultStyles=n()}var r,s,a=t("braintree-utilities"),l=t("../shared/receiver"),h="1.2.0";o.prototype.get=function(t,e){var i=this,n=this.constructAuthorizationURL(t);this.container&&a.isFunction(this.container)?this.container(n+"&no_style=1"):this.insertIframe(n),new l(function(t){a.isFunction(i.container)||i.removeIframe(),e(t)})},o.prototype.removeIframe=function(){this.container&&this.container.nodeType&&1===this.container.nodeType?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():"string"==typeof this.container&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},o.prototype.insertIframe=function(t){var e=document.createElement("iframe");if(e.src=t,this.applyStyles(e),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&1===this.container.nodeType)this.container.appendChild(e);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&0!==this.container.length)this.container.append(e);else{if("string"!=typeof this.container||!document.getElementById(this.container))throw new Error("Unable to find valid container for iframe.");document.getElementById(this.container).appendChild(e)}this.iframe=e},o.prototype.applyStyles=function(t){t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.setAttribute("frameborder","0"),t.setAttribute("allowTransparency","true"),t.style.border="0",t.style.zIndex="99999"},o.prototype.lockMerchantWindowSize=function(){r.style.overflow="hidden",s.style.overflow="hidden",s.style.height="100%"},o.prototype.unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;s.style.height=t.body.height,s.style.overflow=t.body.overflow,r.style.overflow=t.html.overflow},o.prototype.constructAuthorizationURL=function(t){var e,i=window.location.href;return i.indexOf("#")>-1&&(i=i.split("#")[0]),e=a.makeQueryString({acsUrl:t.acsUrl,pareq:t.pareq,termUrl:t.termUrl+"&three_d_secure_version="+h,md:t.md,parentUrl:i}),this.assetsUrl+"/3ds/"+h+"/html/style_frame?"+e},e.exports=o},{"../shared/receiver":26,"braintree-utilities":21}],23:[function(t,e){"use strict";function i(){}function n(t,e){e=e||{},this.clientToken=e.clientToken,this.container=e.container,this.api=t,this.nonce=null,this._boundHandleUserClose=o.bind(this._handleUserClose,this)}var o=t("braintree-utilities"),r=t("./authorization_service");n.prototype.verify=function(t,e){if(!o.isFunction(e))throw this.api.sendAnalyticsEvents("3ds.web.no_callback"),new Error("No suitable callback argument was given");o.isFunction(t.onUserClose)&&(this._onUserClose=t.onUserClose);var i={nonce:"",amount:t.amount},n=t.creditCard;if("string"==typeof n)i.nonce=n,this.api.sendAnalyticsEvents("3ds.web.verify.nonce"),this.startVerification(i,e);else{var r=this,s=function(t,n){return t?e(t):(i.nonce=n,void r.startVerification(i,e))};this.api.sendAnalyticsEvents("3ds.web.verify.credit_card"),this.api.tokenizeCard(n,s)}},n.prototype.startVerification=function(t,e){this.api.lookup3DS(t,o.bind(this.handleLookupResponse(e),this))},n.prototype.handleLookupResponse=function(t){var e=this;return function(i,n){var s;i?t(i.error):n.lookup&&n.lookup.acsUrl&&n.lookup.acsUrl.length>0?(e.nonce=n.paymentMethod.nonce,s=new r(this.clientToken.assetsUrl,this.container),s.get(n.lookup,o.bind(this.handleAuthenticationResponse(t),this)),this._detachListeners(),this._attachListeners()):(e.nonce=n.paymentMethod.nonce,t(null,{nonce:e.nonce,verificationDetails:n.threeDSecureInfo}))}},n.prototype.handleAuthenticationResponse=function(t){return function(e){var i,n=o.decodeQueryString(e);n.user_closed||(i=JSON.parse(n.auth_response),i.success?t(null,{nonce:i.paymentMethod.nonce,verificationDetails:i.threeDSecureInfo}):i.threeDSecureInfo&&i.threeDSecureInfo.liabilityShiftPossible?t(null,{nonce:this.nonce,verificationDetails:i.threeDSecureInfo}):t(i.error))}},n.prototype._attachListeners=function(){o.addEventListener(window,"message",this._boundHandleUserClose)},n.prototype._detachListeners=function(){o.removeEventListener(window,"message",this._boundHandleUserClose)},n.prototype._handleUserClose=function(t){"user_closed=true"===t.data&&this._onUserClose()},n.prototype._onUserClose=i,e.exports=n},{"./authorization_service":22,"braintree-utilities":21}],24:[function(t,e){"use strict";var i=t("./client");t("./vendor/json2"),e.exports={create:function(t,e){var n=new i(t,e);return n}}},{"./client":23,"./vendor/json2":25}],25:[function(require,module,exports){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)s[i]=str(i,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;r>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&s.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&s.push(quote(n)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,o=t[e];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],26:[function(t,e){"use strict";function i(t){this.postMessageReceiver(t),this.hashChangeReceiver(t)}var n=t("braintree-utilities");i.prototype.postMessageReceiver=function(t){var e=this;this.wrappedCallback=function(i){var n=i.data;(/^(auth_response=)/.test(n)||"user_closed=true"===n)&&(t(n),e.stopListening())},n.addEventListener(window,"message",this.wrappedCallback)},i.prototype.hashChangeReceiver=function(t){var e,i=window.location.hash,n=this;this.poll=setInterval(function(){e=window.location.hash,e.length>0&&e!==i&&(n.stopListening(),e=e.substring(1,e.length),t(e),window.location.hash=i.length>0?i:"")},10)},i.prototype.stopListening=function(){clearTimeout(this.poll),n.removeEventListener(window,"message",this.wrappedCallback)},e.exports=i},{"braintree-utilities":21}],27:[function(t,e){"use strict";var i,n=Array.prototype.indexOf;i=n?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},e.exports={indexOf:i}},{}],28:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],29:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],30:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],31:[function(t,e){"use strict";function i(t){var e,i,n,o,r=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];for(o=r.length,t=t||window.innerWidth,i=0;o>i;i++)n=r[i],t>=n.min&&t<=n.max&&(e=n.chars);return e||60}function n(t,e){var i,n;return-1===t.indexOf("@")?t:(t=t.split("@"),i=t[0],n=t[1],i.length>e&&(i=i.slice(0,e)+"..."),n.length>e&&(n="..."+n.slice(-e)),i+"@"+n)}e.exports={truncateEmail:n,getMaxCharLength:i}},{}],32:[function(t,e){"use strict";function i(){return"https:"===window.location.protocol}function n(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}function o(t,e){var i,r,s=[];for(r in t)if(t.hasOwnProperty(r)){var a=t[r];i=e?e+"["+r+"]":r,"object"==typeof a?s.push(o(a,i)):void 0!==a&&null!==a&&s.push(n(i)+"="+n(a))}return s.join("&")}function r(t){for(var e={},i=t.split("&"),n=0;n<i.length;n++){var o=i[n].split("="),r=o[0],s=decodeURIComponent(o[1]);e[r]=s}return e}function s(t){var e=t.split("?");return 2!==e.length?{}:r(e[1])}function a(t){if(t=t.toLowerCase(),!/^http/.test(t))return!1;h.href=t;var e=h.hostname.split("."),i=e.slice(-2).join(".");return-1===l.indexOf(c,i)?!1:!0}var l=t("./array"),h=document.createElement("a"),c=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];e.exports={isBrowserHttps:i,makeQueryString:o,decodeQueryString:r,getParams:s,isWhitelistedDomain:a}},{"./array":27}],33:[function(t,e){var i=t("./lib/dom"),n=t("./lib/url"),o=t("./lib/fn"),r=t("./lib/events"),s=t("./lib/string"),a=t("./lib/array");e.exports={string:s,array:a,normalizeElement:i.normalizeElement,isBrowserHttps:n.isBrowserHttps,makeQueryString:n.makeQueryString,decodeQueryString:n.decodeQueryString,getParams:n.getParams,isWhitelistedDomain:n.isWhitelistedDomain,removeEventListener:r.removeEventListener,addEventListener:r.addEventListener,bind:o.bind,isFunction:o.isFunction}},{"./lib/array":27,"./lib/dom":28,"./lib/events":29,"./lib/fn":30,"./lib/string":31,"./lib/url":32}],34:[function(t,e){"use strict";var i=t("framebus");i.events=t("./lib/events"),e.exports=i},{"./lib/events":35,framebus:36}],35:[function(t,e){"use strict";for(var i=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY"],n={},o=0;o<i.length;o++){var r=i[o];n[r]=r}e.exports=n},{}],36:[function(t,e,i){"use strict";!function(t,n){"object"==typeof i&&"undefined"!=typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):t.framebus=n()}(this,function(){function t(t,e,i){var o;return i=i||"*","string"!=typeof t?!1:"string"!=typeof i?!1:(o=n(t,e,i),o===!1?!1:(h(d.top,o,i),!0))}function e(t,e,i){return i=i||"*",u(t,e,i)?!1:(p[i]=p[i]||{},p[i][t]=p[i][t]||[],p[i][t].push(e),!0)}function i(t,e,i){var n,o;if(i=i||"*",u(t,e,i))return!1;if(o=p[i]&&p[i][t],!o)return!1;for(n=0;n<o.length;n++)if(o[n]===e)return o.splice(n,1),!0;return!1}function n(t,e,i){var n=!1,o={event:t};"function"==typeof e?o.reply=c(e,i):o.data=e;try{n=JSON.stringify(o)}catch(r){throw new Error("Could not stringify event: "+r.message)}return n}function o(t){var e;try{e=JSON.parse(t.data)}catch(i){return!1}return null==e.event?!1:(null!=e.reply&&(e.data=function(i){var o=n(e.reply,i,t.origin);return o===!1?!1:void t.source.postMessage(o,t.origin)}),e)}function r(t){d||(d=t,d.addEventListener?d.addEventListener("message",a,!1):d.attachEvent?d.attachEvent("onmessage",a):null===d.onmessage?d.onmessage=a:d=null)}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})}function a(t){var e;"string"==typeof t.data&&(e=o(t),e&&(l("*",e.event,e.data,t.origin),l(t.origin,e.event,e.data,t.origin)))}function l(t,e,i,n){var o;if(p[t]&&p[t][e])for(o=0;o<p[t][e].length;o++)p[t][e][o](i,n)}function h(t,e,i){var n;for(t.postMessage(e,i),n=0;n<t.frames.length;n++)h(t.frames[n],e,i)}function c(t,n){function o(e,s){t(e,s),i(r,o,n)}var r=s();return e(r,o,n),r}function u(t,e,i){return"string"!=typeof t?!0:"function"!=typeof e?!0:"string"!=typeof i?!0:!1}var d,p={};return r(window),{publish:t,pub:t,trigger:t,emit:t,subscribe:e,sub:e,on:e,unsubscribe:i,unsub:i,off:i}})},{}],37:[function(t,e){"use strict";function i(t,e){a.emit(a.events.ERROR,{type:e,message:t})}function n(t){t=t||{};var e=t.coinbase;if(null==t.apiClient)i("settings.apiClient is required for coinbase",l);else if(t.configuration.coinbaseEnabled)if(e&&(e.container||e.button))if(e.container&&e.button)i("options.coinbase.container and options.coinbase.button are mutually exclusive",l);else{if(s.isSupportedBrowser())return!0;i("Coinbase is not supported by your browser. Please consider upgrading","UNSUPPORTED_BROWSER")}else i("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",l);else i("Coinbase is not enabled for your merchant account",l);return!1}function o(t){return n(t)?new r(t):void 0}var r=t("./lib/coinbase"),s=t("./lib/detector"),a=t("braintree-bus"),l="CONFIGURATION";e.exports={create:o}},{"./lib/coinbase":40,"./lib/detector":42,"braintree-bus":48}],38:[function(t,e){(function(t){"use strict";function i(e){return e=e||t.navigator.userAgent,/AppleWebKit\//.test(e)&&/Mobile\//.test(e)?e.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,"."):null}function n(e){e=e||t.navigator.userAgent;var i=null,n=/MSIE.(\d+)/.exec(e);return/Trident/.test(e)&&(i=11),n&&(i=parseInt(n[1],10)),i}function o(e){return e=e||t.navigator.userAgent,/Android/.test(e)?e.replace(/^.* Android ([0-9\.]+).*$/,"$1"):null}e.exports={ieVersion:n,iOSSafariVersion:i,androidVersion:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e){"use strict";function i(t,e,i){return t?(n.emit(n.events.ERROR,t.error),void i._sendAnalyticsEvent("generate.nonce.failed")):(n.emit(n.events.PAYMENT_METHOD_GENERATED,e),void i._sendAnalyticsEvent("generate.nonce.succeeded"))}var n=t("braintree-bus");e.exports={tokenize:i}},{"braintree-bus":48}],40:[function(t,e){(function(i){"use strict";function n(t){return{clientId:t.configuration.coinbase.clientId,redirectUrl:t.configuration.coinbase.redirectUrl,scopes:t.configuration.coinbase.scopes||h.SCOPES,meta:{authorizations_merchant_account:t.configuration.coinbase.merchantAccount||""}}}function o(t){var e;this.buttonId=t.coinbase.button||h.BUTTON_ID,this.apiClient=t.apiClient,this.assetsUrl=t.configuration.assetsUrl,this._onOAuthSuccess=r.bind(this._onOAuthSuccess,this),this._handleButtonClick=r.bind(this._handleButtonClick,this),this.popupParams=n(t),this.redirectDoneInterval=null,t.coinbase.container?(e=r.normalizeElement(t.coinbase.container),this._insertFrame(e)):(i.braintreeCoinbasePopupCallback=this._onOAuthSuccess,e=document.body,r.addEventListener(e,"click",this._handleButtonClick),this._sendAnalyticsEvent("initialized"))}var r=t("braintree-utilities"),s=t("./dom/composer"),a=t("./url-composer"),l=t("./callbacks"),h=t("./constants"),c=t("./detector"),u=t("braintree-bus");o.prototype._sendAnalyticsEvent=function(t){var e=this.apiClient.integration+".web.coinbase.";this.apiClient.sendAnalyticsEvents(e+t)},o.prototype._insertFrame=function(t){var e=s.createFrame({src:this.assetsUrl+"/coinbase/"+h.VERSION+"/coinbase-frame.html"});u.emit(u.events.ASYNC_DEPENDENCY_INITIALIZING),t.appendChild(e)},o.prototype._onOAuthSuccess=function(t){return this._clearPollForRedirectDone(),t.code?(u.emit("coinbase:view:navigate","loading"),this._sendAnalyticsEvent("popup.authorized"),void this.apiClient.tokenizeCoinbase({code:t.code,query:a.getQueryString()},r.bind(function(t,e){l.tokenize.apply(null,[t,e,this])},this))):void this._sendAnalyticsEvent("popup.denied")},o.prototype._clearPollForRedirectDone=function(){this.redirectDoneInterval&&(clearInterval(this.redirectDoneInterval),this.redirectDoneInterval=null,u.emit(u.events.UI_POPUP_DID_CLOSE,{source:h.INTEGRATION_NAME}))},o.prototype._pollForRedirectDone=function(t){this.redirectDoneInterval=setInterval(r.bind(function(){var e;if(null==t||t.closed)return this._sendAnalyticsEvent("popup.aborted"),void this._clearPollForRedirectDone();try{if("about:blank"===t.location.href)throw new Error("Not finished loading");e=r.decodeQueryString(t.location.search.replace(/^\?/,"")).code}catch(i){return}this._onOAuthSuccess({code:e}),c.shouldCloseFromParent()&&t.close()},this),100)},o.prototype._openPopup=function(){var t;this._sendAnalyticsEvent("popup.started"),t=s.createPopup(a.compose(this.popupParams)),t.focus(),this._pollForRedirectDone(t),u.trigger(u.events.UI_POPUP_DID_OPEN,{source:h.INTEGRATION_NAME}),u.on(u.events.UI_POPUP_FORCE_CLOSE,function(e){e.target===h.INTEGRATION_NAME&&t.close()})},o.prototype._handleButtonClick=function(t){for(var e=t.target||t.srcElement;;){if(null==e)return;if(e===t.currentTarget)return;if(e.id===this.buttonId)break;e=e.parentNode}t&&t.preventDefault?t.preventDefault():t.returnValue=!1,this._openPopup()},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./callbacks":39,"./constants":41,"./detector":42,"./dom/composer":44,"./url-composer":47,"braintree-bus":48,"braintree-utilities":57}],41:[function(t,e){"use strict";e.exports={BASE_URL:"https://coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"0.0.7",INTEGRATION_NAME:"Coinbase"}},{}],42:[function(t,e){"use strict";function i(){var t=s.ieVersion();return!t||t>8}function n(){var t=s.androidVersion();return null==t?!1:/^5/.test(t)}function o(){return!(n()||r())}function r(){var t=s.iOSSafariVersion();return null==t?!1:/^8\.0/.test(t)||/^8\.1$/.test(t)}var s=t("./browser");e.exports={isSupportedBrowser:i,shouldCloseFromParent:o,shouldDisplayIOSClose:r,shouldDisplayLollipopClose:n}},{"./browser":38}],43:[function(t,e){"use strict";function i(t){var e=document.createElement("button");return t=t||{},e.id=t.id||"coinbase-button",e.style.backgroundColor=t.backgroundColor||"#EEE",e.style.color=t.color||"#4597C3",e.style.border=t.border||"0",e.style.borderRadius=t.borderRadius||"6px",e.style.padding=t.padding||"12px",e.innerHTML=t.innerHTML||"coinbase",e}e.exports={create:i}},{}],44:[function(t,e){"use strict";var i=t("./popup"),n=t("./button"),o=t("./frame");e.exports={createButton:n.create,createPopup:i.create,createFrame:o.create}},{"./button":43,"./frame":45,"./popup":46}],45:[function(t,e){"use strict";function i(t){var e=document.createElement("iframe");return e.src=t.src,e.id=n.FRAME_NAME,e.name=n.FRAME_NAME,e.allowTransparency=!0,e.height="70px",e.width="100%",e.frameBorder=0,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e}var n=t("../constants");e.exports={create:i}},{"../constants":41}],46:[function(t,e){(function(i){"use strict";function n(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push([i,t[i]].join("="));return e.join(",")}function o(){var t=850,e=600;return n({width:t,height:e,left:(screen.width-t)/2,top:(screen.height-e)/4})}function r(t){return i.open(t,s.POPUP_NAME,o())}var s=t("../constants");e.exports={create:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants":41}],47:[function(t,e){"use strict";function i(){return"version="+o.VERSION}function n(t){var e=o.BASE_URL+"/oauth/authorize?response_type=code",n=t.redirectUrl+"?"+i();if(e+="&redirect_uri="+encodeURIComponent(n),e+="&client_id="+t.clientId,t.scopes&&(e+="&scope="+encodeURIComponent(t.scopes)),t.meta)for(var r in t.meta)t.meta.hasOwnProperty(r)&&(e+="&meta["+encodeURIComponent(r)+"]="+encodeURIComponent(t.meta[r]));return e}var o=t("./constants");e.exports={compose:n,getQueryString:i}},{"./constants":41}],48:[function(t,e,i){arguments[4][34][0].apply(i,arguments)},{"./lib/events":49,dup:34,framebus:50}],49:[function(t,e,i){arguments[4][35][0].apply(i,arguments)},{dup:35}],50:[function(t,e,i){arguments[4][36][0].apply(i,arguments)},{dup:36}],51:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],52:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],53:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],54:[function(t,e,i){arguments[4][19][0].apply(i,arguments)
},{dup:19}],55:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],56:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":51,dup:32}],57:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":51,"./lib/dom":52,"./lib/events":53,"./lib/fn":54,"./lib/string":55,"./lib/url":56,dup:33}],58:[function(t,e,i){arguments[4][2][0].apply(i,arguments)},{"./coinbase-account":59,"./credit-card":60,"./europe-bank-account":61,"./normalize-api-fields":65,"./parse-client-token":66,"./paypal-account":67,"./request-driver":69,"./sepa-mandate":70,"./util":71,"braintree-3ds":80,"braintree-utilities":89,dup:2}],59:[function(t,e,i){arguments[4][3][0].apply(i,arguments)},{dup:3}],60:[function(t,e,i){arguments[4][4][0].apply(i,arguments)},{dup:4}],61:[function(t,e,i){arguments[4][5][0].apply(i,arguments)},{dup:5}],62:[function(t,e,i){arguments[4][6][0].apply(i,arguments)},{"./parse-client-token":66,"./request-driver":69,"./util":71,dup:6}],63:[function(t,e,i){arguments[4][7][0].apply(i,arguments)},{"./jsonp":64,dup:7}],64:[function(t,e,i){arguments[4][8][0].apply(i,arguments)},{"./util":71,dup:8}],65:[function(t,e,i){arguments[4][9][0].apply(i,arguments)},{dup:9}],66:[function(t,e,i){arguments[4][10][0].apply(i,arguments)},{"./polyfill":68,"braintree-utilities":89,dup:10}],67:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],68:[function(t,e,i){arguments[4][12][0].apply(i,arguments)},{dup:12}],69:[function(t,e,i){arguments[4][13][0].apply(i,arguments)},{"./jsonp-driver":63,dup:13}],70:[function(t,e,i){arguments[4][14][0].apply(i,arguments)},{dup:14}],71:[function(t,e,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],72:[function(t,e,i){arguments[4][16][0].apply(i,arguments)},{"./lib/client":58,"./lib/get-configuration":62,"./lib/jsonp":64,"./lib/jsonp-driver":63,"./lib/parse-client-token":66,"./lib/util":71,dup:16}],73:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],74:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],75:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],76:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],77:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":73,"./lib/events":74,"./lib/fn":75,"./lib/url":76,dup:21}],78:[function(t,e,i){arguments[4][22][0].apply(i,arguments)},{"../shared/receiver":82,"braintree-utilities":77,dup:22}],79:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{"./authorization_service":78,"braintree-utilities":77,dup:23}],80:[function(t,e,i){arguments[4][24][0].apply(i,arguments)},{"./client":79,"./vendor/json2":81,dup:24}],81:[function(t,e,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],82:[function(t,e,i){arguments[4][26][0].apply(i,arguments)},{"braintree-utilities":77,dup:26}],83:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],84:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],85:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],86:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],87:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],88:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":83,dup:32}],89:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":83,"./lib/dom":84,"./lib/events":85,"./lib/fn":86,"./lib/string":87,"./lib/url":88,dup:33}],90:[function(t,e,i){arguments[4][34][0].apply(i,arguments)},{"./lib/events":91,dup:34,framebus:92}],91:[function(t,e,i){arguments[4][35][0].apply(i,arguments)},{dup:35}],92:[function(t,e,i){arguments[4][36][0].apply(i,arguments)},{dup:36}],93:[function(t,e,i){arguments[4][2][0].apply(i,arguments)},{"./coinbase-account":94,"./credit-card":95,"./europe-bank-account":96,"./normalize-api-fields":100,"./parse-client-token":101,"./paypal-account":102,"./request-driver":104,"./sepa-mandate":105,"./util":106,"braintree-3ds":115,"braintree-utilities":124,dup:2}],94:[function(t,e,i){arguments[4][3][0].apply(i,arguments)},{dup:3}],95:[function(t,e,i){arguments[4][4][0].apply(i,arguments)},{dup:4}],96:[function(t,e,i){arguments[4][5][0].apply(i,arguments)},{dup:5}],97:[function(t,e,i){arguments[4][6][0].apply(i,arguments)},{"./parse-client-token":101,"./request-driver":104,"./util":106,dup:6}],98:[function(t,e,i){arguments[4][7][0].apply(i,arguments)},{"./jsonp":99,dup:7}],99:[function(t,e,i){arguments[4][8][0].apply(i,arguments)},{"./util":106,dup:8}],100:[function(t,e,i){arguments[4][9][0].apply(i,arguments)},{dup:9}],101:[function(t,e,i){arguments[4][10][0].apply(i,arguments)},{"./polyfill":103,"braintree-utilities":124,dup:10}],102:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],103:[function(t,e,i){arguments[4][12][0].apply(i,arguments)},{dup:12}],104:[function(t,e,i){arguments[4][13][0].apply(i,arguments)},{"./jsonp-driver":98,dup:13}],105:[function(t,e,i){arguments[4][14][0].apply(i,arguments)},{dup:14}],106:[function(t,e,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],107:[function(t,e,i){arguments[4][16][0].apply(i,arguments)},{"./lib/client":93,"./lib/get-configuration":97,"./lib/jsonp":99,"./lib/jsonp-driver":98,"./lib/parse-client-token":101,"./lib/util":106,dup:16}],108:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],109:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],110:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],111:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],112:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":108,"./lib/events":109,"./lib/fn":110,"./lib/url":111,dup:21}],113:[function(t,e,i){arguments[4][22][0].apply(i,arguments)},{"../shared/receiver":117,"braintree-utilities":112,dup:22}],114:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{"./authorization_service":113,"braintree-utilities":112,dup:23}],115:[function(t,e,i){arguments[4][24][0].apply(i,arguments)},{"./client":114,"./vendor/json2":116,dup:24}],116:[function(t,e,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],117:[function(t,e,i){arguments[4][26][0].apply(i,arguments)},{"braintree-utilities":112,dup:26}],118:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],119:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],120:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],121:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],122:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],123:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":118,dup:32}],124:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":118,"./lib/dom":119,"./lib/events":120,"./lib/fn":121,"./lib/string":122,"./lib/url":123,dup:33}],125:[function(t,e){"use strict";function i(t){this.host=t||window,this.handlers=[],n.addEventListener(this.host,"message",n.bind(this.receive,this))}var n=t("braintree-utilities");i.prototype.receive=function(t){var e,n,o,r;try{o=JSON.parse(t.data)}catch(s){return}for(r=o.type,n=new i.Message(this,t.source,o.data),e=0;e<this.handlers.length;e++)this.handlers[e].type===r&&this.handlers[e].handler(n)},i.prototype.send=function(t,e,i){t.postMessage(JSON.stringify({type:e,data:i}),"*")},i.prototype.register=function(t,e){this.handlers.push({type:t,handler:e})},i.prototype.unregister=function(t,e){for(var i=this.handlers.length-1;i>=0;i--)if(this.handlers[i].type===t&&this.handlers[i].handler===e)return this.handlers.splice(i,1)},i.Message=function(t,e,i){this.bus=t,this.source=e,this.content=i},i.Message.prototype.reply=function(t,e){this.bus.send(this.source,t,e)},e.exports=i},{"braintree-utilities":135}],126:[function(t,e){"use strict";function i(t,e){this.bus=t,this.target=e,this.handlers=[],this.bus.register("publish",n.bind(this._handleMessage,this))}var n=t("braintree-utilities");i.prototype._handleMessage=function(t){var e,i=t.content,n=this.handlers[i.channel];if("undefined"!=typeof n)for(e=0;e<n.length;e++)n[e](i.data)},i.prototype.publish=function(t,e){this.bus.send(this.target,"publish",{channel:t,data:e})},i.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},i.prototype.unsubscribe=function(t,e){var i,n=this.handlers[t];if("undefined"!=typeof n)for(i=0;i<n.length;i++)n[i]===e&&n.splice(i,1)},e.exports=i},{"braintree-utilities":135}],127:[function(t,e){"use strict";function i(t){this.bus=t,this.frames=[],this.handlers=[]}i.prototype.subscribe=function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},i.prototype.registerFrame=function(t){this.frames.push(t)},i.prototype.unregisterFrame=function(t){for(var e=0;e<this.frames.length;e++)this.frames[e]===t&&this.frames.splice(e,1)},i.prototype.publish=function(t,e){var i,n=this.handlers[t];if("undefined"!=typeof n)for(i=0;i<n.length;i++)n[i](e);for(i=0;i<this.frames.length;i++)this.bus.send(this.frames[i],"publish",{channel:t,data:e})},i.prototype.unsubscribe=function(t,e){var i,n=this.handlers[t];if("undefined"!=typeof n)for(i=0;i<n.length;i++)n[i]===e&&n.splice(i,1)},e.exports=i},{}],128:[function(t,e){"use strict";function i(t,e){this.bus=t,this.target=e||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",n.bind(this._handleResponse,this))}var n=t("braintree-utilities");i.prototype._handleResponse=function(t){var e=t.content,i=this.callbacks[e.id];"function"==typeof i&&(i.apply(null,e.response),delete this.callbacks[e.id])},i.prototype.invoke=function(t,e,i){var n=this.counter++;this.callbacks[n]=i,this.bus.send(this.target,"rpc_request",{id:n,method:t,args:e})},e.exports=i},{"braintree-utilities":135}],129:[function(t,e){"use strict";function i(t){this.bus=t,this.methods={},this.bus.register("rpc_request",n.bind(this._handleRequest,this))}var n=t("braintree-utilities");i.prototype._handleRequest=function(t){var e,i=t.content,n=i.args||[],o=this.methods[i.method];"function"==typeof o&&(e=function(){t.reply("rpc_response",{id:i.id,response:Array.prototype.slice.call(arguments)})},n.push(e),o.apply(null,n))},i.prototype.define=function(t,e){this.methods[t]=e},e.exports=i},{"braintree-utilities":135}],130:[function(t,e){var i=t("./lib/message-bus"),n=t("./lib/pubsub-client"),o=t("./lib/pubsub-server"),r=t("./lib/rpc-client"),s=t("./lib/rpc-server");e.exports={MessageBus:i,PubsubClient:n,PubsubServer:o,RPCClient:r,RPCServer:s}},{"./lib/message-bus":125,"./lib/pubsub-client":126,"./lib/pubsub-server":127,"./lib/rpc-client":128,"./lib/rpc-server":129}],131:[function(t,e){"use strict";function i(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&t instanceof jQuery&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)}e.exports={normalizeElement:i}},{}],132:[function(t,e){"use strict";function i(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function n(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)}e.exports={removeEventListener:n,addEventListener:i}},{}],133:[function(t,e){"use strict";function i(t){return"[object Function]"===Object.prototype.toString.call(t)}function n(t,e){return function(){t.apply(e,arguments)}}e.exports={bind:n,isFunction:i}},{}],134:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],135:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":131,"./lib/events":132,"./lib/fn":133,"./lib/url":134,dup:21}],136:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],137:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],138:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],139:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],140:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],141:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":136,dup:32}],142:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":136,"./lib/dom":137,"./lib/events":138,"./lib/fn":139,"./lib/string":140,"./lib/url":141,dup:33}],143:[function(t,e){function i(t){var e=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return{overflow:e.overflow||"",height:t.style.height||""}}function n(){return{html:{node:document.documentElement,styles:i(document.documentElement)},body:{node:document.body,styles:i(document.body)}}}function o(t,e){if(!t)throw new Error('Parameter "clientToken" cannot be null');e=e||{},this._clientToken=r.parseClientToken(t),this._clientOptions=e,this.container=e.container,this.merchantPageDefaultStyles=null,this.paymentMethodNonceInputField=e.paymentMethodNonceInputField,this.frame=null,this.popup=null,this.insertFrameFunction=e.insertFrame,this.onSuccess=e.onSuccess,this.onCancelled=e.onCancelled,this.onUnsupported=e.onUnsupported,this.loggedInView=null,this.loggedOutView=null,this.insertUI=!0}var r=t("braintree-api"),s=t("braintree-rpc"),a=t("braintree-utilities"),l=t("./logged-in-view"),h=t("./logged-out-view"),c=t("./overlay-view"),u=t("../shared/util/browser"),d=t("../shared/util/dom"),p=t("../shared/constants"),f=t("../shared/util/util"),m=t("../shared/get-locale");o.prototype.getViewerUrl=function(){var t=this._clientToken.paypal.assetsUrl;return t+"/pwpp/"+p.VERSION+"/html/braintree-frame.html"},o.prototype.getProxyUrl=function(){var t=this._clientToken.paypal.assetsUrl;return t+"/pwpp/"+p.VERSION+"/html/proxy-frame.html"},o.prototype.initialize=function(){if(!this._clientToken.paypalEnabled)return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("PayPal is not enabled")));if(!this._isBrowserSecure())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("unsupported protocol detected")));if(this._isAriesCapable()){if(!this._isAriesSupportedCurrency())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("This PayPal integration does not support this currency")));if(!this._isAriesSupportedCountries())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("This PayPal integration does not support this locale")));if(!this._isValidAmount())return void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("Amount must be a number")))}return this._isMisconfiguredUnvettedMerchant()?void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("Unvetted merchant client token does not include a payee email"))):(this._overrideClientTokenProperties(),u.isProxyFrameRequired()&&this._insertProxyFrame(),this._setupDomElements(),this._setupPaymentMethodNonceInputField(),this._setupViews(),void this._createRpcServer())},o.prototype._isSupportedOption=function(t,e){for(var i=e.length,n=!1,o=0;i>o;o++)t.toLowerCase()===e[o].toLowerCase()&&(n=!0);return n},o.prototype._isAriesSupportedCurrency=function(){return this._isSupportedOption(this._clientOptions.currency,p.ARIES_SUPPORTED_CURRENCIES)},o.prototype._isAriesSupportedCountries=function(){return this._isSupportedOption(m(this._clientOptions.locale).split("_")[1],p.ARIES_SUPPORTED_COUNTRIES)},o.prototype._isValidAmount=function(){var t=parseFloat(this._clientOptions.amount);return"number"==typeof t&&!isNaN(t)&&t>=0},o.prototype._isMisconfiguredUnvettedMerchant=function(){return this._clientToken.paypal.unvettedMerchant&&(!this._isAriesCapable()||!this._clientToken.paypal.payeeEmail)},o.prototype._isBrowserSecure=function(){return a.isBrowserHttps()||u.isPopupSupported()||this._clientToken.paypal.allowHttp},o.prototype._overrideClientTokenProperties=function(){this._clientOptions.displayName&&(this._clientToken.paypal.displayName=this._clientOptions.displayName)},o.prototype._setupDomElements=function(){this.insertUI&&(this.container=a.normalizeElement(this.container))},o.prototype._setupPaymentMethodNonceInputField=function(){if(this.insertUI){var t=this.paymentMethodNonceInputField;a.isFunction(t)||(t=void 0!==t?a.normalizeElement(t):this._createPaymentMethodNonceInputField(),this.paymentMethodNonceInputField=t)}},o.prototype._setupViews=function(){var t=this._clientToken.paypal.assetsUrl;this.insertUI&&(this.loggedInView=new l({container:this.container,assetsUrl:t}),this.loggedOutView=new h({assetsUrl:t,container:this.container,isCheckout:this._isAriesCapable(),locale:this._clientOptions.locale,merchantId:"merchantId"}),a.addEventListener(this.loggedOutView.container,"click",a.bind(this._handleContainerClick,this)),a.addEventListener(this.loggedInView.logoutNode,"click",a.bind(this._handleLogout,this)))},o.prototype._createRpcServer=function(){var t=new s.MessageBus(window),e=new s.RPCServer(t,window);e.define("getClientToken",a.bind(this._handleGetClientToken,this)),e.define("getClientOptions",a.bind(this._handleGetClientOptions,this)),e.define("closePayPalModal",a.bind(this._handleCloseMessage,this)),e.define("receivePayPalData",a.bind(this._handleSuccessfulAuthentication,this))},o.prototype._createPaymentMethodNonceInputField=function(){var t=document.createElement("input");return t.name="payment_method_nonce",t.type="hidden",this.container.appendChild(t)},o.prototype._createFrame=function(){var t,e=document.createElement("iframe");return this._isAriesCapable()?(t=p.ARIES_FRAME_NAME,e.style.background="#FFFFFF"):t=p.FRAME_NAME,e.src=this.getViewerUrl(),e.id=t,e.name=t,e.allowTransparency=!0,e.height="100%",e.width="100%",e.frameBorder=0,e.style.position=u.isMobile()?"absolute":"fixed",e.style.top=0,e.style.left=0,e.style.bottom=0,e.style.zIndex=20001,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e},o.prototype._removeFrame=function(t){t=t||document.body,this.frame&&t.contains(this.frame)&&(t.removeChild(this.frame),this._unlockMerchantWindowSize())},o.prototype._insertFrame=function(){this.insertFrameFunction?this.insertFrameFunction(this.getViewerUrl()):(this.frame=this._createFrame(),document.body.appendChild(this.frame)),this._lockMerchantWindowSize()},o.prototype._handleContainerClick=function(t){function e(t){return t.className.match(/paypal-button(?!-widget)/)||"braintree-paypal-button"===t.id}var i=t.target||t.srcElement;(e(i)||e(i.parentNode))&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this._open())},o.prototype._setMerchantPageDefaultStyles=function(){this.merchantPageDefaultStyles=n()},o.prototype._open=function(){this._isAriesCapable()&&this._addCorrelationIdToClientToken(),u.isPopupSupported()?this._openPopup():this._openModal()},o.prototype._close=function(){u.isPopupSupported()?this._closePopup():this._closeModal()},o.prototype._openModal=function(){this._removeFrame(),this._insertFrame()},o.prototype._isAriesCapable=function(){return!(!this._clientOptions.singleUse||!this._clientOptions.amount||!this._clientOptions.currency||this._clientOptions.demo)},o.prototype._openPopup=function(){var t,e,i,n=[],o=window.outerWidth||document.documentElement.clientWidth,r=window.outerHeight||document.documentElement.clientHeight,s="undefined"==typeof window.screenY?window.screenTop:window.screenY,a="undefined"==typeof window.screenX?window.screenLeft:window.screenX;this._isAriesCapable()?(t=p.ARIES_POPUP_NAME,i=p.ARIES_POPUP_HEIGHT,e=p.ARIES_POPUP_WIDTH):(t=p.POPUP_NAME,i=p.POPUP_HEIGHT,e=p.POPUP_WIDTH);var l=(o-e)/2+a,h=(r-i)/2+s;return n.push("height="+i),n.push("width="+e),n.push("top="+h),n.push("left="+l),n.push(p.POPUP_OPTIONS),this.popup=window.open(this.getViewerUrl(),t,n.join(",")),u.isOverlaySupported()&&(this.overlayView=new c(this.popup,this._clientToken.paypal.assetsUrl),this.overlayView.render()),this.popup.focus(),this.popup},o.prototype._addCorrelationIdToClientToken=function(){this._clientToken.correlationId=f.generateUid()},o.prototype._createProxyFrame=function(){var t=document.createElement("iframe");return t.src=this.getProxyUrl(),t.id=p.BRIDGE_FRAME_NAME,t.name=p.BRIDGE_FRAME_NAME,t.allowTransparency=!0,t.height=0,t.width=0,t.frameBorder=0,t.style.position="static",t.style.padding=0,t.style.margin=0,t.style.border=0,t.style.outline="none",t},o.prototype._insertProxyFrame=function(){this.proxyFrame=this._createProxyFrame(),document.body.appendChild(this.proxyFrame)},o.prototype._closeModal=function(){this._removeFrame()},o.prototype._closePopup=function(){this.popup&&(this.popup.close(),this.popup=null),this.overlayView&&u.isOverlaySupported()&&this.overlayView.remove()},o.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:void 0,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientToken.paypal.displayName,paypalBaseUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}},o.prototype._handleGetClientToken=function(t){t(this._clientTokenData())},o.prototype._clientOptionsData=function(){return{demo:this._clientOptions.demo||!1,locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1,enableAries:this._isAriesCapable(),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null}},o.prototype._handleGetClientOptions=function(t){t(this._clientOptionsData())},o.prototype._handleSuccessfulAuthentication=function(t){this._close(),t.type=p.NONCE_TYPE,a.isFunction(this.paymentMethodNonceInputField)?this.paymentMethodNonceInputField(t.nonce):(this._showLoggedInContent(t.details.email),this._setNonceInputValue(t.nonce)),a.isFunction(this.onSuccess)&&this.onSuccess(t)},o.prototype._lockMerchantWindowSize=function(){this._setMerchantPageDefaultStyles(),document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},o.prototype._unlockMerchantWindowSize=function(){this.merchantPageDefaultStyles&&(document.documentElement.style.height=this.merchantPageDefaultStyles.html.styles.height,document.documentElement.style.overflow=this.merchantPageDefaultStyles.html.styles.overflow,document.body.style.height=this.merchantPageDefaultStyles.body.styles.height,document.body.style.overflow=this.merchantPageDefaultStyles.body.styles.overflow)},o.prototype._handleCloseMessage=function(){this._removeFrame()},o.prototype._showLoggedInContent=function(t){this.loggedOutView.hide(),d.setTextContent(this.loggedInView.emailNode,t),this.loggedInView.show()},o.prototype._handleLogout=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,this.loggedInView.hide(),this.loggedOutView.show(),this._setNonceInputValue(""),a.isFunction(this.onCancelled)&&this.onCancelled()},o.prototype._setNonceInputValue=function(t){this.paymentMethodNonceInputField.value=t},e.exports=o},{"../shared/constants":147,"../shared/get-locale":149,"../shared/util/browser":154,"../shared/util/dom":155,"../shared/util/util":156,"./logged-in-view":144,"./logged-out-view":145,"./overlay-view":146,"braintree-api":107,"braintree-rpc":130,"braintree-utilities":142}],144:[function(t,e){function i(t){this.options=t,this.container=this.createViewContainer(),this.createPayPalName(),this.emailNode=this.createEmailNode(),this.logoutNode=this.createLogoutNode()}var n=t("../shared/constants");i.prototype.createViewContainer=function(){var t=document.createElement("div");t.id="braintree-paypal-loggedin";var e=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.assetsUrl+"/pwpp/"+n.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.assetsUrl+"/pwpp/"+n.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");return t.style.cssText=e,this.options.container.appendChild(t),t},i.prototype.createPayPalName=function(){var t=document.createElement("span");t.id="bt-pp-name",t.innerHTML="PayPal";var e=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},i.prototype.createEmailNode=function(){var t=document.createElement("span");t.id="bt-pp-email";var e=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},i.prototype.createLogoutNode=function(){var t=document.createElement("button");t.id="bt-pp-cancel",t.innerHTML="Cancel";var e=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},i.prototype.show=function(){this.container.style.display="block"},i.prototype.hide=function(){this.container.style.display="none"},e.exports=i},{"../shared/constants":147}],145:[function(t,e){function i(t){this.options=t,this.assetsUrl=this.options.assetsUrl,this.container=this.createViewContainer(),this.options.isCheckout?this.createCheckoutWithPayPalButton():this.createPayWithPayPalButton()}var n=(t("braintree-utilities"),t("../shared/constants")),o=t("../shared/get-locale");i.prototype.createViewContainer=function(){var t=document.createElement("div");return t.id="braintree-paypal-loggedout",this.options.container.appendChild(t),t},i.prototype.createPayWithPayPalButton=function(){var t=document.createElement("a");t.id="braintree-paypal-button",t.href="#";var e=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");t.style.cssText=e;var i=new Image;i.src=this.assetsUrl+"/pwpp/"+n.VERSION+"/images/pay-with-paypal.png",i.setAttribute("alt","Pay with PayPal");var o=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";");i.style.cssText=o,t.appendChild(i),this.container.appendChild(t)},i.prototype.createCheckoutWithPayPalButton=function(){var t=document.createElement("script");t.src="//www.paypalobjects.com/api/button.js",t.async=!0,t.setAttribute("data-merchant",this.options.merchantId),t.setAttribute("data-button","checkout"),t.setAttribute("data-type","button"),t.setAttribute("data-width","150"),t.setAttribute("data-height","44"),t.setAttribute("data-lc",o(this.options.locale)),this.container.appendChild(t)},i.prototype.show=function(){this.container.style.display="block"},i.prototype.hide=function(){this.container.style.display="none"},e.exports=i},{"../shared/constants":147,"../shared/get-locale":149,"braintree-utilities":142}],146:[function(t,e){function i(t,e){this.popup=t,this.assetsUrl=e,this.spriteSrc=this.assetsUrl+"/pwpp/"+o.VERSION+"/images/pp_overlay_sprite.png",this._create(),this._setupEvents(),this._pollForPopup()}var n=t("braintree-utilities"),o=t("../shared/constants");i.prototype.render=function(){document.body.contains(this.el)||document.body.appendChild(this.el)},i.prototype.remove=function(){document.body.contains(this.el)&&document.body.removeChild(this.el)},i.prototype._create=function(){this.el=document.createElement("div"),this.el.className="bt-overlay",this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']),this.el.appendChild(this._createCloseIcon()),this.el.appendChild(this._createMessage())},i.prototype._createCloseIcon=function(){return this.closeIcon=document.createElement("div"),this.closeIcon.className="bt-close-overlay",this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]),this.closeIcon},i.prototype._createMessage=function(){var t=document.createElement("div");return this._setStyles(t,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]),t.appendChild(this._createLogo()),t.appendChild(this._createExplanation()),t.appendChild(this._createFocusLink()),t},i.prototype._createExplanation=function(){var t=document.createElement("div");return this._setStyles(t,["color: #FFF","margin-bottom: 20px"]),t.innerHTML="Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",t},i.prototype._createLogo=function(){var t=document.createElement("div");return this._setStyles(t,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]),t},i.prototype._createFocusLink=function(){return this.focusLink=document.createElement("a"),this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]),this.focusLink.innerHTML="Continue",this.focusLink},i.prototype._setStyles=function(t,e){var i=e.join(";");t.style.cssText=i},i.prototype._setupEvents=function(){n.addEventListener(this.closeIcon,"click",n.bind(this._handleClose,this)),n.addEventListener(this.focusLink,"click",n.bind(this._handleFocus,this))},i.prototype._handleClose=function(t){t.preventDefault(),this.remove(),this.popup.close()},i.prototype._handleFocus=function(t){t.preventDefault(),this.popup.focus()},i.prototype._pollForPopup=function(){var t=setInterval(n.bind(function(){this.popup&&this.popup.closed&&(clearInterval(t),this.remove())},this),100)},e.exports=i},{"../shared/constants":147,"braintree-utilities":142}],147:[function(t,e,i){var n="1.3.5";i.VERSION=n,i.POPUP_NAME="braintree_paypal_popup",i.ARIES_POPUP_NAME="PPFrameRedirect",i.FRAME_NAME="braintree-paypal-frame",i.ARIES_FRAME_NAME="PPFrameRedirect",i.POPUP_PATH="/pwpp/"+n+"/html/braintree-frame.html",i.POPUP_OPTIONS="resizable,scrollbars",i.POPUP_HEIGHT=470,i.POPUP_WIDTH=410,i.ARIES_POPUP_HEIGHT=535,i.ARIES_POPUP_WIDTH=450,i.BRIDGE_FRAME_NAME="bt-proxy-frame",i.ARIES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD"],i.ARIES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT"],i.NONCE_TYPE="PayPalAccount",i.ILLEGAL_XHR_ERROR="Illegal XHR request attempted"},{}],148:[function(t,e){"use strict";e.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],149:[function(t,e){"use strict";function i(t){return-1!==t.indexOf("_")&&5===t.length}function n(t){var e;for(var i in r)r.hasOwnProperty(i)&&(i===t?e=r[i]:r[i]===t&&(e=r[i]));return e}function o(t){var e;if(t=t?t.toLowerCase():"us",t=t.replace(/-/g,"_"),e=i(t)?t:n(t)){var o=e.split("_");return[o[0],o[1].toUpperCase()].join("_")}return"en_US"}var r=t("../shared/data/country-code-lookup");e.exports=o},{"../shared/data/country-code-lookup":148}],150:[function(t,e){function i(){return h.matchUserAgent("Android")&&!n()}function n(){return h.matchUserAgent("Chrome")||h.matchUserAgent("CriOS")}function o(){return h.matchUserAgent("Firefox")}function r(){return h.matchUserAgent("Trident")||h.matchUserAgent("MSIE")}function s(){return h.matchUserAgent("Opera")||h.matchUserAgent("OPR")}function a(){return s()&&"[object OperaMini]"===c.call(window.operamini)}function l(){return h.matchUserAgent("Safari")&&!n()&&!i()}var h=t("./useragent"),c=Object.prototype.toString;
e.exports={isAndroid:i,isChrome:n,isFirefox:o,isIE:r,isOpera:s,isOperaMini:a,isSafari:l}},{"./useragent":153}],151:[function(t,e){function i(){return!n()&&(s.isAndroid()||s.isIpod()||s.isIphone()||r.matchUserAgent("IEMobile"))}function n(){return s.isIpad()||s.isAndroid()&&!r.matchUserAgent("Mobile")}function o(){return!i()&&!n()}var r=t("./useragent"),s=t("./platform");e.exports={isMobile:i,isTablet:n,isDesktop:o}},{"./platform":152,"./useragent":153}],152:[function(t,e){function i(){return a.matchUserAgent("Android")}function n(){return a.matchUserAgent("iPad")}function o(){return a.matchUserAgent("iPod")}function r(){return a.matchUserAgent("iPhone")&&!o()}function s(){return n()||o()||r()}var a=t("./useragent");e.exports={isAndroid:i,isIpad:n,isIpod:o,isIphone:r,isIos:s}},{"./useragent":153}],153:[function(t,e,i){function n(){return r}function o(t){var e=i.getNativeUserAgent(),n=e.match(t);return n?!0:!1}var r=window.navigator.userAgent;i.getNativeUserAgent=n,i.matchUserAgent=o},{}],154:[function(t,e){function i(){return n()&&window.outerWidth<600}function n(){return f.test(p)}function o(){return!!window.postMessage}function r(){if(h.isOperaMini())return!1;if(c.isDesktop())return!0;if(c.isMobile()||c.isTablet()){if(h.isIE())return!1;if(u.isAndroid())return!0;if(u.isIos())return h.isSafari()&&d.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)||h.isChrome()?!1:!0}return!1}function s(){if(h.isIE()&&d.matchUserAgent(/MSIE 8\.0/))return!1;try{return window.self===window.top}catch(t){return!1}}function a(){return h.isIE()&&!l()}function l(){var t=null,e="";try{new ActiveXObject("")}catch(i){e=i.name}try{t=!!new ActiveXObject("htmlfile")}catch(i){t=!1}return t="ReferenceError"!==e&&t===!1?!1:!0,!t}var h=t("../useragent/browser"),c=t("../useragent/device"),u=t("../useragent/platform"),d=t("../useragent/useragent"),p=window.navigator.userAgent,f=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;e.exports={isMobile:i,isMobileDevice:n,detectedPostMessage:o,isPopupSupported:r,isOverlaySupported:s,isProxyFrameRequired:a}},{"../useragent/browser":150,"../useragent/device":151,"../useragent/platform":152,"../useragent/useragent":153}],155:[function(t,e){function i(t,e){var i="innerText";document&&document.body&&"textContent"in document.body&&(i="textContent"),t[i]=e}e.exports={setTextContent:i}},{}],156:[function(t,e){function i(){for(var t="",e=0;32>e;e++){var i=Math.floor(16*Math.random());t+=i.toString(16)}return t}function n(t){return/^(true|1)$/i.test(t)}function o(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}function r(t){var e=t.indexOf("?"),i={};if(e>=0&&(t=t.substr(e+1)),0!==t.length){for(var n=t.split("&"),o=0,r=n.length;r>o;o++){var s=n[o],a=s.indexOf("="),l=s.substr(0,a),h=s.substr(a+1),c=decodeURIComponent(h);c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"false"===c&&(c=!1),(void 0===c||"true"===c)&&(c=!0),i[l]=c}return i}}function s(t){return t&&"[object Function]"===Object.prototype.toString.call(t)}var a="function"==typeof String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/,"")},l="function"==typeof window.btoa?function(t){return window.btoa(t)}:function(t){for(var e,i,n,o,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;c<t.length;)e=t.charCodeAt(c++),i=t.charCodeAt(c++),n=t.charCodeAt(c++),o=e>>2,r=(3&e)<<4|i>>4,s=(15&i)<<2|n>>6,a=63&n,isNaN(i)?s=a=64:isNaN(n)&&(a=64),h=h+l.charAt(o)+l.charAt(r)+l.charAt(s)+l.charAt(a);return h};e.exports={trim:a,btoa:l,generateUid:i,castToBoolean:n,htmlEscape:o,parseUrlParams:r,isFunction:s}},{}],157:[function(t,e,i){arguments[4][125][0].apply(i,arguments)},{"braintree-utilities":167,dup:125}],158:[function(t,e,i){arguments[4][126][0].apply(i,arguments)},{"braintree-utilities":167,dup:126}],159:[function(t,e,i){arguments[4][127][0].apply(i,arguments)},{dup:127}],160:[function(t,e,i){arguments[4][128][0].apply(i,arguments)},{"braintree-utilities":167,dup:128}],161:[function(t,e,i){arguments[4][129][0].apply(i,arguments)},{"braintree-utilities":167,dup:129}],162:[function(t,e,i){arguments[4][130][0].apply(i,arguments)},{"./lib/message-bus":157,"./lib/pubsub-client":158,"./lib/pubsub-server":159,"./lib/rpc-client":160,"./lib/rpc-server":161,dup:130}],163:[function(t,e,i){arguments[4][131][0].apply(i,arguments)},{dup:131}],164:[function(t,e,i){arguments[4][132][0].apply(i,arguments)},{dup:132}],165:[function(t,e,i){arguments[4][133][0].apply(i,arguments)},{dup:133}],166:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],167:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":163,"./lib/events":164,"./lib/fn":165,"./lib/url":166,dup:21}],168:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],169:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],170:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],171:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],172:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],173:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":168,dup:32}],174:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":168,"./lib/dom":169,"./lib/events":170,"./lib/fn":171,"./lib/string":172,"./lib/url":173,dup:33}],175:[function(t,e){"use strict";function i(t){this.apiClient=t}var n=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];i.prototype.attach=function(t){function e(e){t.define(e,function(){i.apiClient[e].apply(i.apiClient,arguments)})}var i=this,o=0,r=n.length;for(o;r>o;o++)e(n[o])},e.exports=i},{}],176:[function(t,e){"use strict";function i(t,e){var i=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return i[e]}function n(){return{html:{height:s.style.height||"",overflow:i(s,"overflow"),position:i(s,"position")},body:{height:a.style.height||"",overflow:i(a,"overflow")}}}function o(){var t=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return t}function r(t){var e,i,n;this.encodedClientToken=t.clientToken,this.paypalOptions=t.paypal,this.container=null,this.merchantFormManager=null,this.root=t.root,this.configurationRequests=[],this.braintreeApiClient=l.configure({clientToken:t.clientToken,integration:"dropin"}),this.paymentMethodNonceReceivedCallback=t.paymentMethodNonceReceived,this.clientToken=l.parseClientToken(t.clientToken),this.bus=new c.MessageBus(this.root),this.rpcServer=new c.RPCServer(this.bus),this.apiProxyServer=new d(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),e=t.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+y+"/inline-frame.html",i=t.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+y+"/modal-frame.html",s=document.documentElement,a=document.body,this.frames={inline:this._createFrame(e,g.INLINE_FRAME_NAME),modal:this._createFrame(i,g.MODAL_FRAME_NAME)},this.container=u.normalizeElement(t.container,"Unable to find valid container."),n=u.normalizeElement(t.form||this._findClosest(this.container,"form")),this.merchantFormManager=new p({form:n,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.clientToken.paypalEnabled&&this.clientToken.paypal&&(u.isBrowserHttps()||this.clientToken.paypal.allowHttp)&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}var s,a,l=t("braintree-api"),h=t("braintree-bus"),c=t("braintree-rpc"),u=t("braintree-utilities"),d=t("./api-proxy-server"),p=t("./merchant-form-manager"),f=t("./frame-container"),m=t("../shared/paypal-service"),g=t("../shared/constants"),v=t("braintree-paypal/src/shared/util/browser"),y="1.4.0";r.prototype.initialize=function(){var t,e=this;this._initializeModal(),h.emit(h.events.ASYNC_DEPENDENCY_INITIALIZING),this.container.appendChild(this.frames.inline.element),a.appendChild(this.frames.modal.element),this.rpcServer.define("receiveSharedCustomerIdentifier",function(i){for(e.braintreeApiClient.attrs.sharedCustomerIdentifier=i,e.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store",t=0;t<e.configurationRequests.length;t++)e.configurationRequests[t](e.encodedClientToken);e.configurationRequests=[]}),h.on(h.events.PAYMENT_METHOD_GENERATED,u.bind(this._handleAltPayData,this)),this.rpcServer.define("getConfiguration",function(t){t({clientToken:e.encodedClientToken,merchantHttps:u.isBrowserHttps()})}),this.rpcServer.define("getPayPalOptions",function(t){t(e.paypalOptions)}),this.rpcServer.define("selectPaymentMethod",function(t){e.frames.modal.rpcClient.invoke("selectPaymentMethod",[t]),e._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(t){e.merchantFormManager.setNoncePayload(t),e.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[t])}),this.rpcServer.define("sendUsedPaymentMethod",function(t){e.frames.inline.rpcClient.invoke("selectPaymentMethod",[t])}),this.rpcServer.define("sendUnlockedNonce",function(t){e.merchantFormManager.setNoncePayload(t)}),this.rpcServer.define("clearNonce",function(){e.merchantFormManager.clearNoncePayload()}),this.rpcServer.define("closeDropInModal",function(){e._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(t){e.frames.inline.element.style.height=t+"px"}),this.bus.register("ready",function(t){t.source===e.frames.inline.element.contentWindow?e.frames.inline.rpcClient=new c.RPCClient(e.bus,t.source):t.source===e.frames.modal.element.contentWindow&&(e.frames.modal.rpcClient=new c.RPCClient(e.bus,t.source))})},r.prototype._createFrame=function(t,e){return new f(t,e)},r.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=o()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},r.prototype._lockMerchantWindowSize=function(){setTimeout(function(){s.style.overflow="hidden",a.style.overflow="hidden",a.style.height="100%",o()&&(s.style.position="relative",s.style.height=window.innerHeight+"px")},160)},r.prototype._unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;a.style.height=t.body.height,a.style.overflow=t.body.overflow,s.style.overflow=t.html.overflow,o()&&(s.style.height=t.html.height,s.style.position=t.html.position)},r.prototype._showModal=function(){var t=this,e=this.frames.modal.element;this.merchantPageDefaultStyles=n(),e.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){t._lockMerchantWindowSize(),e.contentWindow.focus()},200)})},r.prototype._hideModal=function(){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none"},r.prototype._configurePayPal=function(){v.isPopupSupported()||(this.ppClient=new m({clientToken:this.clientToken,paypal:this.paypalOptions}),this.rpcServer.define("openPayPalModal",u.bind(this.ppClient._openModal,this.ppClient))),this.rpcServer.define("receivePayPalData",u.bind(this._handleAltPayData,this))},r.prototype._handleAltPayData=function(t){this.merchantFormManager.setNoncePayload(t),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[t]),this.frames.modal.rpcClient.invoke("modalViewClose")},r.prototype._findClosest=function(t,e){e=e.toUpperCase();do if(t.nodeName===e)return t;while(t=t.parentNode);throw"Unable to find a valid "+e},e.exports=r},{"../shared/constants":180,"../shared/paypal-service":181,"./api-proxy-server":175,"./frame-container":178,"./merchant-form-manager":179,"braintree-api":72,"braintree-bus":90,"braintree-paypal/src/shared/util/browser":154,"braintree-rpc":162,"braintree-utilities":174}],177:[function(t,e){"use strict";function i(t,e){var i;return e.clientToken=t,i=new n(e),i.initialize(),i}var n=t("./client"),o="1.4.0";e.exports={create:i,VERSION:o}},{"./client":176}],178:[function(t,e){"use strict";function i(){var t,e=document.createElement("fakeelement");for(t in a)if("undefined"!=typeof e.style[t])return a[t];return null}function n(t){function e(i){i.target===t&&"height"===i.propertyName&&(r.emit(r.events.ASYNC_DEPENDENCY_READY),t.removeEventListener(n,e))}var n=i();n?t.addEventListener(n,e):setTimeout(function(){r.emit(r.events.ASYNC_DEPENDENCY_READY)},500)}function o(t,e){this.element=document.createElement("iframe"),this.element.setAttribute("name",e),this.element.setAttribute("allowtransparency","true"),this.element.setAttribute("width","100%"),this.element.setAttribute("height","68"),this.element.setAttribute("style","-webkit-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -moz-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -ms-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -o-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000);"),this.element.src=t,this.element.setAttribute("frameborder","0"),this.element.setAttribute("allowtransparency","true"),this.element.style.border="0",this.element.style.zIndex="9999",e===s.INLINE_FRAME_NAME&&n(this.element)}var r=t("braintree-bus"),s=t("../shared/constants"),a={transition:"transitionend","-o-transition":"otransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};e.exports=o},{"../shared/constants":180,"braintree-bus":90}],179:[function(t,e){"use strict";function i(t){this.form=t.form,this.frames=t.frames,this.onSubmit=t.onSubmit,this.apiClient=t.apiClient}var n=t("braintree-utilities");i.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},i.prototype.setNoncePayload=function(t){this.noncePayload=t},i.prototype.clearNoncePayload=function(){this.noncePayload=null},i.prototype._isSubmitBased=function(){return!this.onSubmit},i.prototype._isCallbackBased=function(){return!!this.onSubmit},i.prototype._setElements=function(){var t;this.form.payment_method_nonce||(t=document.createElement("input"),t.type="hidden",t.name="payment_method_nonce",this.form.appendChild(t)),this.nonceField=this.form.payment_method_nonce},i.prototype._setEvents=function(){var t=this;n.addEventListener(this.form,"submit",function(){t._handleFormSubmit.apply(t,arguments)})},i.prototype._handleFormSubmit=function(t){this._shouldSubmit()||(t&&t.preventDefault?t.preventDefault():t.returnValue=!1,this.noncePayload&&this.noncePayload.nonce?this._handleNonceReply(t):this.frames.inline.rpcClient.invoke("requestNonce",[],n.bind(function(e){this.setNoncePayload(e),this._handleNonceReply(t)},this)))},i.prototype._shouldSubmit=function(){return this._isCallbackBased()?!1:this.nonceField.value.length>0},i.prototype._handleNonceReply=function(t){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",n.bind(function(){var e=this.noncePayload;e.originalEvent=t,this.onSubmit(e),setTimeout(n.bind(function(){this.frames.inline.rpcClient.invoke("clearLoadingState")},this),200)},this)):this._triggerFormSubmission()},i.prototype._triggerFormSubmission=function(){this.nonceField.value=this.noncePayload.nonce,this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",n.bind(function(){"function"==typeof this.form.submit?this.form.submit():this.form.querySelector('[type="submit"]').click()},this))},e.exports=i},{"braintree-utilities":174}],180:[function(t,e){"use strict";e.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"]}},{}],181:[function(t,e){"use strict";function i(t){var e=t.clientToken,i=t.paypal||{},o=new n(e,{container:document.createElement("div"),displayName:i.displayName,locale:i.locale,singleUse:i.singleUse,amount:i.amount,currency:i.currency,onSuccess:i.onSuccess,enableShippingAddress:i.enableShippingAddress,shippingAddressOverride:i.shippingAddressOverride});return o.initialize(),o}var n=t("braintree-paypal/src/external/client");e.exports=i},{"braintree-paypal/src/external/client":143}],182:[function(t,e){(function(t){"use strict";function i(t,e){e=e||{};var o,s,a=t.children;for(s=0;s<a.length;s++)if(o=a[s],r(o)){var l=o.getAttribute("data-braintree-name");"postal_code"===l?e.billingAddress={postalCode:o.value}:e[l]=o.value,n(o)}else o.children&&o.children.length>0&&i(o,e);return e}function n(t){try{t.attributes.removeNamedItem("name")}catch(e){}}function o(t){i(t)}function r(t){return t.nodeType===s&&t.attributes["data-braintree-name"]}var s=t.Node?t.Node.ELEMENT_NODE:1;e.exports={extractValues:i,scrubAllAttributes:o,scrubAttributes:n,isBraintreeNode:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(t,e){"use strict";function i(t,e,i,n){this.client=t,this.htmlForm=e,this.isCreditCardForm=n===!1?!1:!0,this.paymentMethodNonceInput=i,this.model=new s,this.setEvents()}var n=t("braintree-utilities"),o=t("./fields"),r=t("braintree-bus"),s=t("./models/payment-method-model"),a={message:"Unable to process payments at this time",type:"IMMEDIATE"};i.prototype.setEvents=function(){this.onSubmitHandler=n.bind(this.handleSubmit,this),this.onExternalNonceReceived=n.bind(this.onExternalNonceReceived,this),this.clearExternalNonce=n.bind(this.clearExternalNonce,this),n.addEventListener(this.htmlForm,"submit",this.onSubmitHandler),r.on(r.events.PAYMENT_METHOD_GENERATED,this.onExternalNonceReceived),r.on(r.events.PAYMENT_METHOD_CANCELLED,this.clearExternalNonce)},i.prototype.handleSubmit=function(t){var e;return t.preventDefault?t.preventDefault():t.returnValue=!1,this.isCreditCardForm?(e=this.model.get("type"),e&&"CreditCard"!==e?(o.scrubAllAttributes(this.htmlForm),void this.onNonceReceived(null,this.model.attributes)):void this.client.tokenizeCard(o.extractValues(this.htmlForm),n.bind(function(t,e,i){t?this.onNonceReceived(a,null):(this.model.set({nonce:e,type:i.type,details:i.details}),this.onNonceReceived(null,this.model.attributes))},this))):void this.onNonceReceived(null,this.model.attributes)},i.prototype.writeNonceToDOM=function(){this.paymentMethodNonceInput.value=this.model.get("nonce")},i.prototype.onExternalNonceReceived=function(t){this.model.set(t),this.writeNonceToDOM()},i.prototype.clearExternalNonce=function(){this.model.reset()},i.prototype.onNonceReceived=function(t){var e=this.htmlForm;return t?void r.emit(r.events.ERROR,a):(n.removeEventListener(e,"submit",this.onSubmitHandler),this.writeNonceToDOM(),void(e.submit&&("function"==typeof e.submit||e.submit.call)?e.submit():setTimeout(function(){e.querySelector('[type="submit"]').click()},1)))},e.exports=i},{"./fields":182,"./models/payment-method-model":185,"braintree-bus":188,"braintree-utilities":195}],184:[function(t,e){"use strict";e.exports=function(t){var e;if("object"==typeof t)return t;e="payment_method_nonce","string"==typeof t&&(e=t);var i=document.createElement("input");return i.name=e,i.type="hidden",i}},{}],185:[function(t,e){"use strict";function i(){this.reset()}i.prototype.get=function(t){return this.attributes[t]},i.prototype.set=function(t){this.attributes=t||{}},i.prototype.reset=function(){this.attributes={}},e.exports=i},{}],186:[function(t,e){"use strict";e.exports=function(t){for(var e=t.getElementsByTagName("*"),i={},n=0;n<e.length;n++){var o=e[n].getAttribute("data-braintree-name");i[o]=!0}if(!i.number)throw new Error('Unable to find an input with data-braintree-name="number" in your form. Please add one.');if(i.expiration_date){if(i.expiration_month||i.expiration_year)throw new Error('You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".')}else{if(!i.expiration_month&&!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.');if(!i.expiration_month)throw new Error('Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.');if(!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.')}}},{}],187:[function(t,e){"use strict";function i(t,e){var i,s,a=document.getElementById(e.id),l=e&&e.hasOwnProperty("useCreditCard")?e.useCreditCard:!0;if(!a)throw new Error('Unable to find form with id: "'+e.id+'"');return l&&o(a),i=r(e.paymentMethodNonceInputField),a.appendChild(i),s=new n(t,a,i,l)}var n=t("./lib/form"),o=t("./lib/validate-annotations"),r=t("./lib/get-nonce-input");e.exports={setup:i}},{"./lib/form":183,"./lib/get-nonce-input":184,"./lib/validate-annotations":186}],188:[function(t,e,i){arguments[4][34][0].apply(i,arguments)},{"./lib/events":189,dup:34,framebus:190}],189:[function(t,e,i){arguments[4][35][0].apply(i,arguments)},{dup:35}],190:[function(t,e,i){arguments[4][36][0].apply(i,arguments)},{dup:36}],191:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],192:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],193:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],194:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],195:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":191,"./lib/events":192,"./lib/fn":193,"./lib/url":194,dup:21}],196:[function(t,e,i){arguments[4][2][0].apply(i,arguments)},{"./coinbase-account":197,"./credit-card":198,"./europe-bank-account":199,"./normalize-api-fields":203,"./parse-client-token":204,"./paypal-account":205,"./request-driver":207,"./sepa-mandate":208,"./util":209,"braintree-3ds":218,"braintree-utilities":227,dup:2}],197:[function(t,e,i){arguments[4][3][0].apply(i,arguments)},{dup:3}],198:[function(t,e,i){arguments[4][4][0].apply(i,arguments)},{dup:4}],199:[function(t,e,i){arguments[4][5][0].apply(i,arguments)},{dup:5}],200:[function(t,e,i){arguments[4][6][0].apply(i,arguments)},{"./parse-client-token":204,"./request-driver":207,"./util":209,dup:6}],201:[function(t,e,i){arguments[4][7][0].apply(i,arguments)},{"./jsonp":202,dup:7}],202:[function(t,e,i){arguments[4][8][0].apply(i,arguments)},{"./util":209,dup:8}],203:[function(t,e,i){arguments[4][9][0].apply(i,arguments)},{dup:9}],204:[function(t,e,i){arguments[4][10][0].apply(i,arguments)},{"./polyfill":206,"braintree-utilities":227,dup:10}],205:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],206:[function(t,e,i){arguments[4][12][0].apply(i,arguments)},{dup:12}],207:[function(t,e,i){arguments[4][13][0].apply(i,arguments)},{"./jsonp-driver":201,dup:13}],208:[function(t,e,i){arguments[4][14][0].apply(i,arguments)},{dup:14}],209:[function(t,e,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],210:[function(t,e,i){arguments[4][16][0].apply(i,arguments)},{"./lib/client":196,"./lib/get-configuration":200,"./lib/jsonp":202,"./lib/jsonp-driver":201,"./lib/parse-client-token":204,"./lib/util":209,dup:16}],211:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],212:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],213:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],214:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],215:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":211,"./lib/events":212,"./lib/fn":213,"./lib/url":214,dup:21}],216:[function(t,e,i){arguments[4][22][0].apply(i,arguments)},{"../shared/receiver":220,"braintree-utilities":215,dup:22}],217:[function(t,e,i){arguments[4][23][0].apply(i,arguments)},{"./authorization_service":216,"braintree-utilities":215,dup:23}],218:[function(t,e,i){arguments[4][24][0].apply(i,arguments)},{"./client":217,"./vendor/json2":219,dup:24}],219:[function(t,e,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],220:[function(t,e,i){arguments[4][26][0].apply(i,arguments)},{"braintree-utilities":215,dup:26}],221:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],222:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],223:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],224:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],225:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],226:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":221,dup:32}],227:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":221,"./lib/dom":222,"./lib/events":223,"./lib/fn":224,"./lib/string":225,"./lib/url":226,dup:33}],228:[function(t,e,i){arguments[4][125][0].apply(i,arguments)},{"braintree-utilities":238,dup:125}],229:[function(t,e,i){arguments[4][126][0].apply(i,arguments)},{"braintree-utilities":238,dup:126}],230:[function(t,e,i){arguments[4][127][0].apply(i,arguments)},{dup:127}],231:[function(t,e,i){arguments[4][128][0].apply(i,arguments)},{"braintree-utilities":238,dup:128}],232:[function(t,e,i){arguments[4][129][0].apply(i,arguments)},{"braintree-utilities":238,dup:129}],233:[function(t,e,i){arguments[4][130][0].apply(i,arguments)},{"./lib/message-bus":228,"./lib/pubsub-client":229,"./lib/pubsub-server":230,"./lib/rpc-client":231,"./lib/rpc-server":232,dup:130}],234:[function(t,e,i){arguments[4][131][0].apply(i,arguments)},{dup:131}],235:[function(t,e,i){arguments[4][132][0].apply(i,arguments)},{dup:132}],236:[function(t,e,i){arguments[4][133][0].apply(i,arguments)},{dup:133}],237:[function(t,e,i){arguments[4][20][0].apply(i,arguments)},{dup:20}],238:[function(t,e,i){arguments[4][21][0].apply(i,arguments)},{"./lib/dom":234,"./lib/events":235,"./lib/fn":236,"./lib/url":237,dup:21}],239:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],240:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],241:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],242:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],243:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],244:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":239,dup:32}],245:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":239,"./lib/dom":240,"./lib/events":241,"./lib/fn":242,"./lib/string":243,"./lib/url":244,dup:33}],246:[function(t,e,i){arguments[4][143][0].apply(i,arguments)},{"../shared/constants":251,"../shared/get-locale":253,"../shared/util/browser":258,"../shared/util/dom":259,"../shared/util/util":260,"./logged-in-view":248,"./logged-out-view":249,"./overlay-view":250,"braintree-api":210,"braintree-rpc":233,"braintree-utilities":245,dup:143}],247:[function(t,e){function i(t,e){if(!o.detectedPostMessage())return void("function"==typeof e.onUnsupported&&e.onUnsupported(new Error("unsupported browser detected")));var i=new n(t,e);return i.initialize(),i}var n=t("./client"),o=t("../shared/util/browser"),r="1.3.5";e.exports={create:i,_browser:o,VERSION:r}},{"../shared/util/browser":258,"./client":246}],248:[function(t,e,i){arguments[4][144][0].apply(i,arguments)},{"../shared/constants":251,dup:144}],249:[function(t,e,i){arguments[4][145][0].apply(i,arguments)},{"../shared/constants":251,"../shared/get-locale":253,"braintree-utilities":245,dup:145}],250:[function(t,e,i){arguments[4][146][0].apply(i,arguments)},{"../shared/constants":251,"braintree-utilities":245,dup:146}],251:[function(t,e,i){arguments[4][147][0].apply(i,arguments)},{dup:147}],252:[function(t,e,i){arguments[4][148][0].apply(i,arguments)},{dup:148}],253:[function(t,e,i){arguments[4][149][0].apply(i,arguments)},{"../shared/data/country-code-lookup":252,dup:149}],254:[function(t,e,i){arguments[4][150][0].apply(i,arguments)},{"./useragent":257,dup:150}],255:[function(t,e,i){arguments[4][151][0].apply(i,arguments)},{"./platform":256,"./useragent":257,dup:151}],256:[function(t,e,i){arguments[4][152][0].apply(i,arguments)},{"./useragent":257,dup:152}],257:[function(t,e,i){arguments[4][153][0].apply(i,arguments)},{dup:153}],258:[function(t,e,i){arguments[4][154][0].apply(i,arguments)},{"../useragent/browser":254,"../useragent/device":255,"../useragent/platform":256,"../useragent/useragent":257,dup:154}],259:[function(t,e,i){arguments[4][155][0].apply(i,arguments)},{dup:155}],260:[function(t,e,i){arguments[4][156][0].apply(i,arguments)},{dup:156}],261:[function(t,e,i){arguments[4][27][0].apply(i,arguments)},{dup:27}],262:[function(t,e,i){arguments[4][17][0].apply(i,arguments)},{dup:17}],263:[function(t,e,i){arguments[4][18][0].apply(i,arguments)},{dup:18}],264:[function(t,e,i){arguments[4][19][0].apply(i,arguments)},{dup:19}],265:[function(t,e,i){arguments[4][31][0].apply(i,arguments)},{dup:31}],266:[function(t,e,i){arguments[4][32][0].apply(i,arguments)},{"./array":261,dup:32}],267:[function(t,e,i){arguments[4][33][0].apply(i,arguments)},{"./lib/array":261,"./lib/dom":262,"./lib/events":263,"./lib/fn":264,"./lib/string":265,"./lib/url":266,dup:33}],268:[function(t,e){"use strict";function i(t){var e,i={};if(t){for(e in t)t.hasOwnProperty(e)&&(i[n(e)]=t[e]);return i}}function n(t){return t.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})}e.exports={convertToLegacyShippingAddress:i}},{}],269:[function(t,e){"use strict";e.exports={ROOT_SUCCESS_CALLBACK:"onPaymentMethodReceived",ROOT_ERROR_CALLBACK:"onError",ROOT_READY_CALLBACK:"onReady"}},{}],270:[function(t,e){"use strict";function i(t,e){return r.on(r.events.PAYMENT_METHOD_GENERATED,function(t){r.emit(r.events.PAYMENT_METHOD_RECEIVED,t)}),e.coinbase=e.coinbase||{},e.apiClient=new n.Client({clientToken:t,integration:"coinbase"}),o.create(e)}var n=t("braintree-api"),o=t("braintree-coinbase"),r=t("braintree-bus");e.exports={initialize:i}},{"braintree-api":16,"braintree-bus":34,"braintree-coinbase":37}],271:[function(t,e){"use strict";function i(t,e){var i=new a.Client({clientToken:t,integration:"custom"});n(e,i),o(e,t),r(e,i)}function n(t,e){var i;t.id?(i=l.setup(e,t),u.isFunction(t[d.ROOT_SUCCESS_CALLBACK])&&(i.onNonceReceived=function(e,i){e?p.emit(p.events.ERROR,e):t[d.ROOT_SUCCESS_CALLBACK](i)})):p.on(p.events.PAYMENT_METHOD_GENERATED,function(t){p.emit(p.events.PAYMENT_METHOD_RECEIVED,t)})}function o(t,e){var i,n,o,r;t.paypal&&(i=s(t,"paypal"),n=i("onSuccess"),o=i("onCancelled"),t.paypal.paymentMethodNonceInputField||(r=document.createElement("input"),r.id="braintree-custom-integration-dummy-input",t.paypal.paymentMethodNonceInputField=r),t.paypal.onSuccess=function(t){p.emit(p.events.PAYMENT_METHOD_GENERATED,t),n.apply(null,[t.nonce,t.details.email,f(t.details.shippingAddress)])},t.paypal.onCancelled=function(){p.emit(p.events.PAYMENT_METHOD_CANCELLED),o()},h.create(e,t.paypal))}function r(t,e){t.coinbase&&(t.apiClient=e,t.paypal&&delete t.paypal,c.create(t))}function s(t,e){return function(i){return e in t&&u.isFunction(t[e][i])?t[e][i]:function(){}}}var a=t("braintree-api"),l=t("braintree-form"),h=t("braintree-paypal"),c=t("braintree-coinbase"),u=t("braintree-utilities"),d=t("../constants"),p=t("braintree-bus"),f=t("../compatibility").convertToLegacyShippingAddress;e.exports={initialize:i}},{"../compatibility":268,"../constants":269,"braintree-api":16,"braintree-bus":34,"braintree-coinbase":37,"braintree-form":187,"braintree-paypal":247,"braintree-utilities":267}],272:[function(t,e){"use strict";function i(t){return s.isFunction(t.paymentMethodNonceReceived)?t.paymentMethodNonceReceived:null}function n(t){return s.isFunction(t[l.ROOT_SUCCESS_CALLBACK])}function o(t,e){var o=i(e),s=n(e);return(o||s)&&(e.paymentMethodNonceReceived=function(t){o&&o.apply(null,[t.originalEvent,t.nonce]),delete t.originalEvent,a.emit(a.events.PAYMENT_METHOD_RECEIVED,h(t))}),r.create(t,e)}var r=t("braintree-dropin"),s=t("braintree-utilities"),a=t("braintree-bus"),l=t("../constants"),h=t("../lib/sanitize-payload");e.exports={initialize:o}},{"../constants":269,"../lib/sanitize-payload":276,"braintree-bus":34,"braintree-dropin":177,"braintree-utilities":267}],273:[function(t,e){"use strict";e.exports={custom:t("./custom"),dropin:t("./dropin"),paypal:t("./paypal"),coinbase:t("./coinbase")}},{"./coinbase":270,"./custom":271,"./dropin":272,"./paypal":274}],274:[function(t,e){"use strict";function i(t){return"onSuccess"in t&&s.isFunction(t.onSuccess)?t.onSuccess:"paypal"in t&&s.isFunction(t.paypal.onSuccess)?t.paypal.onSuccess:null}function n(t){return s.isFunction(t[a.ROOT_SUCCESS_CALLBACK])}function o(t,e){var o=i(e),s=n(e);return(o||s)&&(e.onSuccess=function(t){o&&o.apply(null,[t.nonce,t.details.email,h(t.details.shippingAddress)]),l.emit(l.events.PAYMENT_METHOD_RECEIVED,t)}),r.create(t,e)}var r=t("braintree-paypal"),s=t("braintree-utilities"),a=t("../constants"),l=t("braintree-bus"),h=t("../compatibility").convertToLegacyShippingAddress;
e.exports={initialize:o}},{"../compatibility":268,"../constants":269,"braintree-bus":34,"braintree-paypal":247,"braintree-utilities":267}],275:[function(t,e){"use strict";function i(t){this.callback=t,this.counter=0,this.attachEvents()}var n=t("braintree-bus"),o=t("braintree-utilities");i.prototype.attachEvents=function(){this.initHandler=o.bind(this.handleDependencyInitializing,this),this.readyHandler=o.bind(this.handleDependencyReady,this),n.on(n.events.ASYNC_DEPENDENCY_INITIALIZING,this.initHandler),n.on(n.events.ASYNC_DEPENDENCY_READY,this.readyHandler)},i.prototype.handleDependencyInitializing=function(){this.counter++},i.prototype.handleDependencyReady=function(){this.counter--,0===this.counter&&(this.detachEvents(),this.callback())},i.prototype.detachEvents=function(){n.off(n.events.ASYNC_DEPENDENCY_INITIALIZING,this.initHandler),n.off(n.events.ASYNC_DEPENDENCY_READY,this.readyHandler)},e.exports=function(t){return new i(t)}},{"braintree-bus":34,"braintree-utilities":267}],276:[function(t,e){"use strict";e.exports=function(t){return{nonce:t.nonce,details:t.details,type:t.type}}},{}]},{},[1])(1)}),/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2015, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
function(){var t,e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,y,b,_,w,x,C,k,S,T,P,E,D,L,M,A,R,O,I,N,j,H,z,B,F,U,W,$,G,q,V,Y,X,Z,K,Q,J,te,ee,ie,ne,oe,re,se,ae,le,he,ce,ue,de,pe,fe,me,ge,ve,ye,be,_e,we,xe,Ce,ke,Se=[].slice;_e=function(){var t,e,i,n,o;for(t={},o="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,e=o.length;e>n;n++)i=o[n],t["[object "+i+"]"]=i.toLowerCase();return function(e){var i;return i=Object.prototype.toString.call(e),t[i]||"object"}}(),$=function(t,e,i){return null==e&&(e=0),null==i&&(i=1),e>t&&(t=e),t>i&&(t=i),t},we=function(t){return t.length>=3?[].slice.call(t):t[0]},b=function(t){var e;for(e in t)3>e?(t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t},n=Math.PI,me=Math.round,x=Math.cos,P=Math.floor,J=Math.pow,G=Math.log,ve=Math.sin,ye=Math.sqrt,d=Math.atan2,Y=Math.max,u=Math.abs,s=2*n,o=n/3,e=n/180,r=180/n,y=function(){return arguments[0]instanceof t?arguments[0]:function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,arguments,function(){})},c=[],"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=y),"function"==typeof define&&define.amd?define([],function(){return y}):(fe="undefined"!=typeof exports&&null!==exports?exports:this,fe.chroma=y),y.version="1.1.1",/**
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
   */
h={},a=[],l=!1,t=function(){function t(){var t,e,i,n,o,r,s,c,u;for(r=this,e=[],c=0,n=arguments.length;n>c;c++)t=arguments[c],null!=t&&e.push(t);if(s=e[e.length-1],null!=h[s])r._rgb=b(h[s](we(e.slice(0,-1))));else{for(l||(a=a.sort(function(t,e){return e.p-t.p}),l=!0),u=0,o=a.length;o>u&&(i=a[u],!(s=i.test.apply(i,e)));u++);s&&(r._rgb=b(h[s].apply(h,e)))}null==r._rgb&&console.warn("unknown format: "+e),null==r._rgb&&(r._rgb=[0,0,0]),3===r._rgb.length&&r._rgb.push(1)}return t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.toString=function(){return this.name()},t}(),y._input=h,/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
y.brewer=g={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xe={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},y.colors=w=xe,z=function(){var t,e,n,o,r,s,a,l,h;return e=we(arguments),r=e[0],t=e[1],n=e[2],l=(r+16)/116,a=isNaN(t)?l:l+t/500,h=isNaN(n)?l:l-n/200,l=i.Yn*B(l),a=i.Xn*B(a),h=i.Zn*B(h),s=ke(3.2404542*a-1.5371385*l-.4985314*h),o=ke(-.969266*a+1.8760108*l+.041556*h),n=ke(.0556434*a-.2040259*l+1.0572252*h),s=$(s,0,255),o=$(o,0,255),n=$(n,0,255),[s,o,n,e.length>3?e[3]:1]},ke=function(t){return me(255*(.00304>=t?12.92*t:1.055*J(t,1/2.4)-.055))},B=function(t){return t>i.t1?t*t*t:i.t2*(t-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},se=function(){var t,e,i,n,o,r,s,a;return n=we(arguments),i=n[0],e=n[1],t=n[2],o=ue(i,e,t),r=o[0],s=o[1],a=o[2],[116*s-16,500*(r-s),200*(s-a)]},de=function(t){return(t/=255)<=.04045?t/12.92:J((t+.055)/1.055,2.4)},Ce=function(t){return t>i.t3?J(t,1/3):t/i.t2+i.t0},ue=function(){var t,e,n,o,r,s,a;return o=we(arguments),n=o[0],e=o[1],t=o[2],n=de(n),e=de(e),t=de(t),r=Ce((.4124564*n+.3575761*e+.1804375*t)/i.Xn),s=Ce((.2126729*n+.7151522*e+.072175*t)/i.Yn),a=Ce((.0193339*n+.119192*e+.9503041*t)/i.Zn),[r,s,a]},y.lab=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["lab"]),function(){})},h.lab=z,t.prototype.lab=function(){return se(this._rgb)},p=function(t){var e,i,n,o,r,s,a,l,h,c,u;return t=function(){var e,i,n;for(n=[],i=0,e=t.length;e>i;i++)o=t[i],n.push(y(o));return n}(),2===t.length?(h=function(){var e,i,n;for(n=[],i=0,e=t.length;e>i;i++)o=t[i],n.push(o.lab());return n}(),r=h[0],s=h[1],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;2>=i;e=++i)n.push(r[e]+t*(s[e]-r[e]));return n}(),y.lab.apply(y,i)}):3===t.length?(c=function(){var e,i,n;for(n=[],i=0,e=t.length;e>i;i++)o=t[i],n.push(o.lab());return n}(),r=c[0],s=c[1],a=c[2],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;2>=i;e=++i)n.push((1-t)*(1-t)*r[e]+2*(1-t)*t*s[e]+t*t*a[e]);return n}(),y.lab.apply(y,i)}):4===t.length?(u=function(){var e,i,n;for(n=[],i=0,e=t.length;e>i;i++)o=t[i],n.push(o.lab());return n}(),r=u[0],s=u[1],a=u[2],l=u[3],e=function(t){var e,i;return i=function(){var i,n;for(n=[],e=i=0;2>=i;e=++i)n.push((1-t)*(1-t)*(1-t)*r[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*a[e]+t*t*t*l[e]);return n}(),y.lab.apply(y,i)}):5===t.length&&(i=p(t.slice(0,3)),n=p(t.slice(2,5)),e=function(t){return.5>t?i(2*t):n(2*(t-.5))}),e},y.bezier=function(t){var e;return e=p(t),e.scale=function(){return y.scale(e)},e},/*
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
   */
y.cubehelix=function(t,e,i,n,o){var r,a,l;return null==t&&(t=300),null==e&&(e=-1.5),null==i&&(i=1),null==n&&(n=1),null==o&&(o=[0,1]),a=o[1]-o[0],r=0,l=function(l){var h,c,u,d,p,f,m,g,v;return h=s*((t+120)/360+e*l),m=J(o[0]+a*l,n),f=0!==r?i[0]+l*r:i,c=f*m*(1-m)/2,d=x(h),v=ve(h),g=m+c*(-.14861*d+1.78277*v),p=m+c*(-.29227*d-.90649*v),u=m+1.97294*c*d,y(b([255*g,255*p,255*u]))},l.start=function(e){return null==e?t:(t=e,l)},l.rotations=function(t){return null==t?e:(e=t,l)},l.gamma=function(t){return null==t?n:(n=t,l)},l.hue=function(t){return null==t?i:(i=t,"array"===_e(i)?(r=i[1]-i[0],0===r&&(i=i[1])):r=0,l)},l.lightness=function(t){return null==t?o:(o=t,"array"===_e(o)?(a=o[1]-o[0],0===a&&(o=o[1])):a=0,l)},l.scale=function(){return y.scale(l)},l.hue(i),l},y.random=function(){var e,i,n,o;for(i="0123456789abcdef",e="#",n=o=0;6>o;n=++o)e+=i.charAt(P(16*Math.random()));return new t(e)},h.rgb=function(){var t,e,i,n;e=we(arguments),i=[];for(t in e)n=e[t],i.push(n);return i},y.rgb=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},a.push({p:15,test:function(){var t;return t=we(arguments),"array"===_e(t)&&3===t.length?"rgb":4===t.length&&"number"===_e(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),E=function(t){var e,i,n,o,r,s;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),s=parseInt(t,16),o=s>>16,n=s>>8&255,i=255&s,[o,n,i,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),s=parseInt(t,16),o=s>>24&255,n=s>>16&255,i=s>>8&255,e=me((255&s)/255*100)/100,[o,n,i,e];if(null!=h.css&&(r=h.css(t)))return r;throw"unknown color: "+t},ie=function(t,e){var i,n,o,r,s,a,l;return null==e&&(e="rgb"),s=t[0],o=t[1],n=t[2],i=t[3],l=s<<16|o<<8|n,a="000000"+l.toString(16),a=a.substr(a.length-6),r="0"+me(255*i).toString(16),r=r.substr(r.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return a+r;case"argb":return r+a;default:return a}}()},h.hex=function(t){return E(t)},y.hex=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="rgb"),ie(this._rgb,t)},a.push({p:10,test:function(t){return 1===arguments.length&&"string"===_e(t)?"hex":void 0}}),M=function(){var t,e,i,n,o,r,s,a,l,h,c,u,d,p;if(t=we(arguments),o=t[0],c=t[1],s=t[2],0===c)l=n=e=255*s;else{for(p=[0,0,0],i=[0,0,0],d=.5>s?s*(1+c):s+c-s*c,u=2*s-d,o/=360,p[0]=o+1/3,p[1]=o,p[2]=o-1/3,r=a=0;2>=a;r=++a)p[r]<0&&(p[r]+=1),p[r]>1&&(p[r]-=1),i[r]=6*p[r]<1?u+6*(d-u)*p[r]:2*p[r]<1?d:3*p[r]<2?u+(d-u)*(2/3-p[r])*6:u;h=[me(255*i[0]),me(255*i[1]),me(255*i[2])],l=h[0],n=h[1],e=h[2]}return t.length>3?[l,n,e,t[3]]:[l,n,e]},oe=function(t,e,i){var n,o,r,s,a;return void 0!==t&&t.length>=3&&(s=t,t=s[0],e=s[1],i=s[2]),t/=255,e/=255,i/=255,r=Math.min(t,e,i),Y=Math.max(t,e,i),o=(Y+r)/2,Y===r?(a=0,n=Number.NaN):a=.5>o?(Y-r)/(Y+r):(Y-r)/(2-Y-r),t===Y?n=(e-i)/(Y-r):e===Y?n=2+(i-t)/(Y-r):i===Y&&(n=4+(t-e)/(Y-r)),n*=60,0>n&&(n+=360),[n,a,o]},y.hsl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["hsl"]),function(){})},h.hsl=M,t.prototype.hsl=function(){return oe(this._rgb)},A=function(){var t,e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v;if(t=we(arguments),o=t[0],m=t[1],v=t[2],v*=255,0===m)l=n=e=v;else switch(360===o&&(o=0),o>360&&(o-=360),0>o&&(o+=360),o/=60,r=P(o),i=o-r,s=v*(1-m),a=v*(1-m*i),g=v*(1-m*(1-i)),r){case 0:h=[v,g,s],l=h[0],n=h[1],e=h[2];break;case 1:c=[a,v,s],l=c[0],n=c[1],e=c[2];break;case 2:u=[s,v,g],l=u[0],n=u[1],e=u[2];break;case 3:d=[s,a,v],l=d[0],n=d[1],e=d[2];break;case 4:p=[g,s,v],l=p[0],n=p[1],e=p[2];break;case 5:f=[v,s,a],l=f[0],n=f[1],e=f[2]}return l=me(l),n=me(n),e=me(e),[l,n,e,t.length>3?t[3]:1]},re=function(){var t,e,i,n,o,r,s,a,l;return s=we(arguments),r=s[0],i=s[1],t=s[2],o=Math.min(r,i,t),Y=Math.max(r,i,t),e=Y-o,l=Y/255,0===Y?(n=Number.NaN,a=0):(a=e/Y,r===Y&&(n=(i-t)/e),i===Y&&(n=2+(t-r)/e),t===Y&&(n=4+(r-i)/e),n*=60,0>n&&(n+=360)),[n,a,l]},y.hsv=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["hsv"]),function(){})},h.hsv=A,t.prototype.hsv=function(){return re(this._rgb)},K=function(t){var e,i,n;return"number"===_e(t)&&t>=0&&16777215>=t?(n=t>>16,i=t>>8&255,e=255&t,[n,i,e,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},he=function(){var t,e,i,n;return n=we(arguments),i=n[0],e=n[1],t=n[2],(i<<16)+(e<<8)+t},y.num=function(e){return new t(e,"num")},t.prototype.num=function(t){return null==t&&(t="rgb"),he(this._rgb,t)},h.num=K,a.push({p:10,test:function(t){return 1===arguments.length&&"number"===_e(t)&&t>=0&&16777215>=t?"num":void 0}}),C=function(t){var e,i,n,o,r,s,a,l;if(t=t.toLowerCase(),null!=y.colors&&y.colors[t])return E(y.colors[t]);if(r=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(a=r.slice(1,4),o=s=0;2>=s;o=++s)a[o]=+a[o];a[3]=1}else if(r=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(a=r.slice(1,5),o=l=0;3>=l;o=++l)a[o]=+a[o];else if(r=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(a=r.slice(1,4),o=e=0;2>=e;o=++e)a[o]=me(2.55*a[o]);a[3]=1}else if(r=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(a=r.slice(1,5),o=i=0;2>=i;o=++i)a[o]=me(2.55*a[o]);a[3]=+a[3]}else(r=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(n=r.slice(1,4),n[1]*=.01,n[2]*=.01,a=M(n),a[3]=1):(r=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(n=r.slice(1,4),n[1]*=.01,n[2]*=.01,a=M(n),a[3]=+r[4]);return a},ee=function(t){var e;return e=t[3]<1?"rgba":"rgb","rgb"===e?e+"("+t.slice(0,3).map(me).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(me).join(",")+","+t[3]+")":void 0},pe=function(t){return me(100*t)/100},L=function(t,e){var i;return i=1>e?"hsla":"hsl",t[0]=pe(t[0]||0),t[1]=pe(100*t[1])+"%",t[2]=pe(100*t[2])+"%","hsla"===i&&(t[3]=e),i+"("+t.join(",")+")"},h.css=function(t){return C(t)},y.css=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ee(this._rgb):"hsl"===t.slice(0,3)?L(this.hsl(),this.alpha()):void 0},h.named=function(t){return E(xe[t])},a.push({p:20,test:function(t){return 1===arguments.length&&null!=xe[t]?"named":void 0}}),t.prototype.name=function(t){var e,i;arguments.length&&(xe[t]&&(this._rgb=E(xe[t])),this._rgb[3]=1),e=this.hex();for(i in xe)if(e===xe[i])return i;return e},F=function(){var t,i,n,o;return o=we(arguments),n=o[0],t=o[1],i=o[2],i*=e,[n,x(i)*t,ve(i)*t]},U=function(){var t,e,i,n,o,r,s,a,l,h,c;return i=we(arguments),a=i[0],o=i[1],s=i[2],h=F(a,o,s),t=h[0],e=h[1],n=h[2],c=z(t,e,n),l=c[0],r=c[1],n=c[2],[$(l,0,255),$(r,0,255),$(n,0,255),i.length>3?i[3]:1]},H=function(){var t,e,i,n,o,s;return s=we(arguments),o=s[0],t=s[1],e=s[2],i=ye(t*t+e*e),n=(d(e,t)*r+360)%360,0===me(1e4*i)&&(n=Number.NaN),[o,i,n]},ae=function(){var t,e,i,n,o,r,s;return r=we(arguments),o=r[0],i=r[1],e=r[2],s=se(o,i,e),n=s[0],t=s[1],e=s[2],H(n,t,e)},y.lch=function(){var e;return e=we(arguments),new t(e,"lch")},y.hcl=function(){var e;return e=we(arguments),new t(e,"hcl")},h.lch=U,h.hcl=function(){var t,e,i,n;return n=we(arguments),e=n[0],t=n[1],i=n[2],U([i,t,e])},t.prototype.lch=function(){return ae(this._rgb)},t.prototype.hcl=function(){return ae(this._rgb).reverse()},te=function(t){var e,i,n,o,r,s,a,l,h;return null==t&&(t="rgb"),l=we(arguments),a=l[0],o=l[1],e=l[2],a/=255,o/=255,e/=255,r=1-Math.max(a,Math.max(o,e)),n=1>r?1/(1-r):0,i=(1-a-r)*n,s=(1-o-r)*n,h=(1-e-r)*n,[i,s,h,r]},_=function(){var t,e,i,n,o,r,s,a,l;return e=we(arguments),n=e[0],s=e[1],l=e[2],r=e[3],t=e.length>4?e[4]:1,1===r?[0,0,0,t]:(a=n>=1?0:me(255*(1-n)*(1-r)),o=s>=1?0:me(255*(1-s)*(1-r)),i=l>=1?0:me(255*(1-l)*(1-r)),[a,o,i,t])},h.cmyk=function(){return _(we(arguments))},y.cmyk=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return te(this._rgb)},h.gl=function(){var t,e,i,n,o;for(n=function(){var t,i;t=we(arguments),i=[];for(e in t)o=t[e],i.push(o);return i}.apply(this,arguments),t=i=0;2>=i;t=++i)n[t]*=255;return n},y.gl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},le=function(t,e,i){var n;return n=we(arguments),t=n[0],e=n[1],i=n[2],t=q(t),e=q(e),i=q(i),.2126*t+.7152*e+.0722*i},q=function(t){return t/=255,.03928>=t?t/12.92:J((t+.055)/1.055,2.4)},c=[],R=function(t,e,i,n){var o,r,s,a;for(null==i&&(i=.5),null==n&&(n="rgb"),"object"!==_e(t)&&(t=y(t)),"object"!==_e(e)&&(e=y(e)),s=0,r=c.length;r>s;s++)if(o=c[s],n===o[0]){a=o[1](t,e,i,n);break}if(null==a)throw"color mode "+n+" is not supported";return a.alpha(t.alpha()+i*(e.alpha()-t.alpha())),a},y.interpolate=R,t.prototype.interpolate=function(t,e,i){return R(this,t,e,i)},y.mix=R,t.prototype.mix=t.prototype.interpolate,j=function(e,i,n,o){var r,s;return r=e._rgb,s=i._rgb,new t(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),o)},c.push(["rgb",j]),t.prototype.luminance=function(t,e){var i,n,o,r;return null==e&&(e="rgb"),arguments.length?(0===t?this._rgb=[0,0,0,this._rgb[3]]:1===t?this._rgb=[255,255,255,this._rgb[3]]:(n=1e-7,o=20,r=function(i,s){var a,l;return l=i.interpolate(s,.5,e),a=l.luminance(),Math.abs(t-a)<n||!o--?l:a>t?r(i,l):r(l,s)},i=le(this._rgb),this._rgb=(i>t?r(y("black"),this):r(this,y("white"))).rgba()),this):le(this._rgb)},be=function(t){var e,i,n,o;return o=t/100,66>o?(n=255,i=-155.25485562709179-.44596950469579133*(i=o-2)+104.49216199393888*G(i),e=20>o?0:-254.76935184120902+.8274096064007395*(e=o-10)+115.67994401066147*G(e)):(n=351.97690566805693+.114206453784165*(n=o-55)-40.25366309332127*G(n),i=325.4494125711974+.07943456536662342*(i=o-50)-28.0852963507957*G(i),e=255),b([n,i,e])},ce=function(){var t,e,i,n,o,r,s,a,l;for(s=we(arguments),r=s[0],i=s[1],t=s[2],o=1e3,n=4e4,e=.4;n-o>e;)l=.5*(n+o),a=be(l),a[2]/a[0]>=t/r?n=l:o=l;return me(l)},y.temperature=y.kelvin=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=be,t.prototype.temperature=function(){return ce(this._rgb)},t.prototype.kelvin=t.prototype.temperature,y.contrast=function(e,i){var n,o,r,s;return("string"===(r=_e(e))||"number"===r)&&(e=new t(e)),("string"===(s=_e(i))||"number"===s)&&(i=new t(i)),n=e.luminance(),o=i.luminance(),n>o?(n+.05)/(o+.05):(o+.05)/(n+.05)},t.prototype.get=function(t){var e,i,n,o,r,s;return n=this,r=t.split("."),o=r[0],e=r[1],s=n[o](),e?(i=o.indexOf(e),i>-1?s[i]:console.warn("unknown channel "+e+" in mode "+o)):s},t.prototype.set=function(t,e){var i,n,o,r,s,a;if(o=this,s=t.split("."),r=s[0],i=s[1],i)if(a=o[r](),n=r.indexOf(i),n>-1)if("string"===_e(e))switch(e.charAt(0)){case"+":a[n]+=+e;break;case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+i+" in mode "+r);else a=e;return o._rgb=y(a,r).alpha(o.alpha())._rgb,o},t.prototype.darken=function(t){var e,n;return null==t&&(t=1),n=this,e=n.lab(),e[0]-=i.Kn*t,y.lab(e).alpha(n.alpha())},t.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var e,n;return null==t&&(t=1),n=this,e=n.lch(),e[1]+=t*i.Kn,e[1]<0&&(e[1]=0),y.lch(e).alpha(n.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),y(e[0]*t,e[1]*t,e[2]*t,t)},f=function(t,e,i){if(!f[i])throw"unknown blend mode "+i;return f[i](t,e)},m=function(t){return function(e,i){var n,o;return n=y(i).rgb(),o=y(e).rgb(),y(t(n,o),"rgb")}},T=function(t){return function(e,i){var n,o,r;for(r=[],n=o=0;3>=o;n=++o)r[n]=t(e[n],i[n]);return r}},Z=function(t){return t},X=function(t,e){return t*e/255},k=function(t,e){return t>e?e:t},W=function(t,e){return t>e?t:e},ge=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Q=function(t,e){return 128>e?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},v=function(t,e){return 255*(1-(1-e/255)/(t/255))},S=function(t,e){return 255===t?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},f.normal=m(T(Z)),f.multiply=m(T(X)),f.screen=m(T(ge)),f.overlay=m(T(Q)),f.darken=m(T(k)),f.lighten=m(T(W)),f.dodge=m(T(S)),f.burn=m(T(v)),y.blend=f,y.analyze=function(t){var e,i,n,o;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},i=0,e=t.length;e>i;i++)o=t[i],null==o||isNaN(o)||(n.values.push(o),n.sum+=o,o<n.min&&(n.min=o),o>n.max&&(n.max=o),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return y.limits(n,t,e)},n},y.scale=function(t){var e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,b,_,w,x;return h="rgb",c=y("#ccc"),f=0,s=!1,r=[0,1],p=[],d=[0,0],e=!1,n=[],u=!1,l=0,a=1,o=!1,i={},w=function(t){var e,i,o,r,s,a,l;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===_e(t)&&null!=(null!=(r=y.brewer)?r[t]:void 0)&&(t=y.brewer[t]),"array"===_e(t)){for(t=t.slice(0),e=o=0,s=t.length-1;s>=0?s>=o:o>=s;e=s>=0?++o:--o)i=t[e],"string"===_e(i)&&(t[e]=y(i));for(p.length=0,e=l=0,a=t.length-1;a>=0?a>=l:l>=a;e=a>=0?++l:--l)p.push(e/(t.length-1))}return _(),n=t},v=function(t){var i,n;if(null!=e){for(n=e.length-1,i=0;n>i&&t>=e[i];)i++;return i-1}return 0},x=function(t){return t},m=function(t){var i,n,o,r,s;return s=t,e.length>2&&(r=e.length-1,i=v(t),o=e[0]+(e[1]-e[0])*(0+.5*f),n=e[r-1]+(e[r]-e[r-1])*(1-.5*f),s=l+(e[i]+.5*(e[i+1]-e[i])-o)/(n-o)*(a-l)),s},b=function(t,o){var r,s,u,f,m,g,b,_;if(null==o&&(o=!1),isNaN(t))return c;if(o?_=t:e&&e.length>2?(r=v(t),_=r/(e.length-2),_=d[0]+_*(1-d[0]-d[1])):a!==l?(_=(t-l)/(a-l),_=d[0]+_*(1-d[0]-d[1]),_=Math.min(1,Math.max(0,_))):_=1,o||(_=x(_)),f=Math.floor(1e4*_),i[f])s=i[f];else{if("array"===_e(n))for(u=m=0,b=p.length-1;b>=0?b>=m:m>=b;u=b>=0?++m:--m){if(g=p[u],g>=_){s=n[u];break}if(_>=g&&u===p.length-1){s=n[u];break}if(_>g&&_<p[u+1]){_=(_-g)/(p[u+1]-g),s=y.interpolate(n[u],n[u+1],_,h);break}}else"function"===_e(n)&&(s=n(_));i[f]=s}return s},_=function(){return i={}},w(t),g=function(t){var e;return e=y(b(t)),u&&e[u]?e[u]():e},g.classes=function(t){var i;return null!=t?("array"===_e(t)?(e=t,r=[t[0],t[t.length-1]]):(i=y.analyze(r),e=0===t?[i.min,i.max]:y.limits(i,"e",t)),g):e},g.domain=function(t){var e,i,o,s,h,c,u;if(!arguments.length)return r;if(l=t[0],a=t[t.length-1],p=[],o=n.length,t.length===o&&l!==a)for(h=0,s=t.length;s>h;h++)i=t[h],p.push((i-l)/(a-l));else for(e=u=0,c=o-1;c>=0?c>=u:u>=c;e=c>=0?++u:--u)p.push(e/(o-1));return r=[l,a],g},g.mode=function(t){return arguments.length?(h=t,_(),g):h},g.range=function(t,e){return w(t,e),g},g.out=function(t){return u=t,g},g.spread=function(t){return arguments.length?(f=t,g):f},g.correctLightness=function(t){return null==t&&(t=!0),o=t,_(),x=o?function(t){var e,i,n,o,r,s,a,l,h;for(e=b(0,!0).lab()[0],i=b(1,!0).lab()[0],a=e>i,n=b(t,!0).lab()[0],r=e+(i-e)*t,o=n-r,l=0,h=1,s=20;Math.abs(o)>.01&&s-->0;)!function(){return a&&(o*=-1),0>o?(l=t,t+=.5*(h-t)):(h=t,t+=.5*(l-t)),n=b(t,!0).lab()[0],o=n-r}();return t}:function(t){return t},g},g.padding=function(t){return null!=t?("number"===_e(t)&&(t=[t,t]),d=t,g):d},g.colors=function(){var i,n,o,s,a,l,h,c,u;if(s=0,a="hex",1===arguments.length&&("string"===_e(arguments[0])?a=arguments[0]:s=arguments[0]),2===arguments.length&&(s=arguments[0],a=arguments[1]),s)return n=r[0],i=r[1]-n,function(){h=[];for(var t=0;s>=0?s>t:t>s;s>=0?t++:t--)h.push(t);return h}.apply(this).map(function(t){return g(n+t/(s-1)*i)[a]()});if(t=[],c=[],e&&e.length>2)for(o=u=1,l=e.length;l>=1?l>u:u>l;o=l>=1?++u:--u)c.push(.5*(e[o-1]+e[o]));else c=r;return c.map(function(t){return g(t)[a]()})},g},null==y.scales&&(y.scales={}),y.scales.cool=function(){return y.scale([y.hsl(180,1,.9),y.hsl(250,.7,.4)])},y.scales.hot=function(){return y.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},y.analyze=function(t,e,i){var n,o,r,s,a,l,h;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==i&&(i=function(){return!0}),n=function(t){null==t||isNaN(t)||(a.values.push(t),a.sum+=t,t<a.min&&(a.min=t),t>a.max&&(a.max=t),a.count+=1)},h=function(t,o){return i(t,o)?n(null!=e&&"function"===_e(e)?e(t):null!=e&&"string"===_e(e)||"number"===_e(e)?t[e]:t):void 0},"array"===_e(t))for(s=0,r=t.length;r>s;s++)l=t[s],h(l);else for(o in t)l=t[o],h(l,o);return a.domain=[a.min,a.max],a.limits=function(t,e){return y.limits(a,t,e)},a},y.limits=function(t,e,i){var n,o,r,s,a,l,h,c,d,p,f,m,g,v,b,_,w,x,C,k,S,T,E,D,L,M,A,R,O,I,N,j,H,z,B,F,U,W,$,q,V,X,Z,K,Q,te,ee,ie,ne,oe,re,se,ae,le,he;if(null==e&&(e="equal"),null==i&&(i=7),"array"===_e(t)&&(t=y.analyze(t)),L=t.min,Y=t.max,re=t.sum,le=t.values.sort(function(t,e){return t-e}),E=[],"c"===e.substr(0,1)&&(E.push(L),E.push(Y)),"e"===e.substr(0,1)){for(E.push(L),k=N=1,B=i-1;B>=1?B>=N:N>=B;k=B>=1?++N:--N)E.push(L+k/i*(Y-L));E.push(Y)}else if("l"===e.substr(0,1)){if(0>=L)throw"Logarithmic scales are only possible for values > 0";for(M=Math.LOG10E*G(L),D=Math.LOG10E*G(Y),E.push(L),k=he=1,F=i-1;F>=1?F>=he:he>=F;k=F>=1?++he:--he)E.push(J(10,M+k/i*(D-M)));E.push(Y)}else if("q"===e.substr(0,1)){for(E.push(L),k=n=1,X=i-1;X>=1?X>=n:n>=X;k=X>=1?++n:--n)j=le.length*k/i,H=P(j),H===j?E.push(le[H]):(z=j-H,E.push(le[H]*z+le[H+1]*(1-z)));E.push(Y)}else if("k"===e.substr(0,1)){for(R=le.length,v=new Array(R),x=new Array(i),oe=!0,O=0,_=null,_=[],_.push(L),k=o=1,Z=i-1;Z>=1?Z>=o:o>=Z;k=Z>=1?++o:--o)_.push(L+k/i*(Y-L));for(_.push(Y);oe;){for(S=r=0,K=i-1;K>=0?K>=r:r>=K;S=K>=0?++r:--r)x[S]=0;for(k=s=0,Q=R-1;Q>=0?Q>=s:s>=Q;k=Q>=0?++s:--s){for(ae=le[k],A=Number.MAX_VALUE,S=a=0,te=i-1;te>=0?te>=a:a>=te;S=te>=0?++a:--a)C=u(_[S]-ae),A>C&&(A=C,b=S);x[b]++,v[k]=b}for(I=new Array(i),S=l=0,ee=i-1;ee>=0?ee>=l:l>=ee;S=ee>=0?++l:--l)I[S]=null;for(k=h=0,ie=R-1;ie>=0?ie>=h:h>=ie;k=ie>=0?++h:--h)w=v[k],null===I[w]?I[w]=le[k]:I[w]+=le[k];for(S=c=0,ne=i-1;ne>=0?ne>=c:c>=ne;S=ne>=0?++c:--c)I[S]*=1/x[S];for(oe=!1,S=d=0,U=i-1;U>=0?U>=d:d>=U;S=U>=0?++d:--d)if(I[S]!==_[k]){oe=!0;break}_=I,O++,O>200&&(oe=!1)}for(T={},S=p=0,W=i-1;W>=0?W>=p:p>=W;S=W>=0?++p:--p)T[S]=[];for(k=f=0,$=R-1;$>=0?$>=f:f>=$;k=$>=0?++f:--f)w=v[k],T[w].push(le[k]);for(se=[],S=m=0,q=i-1;q>=0?q>=m:m>=q;S=q>=0?++m:--m)se.push(T[S][0]),se.push(T[S][T[S].length-1]);for(se=se.sort(function(t,e){return t-e}),E.push(se[0]),k=g=1,V=se.length-1;V>=g;k=g+=2)isNaN(se[k])||E.push(se[k])}return E},D=function(t,e,i){var n,r,a,l;return n=we(arguments),t=n[0],e=n[1],i=n[2],t/=360,1/3>t?(r=(1-e)/3,l=(1+e*x(s*t)/x(o-s*t))/3,a=1-(r+l)):2/3>t?(t-=1/3,l=(1-e)/3,a=(1+e*x(s*t)/x(o-s*t))/3,r=1-(l+a)):(t-=2/3,a=(1-e)/3,r=(1+e*x(s*t)/x(o-s*t))/3,l=1-(a+r)),l=$(i*l*3),a=$(i*a*3),r=$(i*r*3),[255*l,255*a,255*r,n.length>3?n[3]:1]},ne=function(){var t,e,i,n,o,r,a,l;return a=we(arguments),r=a[0],e=a[1],t=a[2],s=2*Math.PI,r/=255,e/=255,t/=255,o=Math.min(r,e,t),n=(r+e+t)/3,l=1-o/n,0===l?i=0:(i=(r-e+(r-t))/2,i/=Math.sqrt((r-e)*(r-e)+(r-t)*(e-t)),i=Math.acos(i),t>e&&(i=s-i),i/=s),[360*i,l,n]},y.hsi=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(t,Se.call(arguments).concat(["hsi"]),function(){})},h.hsi=D,t.prototype.hsi=function(){return ne(this._rgb)},O=function(t,e,i,n){var o,r,s,a,l,h,c,u,d,p,f,m,g;return"hsl"===n?(m=t.hsl(),g=e.hsl()):"hsv"===n?(m=t.hsv(),g=e.hsv()):"hsi"===n?(m=t.hsi(),g=e.hsi()):("lch"===n||"hcl"===n)&&(n="hcl",m=t.hcl(),g=e.hcl()),"h"===n.substr(0,1)&&(s=m[0],p=m[1],h=m[2],a=g[0],f=g[1],c=g[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?r=Number.NaN:(r=a,1!==h&&0!==h||"hsv"===n||(d=f)):(r=s,1!==c&&0!==c||"hsv"===n||(d=p)):(o=a>s&&a-s>180?a-(s+360):s>a&&s-a>180?a+360-s:a-s,r=s+i*o),null==d&&(d=p+i*(f-p)),l=h+i*(c-h),u=y[n](r,d,l)},c=c.concat(function(){var t,e,i,n;for(i=["hsv","hsl","hsi","hcl","lch"],n=[],e=0,t=i.length;t>e;e++)V=i[e],n.push([V,O]);return n}()),N=function(t,e,i){var n,o;return n=t.num(),o=e.num(),y.num(n+(o-n)*i,"num")},c.push(["num",N]),I=function(e,i,n,o){var r,s,a;return s=e.lab(),a=i.lab(),r=new t(s[0]+n*(a[0]-s[0]),s[1]+n*(a[1]-s[1]),s[2]+n*(a[2]-s[2]),o)},c.push(["lab",I])}.call(this),function(t){function e(t){return t}function i(t,e){for(var i=0,n=e.length,o=new Array(n);n>i;++i)o[i]=t[e[i]];return o}function n(t){function e(e,i,n,o){for(;o>n;){var r=n+o>>>1;t(e[r])<i?n=r+1:o=r}return n}function i(e,i,n,o){for(;o>n;){var r=n+o>>>1;i<t(e[r])?o=r:n=r+1}return n}return i.right=i,i.left=e,i}function o(t){function e(t,e,i){for(var o=i-e,r=(o>>>1)+1;--r>0;)n(t,r,o,e);return t}function i(t,e,i){for(var o,r=i-e;--r>0;)o=t[e],t[e]=t[e+r],t[e+r]=o,n(t,1,r,e);return t}function n(e,i,n,o){for(var r,s=e[--o+i],a=t(s);(r=i<<1)<=n&&(n>r&&t(e[o+r])>t(e[o+r+1])&&r++,!(a<=t(e[o+r])));)e[o+i]=e[o+r],i=r;e[o+i]=s}return e.sort=i,e}function r(t){function e(e,n,o,r){var s,a,l,h,c=new Array(r=Math.min(o-n,r));for(a=0;r>a;++a)c[a]=e[n++];if(i(c,0,r),o>n){s=t(c[0]);do(l=t(h=e[n])>s)&&(c[0]=h,s=t(i(c,0,r)[0]));while(++n<o)}return c}var i=o(t);return e}function s(t){function e(e,i,n){for(var o=i+1;n>o;++o){for(var r=o,s=e[o],a=t(s);r>i&&t(e[r-1])>a;--r)e[r]=e[r-1];e[r]=s}return e}return e}function a(t){function e(t,e,o){return(D>o-e?n:i)(t,e,o)}function i(i,n,o){var r,s=(o-n)/6|0,a=n+s,l=o-1-s,h=n+o-1>>1,c=h-s,u=h+s,d=i[a],p=t(d),f=i[c],m=t(f),g=i[h],v=t(g),y=i[u],b=t(y),_=i[l],w=t(_);p>m&&(r=d,d=f,f=r,r=p,p=m,m=r),b>w&&(r=y,y=_,_=r,r=b,b=w,w=r),p>v&&(r=d,d=g,g=r,r=p,p=v,v=r),m>v&&(r=f,f=g,g=r,r=m,m=v,v=r),p>b&&(r=d,d=y,y=r,r=p,p=b,b=r),v>b&&(r=g,g=y,y=r,r=v,v=b,b=r),m>w&&(r=f,f=_,_=r,r=m,m=w,w=r),m>v&&(r=f,f=g,g=r,r=m,m=v,v=r),b>w&&(r=y,y=_,_=r,r=b,b=w,w=r);var x=f,C=m,k=y,S=b;i[a]=d,i[c]=i[n],i[h]=g,i[u]=i[o-1],i[l]=_;var T=n+1,P=o-2,E=S>=C&&C>=S;if(E)for(var D=T;P>=D;++D){var L=i[D],M=t(L);if(C>M)D!==T&&(i[D]=i[T],i[T]=L),++T;else if(M>C)for(;;){var A=t(i[P]);{if(!(A>C)){if(C>A){i[D]=i[T],i[T++]=i[P],i[P--]=L;break}i[D]=i[P],i[P--]=L;break}P--}}}else for(var D=T;P>=D;D++){var L=i[D],M=t(L);if(C>M)D!==T&&(i[D]=i[T],i[T]=L),++T;else if(M>S)for(;;){var A=t(i[P]);{if(!(A>S)){C>A?(i[D]=i[T],i[T++]=i[P],i[P--]=L):(i[D]=i[P],i[P--]=L);break}if(P--,D>P)break}}}if(i[n]=i[T-1],i[T-1]=x,i[o-1]=i[P+1],i[P+1]=k,e(i,n,T-1),e(i,P+2,o),E)return i;if(a>T&&P>l){for(var R,A;(R=t(i[T]))<=C&&R>=C;)++T;for(;(A=t(i[P]))<=S&&A>=S;)--P;for(var D=T;P>=D;D++){var L=i[D],M=t(L);if(C>=M&&M>=C)D!==T&&(i[D]=i[T],i[T]=L),T++;else if(S>=M&&M>=S)for(;;){var A=t(i[P]);{if(!(S>=A&&A>=S)){C>A?(i[D]=i[T],i[T++]=i[P],i[P--]=L):(i[D]=i[P],i[P--]=L);break}if(P--,D>P)break}}}}return e(i,T,P+1)}var n=s(t);return e}function l(t){for(var e=new Array(t),i=-1;++i<t;)e[i]=0;return e}function h(t,e){for(var i=t.length;e>i;)t[i++]=0;return t}function c(t,e){if(e>32)throw new Error("invalid array width!");return t}function u(t,e){return function(i){var n=i.length;return[t.left(i,e,0,n),t.right(i,e,0,n)]}}function d(t,e){var i=e[0],n=e[1];return function(e){var o=e.length;return[t.left(e,i,0,o),t.left(e,n,0,o)]}}function p(t){return[0,t.length]}function f(){return null}function m(){return 0}function g(t){return t+1}function v(t){return t-1}function y(t){return function(e,i){return e+ +t(i)}}function b(t){return function(e,i){return e-t(i)}}function _(){function t(t){var e=S,i=t.length;return i&&(_=_.concat(t),E=R(E,S+=i),M.forEach(function(n){n(t,e,i)})),c}function n(){for(var t=w(S,S),e=[],i=0,n=0;S>i;++i)E[i]?t[i]=n++:e.push(i);D.forEach(function(t){t(0,[],e)}),A.forEach(function(e){e(t)});for(var o,i=0,n=0;S>i;++i)(o=E[i])&&(i!==n&&(E[n]=o,_[n]=_[i]),++n);for(_.length=n;S>n;)E[--S]=0}function s(t){function n(e,n,o){q=e.map(t),V=Q(x(o),0,o),q=i(q,V);var r,s=J(q),a=s[0],l=s[1];if(Y)for(r=0;o>r;++r)Y(q[r],r)||(E[V[r]+n]|=Z);else{for(r=0;a>r;++r)E[V[r]+n]|=Z;for(r=l;o>r;++r)E[V[r]+n]|=Z}if(!n)return $=q,G=V,ie=a,void(ne=l);var h=$,c=G,u=0,d=0;for($=new Array(S),G=w(S,S),r=0;n>u&&o>d;++r)h[u]<q[d]?($[r]=h[u],G[r]=c[u++]):($[r]=q[d],G[r]=V[d++]+n);for(;n>u;++u,++r)$[r]=h[u],G[r]=c[u];for(;o>d;++d,++r)$[r]=q[d],G[r]=V[d]+n;s=J($),ie=s[0],ne=s[1]}function s(t,e,i){te.forEach(function(t){t(q,V,e,i)}),q=V=null}function l(t){for(var e,i=0,n=0;S>i;++i)E[e=G[i]]&&(i!==n&&($[n]=$[i]),G[n]=t[e],++n);for($.length=n;S>n;)G[n++]=0;var o=J($);ie=o[0],ne=o[1]}function h(t){var e=t[0],i=t[1];if(Y)return Y=null,H(function(t,n){return n>=e&&i>n}),ie=e,ne=i,X;var n,o,r,s=[],a=[];if(ie>e)for(n=e,o=Math.min(ie,i);o>n;++n)E[r=G[n]]^=Z,s.push(r);else if(e>ie)for(n=ie,o=Math.min(e,ne);o>n;++n)E[r=G[n]]^=Z,a.push(r);if(i>ne)for(n=Math.max(e,ne),o=i;o>n;++n)E[r=G[n]]^=Z,s.push(r);else if(ne>i)for(n=Math.max(ie,i),o=ne;o>n;++n)E[r=G[n]]^=Z,a.push(r);return ie=e,ne=i,D.forEach(function(t){t(Z,s,a)}),X}function c(t){return null==t?N():Array.isArray(t)?I(t):"function"==typeof t?j(t):L(t)}function L(t){return h((J=u(k,t))($))}function I(t){return h((J=d(k,t))($))}function N(){return h((J=p)($))}function j(t){return J=p,H(Y=t),ie=0,ne=S,X}function H(t){var e,i,n,o=[],r=[];for(e=0;S>e;++e)E[i=G[e]]&Z^!(n=t($[e],e))&&(n?(E[i]&=K,o.push(i)):(E[i]|=Z,r.push(i)));D.forEach(function(t){t(Z,o,r)})}function z(t){for(var e,i=[],n=ne;--n>=ie&&t>0;)E[e=G[n]]||(i.push(_[e]),--t);return i}function B(t){for(var e,i=[],n=ie;ne>n&&t>0;)E[e=G[n]]||(i.push(_[e]),--t),n++;return i}function F(t){function i(e,i,n,o){function r(){++q===W&&(y=O(y,U<<=1),N=O(N,U),W=C(U))}var c,u,d,p,m,g,v=I,y=w(q,W),b=z,x=F,k=q,T=0,P=0;for(X&&(b=x=f),I=new Array(q),q=0,N=k>1?R(N,S):w(S,W),k&&(d=(u=v[0]).key);o>P&&!((p=t(e[P]))>=p);)++P;for(;o>P;){for(u&&p>=d?(m=u,g=d,y[T]=q,(u=v[++T])&&(d=u.key)):(m={key:p,value:x()},g=p),I[q]=m;!(p>g||(N[c=i[P]+n]=q,E[c]&K||(m.value=b(m.value,_[c])),++P>=o));)p=t(e[P]);r()}for(;k>T;)I[y[T]=q]=v[T++],r();if(q>T)for(T=0;n>T;++T)N[T]=y[N[T]];c=D.indexOf(V),q>1?(V=s,Y=l):(!q&&Q&&(q=1,I=[{key:null,value:x()}]),1===q?(V=a,Y=h):(V=f,Y=f),N=null),D[c]=V}function n(){if(q>1){for(var t=q,e=I,i=w(t,t),n=0,o=0;S>n;++n)E[n]&&(i[N[o]=N[n]]=1,++o);for(I=[],q=0,n=0;t>n;++n)i[n]&&(i[n]=q++,I.push(e[n]));if(q>1)for(var n=0;o>n;++n)N[n]=i[N[n]];else N=null;D[D.indexOf(V)]=q>1?(Y=l,V=s):1===q?(Y=h,V=a):Y=V=f}else if(1===q){if(Q)return;for(var n=0;S>n;++n)if(E[n])return;I=[],q=0,D[D.indexOf(V)]=V=Y=f}}function s(t,e,i){if(t!==Z&&!X){var n,o,r,s;for(n=0,r=e.length;r>n;++n)E[o=e[n]]&K||(s=I[N[o]],s.value=z(s.value,_[o]));for(n=0,r=i.length;r>n;++n)(E[o=i[n]]&K)===t&&(s=I[N[o]],s.value=B(s.value,_[o]))}}function a(t,e,i){if(t!==Z&&!X){var n,o,r,s=I[0];for(n=0,r=e.length;r>n;++n)E[o=e[n]]&K||(s.value=z(s.value,_[o]));for(n=0,r=i.length;r>n;++n)(E[o=i[n]]&K)===t&&(s.value=B(s.value,_[o]))}}function l(){var t,e;for(t=0;q>t;++t)I[t].value=F();for(t=0;S>t;++t)E[t]&K||(e=I[N[t]],e.value=z(e.value,_[t]))}function h(){var t,e=I[0];for(e.value=F(),t=0;S>t;++t)E[t]&K||(e.value=z(e.value,_[t]))}function c(){return X&&(Y(),X=!1),I}function u(t){var e=j(c(),0,I.length,t);return H.sort(e,0,e.length)}function d(t,e,i){return z=t,B=e,F=i,X=!0,M}function p(){return d(g,v,m)}function x(t){return d(y(t),b(t),m)}function k(t){function e(e){return t(e.value)}return j=r(e),H=o(e),M}function T(){return k(e)}function P(){return q}function L(){var t=D.indexOf(V);return t>=0&&D.splice(t,1),t=te.indexOf(i),t>=0&&te.splice(t,1),t=A.indexOf(n),t>=0&&A.splice(t,1),M}var M={top:u,all:c,reduce:d,reduceCount:p,reduceSum:x,order:k,orderNatural:T,size:P,dispose:L,remove:L};ee.push(M);var I,N,j,H,z,B,F,U=8,W=C(U),q=0,V=f,Y=f,X=!0,Q=t===f;return arguments.length<1&&(t=e),D.push(V),te.push(i),A.push(n),i($,G,0,S),p().orderNatural()}function U(){var t=F(f),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t}function W(){ee.forEach(function(t){t.dispose()});var t=M.indexOf(n);for(t>=0&&M.splice(t,1),t=M.indexOf(s),t>=0&&M.splice(t,1),t=A.indexOf(l),t>=0&&A.splice(t,1),t=0;S>t;++t)E[t]&=K;return T&=K,X}var $,G,q,V,Y,X={filter:c,filterExact:L,filterRange:I,filterFunction:j,filterAll:N,top:z,bottom:B,group:F,groupAll:U,dispose:W,remove:W},Z=~T&-~T,K=~Z,Q=a(function(t){return q[t]}),J=p,te=[],ee=[],ie=0,ne=0;return M.unshift(n),M.push(s),A.push(l),T|=Z,(P>=32?!Z:T&(1<<P)-1)&&(E=O(E,P<<=1)),n(_,0,S),s(_,0,S),X}function l(){function t(t,e){var i;if(!p)for(i=e;S>i;++i)E[i]||(l=h(l,_[i]))}function e(t,e,i){var n,o,r;if(!p){for(n=0,r=e.length;r>n;++n)E[o=e[n]]||(l=h(l,_[o]));for(n=0,r=i.length;r>n;++n)E[o=i[n]]===t&&(l=c(l,_[o]))}}function i(){var t;for(l=u(),t=0;S>t;++t)E[t]||(l=h(l,_[t]))}function n(t,e,i){return h=t,c=e,u=i,p=!0,d}function o(){return n(g,v,m)}function r(t){return n(y(t),b(t),m)}function s(){return p&&(i(),p=!1),l}function a(){var i=D.indexOf(e);return i>=0&&D.splice(i),i=M.indexOf(t),i>=0&&M.splice(i),d}var l,h,c,u,d={reduce:n,reduceCount:o,reduceSum:r,value:s,dispose:a,remove:a},p=!0;return D.push(e),M.push(t),t(_,0,S),o()}function h(){return S}var c={add:t,remove:n,dimension:s,groupAll:l,size:h},_=[],S=0,T=0,P=8,E=L(0),D=[],M=[],A=[];return arguments.length?t(arguments[0]):c}function w(t,e){return(257>e?L:65537>e?M:A)(t)}function x(t){for(var e=w(t,t),i=-1;++i<t;)e[i]=i;return e}function C(t){return 8===t?256:16===t?65536:4294967296}_.version="1.3.9",_.permute=i;var k=_.bisect=n(e);k.by=n;var S=_.heap=o(e);S.by=o;var T=_.heapselect=r(e);T.by=r;var P=_.insertionsort=s(e);P.by=s;var E=_.quicksort=a(e);E.by=a;var D=32,L=l,M=l,A=l,R=h,O=c;"undefined"!=typeof Uint8Array&&(L=function(t){return new Uint8Array(t)},M=function(t){return new Uint16Array(t)},A=function(t){return new Uint32Array(t)},R=function(t,e){if(t.length>=e)return t;var i=new t.constructor(e);return i.set(t),i},O=function(t,e){var i;switch(e){case 16:i=M(t.length);break;case 32:i=A(t.length);break;default:throw new Error("invalid array width!")}return i.set(t),i}),t.crossfilter=_}("undefined"!=typeof exports&&exports||this),/*! Flight v1.3.0 | (c) Twitter, Inc. | MIT License */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.flight=e():t.flight=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,o;n=[i(1),i(2),i(3),i(4),i(5),i(6),i(7)],o=function(t,e,i,n,o,r,s){"use strict";return{advice:t,component:e,compose:i,debug:n,logger:o,registry:r,utils:s}}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(7)],o=function(t){"use strict";var e={around:function(t,e){return function(){var i=0,n=arguments.length,o=new Array(n+1);for(o[0]=t.bind(this);n>i;i++)o[i+1]=arguments[i];return e.apply(this,o)}},before:function(t,e){var i="function"==typeof e?e:e.obj[e.fnName];return function(){return i.apply(this,arguments),t.apply(this,arguments)}},after:function(t,e){var i="function"==typeof e?e:e.obj[e.fnName];return function(){var e=(t.unbound||t).apply(this,arguments);return i.apply(this,arguments),e}},withAdvice:function(){["before","after","around"].forEach(function(i){this[i]=function(n,o){t.mutateProperty(this,n,function(){return this[n]="function"==typeof this[n]?e[i](this[n],o):o,this[n]})}},this)}};return e}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1),i(7),i(3),i(8),i(6),i(5),i(4)],o=function(t,e,i,n,o,r,s){"use strict";function a(){var t=o.findComponentInfo(this);t&&Object.keys(t.instances).forEach(function(e){var i=t.instances[e];i&&i.instance&&i.instance.teardown()})}function l(t){for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];if(!t)throw new Error("Component needs to be attachTo'd a jQuery object, native node or selector string");var s=e.merge.apply(e,n),a=o.findComponentInfo(this);$(t).each(function(t,e){a&&a.isAttachedTo(e)||(new this).initialize(e,s)}.bind(this))}function h(){var t=this.mixedIn||this.prototype.mixedIn||[];return t.map(function(t){if(null==t.name){var e=t.toString().match(u);return e&&e[1]?e[1]:""}return"withBase"!=t.name?t.name:""}).filter(Boolean).join(", ")}function c(){for(var u=arguments.length,d=new Array(u),p=0;u>p;p++)d[p]=arguments[p];var f=function(){};return f.toString=f.prototype.toString=h,s.enabled&&(f.describe=f.prototype.describe=f.toString()),f.attachTo=l,f.mixin=function(){var t=c(),n=Object.create(f.prototype);return n.mixedIn=[].concat(f.prototype.mixedIn),n.defaults=e.merge(f.prototype.defaults),n.attrDef=f.prototype.attrDef,i.mixin(n,arguments),t.prototype=n,t.prototype.constructor=t,t},f.teardownAll=a,s.enabled&&d.unshift(r),d.unshift(n,t.withAdvice,o.withRegistration),i.mixin(f.prototype,d),f}var u=/function (.*?)\s?\(/;return c.teardownAll=function(){o.components.slice().forEach(function(t){t.component.teardownAll()}),o.reset()},c}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(7)],o=function(t){"use strict";function e(e,i){Object.keys(e).forEach(function(o){n.indexOf(o)<0&&t.propertyWritability(e,o,i)})}function i(t,i){t.mixedIn=t.hasOwnProperty("mixedIn")?t.mixedIn:[];for(var n=0;n<i.length;n++)-1==t.mixedIn.indexOf(i[n])&&(e(t,!1),i[n].call(t),t.mixedIn.push(i[n]));e(t,!0)}var n=["mixedIn","attrDef"];return{mixin:i}}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(6)],o=function(t){"use strict";function e(t,i,n){n=n||{};var o=n.obj||window,r=n.path||(o==window?"window":""),s=Object.keys(o);s.forEach(function(n){(m[t]||t)(i,o,n)&&console.log([r,".",n].join(""),"->",["(",typeof o[n],")"].join(""),o[n]),"[object Object]"==Object.prototype.toString.call(o[n])&&o[n]!=o&&-1==r.split(".").indexOf(n)&&e(t,i,{obj:o[n],path:[r,n].join(".")})})}function i(t,i,n,o){i&&typeof n!=i?console.error([n,"must be",i].join(" ")):e(t,n,o)}function n(t,e){i("name","string",t,e)}function o(t,e){i("nameContains","string",t,e)}function r(t,e){i("type","function",t,e)}function s(t,e){i("value",null,t,e)}function a(t,e){i("valueCoerced",null,t,e)}function l(t,i){e(t,null,i)}function h(){var t=[].slice.call(arguments);v.eventNames.length||(v.eventNames=g),v.actions=t.length?t:g,p()}function c(){var t=[].slice.call(arguments);v.actions.length||(v.actions=g),v.eventNames=t.length?t:g,p()}function u(){v.actions=[],v.eventNames=[],p()}function d(){v.actions=g,v.eventNames=g,p()}function p(){try{window.localStorage&&(localStorage.setItem("logFilter_eventNames",v.eventNames),localStorage.setItem("logFilter_actions",v.actions))}catch(t){}}function f(){var t,e;try{t=window.localStorage&&localStorage.getItem("logFilter_eventNames"),e=window.localStorage&&localStorage.getItem("logFilter_actions")}catch(i){return}t&&(v.eventNames=t),e&&(v.actions=e),Object.keys(v).forEach(function(t){var e=v[t];"string"==typeof e&&e!==g&&(v[t]=e?e.split(","):[])})}var m={name:function(t,e,i){return t==i},nameContains:function(t,e,i){return i.indexOf(t)>-1},type:function(t,e,i){return e[i]instanceof t},value:function(t,e,i){return e[i]===t},valueCoerced:function(t,e,i){return e[i]==t}},g="all",v={eventNames:[],actions:[]};return{enable:function(t){this.enabled=!!t,t&&window.console&&(console.info("Booting in DEBUG mode"),console.info("You can configure event logging with DEBUG.events.logAll()/logNone()/logByName()/logByAction()")),f(),window.DEBUG=this},registry:t,find:{byName:n,byNameContains:o,byType:r,byValue:s,byValueCoerced:a,custom:l},events:{logFilter:v,logByAction:h,logByName:c,logAll:d,logNone:u}}}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(7)],o=function(t){"use strict";function e(t){var e=t.tagName?t.tagName.toLowerCase():t.toString(),i=t.className?"."+t.className:"",n=e+i;return t.tagName?["'","'"].join(n):n}function i(t,i,n){if(window.DEBUG&&window.DEBUG.enabled){var r,s,a,l,h,c,u,d,p,f;"function"==typeof n[n.length-1]&&(l=n.pop(),l=l.unbound||l),1==n.length?(a=i.$node[0],s=n[0]):2!=n.length||"object"!=typeof n[1]||n[1].type?(a=n[0],s=n[1],"trigger"==t&&(h=n[2])):(a=i.$node[0],s=n[0],"trigger"==t&&(h=n[1])),r="object"==typeof s?s.type:s,c=DEBUG.events.logFilter,d="all"==c.actions||c.actions.indexOf(t)>-1,u=function(t){return t.test?t:new RegExp("^"+t.replace(/\*/g,".*")+"$")},p="all"==c.eventNames||c.eventNames.some(function(t){return u(t).test(r)}),d&&p&&(f=[o[t],t,"["+r+"]"],h&&f.push(h),f.push(e(a)),f.push(i.constructor.describe.split(" ").slice(0,3).join(" ")),console.groupCollapsed&&"trigger"==t&&console.groupCollapsed(t,r),console.info.apply(console,f))}}function n(){this.before("trigger",function(){i("trigger",this,t.toArray(arguments))}),console.groupCollapsed&&this.after("trigger",function(){console.groupEnd()}),this.before("on",function(){i("on",this,t.toArray(arguments))}),this.before("off",function(){i("off",this,t.toArray(arguments))})}var o={on:"<-",trigger:"->",off:"x "};return n}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t){var e,i;e=[],i=function(){"use strict";function t(t,e){var i,n,o,r=e.length;return"function"==typeof e[r-1]&&(r-=1,o=e[r]),"object"==typeof e[r-1]&&(r-=1),2==r?(i=e[0],n=e[1]):(i=t.node,n=e[0]),{element:i,type:n,callback:o}}function e(t,e){return t.element==e.element&&t.type==e.type&&(null==e.callback||t.callback==e.callback)}function i(){function i(t){this.component=t,this.attachedTo=[],this.instances={},this.addInstance=function(t){var e=new n(t);return this.instances[t.identity]=e,this.attachedTo.push(t.node),e},this.removeInstance=function(t){delete this.instances[t.identity];var e=this.attachedTo.indexOf(t.node);e>-1&&this.attachedTo.splice(e,1),Object.keys(this.instances).length||o.removeComponentInfo(this)},this.isAttachedTo=function(t){return this.attachedTo.indexOf(t)>-1}}function n(t){this.instance=t,this.events=[],this.addBind=function(t){this.events.push(t),o.events.push(t)},this.removeBind=function(t){for(var i,n=0;i=this.events[n];n++)e(i,t)&&this.events.splice(n,1)}}var o=this;(this.reset=function(){this.components=[],this.allInstances={},this.events=[]}).call(this),this.addInstance=function(t){var e=this.findComponentInfo(t);e||(e=new i(t.constructor),this.components.push(e));var n=e.addInstance(t);return this.allInstances[t.identity]=n,e},this.removeInstance=function(t){var e=this.findComponentInfo(t);e&&e.removeInstance(t),delete this.allInstances[t.identity]},this.removeComponentInfo=function(t){var e=this.components.indexOf(t);e>-1&&this.components.splice(e,1)},this.findComponentInfo=function(t){for(var e,i=t.attachTo?t:t.constructor,n=0;e=this.components[n];n++)if(e.component===i)return e;return null},this.findInstanceInfo=function(t){return this.allInstances[t.identity]||null},this.getBoundEventNames=function(t){return this.findInstanceInfo(t).events.map(function(t){return t.type})},this.findInstanceInfoByNode=function(t){var e=[];return Object.keys(this.allInstances).forEach(function(i){var n=this.allInstances[i];n.instance.node===t&&e.push(n)},this),e},this.on=function(e){for(var i,n=o.findInstanceInfo(this),r=arguments.length,s=1,a=new Array(r-1);r>s;s++)a[s-1]=arguments[s];if(n){i=e.apply(null,a),i&&(a[a.length-1]=i);var l=t(this,a);n.addBind(l)}},this.off=function(){var i=t(this,arguments),n=o.findInstanceInfo(this);n&&n.removeBind(i);for(var r,s=0;r=o.events[s];s++)e(r,i)&&o.events.splice(s,1)},o.trigger=function(){},this.teardown=function(){o.removeInstance(this)},this.withRegistration=function(){this.after("initialize",function(){o.addInstance(this)}),this.around("on",o.on),this.after("off",o.off),window.DEBUG&&(!1).enabled&&this.after("trigger",o.trigger),this.after("teardown",{obj:o,fnName:"teardown"})}}return new i}.apply(null,e),!(void 0!==i&&(t.exports=i))},function(t,e,i){var n,o;n=[i(4)],o=function(t){"use strict";function e(){var e=t.enabled&&!Object.propertyIsEnumerable("getOwnPropertyDescriptor");if(e)try{Object.getOwnPropertyDescriptor(Object,"keys")}catch(i){return!1}return e}var i=100,n={isDomObj:function(t){return!(!t.nodeType&&t!==window)},toArray:function(t,e){e=e||0;for(var i=t.length,n=new Array(i-e),o=e;i>o;o++)n[o-e]=t[o];return n},merge:function(){var t=arguments.length,e=new Array(t+1);if(0===t)return{};for(var i=0;t>i;i++)e[i+1]=arguments[i];return e[0]={},e[e.length-1]===!0&&(e.pop(),e.unshift(!0)),$.extend.apply(void 0,e)},push:function(t,e,i){return t&&Object.keys(e||{}).forEach(function(n){if(t[n]&&i)throw new Error('utils.push attempted to overwrite "'+n+'" while running in protected mode');"object"==typeof t[n]&&"object"==typeof e[n]?this.push(t[n],e[n]):t[n]=e[n]},this),t},getEnumerableProperty:function(t,e){return t.propertyIsEnumerable(e)?t[e]:void 0},compose:function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},uniqueArray:function(t){for(var e={},i=[],n=0,o=t.length;o>n;++n)e.hasOwnProperty(t[n])||(i.push(t[n]),e[t[n]]=1);return i},debounce:function(t,e,n){"number"!=typeof e&&(e=i);var o,r;return function(){var i=this,s=arguments,a=function(){o=null,n||(r=t.apply(i,s))},l=n&&!o;return o&&clearTimeout(o),o=setTimeout(a,e),l&&(r=t.apply(i,s)),r}},throttle:function(t,e){"number"!=typeof e&&(e=i);var n,o,r,s,a,l,h=this.debounce(function(){a=s=!1},e);return function(){n=this,o=arguments;var i=function(){r=null,a&&(l=t.apply(n,o)),h()};return r||(r=setTimeout(i,e)),s?a=!0:(s=!0,l=t.apply(n,o)),h(),l}},countThen:function(t,e){return function(){return--t?void 0:e.apply(this,arguments)}},delegate:function(t){return function(e,i){var n,o=$(e.target);Object.keys(t).forEach(function(r){return!e.isPropagationStopped()&&(n=o.closest(r)).length?(i=i||{},i.el=n[0],t[r].apply(this,[e,i])):void 0},this)}},once:function(t){var e,i;return function(){return e?i:(e=!0,i=t.apply(this,arguments))}},propertyWritability:function(t,i,n){e()&&t.hasOwnProperty(i)&&Object.defineProperty(t,i,{writable:n})},mutateProperty:function(t,i,n){var o;return e()&&t.hasOwnProperty(i)?(o=Object.getOwnPropertyDescriptor(t,i).writable,Object.defineProperty(t,i,{writable:!0}),n.call(t),void Object.defineProperty(t,i,{writable:o})):void n.call(t)}};return n}.apply(null,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(7),i(6),i(4)],o=function(t,e,i){"use strict";function n(t){t.events.slice().forEach(function(t){var e=[t.type];t.element&&e.unshift(t.element),"function"==typeof t.callback&&e.push(t.callback),this.off.apply(this,e)},t.instance)}function o(t,e){try{window.postMessage(e,"*")}catch(i){throw console.log("unserializable data for event",t,":",e),new Error(["The event",t,"on component",this.toString(),"was triggered with non-serializable data"].join(" "))}}function r(t){var e,n=[];if(this.attr=new this.attrDef,i.enabled&&window.console){for(var o in this.attrDef.prototype)n.push(o);e=Object.keys(t);for(var r=e.length-1;r>=0;r--)if(-1==n.indexOf(e[r])){console.warn('Passed unused attributes including "'+e[r]+'" to component "'+this.toString()+'".');break}}for(var o in this.attrDef.prototype){if("undefined"==typeof t[o]){if(null===this.attr[o])throw new Error('Required attribute "'+o+'" not specified in attachTo for component "'+this.toString()+'".')}else this.attr[o]=t[o];"function"==typeof this.attr[o]&&(this.attr[o]=this.attr[o].call(this))}}function s(t){var e=Object.create(t);for(var i in this.defaults)t.hasOwnProperty(i)||(e[i]=this.defaults[i]);this.attr=e,Object.keys(this.defaults||{}).forEach(function(t){if(null===this.defaults[t]&&null===this.attr[t])throw new Error('Required attribute "'+t+'" not specified in attachTo for component "'+this.toString()+'".')},this)}function a(t){return function(e,i){$(e.target).trigger(t,i)}}function l(){this.trigger=function(){var t,e,n,r,s,a=arguments.length-1,l=arguments[a];return"string"==typeof l||l&&l.defaultBehavior||(a--,n=l),1==a?(t=$(arguments[0]),r=arguments[1]):(t=this.$node,r=arguments[0]),r.defaultBehavior&&(s=r.defaultBehavior,r=$.Event(r.type)),e=r.type||r,i.enabled&&window.postMessage&&o.call(this,e,n),"object"==typeof this.attr.eventData&&(n=$.extend(!0,{},this.attr.eventData,n)),t.trigger(r||e,n),s&&!r.isDefaultPrevented()&&(this[s]||s).call(this,r,n),t},this.on=function(){var e,i,n,o,r=arguments.length-1,s=arguments[r];if(o="object"==typeof s?t.delegate(this.resolveDelegateRules(s)):"string"==typeof s?a(s):s,2==r?(e=$(arguments[0]),i=arguments[1]):(e=this.$node,i=arguments[0]),"function"!=typeof o&&"object"!=typeof o)throw new Error('Unable to bind to "'+i+'" because the given callback is not a function or an object');return n=o.bind(this),n.target=o,n.context=this,e.on(i,n),o.bound||(o.bound=[]),o.bound.push(n),n},this.off=function(){var t,i,n,o=arguments.length-1;if("function"==typeof arguments[o]&&(n=arguments[o],o-=1),1==o?(t=$(arguments[0]),i=arguments[1]):(t=this.$node,i=arguments[0]),n){var r=n.target?n.target.bound:n.bound||[];r&&r.some(function(t,e,i){return t.context&&this.identity==t.context.identity?(i.splice(e,1),n=t,!0):void 0},this),t.off(i,n)}else e.findInstanceInfo(this).events.forEach(function(e){i==e.type&&t.off(i,e.callback)});return t},this.resolveDelegateRules=function(t){var e={};return Object.keys(t).forEach(function(i){if(!(i in this.attr))throw new Error('Component "'+this.toString()+'" wants to listen on "'+i+'" but no such attribute was defined.');e[this.attr[i]]="string"==typeof t[i]?a(t[i]):t[i]},this),e},this.select=function(t){return this.$node.find(this.attr[t])},this.attributes=function(t){var e=function(){};this.attrDef&&(e.prototype=new this.attrDef);for(var i in t)e.prototype[i]=t[i];this.attrDef=e},this.defaultAttrs=function(e){t.push(this.defaults,e,!0)||(this.defaults=e)},this.initialize=function(t,e){if(e=e||{},this.identity||(this.identity=h++),!t)throw new Error("Component needs a node");return t.jquery?(this.node=t[0],this.$node=t):(this.node=t,this.$node=$(t)),this.attrDef?r.call(this,e):s.call(this,e),this},this.teardown=function(){n(e.findInstanceInfo(this))}}var h=0;return l}.apply(null,n),!(void 0!==o&&(t.exports=o))}])}),function(t){if("function"==typeof bootstrap)bootstrap("flippant",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeFlippant=t}else"undefined"!=typeof window?window.flippant=t():global.flippant=t()}(function(){return function(t,e,i){function n(i,r){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!r&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var o=t[i][1][e];return n(o?o:e)},a,a.exports)}return e[i].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,i){function n(t,e,i,n,a){function l(){o(c,t,h),c.classList.remove("flipped"),c.classList.remove("flipped"),t.classList.remove("flipped"),window.setTimeout(function(){c.classList.remove(n),t.parentElement.removeChild(c)},a)}var h,c,u;return a=a||400,i=i||"card","modal"===i&&(n=n||"flippant-modal-dark",h="fixed",u=r),"card"===i&&(n=n||"flippant-modal-light",h="absolute",u=s),c=document.createElement("div"),t.parentElement.appendChild(c),o(c,t,h),c.innerHTML=e,t.classList.add("flippant"),c.classList.add("flippant-back"),c.classList.add(n),"absolute"==h?u(c):window.setTimeout(function(){u(c)},0),window.setTimeout(function(){c.classList.add("flipper"),c.classList.add("flipped"),t.classList.add("flipped")},0),c.addEventListener("close",l),c.close=l,c}function o(t,e,i){t.style.position=i,t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",t.style["min-height"]=e.offsetHeight+"px",t.style.width=e.offsetWidth+"px",t.style["z-index"]=9999}function r(t){t.style.top=null,t.style.left=null,t.style.height=null,t.style.width=null}function s(t){t.style.height="auto"}i.flip=n},{}]},{},[1])(1)}),/*!

 handlebars v2.0.0

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function n(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,c.test(t)?t.replace(h,e):t):t+""}function o(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}function r(t,e){return(t?t+".":"")+e}var s={},a=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,c=/[&<>"'`]/;s.extend=i;var u=Object.prototype.toString;s.toString=u;var d=function(t){return"function"==typeof t};d(/x/)&&(d=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)});var d;s.isFunction=d;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===u.call(t):!1};return s.isArray=p,s.escapeExpression=n,s.isEmpty=o,s.appendContextPath=r,s}(t),i=function(){"use strict";function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var o=Error.prototype.constructor.call(this,t),r=0;r<i.length;r++)this[i[r]]=o[i[r]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse,o=i.fn;if(e===!0)return o(this);if(e===!1||null==e)return n(this);if(c(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):n(this);if(i.data&&i.ids){var s=g(i.data);s.contextPath=r.appendContextPath(i.data.contextPath,i.name),i={data:s}}return o(e,i)}),t.registerHelper("each",function(t,e){if(!e)throw new s("Must pass iterator to #each");var i,n,o=e.fn,a=e.inverse,l=0,h="";if(e.data&&e.ids&&(n=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),u(t)&&(t=t.call(this)),e.data&&(i=g(e.data)),t&&"object"==typeof t)if(c(t))for(var d=t.length;d>l;l++)i&&(i.index=l,i.first=0===l,i.last=l===t.length-1,n&&(i.contextPath=n+l)),h+=o(t[l],{data:i});else for(var p in t)t.hasOwnProperty(p)&&(i&&(i.key=p,i.index=l,i.first=0===l,n&&(i.contextPath=n+p)),h+=o(t[p],{data:i}),l++);return 0===l&&(h=a(this)),h}),t.registerHelper("if",function(t,e){return u(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){u(t)&&(t=t.call(this));var i=e.fn;if(r.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var n=g(e.data);n.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0]),e={data:n}}return i(t,e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var o={},r=t,s=e,a="2.0.0";o.VERSION=a;var l=6;o.COMPILER_REVISION=l;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};o.REVISION_CHANGES=h;var c=r.isArray,u=r.isFunction,d=r.toString,p="[object Object]";o.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:f,log:m,registerHelper:function(t,e){if(d.call(t)===p){if(e)throw new s("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){d.call(t)===p?r.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(f.level<=t){var i=f.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};o.logger=f;var m=f.log;o.log=m;var g=function(t){var e=r.extend({},t);return e._parent=t,e};return o.createFrame=g,o}(e,i),o=function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=d;if(e!==i){if(i>e){var n=p[i],o=p[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var i=function(i,n,o,r,s,a,l,h,d){s&&(r=c.extend({},r,s));var p=e.VM.invokePartial.call(this,i,o,r,a,l,h,d);if(null==p&&e.compile){var f={helpers:a,partials:l,data:h,depths:d};l[o]=e.compile(i,{data:void 0!==h,compat:t.compat},e),p=l[o](r,f)}if(null!=p){if(n){for(var m=p.split("\n"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=n+m[g];p=m.join("\n")}return p}throw new u("The partial "+o+" could not be compiled when running in runtime-only mode")},n={lookup:function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:i,fn:function(e){return t[e]},programs:[],program:function(t,e,i){var n=this.programs[t],o=this.fn(t);return e||i?n=r(this,t,o,e,i):n||(n=this.programs[t]=r(this,t,o)),n},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=c.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler},o=function(e,i){i=i||{};var r=i.data;o._setup(i),!i.partial&&t.useData&&(r=l(e,r));var s;return t.useDepths&&(s=i.depths?[e].concat(i.depths):[e]),t.main.call(n,e,n.helpers,n.partials,r,s)};return o.isTop=!0,o._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials):(n.helpers=n.merge(i.helpers,e.helpers),t.usePartial&&(n.partials=n.merge(i.partials,e.partials)))},o._child=function(e,i,o){if(t.useDepths&&!o)throw new u("must pass parent depths");return r(n,e,t[e],i,o)},o}function r(t,e,i,n,o){var r=function(e,r){return r=r||{},i.call(t,e,t.helpers,t.partials,r.data||n,o&&[e].concat(o))};return r.program=e,r.depth=o?o.length:0,r}function s(t,e,i,n,o,r,s){var a={partial:!0,helpers:n,partials:o,data:r,depths:s};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(i,a):void 0}function a(){return""}function l(t,e){return e&&"root"in e||(e=e?f(e):{},e.root=t),e}var h={},c=t,u=e,d=i.COMPILER_REVISION,p=i.REVISION_CHANGES,f=i.createFrame;return h.checkRevision=n,h.template=o,h.program=r,h.invokePartial=s,h.noop=a,h}(e,i,n),r=function(t,e,i,n,o){"use strict";var r,s=t,a=e,l=i,h=n,c=o,u=function(){var t=new s.HandlebarsEnvironment;return h.extend(t,s),t.SafeString=a,t.Exception=l,t.Utils=h,t.escapeExpression=h.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=u();return d.create=u,d["default"]=d,r=d}(n,t,i,e,o),s=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,n=t,o={ProgramNode:function(t,i,n){e.call(this,n),this.type="program",this.statements=t,this.strip=i},MustacheNode:function(t,i,n,r,s){if(e.call(this,s),this.type="mustache",this.strip=r,null!=n&&n.charAt){var a=n.charAt(3)||n.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!n;this.sexpr=t instanceof o.SexprNode?t:new o.SexprNode(t,i),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,n){e.call(this,n),this.type="sexpr",this.hash=i;var o=this.id=t[0],r=this.params=t.slice(1);this.isHelper=!(!r.length&&!i),this.eligibleHelper=this.isHelper||o.isSimple},PartialNode:function(t,i,n,o,r){e.call(this,r),this.type="partial",this.partialName=t,this.context=i,this.hash=n,this.strip=o,this.strip.inlineStandalone=!0},BlockNode:function(t,i,n,o,r){e.call(this,r),this.type="block",this.mustache=t,this.program=i,this.inverse=n,this.strip=o,n&&!i&&(this.isInverse=!0)},RawBlockNode:function(t,i,r,s){if(e.call(this,s),t.sexpr.id.original!==r)throw new n(t.sexpr.id.original+" doesn't match "+r,this);i=new o.ContentNode(i,s),this.type="block",this.mustache=t,this.program=new o.ProgramNode([i],{},s)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.original=this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var o="",r=[],s=0,a="",l=0,h=t.length;h>l;l++){var c=t[l].part;if(o+=(t[l].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new n("Invalid path: "+o,this);".."===c?(s++,a+="../"):this.isScoped=!0}else r.push(c)}this.original=o,this.parts=r,this.string=r.join("."),this.depth=s,this.idName=a+this.string,this.isSimple=1===t.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t,this.stringModeValue=t.stringModeValue,this.idName="@"+t.stringModeValue},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},NumberNode:function(t,i){e.call(this,i),this.type="NUMBER",this.original=this.number=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t,this.strip={inlineStandalone:!0}}};return i=o}(i),a=function(){"use strict";var t,e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,e,i,n,o,r){var s=r.length-1;switch(o){case 1:return n.prepareProgram(r[s-1].statements,!0),r[s-1];case 2:this.$=new n.ProgramNode(n.prepareProgram(r[s]),{},this._$);break;case 3:this.$=r[s];break;case 4:this.$=r[s];break;case 5:this.$=r[s];break;case 6:this.$=r[s];break;case 7:this.$=new n.ContentNode(r[s],this._$);break;case 8:this.$=new n.CommentNode(r[s],this._$);break;case 9:this.$=new n.RawBlockNode(r[s-2],r[s-1],r[s],this._$);break;case 10:this.$=new n.MustacheNode(r[s-1],null,"","",this._$);break;case 11:this.$=n.prepareBlock(r[s-3],r[s-2],r[s-1],r[s],!1,this._$);break;case 12:this.$=n.prepareBlock(r[s-3],r[s-2],r[s-1],r[s],!0,this._$);break;case 13:this.$=new n.MustacheNode(r[s-1],null,r[s-2],n.stripFlags(r[s-2],r[s]),this._$);break;case 14:this.$=new n.MustacheNode(r[s-1],null,r[s-2],n.stripFlags(r[s-2],r[s]),this._$);break;case 15:this.$={strip:n.stripFlags(r[s-1],r[s-1]),program:r[s]};break;case 16:this.$={path:r[s-1],strip:n.stripFlags(r[s-2],r[s])};break;case 17:this.$=new n.MustacheNode(r[s-1],null,r[s-2],n.stripFlags(r[s-2],r[s]),this._$);break;case 18:this.$=new n.MustacheNode(r[s-1],null,r[s-2],n.stripFlags(r[s-2],r[s]),this._$);break;case 19:this.$=new n.PartialNode(r[s-3],r[s-2],r[s-1],n.stripFlags(r[s-4],r[s]),this._$);break;case 20:this.$=new n.PartialNode(r[s-2],void 0,r[s-1],n.stripFlags(r[s-3],r[s]),this._$);break;case 21:this.$=new n.SexprNode([r[s-2]].concat(r[s-1]),r[s],this._$);break;case 22:this.$=new n.SexprNode([r[s]],null,this._$);break;case 23:this.$=r[s];break;case 24:this.$=new n.StringNode(r[s],this._$);break;case 25:this.$=new n.NumberNode(r[s],this._$);break;case 26:this.$=new n.BooleanNode(r[s],this._$);break;case 27:this.$=r[s];break;case 28:r[s-1].isHelper=!0,this.$=r[s-1];break;case 29:this.$=new n.HashNode(r[s],this._$);break;case 30:this.$=[r[s-2],r[s]];break;case 31:this.$=new n.PartialNameNode(r[s],this._$);break;case 32:this.$=new n.PartialNameNode(new n.StringNode(r[s],this._$),this._$);break;case 33:this.$=new n.PartialNameNode(new n.NumberNode(r[s],this._$));break;case 34:this.$=new n.DataNode(r[s],this._$);break;case 35:this.$=new n.IdNode(r[s],this._$);break;case 36:r[s-2].push({part:r[s],separator:r[s-1]}),this.$=r[s-2];break;case 37:this.$=[{part:r[s]}];break;case 38:this.$=[];break;case 39:r[s-1].push(r[s]);break;case 48:this.$=[];break;case 49:r[s-1].push(r[s]);break;case 52:this.$=[r[s]];break;case 53:r[s-1].push(r[s])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],o=[null],r=[],s=this.table,a="",l=0,h=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,_,w,x={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=s[m]&&s[m][p]),"undefined"==typeof g||!g.length||!g[0]){var C="";if(!c){w=[];for(y in s[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),o.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(h=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],x.$=o[o.length-b],x._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,h,l,this.yy,g[1],o,r),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),o=o.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),o.push(x.$),r.push(x._$),_=s[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length&&(i=this._input.match(this.rules[r[s]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=s,this.options.flex));s++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function o(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),15;case 4:return 12;case 5:return o(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return o(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return e.yytext=o(1,2).replace(/\\"/g,'"'),42;case 30:return e.yytext=o(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return e.yytext=o(1,2),50;case 37:return"INVALID";case 38:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();return t=e}(),l=function(t){"use strict";function e(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(e.length-3)}}function i(t,e,i,n,l,c){if(t.sexpr.id.original!==n.path.original)throw new h(t.sexpr.id.original+" doesn't match "+n.path.original,t);var u=i&&i.program,d={left:t.strip.left,right:n.strip.right,openStandalone:r(e.statements),closeStandalone:o((u||e).statements)};if(t.strip.right&&s(e.statements,null,!0),u){var p=i.strip;p.left&&a(e.statements,null,!0),p.right&&s(u.statements,null,!0),n.strip.left&&a(u.statements,null,!0),o(e.statements)&&r(u.statements)&&(a(e.statements),s(u.statements))}else n.strip.left&&a(e.statements,null,!0);return l?new this.BlockNode(t,u,e,d,c):new this.BlockNode(t,e,u,d,c)}function n(t,e){for(var i=0,n=t.length;n>i;i++){var l=t[i],h=l.strip;if(h){var c=o(t,i,e,"partial"===l.type),u=r(t,i,e),d=h.openStandalone&&c,p=h.closeStandalone&&u,f=h.inlineStandalone&&c&&u;h.right&&s(t,i,!0),h.left&&a(t,i,!0),f&&(s(t,i),a(t,i)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(t[i-1].original)?RegExp.$1:"")),d&&(s((l.program||l.inverse).statements),a(t,i)),p&&(s(t,i),a((l.inverse||l.program).statements))}}return t}function o(t,e,i){void 0===e&&(e=t.length);var n=t[e-1],o=t[e-2];return n?"content"===n.type?(o||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function r(t,e,i){void 0===e&&(e=-1);var n=t[e+1],o=t[e+2];return n?"content"===n.type?(o||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function s(t,e,i){var n=t[null==e?0:e+1];if(n&&"content"===n.type&&(i||!n.rightStripped)){var o=n.string;n.string=n.string.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.string!==o}}function a(t,e,i){var n=t[null==e?t.length-1:e-1];if(n&&"content"===n.type&&(i||!n.leftStripped)){var o=n.string;return n.string=n.string.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.string!==o,n.leftStripped}}var l={},h=t;return l.stripFlags=e,l.prepareBlock=i,l.prepareProgram=n,l}(i),h=function(t,e,i,n){"use strict";function o(t){return t.constructor===a.ProgramNode?t:(s.yy=c,s.parse(t))}var r={},s=t,a=e,l=i,h=n.extend;r.parser=s;var c={};return h(c,l,a),r.parse=o,r}(a,s,l,e),c=function(t,e){"use strict";function i(){}function n(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var n=i.parse(t),o=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(o,e)}function o(t,e,i){function n(){var n=i.parse(t),o=(new i.Compiler).compile(n,e),r=(new i.JavaScriptCompiler).compile(o,e,void 0,!0);return i.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var o,r=function(t,e){return o||(o=n()),o.call(this,t,e)};return r._setup=function(t){return o||(o=n()),o._setup(t)},r._child=function(t,e,i){return o||(o=n()),o._child(t,e,i)},r}function r(t,e){if(t===e)return!0;if(l(t)&&l(e)&&t.length===e.length){for(var i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1;return!0}}var s={},a=t,l=e.isArray,h=[].slice;return s.Compiler=i,i.prototype={compiler:i,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],o=t.opcodes[i];if(n.opcode!==o.opcode||!r(n.args,o.args))return!1}for(e=this.children.length,i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(t)},accept:function(t){return this[t.type](t)},program:function(t){for(var e=t.statements,i=0,n=e.length;n>i;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var o=0,r=i.depths.list.length;r>o;o++)e=i.depths.list[o],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var o=e.sexpr,r=this.classifySexpr(o);"helper"===r?this.helperSexpr(o,i,n):"simple"===r?(this.simpleSexpr(o),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",o.id.original)):(this.ambiguousSexpr(o,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;
for(this.opcode("pushHash"),e=0,i=n.length;i>e;e++)this.pushParam(n[e][1]);for(;e--;)this.opcode("assignToHash",n[e][0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.hash?this.accept(t.hash):this.opcode("push","undefined"),t.context?this.accept(t.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",e.name,t.indent||""),this.opcode("append")},content:function(t){t.string&&this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,i){var n=t.id,o=n.parts[0],r=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.ID(n),this.opcode("invokeAmbiguous",o,r)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),o=t.id,r=o.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",n.length,r);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+r,t);o.falsy=!0,this.ID(o),this.opcode("invokeHelper",n.length,o.original,o.isSimple)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts,t.falsy,t.isScoped):this.opcode("pushContext")},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id.depth,t.id.parts)},STRING:function(t){this.opcode("pushString",t.string)},NUMBER:function(t){this.opcode("pushLiteral",t.number)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:h.call(arguments,1)})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var o=t.id.parts[0];n.knownHelpers[o]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,i=t.length;i>e;e++)this.pushParam(t[e])},pushParam:function(t){this.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):(this.trackIds&&this.opcode("pushId",t.type,t.idName||t.stringModeValue),this.accept(t))},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},s.precompile=n,s.compile=o,s}(i,e),u=function(t,e){"use strict";function i(t){this.value=t}function n(){}var o,r=t.COMPILER_REVISION,s=t.REVISION_CHANGES,a=e;n.prototype={nameLookup:function(t,e){return n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},depthedLookup:function(t){return this.aliases.lookup="this.lookup",'lookup(depths, "'+t+'")'},compilerInfo:function(){var t=r,e=s[t];return[t,e]},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.depths.list.length||this.options.compat;var o,r,s,l=t.opcodes;for(r=0,s=l.length;s>r;r++)o=l[r],this[o.opcode].apply(this,o.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var h=this.createFunctionContext(n);if(this.isChild)return h;var c={compiler:this.compilerInfo(),main:h},u=this.context.programs;for(r=0,s=u.length;s>r;r++)u[r]&&(c[r]=u[r]);return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.options.compat&&(c.compat=!0),n||(c.compiler=JSON.stringify(c.compiler),c=this.objectLiteral(c)),c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(t){var e="",i=this.stackVars.concat(this.registers.list);i.length>0&&(e+=", "+i.join(", "));for(var n in this.aliases)this.aliases.hasOwnProperty(n)&&(e+=", "+n+"="+this.aliases[n]);var o=["depth0","helpers","partials","data"];this.useDepths&&o.push("depths");var r=this.mergeSource(e);return t?(o.push(r),Function.apply(this,o)):"function("+o.join(",")+") {\n  "+r+"}"},mergeSource:function(t){for(var e,i,n="",o=!this.forceBuffer,r=0,s=this.source.length;s>r;r++){var a=this.source[r];a.appendToBuffer?e=e?e+"\n    + "+a.content:a.content:(e&&(n?n+="buffer += "+e+";\n  ":(i=!0,n=e+";\n  "),e=void 0),n+=a+"\n  ",this.environment.isSimple||(o=!1))}return o?(e||!n)&&(n+="return "+(e||'""')+";\n"):(t+=", buffer = "+(i?"":this.initializeBuffer()),n+=e?"return buffer + "+e+";\n":"return buffer;\n"),t&&(n="var "+t.substring(2)+(i?"":";\n  ")+n),n},blockValue:function(t){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams(t,0,e);var i=this.popStack();e.splice(1,0,i),this.push("blockHelperMissing.call("+e.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams("",0,t,!0),this.flushInline();var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.pendingContent=t},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if ("+t+" != null) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,i){var n=0,o=t.length;for(i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[n++]));o>n;n++)this.replaceStack(function(i){var o=this.nameLookup(i,t[n],"context");return e?" && "+o:" != null ? "+o+" : "+i})},lookupData:function(t,e){this.pushStackLiteral(t?"this.data(data, "+t+")":"data");for(var i=e.length,n=0;i>n;n++)this.replaceStack(function(t){return" && "+this.nameLookup(t,e[n],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+t.ids.join(",")+"}"),this.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,i){this.aliases.helperMissing="helpers.helperMissing";var n=this.popStack(),o=this.setupHelper(t,e),r=(i?o.name+" || ":"")+n+" || helperMissing";this.push("(("+r+").call("+o.callParams+"))")},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),o=this.lastHelper=this.nameLookup("helpers",t,"helper");this.push("((helper = (helper = "+o+" || "+i+") != null ? helper : helperMissing"+(n.paramsInit?"),("+n.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+n.callParams+") : helper))")},invokePartial:function(t,e){var i=[this.nameLookup("partials",t,"partial"),"'"+e+"'","'"+t+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?i.push("data"):this.options.compat&&i.push("undefined"),this.options.compat&&i.push("depths"),this.push("this.invokePartial("+i.join(", ")+")")},assignToHash:function(t){var e,i,n,o=this.popStack();this.trackIds&&(n=this.popStack()),this.stringParams&&(i=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),i&&r.types.push("'"+t+"': "+i),n&&r.ids.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+o+")")},pushId:function(t,e){"ID"===t||"DATA"===t?this.pushString(e):this.pushStackLiteral("sexpr"===t?"true":"null")},compiler:n,compileChildren:function(t,e){for(var i,n,o=t.children,r=0,s=o.length;s>r;r++){i=o[r],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context,!this.precompile),this.context.environments[a]=i,this.useDepths=this.useDepths||n.useDepths):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],i=(e.depths.list,this.useDepths),n=[e.index,"data"];return i&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){{var e,n,o,r="";this.isInline()}if(!this.isInline())throw new a("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof i)r=e=s.value,o=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+s+")",e=this.topStack()}var h=t.call(this,e);o||this.popStack(),n&&this.stackSlot--,this.push("("+r+h+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var o=t[e];o instanceof i?this.compileStack.push(o):this.pushStack(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof i?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(this.quotedString(i)+":"+t[i]);return"{"+e.join(",")+"}"},setupHelper:function(t,e,i){var n=[],o=this.setupParams(e,t,n,i),r=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:o,name:r,callParams:[this.contextName(0)].concat(n).join(", ")}},setupOptions:function(t,e,i){var n,o,r,s={},a=[],l=[],h=[];s.name=this.quotedString(t),s.hash=this.popStack(),this.trackIds&&(s.hashIds=this.popStack()),this.stringParams&&(s.hashTypes=this.popStack(),s.hashContexts=this.popStack()),o=this.popStack(),r=this.popStack(),(r||o)&&(r||(r="this.noop"),o||(o="this.noop"),s.fn=r,s.inverse=o);for(var c=e;c--;)n=this.popStack(),i[c]=n,this.trackIds&&(h[c]=this.popStack()),this.stringParams&&(l[c]=this.popStack(),a[c]=this.popStack());return this.trackIds&&(s.ids="["+h.join(",")+"]"),this.stringParams&&(s.types="["+l.join(",")+"]",s.contexts="["+a.join(",")+"]"),this.options.data&&(s.data="data"),s},setupParams:function(t,e,i,n){var o=this.objectLiteral(this.setupOptions(t,e,i));return n?(this.useRegister("options"),i.push("options"),"options="+o):(i.push(o),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=n.RESERVED_WORDS={},c=0,u=l.length;u>c;c++)h[l[c]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},o=n}(n,i),d=function(t,e,i,n,o){"use strict";var r,s=t,a=e,l=i.parser,h=i.parse,c=n.Compiler,u=n.compile,d=n.precompile,p=o,f=s.create,m=function(){var t=f();return t.compile=function(e,i){return u(e,i,t)},t.precompile=function(e,i){return d(e,i,t)},t.AST=a,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=h,t};return s=m(),s.create=m,s["default"]=s,r=s}(r,s,h,c,u);return d});/*!
 * Handsontable 0.12.6
 * Handsontable is a JavaScript library for editable tables with basic copy-paste compatibility with Excel and Google Docs
 *
 * Copyright 2012-2015 Marcin Warpechowski
 * Licensed under the MIT license.
 * http://handsontable.com/
 *
 * Date: Thu Feb 19 2015 14:25:57 GMT+0100 (CET)
 */
var Handsontable=function(t,e){e=e||{};var i=new Handsontable.Core(t,e);return i.init(),i};Handsontable.plugins={},function(t,e){"use strict";function i(){this.refCounter=0,this.init()}function n(){function t(){var t=this;t._registerTimeout(setTimeout(function(){t.updateSettings({observeChanges:!0})},0))}function i(t){return function(e,i){return"string"==typeof e[1]&&(e[1]=e[1].toLowerCase()),"string"==typeof i[1]&&(i[1]=i[1].toLowerCase()),e[1]===i[1]?0:null===e[1]||""===e[1]?1:null===i[1]||""===i[1]?-1:e[1]<i[1]?t?-1:1:e[1]>i[1]?t?1:-1:0}}function n(t){return function(e,i){if(e[1]===i[1])return 0;if(null===e[1])return 1;if(null===i[1])return-1;var n=new Date(e[1]),o=new Date(i[1]);return o>n?t?-1:1:n>o?t?1:-1:0}}function o(t){return"undefined"!=typeof t.sortColumn}var r=this;this.init=function(e){var i,n,o=this,s=o.getSettings().columnSorting;if(o.sortingEnabled=!!s,o.sortingEnabled){o.sortIndex=[];var h=a.call(o);"undefined"!=typeof h?(i=h.sortColumn,n=h.sortOrder):(i=s.column,n=s.sortOrder),r.sortByColumn.call(o,i,n),o.sort=function(){var t=Array.prototype.slice.call(arguments);return r.sortByColumn.apply(o,t)},"undefined"==typeof o.getSettings().observeChanges&&t.call(o),"afterInit"==e&&(l.call(o),o.addHook("afterCreateRow",r.afterCreateRow),o.addHook("afterRemoveRow",r.afterRemoveRow),o.addHook("afterLoadData",r.init))}else delete o.sort,o.removeHook("afterCreateRow",r.afterCreateRow),o.removeHook("afterRemoveRow",r.afterRemoveRow),o.removeHook("afterLoadData",r.init)},this.setSortingColumn=function(t,e){var i=this;return"undefined"==typeof t?(delete i.sortColumn,void delete i.sortOrder):(i.sortOrder=i.sortColumn===t&&"undefined"==typeof e?!i.sortOrder:"undefined"!=typeof e?e:!0,void(i.sortColumn=t))},this.sortByColumn=function(t,i){var n=this;r.setSortingColumn.call(n,t,i),"undefined"!=typeof n.sortColumn&&(e.hooks.run(n,"beforeColumnSort",n.sortColumn,n.sortOrder),r.sort.call(n),n.render(),s.call(n),e.hooks.run(n,"afterColumnSort",n.sortColumn,n.sortOrder))};var s=function(){var t=this,i={};"undefined"!=typeof t.sortColumn&&(i.sortColumn=t.sortColumn),"undefined"!=typeof t.sortOrder&&(i.sortOrder=t.sortOrder),(i.hasOwnProperty("sortColumn")||i.hasOwnProperty("sortOrder"))&&e.hooks.run(t,"persistentStateSave","columnSorting",i)},a=function(){var t=this,i={};return e.hooks.run(t,"persistentStateLoad","columnSorting",i),i.value},l=function(){function t(){var t=n.view.TBODY.querySelector("tr").querySelectorAll("th");return t.length}function i(i){var n=e.Dom.closest(i,"TH");return e.Dom.index(n)-t()}var n=this,o=e.eventManager(n);o.addEventListener(n.rootElement,"click",function(t){if(e.Dom.hasClass(t.target,"columnSorting")){var o=i(t.target);r.sortByColumn.call(n,o)}})};this.sort=function(){var t=this;if("undefined"!=typeof t.sortOrder){t.sortingEnabled=!1,t.sortIndex.length=0;for(var e=this.colOffset(),o=0,r=this.countRows()-t.getSettings().minSpareRows;r>o;o++)this.sortIndex.push([o,t.getDataAtCell(o,this.sortColumn+e)]);var s,a=t.getCellMeta(0,t.sortColumn);switch(a.type){case"date":s=n;break;default:s=i}this.sortIndex.sort(s(t.sortOrder));for(var o=this.sortIndex.length;o<t.countRows();o++)this.sortIndex.push([o,t.getDataAtCell(o,this.sortColumn+e)]);t.sortingEnabled=!0}},this.translateRow=function(t){var e=this;return e.sortingEnabled&&e.sortIndex&&e.sortIndex.length&&e.sortIndex[t]?e.sortIndex[t][0]:t},this.untranslateRow=function(t){var e=this;if(e.sortingEnabled&&e.sortIndex&&e.sortIndex.length)for(var i=0;i<e.sortIndex.length;i++)if(e.sortIndex[i][0]==t)return i},this.getColHeader=function(t,i){this.getSettings().columnSorting&&t>=0&&e.Dom.addClass(i.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(t,e){var i=this;if(o(i)){for(var n=0;n<i.sortIndex.length;n++)i.sortIndex[n][0]>=t&&(i.sortIndex[n][0]+=e);for(var n=0;e>n;n++)i.sortIndex.splice(t+n,0,[t+n,i.getData()[t+n][i.sortColumn+i.colOffset()]]);s.call(i)}},this.afterRemoveRow=function(t,e){var i=this;if(o(i)){var n=r.translateRow.call(i,t);i.sortIndex.splice(t,e);for(var a=0;a<i.sortIndex.length;a++)i.sortIndex[a][0]>n&&(i.sortIndex[a][0]-=e);s.call(i)}},this.afterChangeSort=function(t){var e=this,i=!1,n={};if(t){for(var o=0;o<t.length;o++)if(t[o][1]==e.sortColumn){i=!0,n.row=r.translateRow.call(e,t[o][0]),n.col=t[o][1];break}i&&e._registerTimeout(setTimeout(function(){r.sort.call(e),e.render(),e.selectCell(r.untranslateRow.call(e,n.row),n.col)},0))}}}function o(t){var i=e.eventManager(t),n=function(t,e,i,n){n.setCellMeta(t,e,"comment",i),n.render()},o=function(t,e,i){n(t.from.row,t.from.col,e,i)},r=function(){var t=h();t.style.display="none",t.value=""},s=function(n){function s(e){if(i.removeEventListener(document,"mouseover"),"htCommentTextArea"!=e.target.className&&-1==e.target.innerHTML.indexOf("Comment")){var s=document.querySelector(".htCommentTextArea").value;s.trim().length>1&&o(n,s,t),a(),r()}}i.addEventListener(document,"mousedown",e.helper.proxy(s))},a=function(){i.removeEventListener(document,"mousedown"),i.addEventListener(document,"mousedown",e.helper.proxy(c))},l=function(i,n){var o=t.view.wt.wtTable.getCell(i.from),r=e.Dom.offset(o),a=t.getColWidth(i.from.col);n.style.position="absolute",n.style.left=r.left+a+"px",n.style.top=r.top+"px",n.style.zIndex=2,s(i,n)},h=function(t){var i=document.querySelector(".htComments");if(!i){i=document.createElement("DIV");var n=document.createElement("TEXTAREA");e.Dom.addClass(n,"htCommentTextArea"),i.appendChild(n),e.Dom.addClass(i,"htComments"),document.getElementsByTagName("body")[0].appendChild(i)}return t=t||"",document.querySelector(".htCommentTextArea").value=t,i},c=function(i){if(-1!=i.target.className.indexOf("htCommentCell")){a();var n=t.view.wt.wtTable.getCoords(i.target),o={from:new u(n.row,n.col)};e.Comments.showComment(o)}else"htCommentTextArea"!=i.target.className&&r()};return{init:function(){i.addEventListener(document,"mouseover",e.helper.proxy(c))},showComment:function(e){var i=t.getCellMeta(e.from.row,e.from.col),n="";i.comment&&(n=i.comment);var o=h(n);o.style.display="block",l(e,o)},removeComment:function(e,i){t.removeCellMeta(e,i,"comment"),t.render()},checkSelectionCommentsConsistency:function(){var e=!1,i=t.getSelectedRange().from;return t.getCellMeta(i.row,i.col).comment&&(e=!0),e}}}function r(e){var i,n=function(){t.localStorage[e+"__persistentStateKeys"]=JSON.stringify(i)},o=function(){var n=t.localStorage[e+"__persistentStateKeys"],o="string"==typeof n?JSON.parse(n):void 0;i=o?o:[]},r=function(){i=[],n()};o(),this.saveValue=function(o,r){t.localStorage[e+"_"+o]=JSON.stringify(r),-1==i.indexOf(o)&&(i.push(o),n())},this.loadValue=function(i,n){i="undefined"!=typeof i?i:n;var o=t.localStorage[e+"_"+i];return"undefined"==typeof o?void 0:JSON.parse(o)},this.reset=function(i){t.localStorage.removeItem(e+"_"+i)},this.resetAll=function(){for(var n=0;n<i.length;n++)t.localStorage.removeItem(e+"_"+i[n]);r()}}function s(){this.boundaries=null,this.callback=null}function a(){var t=[];return t.getInfo=function(t,e){for(var i=0,n=this.length;n>i;i++)if(this[i].row<=t&&this[i].row+this[i].rowspan-1>=t&&this[i].col<=e&&this[i].col+this[i].colspan-1>=e)return this[i]},t.setInfo=function(t){for(var e=0,i=this.length;i>e;e++)if(this[e].row===t.row&&this[e].col===t.col)return void(this[e]=t);this.push(t)},t.removeInfo=function(t,e){for(var i=0,n=this.length;n>i;i++)if(this[i].row===t&&this[i].col===e){this.splice(i,1);break}},t}function l(t){if(this.mergedCellInfoCollection=new a,Array.isArray(t))for(var e=0,i=t.length;i>e;e++)this.mergedCellInfoCollection.setInfo(t[e])}function h(){}function c(t,i){var n,o=function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var t=10,e=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var i={position:"absolute",height:e+"px",width:e+"px","border-radius":parseInt(e/1.5,10)+"px"};for(var n in i)i.hasOwnProperty(n)&&(this.selectionHandles.styles.bottomRightHitArea[n]=i[n],this.selectionHandles.styles.topLeftHitArea[n]=i[n]);var o={position:"absolute",height:t+"px",width:t+"px","border-radius":parseInt(t/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var n in o)o.hasOwnProperty(n)&&(this.selectionHandles.styles.bottomRight[n]=o[n],this.selectionHandles.styles.topLeft[n]=o[n]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)};if(i){var r=e.eventManager(t);this.instance=t,this.settings=i,this.main=document.createElement("div"),n=this.main.style,n.position="absolute",n.top=0,n.left=0;for(var s=["top","left","bottom","right","corner"],a=0;5>a;a++){var l=s[a],h=document.createElement("DIV");h.className="wtBorder "+(this.settings.className||""),this.settings[l]&&this.settings[l].hide&&(h.className+=" hidden"),n=h.style,n.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:i.border.color,n.height=this.settings[l]&&this.settings[l].width?this.settings[l].width+"px":i.border.width+"px",n.width=this.settings[l]&&this.settings[l].width?this.settings[l].width+"px":i.border.width+"px",this.main.appendChild(h)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),e.mobileBrowser&&o.call(this),this.disappear(),t.wtTable.bordersHolder||(t.wtTable.bordersHolder=document.createElement("div"),t.wtTable.bordersHolder.className="htBorders",t.wtTable.hider.appendChild(t.wtTable.bordersHolder)),t.wtTable.bordersHolder.insertBefore(this.main,t.wtTable.bordersHolder.firstChild);var c=!1;r.addEventListener(document.body,"mousedown",function(){c=!0}),r.addEventListener(document.body,"mouseup",function(){c=!1});for(var u=0,d=this.main.childNodes.length;d>u;u++)r.addEventListener(this.main.childNodes[u],"mouseenter",function(e){if(c&&t.getSetting("hideBorderOnMouseDownOver")){e.preventDefault(),e.stopImmediatePropagation();var i=this.getBoundingClientRect();this.style.display="none";var n=function(t){return t.clientY<Math.floor(i.top)?!0:t.clientY>Math.ceil(i.top+i.height)?!0:t.clientX<Math.floor(i.left)?!0:t.clientX>Math.ceil(i.left+i.width)?!0:void 0},o=function(t){n(t)&&(r.removeEventListener(document.body,"mousemove",o),this.style.display="block")};r.addEventListener(document.body,"mousemove",o)}})}}function u(t,e){"undefined"!=typeof t&&"undefined"!=typeof e?(this.row=t,this.col=e):(this.row=null,this.col=null)}function d(t,e,i){this.highlight=t,this.from=e,this.to=i}function p(t,e,i){this.offset=t,this.total=e,this.countTH=i}function f(t,e,i,n){var o,r=0;for(this.instance=t,this.containerSizeFn=e,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.visibleCellCount=0,this.remainingSize=0,this.strategy=n;;){if(o=i(r),void 0===o)break;this.cellSizesSum<this.getContainerSize()&&this.visibleCellCount++,this.cellSizes.push(o),this.cellSizesSum+=o,this.cellCount++,r++}var s=this.getContainerSize();this.remainingSize=this.cellSizesSum-s}function m(t){var i=[];if(this.guid="wt_"+y(),t.cloneSource?(this.cloneSource=t.cloneSource,this.cloneOverlay=t.cloneOverlay,this.wtSettings=t.cloneSource.wtSettings,this.wtTable=new P(this,t.table),this.wtScroll=new _(this),this.wtViewport=t.cloneSource.wtViewport,this.wtEvent=new v(this),this.selections=this.cloneSource.selections):(this.wtSettings=new T(this,t),this.wtTable=new P(this,t.table),this.wtScroll=new _(this),this.wtViewport=new D(this),this.wtEvent=new v(this),this.selections=this.getSetting("selections"),this.wtScrollbars=new k(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var n=0,o=this.wtTable.THEAD.childNodes[0].childNodes.length;o>n;n++)i.push(this.wtTable.THEAD.childNodes[0].childNodes[n].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(t,n){e.Dom.fastInnerText(n,i[t])}])}this.drawn=!1,this.drawInterrupted=!1}function g(t){this.instance=t,this.init(),this.clone=this.makeClone("debug"),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",this.lastTimeout=null,e.Dom.addClass(this.clone.wtTable.holder.parentNode,"wtDebugVisible")}function v(i){var n=this,o=e.eventManager(i);this.instance=i;var r=[null,null];this.dblClickTimeout=[null,null];var s,a,l=function(t){var i=n.parentCell(t.target);e.Dom.hasClass(t.target,"corner")?n.instance.getSetting("onCellCornerMouseDown",t,t.target):i.TD&&n.instance.hasSetting("onCellMouseDown")&&n.instance.getSetting("onCellMouseDown",t,i.coords,i.TD,n.instance),2!==t.button&&i.TD&&(r[0]=i.TD,clearTimeout(n.dblClickTimeout[0]),n.dblClickTimeout[0]=setTimeout(function(){r[0]=null},1e3))},h=function(){n.instance.touchMoving=!0},c=function(t){o.addEventListener(this,"touchmove",h),n.checkIfTouchMove=setTimeout(function(){return n.instance.touchMoving===!0?(n.instance.touchMoving=void 0,void o.removeEventListener("touchmove",h,!1)):void l(t)},30)},u=function(t){if(n.instance.hasSetting("onCellMouseOver")){var i=n.instance.wtTable.TABLE,o=e.Dom.closest(t.target,["TD","TH"],i);o&&o!==a&&e.Dom.isChildOf(o,i)&&(a=o,n.instance.getSetting("onCellMouseOver",t,n.instance.wtTable.getCoords(o),o,n.instance))}},d=function(t){if(2!==t.button){var i=n.parentCell(t.target);i.TD===r[0]&&i.TD===r[1]?(e.Dom.hasClass(t.target,"corner")?n.instance.getSetting("onCellCornerDblClick",t,i.coords,i.TD,n.instance):n.instance.getSetting("onCellDblClick",t,i.coords,i.TD,n.instance),r[0]=null,r[1]=null):i.TD===r[0]&&(r[1]=i.TD,clearTimeout(n.dblClickTimeout[1]),n.dblClickTimeout[1]=setTimeout(function(){r[1]=null},500))}},p=function(t){clearTimeout(s),t.preventDefault(),d(t)};if(o.addEventListener(this.instance.wtTable.holder,"mousedown",l),o.addEventListener(this.instance.wtTable.TABLE,"mouseover",u),o.addEventListener(this.instance.wtTable.holder,"mouseup",d),this.instance.wtTable.holder.parentNode.parentNode&&e.mobileBrowser){var f="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");o.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"touchstart",function(t){n.instance.touchApplied=!0,e.Dom.isChildOf(t.target,f)&&c.call(t.target,t)}),o.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"touchend",function(t){n.instance.touchApplied=!1,e.Dom.isChildOf(t.target,f)&&p.call(t.target,t)}),n.instance.momentumScrolling||(n.instance.momentumScrolling={}),o.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"scroll",function(){clearTimeout(n.instance.momentumScrolling._timeout),n.instance.momentumScrolling.ongoing||n.instance.getSetting("onBeforeTouchScroll"),n.instance.momentumScrolling.ongoing=!0,n.instance.momentumScrolling._timeout=setTimeout(function(){n.instance.touchApplied||(n.instance.momentumScrolling.ongoing=!1,n.instance.getSetting("onAfterMomentumScroll"))},200)})}o.addEventListener(t,"resize",function(){n.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),o.clear()}}function y(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()}function b(t,e,i){this.offset=t,this.total=e,this.countTH=i}function _(t){this.instance=t}function w(t){this.instance=t,this.type="corner",this.init(),this.clone=this.makeClone("corner")}function x(t){this.instance=t,this.type="horizontal",this.offset=0,this.init(),this.clone=this.makeClone("left")}function C(t){this.instance=t,this.type="vertical",this.init(),this.clone=this.makeClone("top")}function k(t){this.instance=t,t.update("scrollbarWidth",e.Dom.getScrollbarWidth()),t.update("scrollbarHeight",e.Dom.getScrollbarWidth()),this.vertical=new C(t),this.horizontal=new x(t),this.corner=new w(t),t.getSetting("debug")&&(this.debug=new g(t)),this.registerListeners()}function S(t,e){this.settings=t,this.cellRange=e||null,this.instanceBorders={}}function T(t,i){var n=this;this.instance=t,this.defaults={table:void 0,debug:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(t,i,o){var r=n.getSetting("data",t,i);e.Dom.fastInnerText(o,void 0===r||null===r?"":r)},columnWidth:function(){},rowHeight:function(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1},this.settings={};for(var o in this.defaults)if(this.defaults.hasOwnProperty(o))if(void 0!==i[o])this.settings[o]=i[o];else{if(void 0===this.defaults[o])throw new Error('A required setting "'+o+'" was not provided');this.settings[o]=this.defaults[o]}}function P(t,i){this.instance=t,this.TABLE=i,e.Dom.removeTextNodes(this.TABLE);var n=this.TABLE.parentNode;if(!n||1!==n.nodeType||!e.Dom.hasClass(n,"wtHolder")){var o=document.createElement("DIV");o.className="wtSpreader",n&&n.insertBefore(o,this.TABLE),o.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,n=this.spreader.parentNode,!n||1!==n.nodeType||!e.Dom.hasClass(n,"wtHolder")){var r=document.createElement("DIV");r.className="wtHider",n&&n.insertBefore(r,this.spreader),r.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",n=this.hider.parentNode,!n||1!==n.nodeType||!e.Dom.hasClass(n,"wtHolder")){var s=document.createElement("DIV");s.style.position="relative",s.className="wtHolder",t.cloneSource||(s.className+=" ht_master"),n&&n.insertBefore(s,this.hider),s.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.isWorkingOnClone()||(this.holder.parentNode.style.position="relative"),this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var a=document.createElement("TR");this.THEAD.appendChild(a)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null}function E(t){this.wtTable=t,this.instance=t.instance,this.rowFilter=t.rowFilter,this.columnFilter=t.columnFilter,this.TABLE=t.TABLE,this.THEAD=t.THEAD,this.TBODY=t.TBODY,this.COLGROUP=t.COLGROUP,this.utils=E.utils}function D(i){this.instance=i,this.oversizedRows=[],this.oversizedCols=[],this.oversizedColumnHeaders=[];var n=this,o=e.eventManager(i);o.addEventListener(t,"resize",function(){n.clientHeight=n.getWorkspaceHeight()})}function L(t,e,i,n,o,r,s){function a(t,e){var n=0;if(d.stretchAllColumnsWidth[t]||(d.stretchAllColumnsWidth[t]=Math.round(e*d.stretchAllRatio)),d.stretchAllColumnsWidth.length===i&&d.needVerifyLastColumnWidth){d.needVerifyLastColumnWidth=!1;for(var o=0;o<d.stretchAllColumnsWidth.length;o++)n+=d.stretchAllColumnsWidth[o];n!=d.totalTargetWidth&&(d.stretchAllColumnsWidth[d.stretchAllColumnsWidth.length-1]+=d.totalTargetWidth-n)}return d.stretchAllColumnsWidth[t]}function l(t){return t===i-1?d.stretchLastWidth:null}var h,c,u,d=this,p=1,f=0,m=!0,g=50,v=[];for(this.scrollOffset=e,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.count=0,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=s,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],h=function(t){var e=n(t);return p=p||1,void 0===e&&(e=g),e},this.refreshStretching=function(t){for(var e,n,o=0,r=0;i>r;r++)e=h(r),o+=e;this.totalTargetWidth=t,n=o-t,"all"===this.stretch&&0>n?(this.stretchAllRatio=t/o,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0):"last"===this.stretch&&1/0!==t&&(this.stretchLastWidth=-n+h(i-1))},this.getStretchedColumnWidth=function(t,e){var i=null;return"all"===this.stretch&&0!==this.stretchAllRatio?i=a(t,e):"last"===this.stretch&&0!==this.stretchLastWidth&&(i=l(t,e)),i},u=0;i>u;u++)if(c=h(u),e>=f&&!r&&(this.startColumn=u),f>=e&&e+t>=f+c&&(null==this.startColumn&&(this.startColumn=u),this.endColumn=u),v.push(f),f+=c,r||(this.endColumn=u),f>=e+t){m=!1;break}if(this.endColumn==i-1&&m)for(this.startColumn=this.endColumn;this.startColumn>0;){var y=v[this.endColumn]+c-v[this.startColumn-1];if((t>=y||!r)&&this.startColumn--,y>t)break}null!==this.startColumn&&o&&o(this),this.startPosition=v[this.startColumn],void 0==this.startPosition&&(this.startPosition=null),null!=this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}function M(t,e,i,n,o,r){this.scrollOffset=e,this.startRow=null,this.startPosition=null,this.endRow=null,this.count=0;for(var s,a=0,l=!0,h=23,c=[],u=0;i>u;u++)if(s=n(u),void 0===s&&(s=h),e>=a&&!r&&(this.startRow=u),a>=e&&e+t>=a+s&&(null==this.startRow&&(this.startRow=u),this.endRow=u),c.push(a),a+=s,r||(this.endRow=u),a>=e+t){l=!1;break}if(this.endRow==i-1&&l)for(this.startRow=this.endRow;this.startRow>0;){var d=c[this.endRow]+s-c[this.startRow-1];if((t>=d||!r)&&this.startRow--,d>=t)break}null!==this.startRow&&o&&o(this),this.startPosition=c[this.startRow],void 0==this.startPosition&&(this.startPosition=null),null!=this.startRow&&(this.count=this.endRow-this.startRow+1)}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){function i(t){return/NodeList/i.test(t.item)}function n(t){for(var e=[],i=0,n=t.length;n>i;i++)e[i]=t[i];return e}if("undefined"==typeof this||null===this)throw new TypeError;if("function"!=typeof t)throw new TypeError;e=e||this,i(e)&&(e=n(e));var o,r,s=e.length,a=[];for(o=0;s>o;o+=1)e.hasOwnProperty(o)&&(r=e[o],t.call(e,r,o,e)&&a.push(r));return a}),Array.isArray||(Array.isArray=function(t){return"[object Array]"==toString.call(t)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,s,a=[];for(r in o)t.call(o,r)&&a.push(r);if(e)for(s=0;n>s;s++)t.call(o,i[s])&&a.push(i[s]);return a}}()),/*
 * Copyright 2012 The Polymer Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty;try{var i=!0;e(function(){},"foo",{})}catch(n){i=!1}var o=+new Date%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+(o++ +"__"),i||(this._wmCache=[])};r.prototype=i?{set:function(t,i){var n=t[this.name];n&&n[0]===t?n[1]=i:e(t,this.name,{value:[t,i],writable:!0})},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){this.set(t,void 0)}}:{set:function(t,e){if("undefined"!=typeof t&&"undefined"!=typeof e){for(var i=0,n=this._wmCache.length;n>i;i++)if(this._wmCache[i].key==t)return void(this._wmCache[i].value=e);this._wmCache.push({key:t,value:e})}},get:function(t){if("undefined"!=typeof t)for(var e=0,i=this._wmCache.length;i>e;e++)if(this._wmCache[e].key==t)return this._wmCache[e].value},"delete":function(t){if("undefined"!=typeof t)for(var e=0,i=this._wmCache.length;i>e;e++)this._wmCache[e].key==t&&Array.prototype.slice.call(this._wmCache,e,1)}},t.WeakMap=r}(),e.activeGuid=null,e.Core=function(t,i){function n(){var t=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,t=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==t&&(t=!0,this.onQueueEmpty())}}}function o(t,i,o){function r(){var n;t.length&&(n=e.hooks.run(y,"beforeChange",t,i),"function"==typeof n?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):n===!1&&t.splice(0,t.length)),o()}var s=new n;s.onQueueEmpty=r;for(var a=t.length-1;a>=0;a--)if(null===t[a])t.splice(a,1);else{var l=t[a][0],h=f.propToCol(t[a][1]),c=y.runHooks("modifyCol",h),u=y.getCellMeta(l,c);if("numeric"===u.type&&"string"==typeof t[a][3]&&t[a][3].length>0&&(/^-?[\d\s]*(\.|\,)?\d*$/.test(t[a][3])||u.format)){var d=t[a][3].length;numeral.language("undefined"==typeof u.language?"en":t[a][3].indexOf(".")===d-3&&-1===t[a][3].indexOf(",")?"en":u.language),numeral.validate(t[a][3])&&(t[a][3]=numeral().unformat(t[a][3]))}y.getCellValidator(u)&&(s.addValidatorToQueue(),y.validateCell(t[a][3],u,function(e,i){return function(n){if("boolean"!=typeof n)throw new Error("Validation error: result is not boolean");n===!1&&i.allowInvalid===!1&&(t.splice(e,1),i.valid=!0,--e),s.removeValidatorFormQueue()}}(a,u),i))}s.checkIfQueueIsEmpty()}function r(t,i){var n=t.length-1;if(!(0>n)){for(;n>=0;n--)if(null!==t[n]){if(null!=t[n][2]||null!=t[n][3]){if(p.settings.allowInsertRow)for(;t[n][0]>y.countRows()-1;)f.createRow();if("array"===y.dataType&&p.settings.allowInsertColumn)for(;f.propToCol(t[n][1])>y.countCols()-1;)f.createCol();f.set(t[n][0],t[n][1],t[n][3])}}else t.splice(n,1);y.forceFullRender=!0,m.adjustRowsAndCols(),e.hooks.run(y,"beforeChangeRender",t,i),g.refreshBorders(null,!0),e.hooks.run(y,"afterChange",t,i||"edit")}}function s(t,e,i){return"object"==typeof t?t:[[t,e,i]]}function a(t){if(t.hasOwnProperty("type")){var i,n={};if("object"==typeof t.type)i=t.type;else if("string"==typeof t.type&&(i=e.cellTypes[t.type],void 0===i))throw new Error('You declared cell type "'+t.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var o in i)i.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(n[o]=i[o]);return n}}function l(t){return e.hooks.run(y,"modifyRow",t)}function h(t){return e.hooks.run(y,"modifyCol",t)}function c(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var p,f,m,g,v,y=this,b=function(){},_=e.eventManager(y);e.helper.extend(b.prototype,A.prototype),e.helper.extend(b.prototype,i),e.helper.extend(b.prototype,a(i)),this.rootElement=t,this.container=document.createElement("DIV"),this.container.className="htContainer",t.insertBefore(this.container,t.firstChild),this.guid="ht_"+e.helper.randomString(),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),p={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new b,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},m={alter:function(t,e,i,n,o){var r;switch(i=i||1,t){case"insert_row":r=f.createRow(e,i),r&&(g.isSelected()&&p.selRange.from.row>=e?(p.selRange.from.row=p.selRange.from.row+r,g.transformEnd(r,0)):g.refreshBorders());break;case"insert_col":if(r=f.createCol(e,i)){if(Array.isArray(y.getSettings().colHeaders)){var s=[e,0];s.length+=r,Array.prototype.splice.apply(y.getSettings().colHeaders,s)}g.isSelected()&&p.selRange.from.col>=e?(p.selRange.from.col=p.selRange.from.col+r,g.transformEnd(0,r)):g.refreshBorders()}break;case"remove_row":e=y.runHooks("modifyCol",e),f.removeRow(e,i),p.cellSettings.splice(e,i);var a=y.getSettings().fixedRowsTop;a>=e+1&&(y.getSettings().fixedRowsTop-=Math.min(i,a-e)),m.adjustRowsAndCols(),g.refreshBorders();break;case"remove_col":f.removeCol(e,i);for(var l=0,h=f.getAll().length;h>l;l++)l in p.cellSettings&&p.cellSettings[l].splice(e,i);var c=y.getSettings().fixedColumnsLeft;c>=e+1&&(y.getSettings().fixedColumnsLeft-=Math.min(i,c-e)),Array.isArray(y.getSettings().colHeaders)&&("undefined"==typeof e&&(e=-1),y.getSettings().colHeaders.splice(e,i)),m.adjustRowsAndCols(),g.refreshBorders();break;default:throw new Error('There is no such action "'+t+'"')}o||m.adjustRowsAndCols()},adjustRowsAndCols:function(){var t,e,i,n;if(e=y.countRows(),e<p.settings.minRows)for(t=0;t<p.settings.minRows-e;t++)f.createRow(y.countRows(),1,!0);if(i=y.countEmptyRows(!0),i<p.settings.minSpareRows)for(;i<p.settings.minSpareRows&&y.countRows()<p.settings.maxRows;i++)f.createRow(y.countRows(),1,!0);if(n=y.countEmptyCols(!0),!p.settings.columns&&y.countCols()<p.settings.minCols)for(;y.countCols()<p.settings.minCols;n++)f.createCol(y.countCols(),1,!0);if(!p.settings.columns&&"array"===y.dataType&&n<p.settings.minSpareCols)for(;n<p.settings.minSpareCols&&y.countCols()<p.settings.maxCols;n++)f.createCol(y.countCols(),1,!0);var o=y.countRows(),r=y.countCols();if((0===o||0===r)&&g.deselect(),g.isSelected()){var s,a=p.selRange.from.row,l=p.selRange.from.col,h=p.selRange.to.row,c=p.selRange.to.col;a>o-1?(a=o-1,s=!0,h>a&&(h=a)):h>o-1&&(h=o-1,s=!0,a>h&&(a=h)),l>r-1?(l=r-1,s=!0,c>l&&(c=l)):c>r-1&&(c=r-1,s=!0,l>c&&(l=c)),s&&y.selectCell(a,l,h,c)}},populateFromArray:function(t,i,n,o,r,s,a){var l,h,c,u,d=[],f={};if(h=i.length,0===h)return!1;var m,g,v,b;switch(r){case"shift_down":for(m=n?n.col-t.col+1:0,g=n?n.row-t.row+1:0,i=e.helper.translateRowsToColumns(i),c=0,u=i.length,v=Math.max(u,m);v>c;c++)if(u>c){for(l=0,h=i[c].length;g-h>l;l++)i[c].push(i[c][l%h]);i[c].unshift(t.col+c,t.row,0),y.spliceCol.apply(y,i[c])}else i[c%u][0]=t.col+c,y.spliceCol.apply(y,i[c%u]);break;case"shift_right":for(m=n?n.col-t.col+1:0,g=n?n.row-t.row+1:0,l=0,h=i.length,b=Math.max(h,g);b>l;l++)if(h>l){for(c=0,u=i[l].length;m-u>c;c++)i[l].push(i[l][c%u]);i[l].unshift(t.row+l,t.col,0),y.spliceRow.apply(y,i[l])}else i[l%h][0]=t.row+l,y.spliceRow.apply(y,i[l%h]);break;case"overwrite":default:f.row=t.row,f.col=t.col;var _={row:0,col:0},w={row:n&&t?n.row-t.row+1:1,col:n&&t?n.col-t.col+1:1};for(-1!==["up","left"].indexOf(s)?_={row:Math.ceil(w.row/h)||1,col:Math.ceil(w.col/i[0].length)||1}:-1!==["down","right"].indexOf(s)&&(_={row:1,col:1}),l=0;h>l&&!(n&&f.row>n.row||!p.settings.allowInsertRow&&f.row>y.countRows()-1||f.row>=p.settings.maxRows);l++){for(f.col=t.col,u=i[l]?i[l].length:0,c=0;u>c&&!(n&&f.col>n.col||!p.settings.allowInsertColumn&&f.col>y.countCols()-1||f.col>=p.settings.maxCols);c++){if(!y.getCellMeta(f.row,f.col).readOnly){var x,C=i[l][c],k={row:l,col:c};"autofill"===o&&(x=y.runHooks("beforeAutofillInsidePopulate",k,s,i,a,_,w),x&&(_="undefined"!=typeof x.iterators?x.iterators:_,C="undefined"!=typeof x.value?x.value:C)),d.push([f.row,f.col,C])}f.col++,n&&c===u-1&&(c=-1,-1!==["down","right"].indexOf(s)?_.col++:-1!==["up","left"].indexOf(s)&&_.col>1&&_.col--)}f.row++,_.col=1,n&&l===h-1&&(l=-1,-1!==["down","right"].indexOf(s)?_.row++:-1!==["up","left"].indexOf(s)&&_.row>1&&_.row--)}y.setDataAtCell(d,null,null,o||"populateFromArray")}}},this.selection=g={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(t,e){y.selection.selectedHeader.rows=t,y.selection.selectedHeader.cols=e},begin:function(){y.selection.inProgress=!0},finish:function(){var t=y.getSelected();e.hooks.run(y,"afterSelectionEnd",t[0],t[1],t[2],t[3]),e.hooks.run(y,"afterSelectionEndByProp",t[0],y.colToProp(t[1]),t[2],y.colToProp(t[3])),y.selection.inProgress=!1},isInProgress:function(){return y.selection.inProgress},setRangeStart:function(t,i){e.hooks.run(y,"beforeSetRangeStart",t),p.selRange=new d(t,t,t),g.setRangeEnd(t,null,i)},setRangeEnd:function(t,i,n){e.hooks.run(y,"beforeSetRangeEnd",t),y.selection.begin(),p.selRange.to=new u(t.row,t.col),p.settings.multiSelect||(p.selRange.from=t),y.view.wt.selections.current.clear(),y.view.wt.selections.current.add(p.selRange.highlight),y.view.wt.selections.area.clear(),g.isMultiple()&&(y.view.wt.selections.area.add(p.selRange.from),y.view.wt.selections.area.add(p.selRange.to)),(p.settings.currentRowClassName||p.settings.currentColClassName)&&(y.view.wt.selections.highlight.clear(),y.view.wt.selections.highlight.add(p.selRange.from),y.view.wt.selections.highlight.add(p.selRange.to)),e.hooks.run(y,"afterSelection",p.selRange.from.row,p.selRange.from.col,p.selRange.to.row,p.selRange.to.col),e.hooks.run(y,"afterSelectionByProp",p.selRange.from.row,f.colToProp(p.selRange.from.col),p.selRange.to.row,f.colToProp(p.selRange.to.col)),i!==!1&&y.view.mainViewIsActive()&&y.view.scrollViewport(p.selRange.from&&!g.isMultiple()?p.selRange.from:t),g.refreshBorders(null,n)},refreshBorders:function(t,e){e||v.destroyEditor(t),y.view.render(),g.isSelected()&&!e&&v.prepareEditor()},isMultiple:function(){var t=!(p.selRange.to.col===p.selRange.from.col&&p.selRange.to.row===p.selRange.from.row),i=e.hooks.run(y,"afterIsMultipleSelection",t);return t?i:void 0},transformStart:function(t,e,i,n){var o=new u(t,e);y.runHooks("modifyTransformStart",o),p.selRange.highlight.row+t>y.countRows()-1?i&&p.settings.minSpareRows>0?y.alter("insert_row",y.countRows()):p.settings.autoWrapCol&&(o.row=1-y.countRows(),o.col=p.selRange.highlight.col+o.col==y.countCols()-1?1-y.countCols():1):p.settings.autoWrapCol&&p.selRange.highlight.row+o.row<0&&p.selRange.highlight.col+o.col>=0&&(o.row=y.countRows()-1,o.col=p.selRange.highlight.col+o.col==0?y.countCols()-1:-1),p.selRange.highlight.col+o.col>y.countCols()-1?i&&p.settings.minSpareCols>0?y.alter("insert_col",y.countCols()):p.settings.autoWrapRow&&(o.row=p.selRange.highlight.row+o.row==y.countRows()-1?1-y.countRows():1,o.col=1-y.countCols()):p.settings.autoWrapRow&&p.selRange.highlight.col+o.col<0&&p.selRange.highlight.row+o.row>=0&&(o.row=p.selRange.highlight.row+o.row==0?y.countRows()-1:-1,o.col=y.countCols()-1);var r=y.countRows(),s=y.countCols(),a=new u(p.selRange.highlight.row+o.row,p.selRange.highlight.col+o.col);a.row<0?a.row=0:a.row>0&&a.row>=r&&(a.row=r-1),a.col<0?a.col=0:a.col>0&&a.col>=s&&(a.col=s-1),g.setRangeStart(a,n)},transformEnd:function(t,e){var i=new u(t,e);y.runHooks("modifyTransformEnd",i);var n=y.countRows(),o=y.countCols(),r=new u(p.selRange.to.row+i.row,p.selRange.to.col+i.col);r.row<0?r.row=0:r.row>0&&r.row>=n&&(r.row=n-1),r.col<0?r.col=0:r.col>0&&r.col>=o&&(r.col=o-1),g.setRangeEnd(r,!0)},isSelected:function(){return null!==p.selRange},inInSelection:function(t){return g.isSelected()?p.selRange.includes(t):!1},deselect:function(){g.isSelected()&&(y.selection.inProgress=!1,p.selRange=null,y.view.wt.selections.current.clear(),y.view.wt.selections.area.clear(),(p.settings.currentRowClassName||p.settings.currentColClassName)&&y.view.wt.selections.highlight.clear(),v.destroyEditor(),g.refreshBorders(),e.hooks.run(y,"afterDeselect"))},selectAll:function(){p.settings.multiSelect&&(g.setRangeStart(new u(0,0)),g.setRangeEnd(new u(y.countRows()-1,y.countCols()-1),!1))},empty:function(){if(g.isSelected()){var t,e,i=p.selRange.getTopLeftCorner(),n=p.selRange.getBottomRightCorner(),o=[];for(t=i.row;t<=n.row;t++)for(e=i.col;e<=n.col;e++)y.getCellMeta(t,e).readOnly||o.push([t,e,""]);y.setDataAtCell(o)}}},this.init=function(){e.hooks.run(y,"beforeInit"),e.mobileBrowser&&e.Dom.addClass(y.rootElement,"mobile"),this.updateSettings(p.settings,!0),this.view=new e.TableView(this),v=new e.EditorManager(y,p,g,f),this.forceFullRender=!0,this.view.render(),"object"==typeof p.firstRun&&(e.hooks.run(y,"afterChange",p.firstRun[0],p.firstRun[1]),p.firstRun=!1),e.hooks.run(y,"afterInit")},this.validateCell=function(t,i,n,o){var r=y.getCellValidator(i);"[object RegExp]"===Object.prototype.toString.call(r)&&(r=function(t){return function(e,i){i(t.test(e))}}(r)),"function"==typeof r?(t=e.hooks.run(y,"beforeValidate",t,i.row,i.prop,o),y._registerTimeout(setTimeout(function(){r.call(i,t,function(r){r=e.hooks.run(y,"afterValidate",r,t,i.row,i.prop,o),i.valid=r,n(r),e.hooks.run(y,"postAfterValidate",r,t,i.row,i.prop,o)})},0))):(i.valid=!0,n(!0))},this.setDataAtCell=function(t,e,i,n){var a,l,h,c=s(t,e,i),u=[];for(a=0,l=c.length;l>a;a++){if("object"!=typeof c[a])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof c[a][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");h=f.colToProp(c[a][1]),u.push([c[a][0],h,f.get(c[a][0],h),c[a][2]])}n||"object"!=typeof t||(n=e),o(u,n,function(){r(u,n)})},this.setDataAtRowProp=function(t,e,i,n){var a,l,h=s(t,e,i),c=[];for(a=0,l=h.length;l>a;a++)c.push([h[a][0],h[a][1],f.get(h[a][0],h[a][1]),h[a][2]]);n||"object"!=typeof t||(n=e),o(c,n,function(){r(c,n)})},this.listen=function(){e.activeGuid=y.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){e.activeGuid=null},this.isListening=function(){return e.activeGuid===y.guid},this.destroyEditor=function(t){g.refreshBorders(t)},this.populateFromArray=function(t,e,i,n,o,r,s,a,l){var h;if("object"!=typeof i||"object"!=typeof i[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return h="number"==typeof n?new u(n,o):null,m.populateFromArray(new u(t,e),i,h,r,s,a,l)},this.spliceCol=function(){return f.spliceCol.apply(f,arguments)},this.spliceRow=function(){return f.spliceRow.apply(f,arguments)},this.getSelected=function(){return g.isSelected()?[p.selRange.from.row,p.selRange.from.col,p.selRange.to.row,p.selRange.to.col]:void 0},this.getSelectedRange=function(){return g.isSelected()?p.selRange:void 0},this.render=function(){y.view&&(y.forceFullRender=!0,g.refreshBorders(null,!0))},this.loadData=function(t){function i(){p.cellSettings.length=0}if("object"==typeof t&&null!==t)t.push&&t.splice||(t=[t]);else{if(null!==t)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof t+" given)");t=[];for(var n,o=0,r=p.settings.startRows;r>o;o++){n=[];for(var s=0,a=p.settings.startCols;a>s;s++)n.push(null);t.push(n)}}p.isPopulated=!1,b.prototype.data=t,y.dataType=Array.isArray(p.settings.dataSchema)||Array.isArray(t[0])?"array":"function"==typeof p.settings.dataSchema?"function":"object",f=new e.DataMap(y,p,b),i(),m.adjustRowsAndCols(),e.hooks.run(y,"afterLoadData"),p.firstRun?p.firstRun=[null,"loadData"]:(e.hooks.run(y,"afterChange",null,"loadData"),y.render()),p.isPopulated=!0},this.getData=function(t,e,i,n){return"undefined"==typeof t?f.getAll():f.getRange(new u(t,e),new u(i,n),f.DESTINATION_RENDERER)},this.getCopyableData=function(t,e,i,n){return f.getCopyableText(new u(t,e),new u(i,n))},this.updateSettings=function(t,i){var n,o;if("undefined"!=typeof t.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof t.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(n in t)"data"!==n&&(void 0!==e.hooks.hooks[n]||void 0!==e.hooks.legacy[n]?("function"==typeof t[n]||Array.isArray(t[n]))&&y.addHook(n,t[n]):!i&&t.hasOwnProperty(n)&&(b.prototype[n]=t[n]));if(void 0===t.data&&void 0===p.settings.data?y.loadData(null):void 0!==t.data?y.loadData(t.data):void 0!==t.columns&&f.createMap(),o=y.countCols(),p.cellSettings.length=0,o>0){var r,s;for(n=0;o>n;n++)p.columnSettings[n]=e.helper.columnFactory(b,p.columnsSettingConflicts),r=p.columnSettings[n].prototype,b.prototype.columns&&(s=b.prototype.columns[n],e.helper.extend(r,s),e.helper.extend(r,a(s)))}if("undefined"!=typeof t.cell)for(n in t.cell){var l=t.cell[n];y.setCellMetaObject(l.row,l.col,l)}if(e.hooks.run(y,"afterCellMetaReset"),"undefined"!=typeof t.className&&(b.prototype.className&&e.Dom.removeClass(y.rootElement,b.prototype.className),t.className&&e.Dom.addClass(y.rootElement,t.className)),"undefined"!=typeof t.height){var h=t.height;"function"==typeof h&&(h=h()),y.rootElement.style.height=h+"px"}if("undefined"!=typeof t.width){var c=t.width;"function"==typeof c&&(c=c()),y.rootElement.style.width=c+"px"}h&&(y.rootElement.style.overflow="auto"),i||e.hooks.run(y,"afterUpdateSettings"),m.adjustRowsAndCols(),y.view&&!p.firstRun&&(y.forceFullRender=!0,g.refreshBorders(null,!0))},this.getValue=function(){var t=y.getSelected();if(b.prototype.getValue){if("function"==typeof b.prototype.getValue)return b.prototype.getValue.call(y);if(t)return y.getData()[t[0]][b.prototype.getValue]}else if(t)return y.getDataAtCell(t[0],t[1])},this.getSettings=function(){return p.settings},this.clear=function(){g.selectAll(),g.empty()},this.alter=function(t,e,i,n,o){m.alter(t,e,i,n,o)},this.getCell=function(t,e,i){return y.view.getCellAtCoords(new u(t,e),i)},this.getCoords=function(t){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,t)},this.colToProp=function(t){return f.colToProp(t)},this.propToCol=function(t){return f.propToCol(t)},this.getDataAtCell=function(t,e){return f.get(t,f.colToProp(e))},this.getDataAtRowProp=function(t,e){return f.get(t,e)},this.getDataAtCol=function(t){var e=[];return e.concat.apply(e,f.getRange(new u(0,t),new u(p.settings.data.length-1,t),f.DESTINATION_RENDERER))},this.getDataAtProp=function(t){var e,i=[];return e=f.getRange(new u(0,f.propToCol(t)),new u(p.settings.data.length-1,f.propToCol(t)),f.DESTINATION_RENDERER),i.concat.apply(i,e)},this.getSourceDataAtCol=function(t){for(var e=[],i=p.settings.data,n=0;n<i.length;n++)e.push(i[n][t]);return e},this.getSourceDataAtRow=function(t){return p.settings.data[t]},this.getDataAtRow=function(t){var e=f.getRange(new u(t,0),new u(t,this.countCols()-1),f.DESTINATION_RENDERER);return e[0]},this.removeCellMeta=function(t,e,i){var n=y.getCellMeta(t,e);void 0!=n[i]&&delete p.cellSettings[t][e][i]},this.setCellMetaObject=function(t,e,i){if("object"==typeof i)for(var n in i){var o=i[n];this.setCellMeta(t,e,n,o)}},this.setCellMeta=function(t,i,n,o){p.cellSettings[t]||(p.cellSettings[t]=[]),p.cellSettings[t][i]||(p.cellSettings[t][i]=new p.columnSettings[i]),p.cellSettings[t][i][n]=o,e.hooks.run(y,"afterSetCellMeta",t,i,n,o)},this.getCellMeta=function(t,i){var n,o=f.colToProp(i);if(t=l(t),i=h(i),p.columnSettings[i]||(p.columnSettings[i]=e.helper.columnFactory(b,p.columnsSettingConflicts)),p.cellSettings[t]||(p.cellSettings[t]=[]),p.cellSettings[t][i]||(p.cellSettings[t][i]=new p.columnSettings[i]),n=p.cellSettings[t][i],n.row=t,n.col=i,n.prop=o,n.instance=y,e.hooks.run(y,"beforeGetCellMeta",t,i,n),e.helper.extend(n,a(n)),n.cells){var r=n.cells.call(n,t,i,o);r&&(e.helper.extend(n,r),e.helper.extend(n,a(r)))}return e.hooks.run(y,"afterGetCellMeta",t,i,n),n};var w=e.helper.cellMethodLookupFactory("renderer");this.getCellRenderer=function(t,i){var n=w.call(this,t,i);return e.renderers.getRenderer(n)},this.getCellEditor=e.helper.cellMethodLookupFactory("editor"),this.getCellValidator=e.helper.cellMethodLookupFactory("validator"),this.validateCells=function(t){var e=new n;e.onQueueEmpty=t;for(var i=y.countRows()-1;i>=0;){for(var o=y.countCols()-1;o>=0;)e.addValidatorToQueue(),y.validateCell(y.getDataAtCell(i,o),y.getCellMeta(i,o),function(){e.removeValidatorFormQueue()},"validateCells"),o--;i--}e.checkIfQueueIsEmpty()},this.getRowHeader=function(t){if(void 0===t){for(var e=[],i=0,n=y.countRows();n>i;i++)e.push(y.getRowHeader(i));return e}return Array.isArray(p.settings.rowHeaders)&&void 0!==p.settings.rowHeaders[t]?p.settings.rowHeaders[t]:"function"==typeof p.settings.rowHeaders?p.settings.rowHeaders(t):p.settings.rowHeaders&&"string"!=typeof p.settings.rowHeaders&&"number"!=typeof p.settings.rowHeaders?t+1:p.settings.rowHeaders},this.hasRowHeaders=function(){return!!p.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==p.settings.colHeaders&&null!==p.settings.colHeaders)return!!p.settings.colHeaders;for(var t=0,e=y.countCols();e>t;t++)if(y.getColHeader(t))return!0;return!1},this.getColHeader=function(t){if(void 0===t){for(var i=[],n=0,o=y.countCols();o>n;n++)i.push(y.getColHeader(n));return i}var r=t;return t=e.hooks.run(y,"modifyCol",t),p.settings.columns&&p.settings.columns[t]&&p.settings.columns[t].title?p.settings.columns[t].title:Array.isArray(p.settings.colHeaders)&&void 0!==p.settings.colHeaders[t]?p.settings.colHeaders[t]:"function"==typeof p.settings.colHeaders?p.settings.colHeaders(t):p.settings.colHeaders&&"string"!=typeof p.settings.colHeaders&&"number"!=typeof p.settings.colHeaders?e.helper.spreadsheetColumnLabel(r):p.settings.colHeaders},this._getColWidthFromSettings=function(t){var e=y.getCellMeta(0,t),i=e.width;if((void 0===i||i===p.settings.width)&&(i=e.colWidths),void 0!==i&&null!==i){switch(typeof i){case"object":i=i[t];break;case"function":i=i(t)}"string"==typeof i&&(i=parseInt(i,10))}return i},this.getColWidth=function(t){var i=y._getColWidthFromSettings(t);return i||(i=50),i=e.hooks.run(y,"modifyColWidth",i,t)},this._getRowHeightFromSettings=function(t){var e=p.settings.rowHeights;if(void 0!==e&&null!==e){switch(typeof e){case"object":e=e[t];break;case"function":e=e(t)}"string"==typeof e&&(e=parseInt(e,10))}return e},this.getRowHeight=function(t){var i=y._getRowHeightFromSettings(t);return i=e.hooks.run(y,"modifyRowHeight",i,t)},this.countRows=function(){return p.settings.data.length},this.countCols=function(){return"object"===y.dataType||"function"===y.dataType?p.settings.columns&&p.settings.columns.length?p.settings.columns.length:f.colToPropCache.length:"array"===y.dataType?p.settings.columns&&p.settings.columns.length?p.settings.columns.length:p.settings.data&&p.settings.data[0]&&p.settings.data[0].length?p.settings.data[0].length:0:void 0},this.rowOffset=function(){return y.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return y.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return y.view.wt.drawn?y.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return y.view.wt.drawn?y.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return y.view.wt.drawn?y.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return y.view.wt.drawn?y.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(t){for(var i,n=y.countRows()-1,o=0;n>=0;){if(i=e.hooks.run(this,"modifyRow",n),y.isEmptyRow(i))o++;else if(t)break;n--}return o},this.countEmptyCols=function(t){if(y.countRows()<1)return 0;for(var e=y.countCols()-1,i=0;e>=0;){if(y.isEmptyCol(e))i++;else if(t)break;e--}return i},this.isEmptyRow=function(t){return p.settings.isEmptyRow.call(y,t)},this.isEmptyCol=function(t){return p.settings.isEmptyCol.call(y,t)},this.selectCell=function(t,e,i,n,o){if("number"!=typeof t||0>t||t>=y.countRows())return!1;if("number"!=typeof e||0>e||e>=y.countCols())return!1;if("undefined"!=typeof i){if("number"!=typeof i||0>i||i>=y.countRows())return!1;if("number"!=typeof n||0>n||n>=y.countCols())return!1}var r=new u(t,e);return p.selRange=new d(r,r,r),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),y.listen(),"undefined"==typeof i?g.setRangeEnd(p.selRange.from,o):g.setRangeEnd(new u(i,n),o),y.selection.finish(),!0},this.selectCellByProp=function(){return arguments[1]=f.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=f.propToCol(arguments[3])),y.selectCell.apply(y,arguments)},this.deselectCell=function(){g.deselect()},this.destroy=function(){y._clearTimeouts(),y.view&&y.view.destroy(),e.Dom.empty(y.rootElement),_.clear(),e.hooks.run(y,"afterDestroy"),e.hooks.destroy(y);for(var t in y)y.hasOwnProperty(t)&&("function"==typeof y[t]?"runHooks"!==t&&(y[t]=c):"guid"!==t&&(y[t]=null));p=null,f=null,m=null,g=null,v=null,y=null,b=null},this.getActiveEditor=function(){return v.getActiveEditor()},this.getInstance=function(){return y},this.addHook=function(t,i){e.hooks.add(t,i,y)},this.addHookOnce=function(t,i){e.hooks.once(t,i,y)},this.removeHook=function(t,i){e.hooks.remove(t,i,y)},this.runHooks=function(t,i,n,o,r,s,a){return e.hooks.run(y,t,i,n,o,r,s,a)},this.timeouts=[],this._registerTimeout=function(t){this.timeouts.push(t)},this._clearTimeouts=function(){for(var t=0,e=this.timeouts.length;e>t;t++)clearTimeout(this.timeouts[t])},this.version="0.12.6"};var A=function(){};if(A.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",currentRowClassName:void 0,currentColClassName:void 0,stretchH:"none",isEmptyRow:function(t){for(var e,i=0,n=this.countCols();n>i;i++)if(e=this.getDataAtCell(t,i),""!==e&&null!==e&&"undefined"!=typeof e)return!1;return!0},isEmptyCol:function(t){for(var e,i=0,n=this.countRows();n>i;i++)if(e=this.getDataAtCell(i,t),""!==e&&null!==e&&"undefined"!=typeof e)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,type:"text",copyable:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,manualColumnFreeze:void 0,viewportRowRenderingOffset:10,viewportColumnRenderingOffset:10,groups:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,renderer:void 0,format:void 0},e.DefaultSettings=A,function(t){function e(){function t(t){return null!==t&&!i(t)&&("string"==typeof t||"number"==typeof t)}function e(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function i(t){return t!==t}var n={arrayMap:[],weakMap:new WeakMap};return{get:function(i){return t(i)?n.arrayMap[i]:e(i)?n.weakMap.get(i):void 0},set:function(i,o){if(t(i))n.arrayMap[i]=o;else{if(!e(i))throw new Error("Invalid key type");n.weakMap.set(i,o)}},"delete":function(i){t(i)?delete n.arrayMap[i]:e(i)&&n.weakMap["delete"](i)}}}t.MultiMap||(t.MultiMap=e)}(t),!t.Handsontable)var e={};if(e.Dom={},e.Dom.enableImmediatePropagation=function(t){null!=t&&null==t.isImmediatePropagationEnabled&&(t.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},t.isImmediatePropagationEnabled=!0,t.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled})},e.Dom.closest=function(t,e,i){for(;null!=t&&t!==i;){if(1===t.nodeType&&e.indexOf(t.nodeName)>-1)return t;t=t.parentNode}return null},e.Dom.isChildOf=function(t,e){var i=t.parentNode,n=[];for("string"==typeof e?n=Array.prototype.slice.call(document.querySelectorAll(e),0):n.push(e);null!=i;){if(n.indexOf(i)>-1)return!0;i=i.parentNode}return!1},e.Dom.index=function(t){var e=0;if(t.previousSibling)for(;t=t.previousSibling;)++e;return e},document.documentElement.classList?(e.Dom.hasClass=function(t,e){return t.classList.contains(e)},e.Dom.addClass=function(t,e){e&&t.classList.add(e)},e.Dom.removeClass=function(t,e){t.classList.remove(e)}):(e.Dom.hasClass=function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},e.Dom.addClass=function(t,e){""===t.className?t.className=e:this.hasClass(t,e)||(t.className+=" "+e)},e.Dom.removeClass=function(t,e){if(this.hasClass(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ").trim()}}),e.Dom.removeTextNodes=function(t,e){if(3===t.nodeType)e.removeChild(t);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(t.nodeName)>-1)for(var i=t.childNodes,n=i.length-1;n>=0;n--)this.removeTextNodes(i[n],t)},e.Dom.empty=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},e.Dom.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,e.Dom.fastInnerHTML=function(t,e){this.HTML_CHARACTERS.test(e)?t.innerHTML=e:this.fastInnerText(t,e)},e.Dom.fastInnerText=document.createTextNode("test").textContent?function(t,e){var i=t.firstChild;i&&3===i.nodeType&&null===i.nextSibling?i.textContent=e:(this.empty(t),t.appendChild(document.createTextNode(e)))}:function(t,e){var i=t.firstChild;i&&3===i.nodeType&&null===i.nextSibling?i.data=e:(this.empty(t),t.appendChild(document.createTextNode(e)))},e.Dom.isVisible=function(t){function i(t){return"undefined"!=typeof ShadowDOMPolyfill&&ShadowDOMPolyfill.unwrapIfNeeded?ShadowDOMPolyfill.unwrapIfNeeded(t):t}for(var n=t;i(n)!==document.documentElement;){if(null===n)return!1;if(11===n.nodeType){if(n.host){if(n.host.impl)return e.Dom.isVisible(n.host.impl);if(n.host)return e.Dom.isVisible(n.host);throw new Error("Lost in Web Components world")}return!1}if("none"===n.style.display)return!1;n=n.parentNode}return!0},e.Dom.offset=function(e){var i,n,o,r,s;if(r=document.documentElement,this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName)return s=e.getBoundingClientRect(),{top:s.top+(t.pageYOffset||r.scrollTop)-(r.clientTop||0),left:s.left+(t.pageXOffset||r.scrollLeft)-(r.clientLeft||0)};for(i=e.offsetLeft,n=e.offsetTop,o=e;(e=e.offsetParent)&&e!==document.body;)i+=e.offsetLeft,n+=e.offsetTop,o=e;return o&&"fixed"===o.style.position&&(i+=t.pageXOffset||r.scrollLeft,n+=t.pageYOffset||r.scrollTop),{left:i,top:n}},e.Dom.getWindowScrollTop=function(){var e=t.scrollY;return void 0==e&&(e=document.documentElement.scrollTop),e},e.Dom.getWindowScrollLeft=function(){var e=t.scrollX;return void 0==e&&(e=document.documentElement.scrollLeft),e},e.Dom.getScrollTop=function(i){return i===t?e.Dom.getWindowScrollTop(i):i.scrollTop},e.Dom.getScrollLeft=function(i){return i===t?e.Dom.getWindowScrollLeft(i):i.scrollLeft},e.Dom.getScrollableElement=function(e){for(var i,n,o,r=e.parentNode,s=["auto","scroll"];r&&r.style;){if(i=r.style.overflow,n=r.style.overflowX,o=r.style.overflowY,"scroll"==i||"scroll"==n||"scroll"==o)return r;if(r.clientHeight<r.scrollHeight&&(-1!==s.indexOf(o)||-1!==s.indexOf(i)))return r;if(r.clientWidth<r.scrollWidth&&(-1!==s.indexOf(n)||-1!==s.indexOf(i)))return r;r=r.parentNode}return t},e.Dom.getComputedStyle=function(t){return t.currentStyle||document.defaultView.getComputedStyle(t)},e.Dom.outerWidth=function(t){return t.offsetWidth},e.Dom.outerHeight=function(t){return this.hasCaptionProblem()&&t.firstChild&&"CAPTION"===t.firstChild.nodeName?t.offsetHeight+t.firstChild.offsetHeight:t.offsetHeight},e.Dom.innerHeight=function(t){return t.clientHeight||t.innerHeight},e.Dom.innerWidth=function(t){return t.clientWidth||t.innerWidth},e.Dom.addEvent=function(e,i,n){t.addEventListener?e.addEventListener(i,n,!1):e.attachEvent("on"+i,n)},e.Dom.removeEvent=function(e,i,n){t.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent("on"+i,n)},function(){function t(){var t=document.createElement("TABLE");t.style.borderSpacing=0,t.style.borderWidth=0,t.style.padding=0;var e=document.createElement("TBODY");t.appendChild(e),e.appendChild(document.createElement("TR")),e.firstChild.appendChild(document.createElement("TD")),e.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var i=document.createElement("CAPTION");i.innerHTML="c<br>c<br>c<br>c",i.style.padding=0,i.style.margin=0,t.insertBefore(i,e),document.body.appendChild(t),n=t.offsetHeight<2*t.lastChild.offsetHeight,document.body.removeChild(t)
}function i(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),(document.body||document.documentElement).appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),(document.body||document.documentElement).removeChild(e),i-n}var n;e.Dom.hasCaptionProblem=function(){return void 0===n&&t(),n},e.Dom.getCaretPosition=function(t){if(t.selectionStart)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange();if(null==e)return 0;var i=t.createTextRange(),n=i.duplicate();return i.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length}return 0},e.Dom.getSelectionEndPosition=function(t){if(t.selectionEnd)return t.selectionEnd;if(document.selection){var e=document.selection.createRange();if(null==e)return 0;var i=t.createTextRange();return i.text.indexOf(e.text)+e.text.length}},e.Dom.setCaretPosition=function(t,e,i){if(void 0===i&&(i=e),t.setSelectionRange)t.focus(),t.setSelectionRange(e,i);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}};var o;e.Dom.getScrollbarWidth=function(){return void 0===o&&(o=i()),o};var r=!document.createTextNode("test").textContent;e.Dom.isIE8=function(){return r};var s=!!document.documentMode;e.Dom.isIE9=function(){return s};var a=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);e.Dom.isSafari=function(){return a},e.Dom.setOverlayPosition=function(t,e,i){r||s?(t.style.top=i,t.style.left=e):a?t.style["-webkit-transform"]="translate3d("+e+","+i+",0)":t.style.transform="translate3d("+e+","+i+",0)"},e.Dom.getCssTransform=function(t){var e;return t.style.transform&&""!=(e=t.style.transform)?["transform",e]:t.style["-webkit-transform"]&&""!=(e=t.style["-webkit-transform"])?["-webkit-transform",e]:-1},e.Dom.resetCssTransform=function(t){t.transform&&""!=t.transform?t.transform="":t["-webkit-transform"]&&""!=t["-webkit-transform"]&&(t["-webkit-transform"]="")}}(),!t.Handsontable)var e={};e.countEventManagerListeners=0,e.eventManager=function(i){var n,o,r,s;if(!i)throw new Error("instance not defined");return i.eventListeners||(i.eventListeners=[]),n=function(n,r,s){var a;return a=function(t){var i;void 0==t.target&&void 0!=t.srcElement&&(t.definePoperty?t.definePoperty("target",{value:t.srcElement}):t.target=t.srcElement),void 0==t.preventDefault&&(t.definePoperty?t.definePoperty("preventDefault",{value:function(){this.returnValue=!1}}):t.preventDefault=function(){this.returnValue=!1}),t.realTarget=t.target,t.isTargetWebComponent=!1,e.helper.isWebComponent(t.target)?(t.isTargetWebComponent=!0,i=Object.create(t,{target:{value:t.path[0]},constructor:{value:t.constructor}}),i.preventDefault=function(){t.preventDefault.apply(t,arguments)},i.stopPropagation=function(){t.stopPropagation.apply(t,arguments)},i.stopImmediatePropagation=function(){t.stopImmediatePropagation.apply(t,arguments)},s.call(this,i)):s.call(this,t)},i.eventListeners.push({element:n,event:r,callback:s,callbackProxy:a}),t.addEventListener?n.addEventListener(r,a,!1):n.attachEvent("on"+r,a),e.countEventManagerListeners++,function(){o(n,r,s)}},o=function(t,n,o){for(var r,s=i.eventListeners.length;s--;)if(r=i.eventListeners[s],r.event==n&&r.element==t){if(o&&o!=r.callback)continue;i.eventListeners.splice(s,1),r.element.removeEventListener?r.element.removeEventListener(r.event,r.callbackProxy,!1):r.element.detachEvent("on"+r.event,r.callbackProxy),e.countEventManagerListeners--}},r=function(){for(var t,e=i.eventListeners.length;e--;)t=i.eventListeners[e],t&&o(t.element,t.event,t.callback)},s=function(e,i){var n,o;n={bubbles:!0,cancelable:"mousemove"!==i,view:t,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0},document.createEvent?(o=document.createEvent("MouseEvents"),o.initMouseEvent(i,n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget||document.body.parentNode)):o=document.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+i,o)},{addEventListener:n,removeEventListener:o,clear:r,fireEvent:s}},e.TableView=function(i){var n=this;this.eventManager=e.eventManager(i),this.instance=i,this.settings=i.getSettings();var o=i.rootElement.getAttribute("style");o&&i.rootElement.setAttribute("data-originalstyle",o),e.Dom.addClass(i.rootElement,"handsontable");var r=document.createElement("TABLE");r.className="htCore",this.THEAD=document.createElement("THEAD"),r.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),r.appendChild(this.TBODY),i.table=r,i.container.insertBefore(r,i.container.firstChild),this.eventManager.addEventListener(i.rootElement,"mousedown",function(e){n.isTextSelectionAllowed(e.target)||(a(),e.preventDefault(),t.focus())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(t){i.selection.isInProgress()&&!t.shiftKey&&i.selection.finish()});var s;this.isMouseDown=function(){return s},this.eventManager.addEventListener(document.documentElement,"mouseup",function(t){i.selection.isInProgress()&&1===t.which&&i.selection.finish(),s=!1,e.helper.isOutsideInput(document.activeElement)&&i.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(t){var e=t.target;if(!s){if(e!==n.instance.container)for(;e!==document.documentElement;){if(null===e){if(t.isTargetWebComponent)break;return}if(e===i.rootElement)return;e=e.parentNode}n.settings.outsideClickDeselects?i.deselectCell():i.destroyEditor()}}),this.eventManager.addEventListener(r,"selectstart",function(t){n.settings.fragmentSelection||t.preventDefault()});var a=function(){t.getSelection?t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges():document.selection&&document.selection.empty()},l=[new S({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&!i.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&&!i.selection.isMultiple()}}}),new S({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&i.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!n.isCellEdited()&&i.selection.isMultiple()}}}),new S({className:"highlight",highlightRowClassName:n.settings.currentRowClassName,highlightColumnClassName:n.settings.currentColClassName}),new S({className:"fill",border:{width:1,color:"red"}})];l.current=l[0],l.area=l[1],l.highlight=l[2],l.fill=l[3];var h={debug:function(){return n.settings.debug},table:r,stretchH:this.settings.stretchH,data:i.getDataAtCell,totalRows:i.countRows,totalColumns:i.countCols,fixedColumnsLeft:function(){return n.settings.fixedColumnsLeft},fixedRowsTop:function(){return n.settings.fixedRowsTop},renderAllRows:n.settings.renderAllRows,rowHeaders:function(){var t=[];return i.hasRowHeaders()&&t.push(function(t,e){n.appendRowHeader(t,e)}),e.hooks.run(i,"afterGetRowHeaderRenderers",t),t},columnHeaders:function(){var t=[];return i.hasColHeaders()&&t.push(function(t,e){n.appendColHeader(t,e)}),e.hooks.run(i,"afterGetColumnHeaderRenderers",t),t},columnWidth:i.getColWidth,rowHeight:i.getRowHeight,cellRenderer:function(t,i,o){var r=n.instance.colToProp(i),s=n.instance.getCellMeta(t,i),a=n.instance.getCellRenderer(s),l=n.instance.getDataAtRowProp(t,r);a(n.instance,o,t,i,r,l,s),e.hooks.run(n.instance,"afterRenderer",o,t,i,r,l,s)},selections:l,hideBorderOnMouseDownOver:function(){return n.settings.fragmentSelection},onCellMouseDown:function(t,o,r,a){i.listen(),n.activeWt=a,s=!0,e.Dom.enableImmediatePropagation(t),e.hooks.run(i,"beforeOnCellMouseDown",t,o,r),t.isImmediatePropagationStopped()||(2===t.button&&i.selection.inInSelection(o)||(t.shiftKey?o.row>=0&&o.col>=0&&i.selection.setRangeEnd(o):(o.row<0||o.col<0)&&(o.row>=0||o.col>=0)?(o.row<0&&(i.selectCell(0,o.col,i.countRows()-1,o.col),i.selection.setSelectedHeaders(!1,!0)),o.col<0&&(i.selectCell(o.row,0,o.row,i.countCols()-1),i.selection.setSelectedHeaders(!0,!1))):(o.row=o.row<0?0:o.row,o.col=o.col<0?0:o.col,i.selection.setRangeStart(o))),e.hooks.run(i,"afterOnCellMouseDown",t,o,r),n.activeWt=n.wt)},onCellMouseOver:function(t,o,r,a){n.activeWt=a,o.row>=0&&o.col>=0?s&&i.selection.setRangeEnd(o):s&&(o.row<0&&(i.selection.setRangeEnd(new u(i.countRows()-1,o.col)),i.selection.setSelectedHeaders(!1,!0)),o.col<0&&(i.selection.setRangeEnd(new u(o.row,i.countCols()-1)),i.selection.setSelectedHeaders(!0,!1))),e.hooks.run(i,"afterOnCellMouseOver",t,o,r),n.activeWt=n.wt},onCellCornerMouseDown:function(t){t.preventDefault(),e.hooks.run(i,"afterOnCellCornerMouseDown",t)},beforeDraw:function(t){n.beforeRender(t)},onDraw:function(t){n.onDraw(t)},onScrollVertically:function(){i.runHooks("afterScrollVertically")},onScrollHorizontally:function(){i.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(t,e){i.runHooks("beforeDrawBorders",t,e)},onBeforeTouchScroll:function(){i.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){i.runHooks("afterMomentumScroll")},viewportRowCalculatorOverride:function(t){n.settings.viewportRowRenderingOffset&&(t.startRow=Math.max(t.startRow-n.settings.viewportRowRenderingOffset,0),t.endRow=Math.min(t.endRow+n.settings.viewportRowRenderingOffset,i.countRows()-1)),i.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:function(t){n.settings.viewportColumnRenderingOffset&&(t.startColumn=Math.max(t.startColumn-n.settings.viewportColumnRenderingOffset,0),t.endColumn=Math.min(t.endColumn+n.settings.viewportColumnRenderingOffset,i.countCols()-1)),i.runHooks("afterViewportColumnCalculatorOverride",t)}};e.hooks.run(i,"beforeInitWalkontable",h),this.wt=new m(h),this.activeWt=this.wt,this.eventManager.addEventListener(n.wt.wtTable.spreader,"mousedown",function(t){t.target===n.wt.wtTable.spreader&&3===t.which&&e.helper.stopPropagation(t)}),this.eventManager.addEventListener(n.wt.wtTable.spreader,"contextmenu",function(t){t.target===n.wt.wtTable.spreader&&3===t.which&&e.helper.stopPropagation(t)}),this.eventManager.addEventListener(document.documentElement,"click",function(){n.settings.observeDOMVisibility&&n.wt.drawInterrupted&&(n.instance.forceFullRender=!0,n.render())})},e.TableView.prototype.isTextSelectionAllowed=function(t){return e.helper.isInput(t)?!0:this.settings.fragmentSelection&&e.Dom.isChildOf(t,this.TBODY)?!0:!1},e.TableView.prototype.isCellEdited=function(){var t=this.instance.getActiveEditor();return t&&t.isOpened()},e.TableView.prototype.beforeRender=function(t){t&&e.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender)},e.TableView.prototype.onDraw=function(t){t&&e.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},e.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1},e.TableView.prototype.getCellAtCoords=function(t,e){var i=this.wt.getCell(t,e);return 0>i?null:i},e.TableView.prototype.scrollViewport=function(t){this.wt.scrollViewport(t)},e.TableView.prototype.appendRowHeader=function(t,i){var n=document.createElement("DIV"),o=document.createElement("SPAN");n.className="relative",o.className="rowHeader",t>-1?e.Dom.fastInnerHTML(o,this.instance.getRowHeader(t)):e.Dom.fastInnerText(o,String.fromCharCode(160)),n.appendChild(o),e.Dom.empty(i),i.appendChild(n),e.hooks.run(this.instance,"afterGetRowHeader",t,i)},e.TableView.prototype.appendColHeader=function(t,i){var n=document.createElement("DIV"),o=document.createElement("SPAN");n.className="relative",o.className="colHeader",t>-1?e.Dom.fastInnerHTML(o,this.instance.getColHeader(t)):(e.Dom.fastInnerText(o,String.fromCharCode(160)),e.Dom.addClass(o,"cornerHeader")),n.appendChild(o),e.Dom.empty(i),i.appendChild(n),e.hooks.run(this.instance,"afterGetColHeader",t,i)},e.TableView.prototype.maximumVisibleElementWidth=function(t){var e=this.wt.wtViewport.getWorkspaceWidth(),i=e-t;return i>0?i:0},e.TableView.prototype.maximumVisibleElementHeight=function(t){var e=this.wt.wtViewport.getWorkspaceHeight(),i=e-t;return i>0?i:0},e.TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},e.TableView.prototype.destroy=function(){this.wt.destroy(),this.eventManager.clear()},function(t){function e(t){var e,i;i={},e=t,this.getInstance=function(t){return t.guid in i||(i[t.guid]=new e(t)),i[t.guid]}}var i={},n=new WeakMap;t.editors={registerEditor:function(t,o){var r=new e(o);"string"==typeof t&&(i[t]=r),n.set(o,r)},getEditor:function(t,e){var o;if("function"==typeof t)n.get(t)||this.registerEditor(null,t),o=n.get(t);else{if("string"!=typeof t)throw Error('Only strings and functions can be passed as "editor" parameter ');o=i[t]}if(!o)throw Error('No editor registered under name "'+t+'"');return o.getInstance(e)}}}(e),function(t){t.EditorManager=function(e,i,n){var o,r=this,s=t.helper.keyCode,a=!1,l=t.eventManager(e),h=function(){function h(l){if(e.isListening()&&(t.hooks.run(e,"beforeKeyDown",l),!a&&(t.Dom.enableImmediatePropagation(l),!l.isImmediatePropagationStopped()&&(i.lastKeyCode=l.keyCode,n.isSelected())))){var h=(l.ctrlKey||l.metaKey)&&!l.altKey;if(!(o.isWaiting()||t.helper.isMetaKey(l.keyCode)||h||r.isEditorOpened()))return void r.openEditor("");var c=l.shiftKey?n.setRangeEnd:n.setRangeStart;switch(l.keyCode){case s.A:h&&(n.selectAll(),l.preventDefault(),t.helper.stopPropagation(l));break;case s.ARROW_UP:r.isEditorOpened()&&!o.isWaiting()&&r.closeEditorAndSaveChanges(h),p(l.shiftKey),l.preventDefault(),t.helper.stopPropagation(l);break;case s.ARROW_DOWN:r.isEditorOpened()&&!o.isWaiting()&&r.closeEditorAndSaveChanges(h),f(l.shiftKey),l.preventDefault(),t.helper.stopPropagation(l);break;case s.ARROW_RIGHT:r.isEditorOpened()&&!o.isWaiting()&&r.closeEditorAndSaveChanges(h),m(l.shiftKey),l.preventDefault(),t.helper.stopPropagation(l);break;case s.ARROW_LEFT:r.isEditorOpened()&&!o.isWaiting()&&r.closeEditorAndSaveChanges(h),g(l.shiftKey),l.preventDefault(),t.helper.stopPropagation(l);break;case s.TAB:var v="function"==typeof i.settings.tabMoves?i.settings.tabMoves(l):i.settings.tabMoves;l.shiftKey?n.transformStart(-v.row,-v.col):n.transformStart(v.row,v.col,!0),l.preventDefault(),t.helper.stopPropagation(l);break;case s.BACKSPACE:case s.DELETE:n.empty(l),r.prepareEditor(),l.preventDefault();break;case s.F2:r.openEditor(),l.preventDefault();break;case s.ENTER:r.isEditorOpened()?(o.state!==t.EditorState.WAITING&&r.closeEditorAndSaveChanges(h),d(l.shiftKey)):e.getSettings().enterBeginsEditing?r.openEditor():d(l.shiftKey),l.preventDefault(),l.stopImmediatePropagation();break;case s.ESCAPE:r.isEditorOpened()&&r.closeEditorAndRestoreOriginalValue(h),l.preventDefault();break;case s.HOME:c(l.ctrlKey||l.metaKey?new u(0,i.selRange.from.col):new u(i.selRange.from.row,0)),l.preventDefault(),t.helper.stopPropagation(l);break;case s.END:c(l.ctrlKey||l.metaKey?new u(e.countRows()-1,i.selRange.from.col):new u(i.selRange.from.row,e.countCols()-1)),l.preventDefault(),t.helper.stopPropagation(l);break;case s.PAGE_UP:n.transformStart(-e.countVisibleRows(),0),l.preventDefault(),t.helper.stopPropagation(l);break;case s.PAGE_DOWN:n.transformStart(e.countVisibleRows(),0),l.preventDefault(),t.helper.stopPropagation(l)}}}function c(t,e,i){"TD"==i.nodeName&&r.openEditor()}function d(t){var e="function"==typeof i.settings.enterMoves?i.settings.enterMoves(event):i.settings.enterMoves;t?n.transformStart(-e.row,-e.col):n.transformStart(e.row,e.col,!0)}function p(t){t?n.transformEnd(-1,0):n.transformStart(-1,0)}function f(t){t?n.transformEnd(1,0):n.transformStart(1,0)}function m(t){t?n.transformEnd(0,1):n.transformStart(0,1)}function g(t){t?n.transformEnd(0,-1):n.transformStart(0,-1)}e.addHook("afterDocumentKeyDown",function(t){h(t)}),l.addEventListener(document.documentElement,"keydown",function(t){e.runHooks("afterDocumentKeyDown",t)}),e.view.wt.update("onCellDblClick",c),e.addHook("afterDestroy",function(){a=!0})};this.destroyEditor=function(t){this.closeEditor(t)},this.getActiveEditor=function(){return o},this.prepareEditor=function(){if(o&&o.isWaiting())return void this.closeEditor(!1,!1,function(t){t&&r.prepareEditor()});var n=i.selRange.highlight.row,s=i.selRange.highlight.col,a=e.colToProp(s),l=e.getCell(n,s),h=e.getDataAtCell(n,s),c=e.getCellMeta(n,s),u=e.getCellEditor(c);o=t.editors.getEditor(u,e),o.prepare(n,s,a,l,h,c)},this.isEditorOpened=function(){return o.isOpened()},this.openEditor=function(t){o.cellProperties.readOnly||o.beginEditing(t)},this.closeEditor=function(t,e,i){o?o.finishEditing(t,e,i):i&&i(!1)},this.closeEditorAndSaveChanges=function(t){return this.closeEditor(!1,t)},this.closeEditorAndRestoreOriginalValue=function(t){return this.closeEditor(!0,t)},h()}}(e),function(t){var e={};t.renderers={registerRenderer:function(t,i){e[t]=i},getRenderer:function(t){if("function"==typeof t)return t;if("string"!=typeof t)throw Error('Only strings and functions can be passed as "renderer" parameter ');if(!(t in e))throw Error('No editor registered under name "'+t+'"');return e[t]}}}(e),e.helper={},e.helper.isPrintableChar=function(t){return 32==t||t>=48&&57>=t||t>=96&&111>=t||t>=186&&192>=t||t>=219&&222>=t||t>=226||t>=65&&90>=t},e.helper.isMetaKey=function(t){var i=e.helper.keyCode,n=[i.ARROW_DOWN,i.ARROW_UP,i.ARROW_LEFT,i.ARROW_RIGHT,i.HOME,i.END,i.DELETE,i.BACKSPACE,i.F1,i.F2,i.F3,i.F4,i.F5,i.F6,i.F7,i.F8,i.F9,i.F10,i.F11,i.F12,i.TAB,i.PAGE_DOWN,i.PAGE_UP,i.ENTER,i.ESCAPE,i.SHIFT,i.CAPS_LOCK,i.ALT];return-1!=n.indexOf(t)},e.helper.isCtrlKey=function(t){var i=e.helper.keyCode;return-1!=[i.CONTROL_LEFT,224,i.COMMAND_LEFT,i.COMMAND_RIGHT].indexOf(t)},e.helper.stringify=function(t){switch(typeof t){case"string":case"number":return t+"";case"object":return null===t?"":t.toString();case"undefined":return"";default:return t.toString()}},e.helper.spreadsheetColumnLabel=function(t){for(var e,i=t+1,n="";i>0;)e=(i-1)%26,n=String.fromCharCode(65+e)+n,i=parseInt((i-e)/26,10);return n},e.helper.createSpreadsheetData=function(t,i){t="number"==typeof t?t:100,i="number"==typeof i?i:4;var n,o,r=[];for(n=0;t>n;n++){var s=[];for(o=0;i>o;o++)s.push(e.helper.spreadsheetColumnLabel(o)+(n+1));r.push(s)}return r},e.helper.createSpreadsheetObjectData=function(t,i){t="number"==typeof t?t:100,i="number"==typeof i?i:4;var n,o,r=[];for(n=0;t>n;n++){var s={};for(o=0;i>o;o++)s["prop"+o]=e.helper.spreadsheetColumnLabel(o)+(n+1);r.push(s)}return r},e.helper.isNumeric=function(t){var e=typeof t;return"number"==e?!isNaN(t)&&isFinite(t):"string"==e?t.length?1==t.length?/\d/.test(t):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(t):!1:"object"==e?!(!t||"number"!=typeof t.valueOf()||t instanceof Date):!1},e.helper.randomString=function(){return y()},e.helper.inherit=function(t,e){return e.prototype.constructor=e,t.prototype=new e,t.prototype.constructor=t,t},e.helper.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},e.helper.deepExtend=function(t,i){for(var n in i)i.hasOwnProperty(n)&&(i[n]&&"object"==typeof i[n]?(t[n]||(t[n]=Array.isArray(i[n])?[]:{}),e.helper.deepExtend(t[n],i[n])):t[n]=i[n])},e.helper.deepClone=function(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t},e.helper.getPrototypeOf=function(t){var e;if("object"==typeof t.__proto__)e=t.__proto__;else{var i,n=t.constructor;"function"==typeof t.constructor&&(i=n,delete t.constructor&&(n=t.constructor,t.constructor=i)),e=n?n.prototype:null}return e},e.helper.columnFactory=function(t,i){function n(){}e.helper.inherit(n,t);for(var o=0,r=i.length;r>o;o++)n.prototype[i[o]]=void 0;return n},e.helper.translateRowsToColumns=function(t){var e,i,n,o,r=[],s=0;for(e=0,i=t.length;i>e;e++)for(n=0,o=t[e].length;o>n;n++)n==s&&(r.push([]),s++),r[n].push(t[e][n]);return r},e.helper.to2dArray=function(t){for(var e=0,i=t.length;i>e;)t[e]=[t[e]],e++},e.helper.extendArray=function(t,e){for(var i=0,n=e.length;n>i;)t.push(e[i]),i++},e.helper.isInput=function(t){var e=["INPUT","SELECT","TEXTAREA"];return e.indexOf(t.nodeName)>-1},e.helper.isOutsideInput=function(t){return e.helper.isInput(t)&&-1==t.className.indexOf("handsontableInput")},e.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},e.helper.isObject=function(t){return"[object Object]"==Object.prototype.toString.call(t)},e.helper.pivot=function(t){var e=[];if(!t||0===t.length||!t[0]||0===t[0].length)return e;for(var i=t.length,n=t[0].length,o=0;i>o;o++)for(var r=0;n>r;r++)e[r]||(e[r]=[]),e[r][o]=t[o][r];return e},e.helper.proxy=function(t,e){return function(){return t.apply(e,arguments)}},e.helper.cellMethodLookupFactory=function(t,i){function n(t){var i=e.cellTypes[t];if("undefined"==typeof i)throw new Error('You declared cell type "'+t+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return i}return i="undefined"==typeof i?!0:i,function(o,r){return function s(o){if(o){if(o.hasOwnProperty(t)&&void 0!==o[t])return o[t];if(o.hasOwnProperty("type")&&o.type){var r;if("string"!=typeof o.type)throw new Error("Cell type must be a string ");if(r=n(o.type),r.hasOwnProperty(t))return r[t];if(i)return}return s(e.helper.getPrototypeOf(o))}}("number"==typeof o?this.getCellMeta(o,r):o)}},e.helper.isMobileBrowser=function(t){return t||(t=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},e.helper.isTouchSupported=function(){return"ontouchstart"in t},e.helper.stopPropagation=function(t){"function"==typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.helper.pageX=function(t){if(t.pageX)return t.pageX;var i=e.Dom.getWindowScrollLeft(),n=t.clientX+i;return n},e.helper.pageY=function(t){if(t.pageY)return t.pageY;var i=e.Dom.getWindowScrollTop(),n=t.clientY+i;return n},e.helper.isWebComponent=function(t){return t.shadowRoot?!0:!1},function(t){t.DataMap=function(t,e,i){this.instance=t,this.priv=e,this.GridSettings=i,this.dataSource=this.instance.getSettings().data,this.duckSchema=this.dataSource[0]?this.recursiveDuckSchema(this.dataSource[0]):{},this.createMap()},t.DataMap.prototype.DESTINATION_RENDERER=1,t.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,t.DataMap.prototype.recursiveDuckSchema=function(t){var e;if(Array.isArray(t))e=[];else{e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]="object"!=typeof t[i]||Array.isArray(t[i])?null:this.recursiveDuckSchema(t[i]))}return e},t.DataMap.prototype.recursiveDuckColumns=function(t,e,i){var n,o;if("undefined"==typeof e&&(e=0,i=""),"object"==typeof t&&!Array.isArray(t))for(o in t)t.hasOwnProperty(o)&&(null===t[o]?(n=i+o,this.colToPropCache.push(n),this.propToColCache.set(n,e),e++):e=this.recursiveDuckColumns(t[o],e,o+"."));return e},t.DataMap.prototype.createMap=function(){var t,e,i=this.getSchema();if("undefined"==typeof i)throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new MultiMap;var n=this.instance.getSettings().columns;if(n)for(t=0,e=n.length;e>t;t++)"undefined"!=typeof n[t].data&&(this.colToPropCache[t]=n[t].data,this.propToColCache.set(n[t].data,t));else this.recursiveDuckColumns(i)},t.DataMap.prototype.colToProp=function(e){return e=t.hooks.run(this.instance,"modifyCol",e),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[e]?this.colToPropCache[e]:e},t.DataMap.prototype.propToCol=function(e){var i;return i="undefined"!=typeof this.propToColCache.get(e)?this.propToColCache.get(e):e,i=t.hooks.run(this.instance,"modifyCol",i)},t.DataMap.prototype.getSchema=function(){var t=this.instance.getSettings().dataSchema;return t?"function"==typeof t?t():t:this.duckSchema},t.DataMap.prototype.createRow=function(e,i,n){var o,r,s=this.instance.countCols(),a=0;i||(i=1),("number"!=typeof e||e>=this.instance.countRows())&&(e=this.instance.countRows()),r=e;for(var l=this.instance.getSettings().maxRows;i>a&&this.instance.countRows()<l;){if("array"===this.instance.dataType){o=[];for(var h=0;s>h;h++)o.push(null)}else"function"===this.instance.dataType?o=this.instance.getSettings().dataSchema(e):(o={},t.helper.deepExtend(o,this.getSchema()));e===this.instance.countRows()?this.dataSource.push(o):this.dataSource.splice(e,0,o),a++,r++}return t.hooks.run(this.instance,"afterCreateRow",e,a,n),this.instance.forceFullRender=!0,a},t.DataMap.prototype.createCol=function(e,i,n){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var o,r,s=this.instance.countRows(),a=this.dataSource,l=0;i||(i=1),r=e;for(var h=this.instance.getSettings().maxCols;i>l&&this.instance.countCols()<h;){if(o=t.helper.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof e||e>=this.instance.countCols()){for(var c=0;s>c;c++)"undefined"==typeof a[c]&&(a[c]=[]),a[c].push(null);this.priv.columnSettings.push(o)}else{for(var c=0;s>c;c++)a[c].splice(r,0,null);this.priv.columnSettings.splice(r,0,o)}l++,r++}return t.hooks.run(this.instance,"afterCreateCol",e,l,n),this.instance.forceFullRender=!0,l},t.DataMap.prototype.removeRow=function(e,i){i||(i=1),"number"!=typeof e&&(e=-i),e=(this.instance.countRows()+e)%this.instance.countRows();var n=this.physicalRowsToLogical(e,i),o=t.hooks.run(this.instance,"beforeRemoveRow",e,i);if(o!==!1){var r=this.dataSource,s=r.filter(function(t,e){return-1==n.indexOf(e)});r.length=0,Array.prototype.push.apply(r,s),t.hooks.run(this.instance,"afterRemoveRow",e,i),this.instance.forceFullRender=!0}},t.DataMap.prototype.removeCol=function(e,i){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");i||(i=1),"number"!=typeof e&&(e=-i),e=(this.instance.countCols()+e)%this.instance.countCols();var n=t.hooks.run(this.instance,"beforeRemoveCol",e,i);if(n!==!1){for(var o=this.dataSource,r=0,s=this.instance.countRows();s>r;r++)o[r].splice(e,i);this.priv.columnSettings.splice(e,i),t.hooks.run(this.instance,"afterRemoveCol",e,i),this.instance.forceFullRender=!0}},t.DataMap.prototype.spliceCol=function(e,i,n){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getDataAtCol(e),s=r.slice(i,i+n),a=r.slice(i+n);t.helper.extendArray(o,a);for(var l=0;n>l;)o.push(null),l++;return t.helper.to2dArray(o),this.instance.populateFromArray(i,e,o,null,null,"spliceCol"),s},t.DataMap.prototype.spliceRow=function(e,i,n){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getSourceDataAtRow(e),s=r.slice(i,i+n),a=r.slice(i+n);t.helper.extendArray(o,a);for(var l=0;n>l;)o.push(null),l++;return this.instance.populateFromArray(e,i,[o],null,null,"spliceRow"),s},t.DataMap.prototype.get=function(e,i){if(e=t.hooks.run(this.instance,"modifyRow",e),"string"==typeof i&&i.indexOf(".")>-1){var n=i.split("."),o=this.dataSource[e];if(!o)return null;for(var r=0,s=n.length;s>r;r++)if(o=o[n[r]],"undefined"==typeof o)return null;return o}return"function"==typeof i?i(this.dataSource.slice(e,e+1)[0]):this.dataSource[e]?this.dataSource[e][i]:null};var e=t.helper.cellMethodLookupFactory("copyable",!1);t.DataMap.prototype.getCopyable=function(t,i){return e.call(this.instance,t,this.propToCol(i))?this.get(t,i):""},t.DataMap.prototype.set=function(e,i,n,o){if(e=t.hooks.run(this.instance,"modifyRow",e,o||"datamapGet"),"string"==typeof i&&i.indexOf(".")>-1){for(var r=i.split("."),s=this.dataSource[e],a=0,l=r.length-1;l>a;a++)"undefined"==typeof s[r[a]]&&(s[r[a]]={}),s=s[r[a]];s[r[a]]=n}else"function"==typeof i?i(this.dataSource.slice(e,e+1)[0],n):this.dataSource[e][i]=n},t.DataMap.prototype.physicalRowsToLogical=function(e,i){for(var n,o=this.instance.countRows(),r=(o+e)%o,s=[],a=i;o>r&&a;)n=t.hooks.run(this.instance,"modifyRow",r),s.push(n),a--,r++;return s},t.DataMap.prototype.clear=function(){for(var t=0;t<this.instance.countRows();t++)for(var e=0;e<this.instance.countCols();e++)this.set(t,this.colToProp(e),"")},t.DataMap.prototype.getAll=function(){return this.dataSource},t.DataMap.prototype.getRange=function(t,e,i){var n,o,r,s,a,l=[],h=i===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(o=Math.max(t.row,e.row),s=Math.max(t.col,e.col),n=Math.min(t.row,e.row);o>=n;n++){for(a=[],r=Math.min(t.col,e.col);s>=r;r++)a.push(h.call(this,n,this.colToProp(r)));l.push(a)}return l},t.DataMap.prototype.getText=function(t,e){return SheetClip.stringify(this.getRange(t,e,this.DESTINATION_RENDERER))},t.DataMap.prototype.getCopyableText=function(t,e){return SheetClip.stringify(this.getRange(t,e,this.DESTINATION_CLIPBOARD_GENERATOR))}}(e),function(t){t.renderers.cellDecorator=function(e,i,n,o,r,s,a){a.className&&(i.className=i.className?i.className+" "+a.className:a.className),a.readOnly&&t.Dom.addClass(i,a.readOnlyCellClassName),a.valid===!1&&a.invalidCellClassName&&t.Dom.addClass(i,a.invalidCellClassName),a.wordWrap===!1&&a.noWordWrapClassName&&t.Dom.addClass(i,a.noWordWrapClassName),!s&&a.placeholder&&t.Dom.addClass(i,a.placeholderCellClassName)}}(e),function(t){var e=function(e,i,n,o,r,s,a){t.renderers.cellDecorator.apply(this,arguments),!s&&a.placeholder&&(s=a.placeholder);var l=t.helper.stringify(s);if(e.getSettings().trimWhitespace||(l=l.replace(/ /g,String.fromCharCode(160))),a.rendererTemplate){t.Dom.empty(i);var h=document.createElement("TEMPLATE");h.setAttribute("bind","{{}}"),h.innerHTML=a.rendererTemplate,HTMLTemplateElement.decorate(h),h.model=e.getSourceDataAtRow(n),i.appendChild(h)}else t.Dom.fastInnerText(i,l)};t.renderers.TextRenderer=e,t.renderers.registerRenderer("text",e)}(e),function(t){var e=document.createElement("DIV");e.className="htAutocompleteWrapper";var i=document.createElement("DIV");i.className="htAutocompleteArrow",i.appendChild(document.createTextNode(String.fromCharCode(9660)));var n=function(n,o,r,s,a,l,h){var c=(e.cloneNode(!0),i.cloneNode(!0));if(t.renderers.TextRenderer(n,o,r,s,a,l,h),o.appendChild(c),t.Dom.addClass(o,"htAutocomplete"),o.firstChild||o.appendChild(document.createTextNode(String.fromCharCode(160))),!n.acArrowListener){var d=t.eventManager(n);n.acArrowListener=function(e){t.Dom.hasClass(e.target,"htAutocompleteArrow")&&n.view.wt.getSetting("onCellDblClick",null,new u(r,s),o)},d.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",function(){d.clear()})}};t.AutocompleteRenderer=n,t.renderers.AutocompleteRenderer=n,t.renderers.registerRenderer("autocomplete",n)}(e),function(t){var e=document.createElement("INPUT");e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("autocomplete","off");var i=function(i,n,o,r,s,a,l){var h=t.eventManager(i);"undefined"==typeof l.checkedTemplate&&(l.checkedTemplate=!0),"undefined"==typeof l.uncheckedTemplate&&(l.uncheckedTemplate=!1),t.Dom.empty(n);var c=e.cloneNode(!1);a===l.checkedTemplate||a===t.helper.stringify(l.checkedTemplate)?(c.checked=!0,n.appendChild(c)):a===l.uncheckedTemplate||a===t.helper.stringify(l.uncheckedTemplate)?n.appendChild(c):null===a?(c.className+=" noValue",n.appendChild(c)):t.Dom.fastInnerText(n,"#bad value#"),l.readOnly?h.addEventListener(c,"click",function(t){t.preventDefault()}):(h.addEventListener(c,"mousedown",function(e){t.helper.stopPropagation(e)}),h.addEventListener(c,"mouseup",function(e){t.helper.stopPropagation(e)}),h.addEventListener(c,"change",function(){this.checked?i.setDataAtRowProp(o,s,l.checkedTemplate):i.setDataAtRowProp(o,s,l.uncheckedTemplate)})),i.CheckboxRenderer&&i.CheckboxRenderer.beforeKeyDownHookBound||(i.CheckboxRenderer={beforeKeyDownHookBound:!0},i.addHook("beforeKeyDown",function(e){if(t.Dom.enableImmediatePropagation(e),e.keyCode==t.helper.keyCode.SPACE||e.keyCode==t.helper.keyCode.ENTER)for(var n,o,r,s=i.getSelectedRange(),a=s.getTopLeftCorner(),l=s.getBottomRightCorner(),c=a.row;c<=l.row;c++)for(var u=a.col;u<=l.col;u++)if(n=i.getCell(c,u),r=i.getCellMeta(c,u),o=n.querySelectorAll("input[type=checkbox]"),o.length>0&&!r.readOnly){e.isImmediatePropagationStopped()||(e.stopImmediatePropagation(),e.preventDefault());
for(var d=0,p=o.length;p>d;d++)o[d].checked=!o[d].checked,h.fireEvent(o[d],"change")}}))};t.CheckboxRenderer=i,t.renderers.CheckboxRenderer=i,t.renderers.registerRenderer("checkbox",i)}(e),function(t){var e=function(e,i,n,o,r,s,a){t.helper.isNumeric(s)&&("undefined"!=typeof a.language&&numeral.language(a.language),s=numeral(s).format(a.format||"0"),t.Dom.addClass(i,"htNumeric")),t.renderers.TextRenderer(e,i,n,o,r,s,a)};t.NumericRenderer=e,t.renderers.NumericRenderer=e,t.renderers.registerRenderer("numeric",e)}(e),function(t){var e=function(e,i,n,o,r,s,a){t.renderers.TextRenderer.apply(this,arguments),s=i.innerHTML;var l,h=a.hashLength||s.length,c=a.hashSymbol||"*";for(l="";l.split(c).length-1<h;l+=c);t.Dom.fastInnerHTML(i,l)};t.PasswordRenderer=e,t.renderers.PasswordRenderer=e,t.renderers.registerRenderer("password",e)}(e),function(t){function e(e,i,n,o,r,s){t.renderers.cellDecorator.apply(this,arguments),t.Dom.fastInnerHTML(i,s)}t.renderers.registerRenderer("html",e),t.renderers.HtmlRenderer=e}(e),function(t){function e(e){this.instance=e,this.state=t.EditorState.VIRGIN,this._opened=!1,this._closeCallback=null,this.init()}t.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},e.prototype._fireCallbacks=function(t){this._closeCallback&&(this._closeCallback(t),this._closeCallback=null)},e.prototype.init=function(){},e.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},e.prototype.setValue=function(){throw Error("Editor setValue() method unimplemented")},e.prototype.open=function(){throw Error("Editor open() method unimplemented")},e.prototype.close=function(){throw Error("Editor close() method unimplemented")},e.prototype.prepare=function(e,i,n,o,r,s){this.TD=o,this.row=e,this.col=i,this.prop=n,this.originalValue=r,this.cellProperties=s,this.state=t.EditorState.VIRGIN},e.prototype.extend=function(){function t(){i.apply(this,arguments)}function e(t,e){function i(){}return i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t}var i=this.constructor;return e(t,i)},e.prototype.saveValue=function(t,e){if(e){var i,n=this.instance.getSelected();n[0]>n[2]&&(i=n[0],n[0]=n[2],n[2]=i),n[1]>n[3]&&(i=n[1],n[1]=n[3],n[3]=i),this.instance.populateFromArray(n[0],n[1],t,n[2],n[3],"edit")}else this.instance.populateFromArray(this.row,this.col,t,null,null,"edit")},e.prototype.beginEditing=function(e){this.state==t.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new u(this.row,this.col)),this.instance.view.render(),this.state=t.EditorState.EDITING,e="string"==typeof e?e:this.originalValue,this.setValue(t.helper.stringify(e)),this.open(),this._opened=!0,this.focus(),this.instance.view.render())},e.prototype.finishEditing=function(e,i,n){var o,r=this;if(n){var s=this._closeCallback;this._closeCallback=function(t){s&&s(t),n(t)}}if(!this.isWaiting()){if(this.state==t.EditorState.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){r._fireCallbacks(!0)},0));if(this.state==t.EditorState.EDITING){if(e)return this.cancelChanges(),void this.instance.view.render();o=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],this.state=t.EditorState.WAITING,this.saveValue(o,i),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(e){r.state=t.EditorState.FINISHED,r.discardEditor(e)}):(this.state=t.EditorState.FINISHED,this.discardEditor(!0))}}},e.prototype.cancelChanges=function(){this.state=t.EditorState.FINISHED,this.discardEditor()},e.prototype.discardEditor=function(e){this.state===t.EditorState.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=t.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=t.EditorState.VIRGIN,this._fireCallbacks(!0)))},e.prototype.isOpened=function(){return this._opened},e.prototype.isWaiting=function(){return this.state===t.EditorState.WAITING},t.editors.BaseEditor=e}(e),function(t){var e=t.editors.BaseEditor.prototype.extend();e.prototype.init=function(){var e=this;this.createElements(),this.eventManager=new t.eventManager(this),this.bindEvents(),this.autoResize=I(),this.instance.addHook("afterDestroy",function(){e.destroy()})},e.prototype.getValue=function(){return this.TEXTAREA.value},e.prototype.setValue=function(t){this.TEXTAREA.value=t};var i=function(e){var i,n,o=this,r=o.getActiveEditor();if(i=t.helper.keyCode,n=(e.ctrlKey||e.metaKey)&&!e.altKey,t.Dom.enableImmediatePropagation(e),e.target===r.TEXTAREA&&!e.isImmediatePropagationStopped()){if(17===e.keyCode||224===e.keyCode||91===e.keyCode||93===e.keyCode)return void e.stopImmediatePropagation();switch(e.keyCode){case i.ARROW_RIGHT:t.Dom.getCaretPosition(r.TEXTAREA)!==r.TEXTAREA.value.length&&e.stopImmediatePropagation();break;case i.ARROW_LEFT:0!==t.Dom.getCaretPosition(r.TEXTAREA)&&e.stopImmediatePropagation();break;case i.ENTER:var s=r.instance.getSelected(),a=!(s[0]===s[2]&&s[1]===s[3]);if(n&&!a||e.altKey){if(r.isOpened()){var l=t.Dom.getCaretPosition(r.TEXTAREA),h=r.getValue(),c=h.slice(0,l)+"\n"+h.slice(l);r.setValue(c),t.Dom.setCaretPosition(r.TEXTAREA,l+1)}else r.beginEditing(r.originalValue+"\n");e.stopImmediatePropagation()}e.preventDefault();break;case i.A:case i.X:case i.C:case i.V:n&&e.stopImmediatePropagation();break;case i.BACKSPACE:case i.DELETE:case i.HOME:case i.END:e.stopImmediatePropagation()}r.autoResize.resize(String.fromCharCode(e.keyCode))}};e.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",i)},e.prototype.close=function(){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",i)},e.prototype.focus=function(){this.TEXTAREA.focus(),t.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},e.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),t.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),t.Dom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var e=this;this.instance._registerTimeout(setTimeout(function(){e.refreshDimensions()},0))},e.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},e.prototype.getEditedCell=function(){var t,e=this.checkEditorSection();switch(e){case"top":t=this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"corner":t=this.instance.view.wt.wtScrollbars.corner.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":t=this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:t=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return-1!=t&&-2!=t?t:void 0},e.prototype.refreshDimensions=function(){if(this.state===t.EditorState.EDITING&&(this.TD=this.getEditedCell(),this.TD)){var e,i=t.Dom.offset(this.TD),n=t.Dom.offset(this.instance.rootElement),o=i.top-n.top-1,r=i.left-n.left-1,s=this.instance.getSettings(),a=s.rowHeaders===!1?0:1,l=s.colHeaders===!1?0:1,h=this.checkEditorSection();switch(h){case"top":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode);break;case"left":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode);break;case"corner":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode)}0>o&&(o=0),0>r&&(r=0),a>0&&parseInt(this.TD.style.borderTopWidth,10)>0&&(o+=1),l>0&&parseInt(this.TD.style.borderLeftWidth,10)>0&&(r+=1),a&&0===this.instance.getSelected()[0]&&(o+=1),e&&-1!=e?this.textareaParentStyle[e[0]]=e[1]:t.Dom.resetCssTransform(this.textareaParentStyle),this.textareaParentStyle.top=o+"px",this.textareaParentStyle.left=r+"px";var c=this.TD.offsetTop-this.instance.view.wt.wtScrollbars.vertical.getScrollPosition(),u=this.TD.offsetLeft-this.instance.view.wt.wtScrollbars.horizontal.getScrollPosition(),d=t.Dom.innerWidth(this.TD)-8,p=this.instance.view.maximumVisibleElementWidth(u)-10,f=t.Dom.outerHeight(this.TD)-4,m=this.instance.view.maximumVisibleElementHeight(c)-2;parseInt(this.TD.style.borderTopWidth,10)>0&&(f-=1),parseInt(this.TD.style.borderLeftWidth,10)>0&&a>0&&(d-=1),this.TEXTAREA.style.fontSize=t.Dom.getComputedStyle(this.TD).fontSize,this.TEXTAREA.style.fontFamily=t.Dom.getComputedStyle(this.TD).fontFamily,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(f,m),maxHeight:m,minWidth:Math.min(d,p),maxWidth:p},!0),this.textareaParentStyle.display="block"}},e.prototype.bindEvents=function(){var e=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(e){t.helper.stopPropagation(e)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(e){t.helper.stopPropagation(e)}),this.instance.addHook("afterScrollVertically",function(){e.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){e.refreshDimensions(),e.focus()}),this.instance.addHook("afterRowResize",function(){e.refreshDimensions(),e.focus()}),this.instance.addHook("afterDestroy",function(){e.eventManager.clear()})},e.prototype.destroy=function(){this.eventManager.clear()},t.editors.TextEditor=e,t.editors.registerEditor("text",t.editors.TextEditor)}(e),function(e){var i=e.editors.BaseEditor.prototype.extend(),n={},o=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var t in this.controls)this.controls.hasOwnProperty(t)&&this.positionControls.appendChild(this.controls[t])};i.prototype.valueChanged=function(){return this.initValue!=this.getValue()},i.prototype.init=function(){var t=this;this.eventManager=new e.eventManager(this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){t.destroy()})},i.prototype.getValue=function(){return this.TEXTAREA.value},i.prototype.setValue=function(t){this.initValue=t,this.TEXTAREA.value=t},i.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),e.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),o.call(this),document.body.appendChild(this.editorContainer)},i.prototype.onBeforeKeyDown=function(t){var i=this,n=i.getActiveEditor();if(e.Dom.enableImmediatePropagation(t),t.target===n.TEXTAREA&&!t.isImmediatePropagationStopped()){var o=e.helper.keyCode;switch(t.keyCode){case o.ENTER:n.close(),t.preventDefault();break;case o.BACKSPACE:t.stopImmediatePropagation()}}},i.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),e.Dom.addClass(this.editorContainer,"active"),e.Dom.removeClass(this.cellPointer,"hidden"),this.updateEditorPosition()},i.prototype.focus=function(){this.TEXTAREA.focus(),e.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},i.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),e.Dom.removeClass(this.editorContainer,"active")},i.prototype.scrollToView=function(){var t=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(t)},i.prototype.hideCellPointer=function(){e.Dom.hasClass(this.cellPointer,"hidden")||e.Dom.addClass(this.cellPointer,"hidden")},i.prototype.updateEditorPosition=function(i,o){if(i&&o)i=parseInt(i,10),o=parseInt(o,10),this.editorContainer.style.top=o+"px",this.editorContainer.style.left=i+"px";else{var r=this.instance.getSelected(),s=this.instance.getCell(r[0],r[1]);if(n.cellPointer||(n.cellPointer={height:e.Dom.outerHeight(this.cellPointer),width:e.Dom.outerWidth(this.cellPointer)}),n.editorContainer||(n.editorContainer={width:e.Dom.outerWidth(this.editorContainer)}),void 0!==s){var a=this.instance.view.wt.wtScrollbars.horizontal.scrollHandler==t?0:e.Dom.getScrollLeft(this.instance.view.wt.wtScrollbars.horizontal.scrollHandler),l=this.instance.view.wt.wtScrollbars.vertical.scrollHandler==t?0:e.Dom.getScrollTop(this.instance.view.wt.wtScrollbars.vertical.scrollHandler),h=e.Dom.offset(s),c=e.Dom.outerWidth(s),u={x:a,y:l};this.editorContainer.style.top=parseInt(h.top+e.Dom.outerHeight(s)-u.y+n.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(t.innerWidth/2-n.editorContainer.width/2,10)+"px",h.left+c/2>parseInt(this.editorContainer.style.left,10)+n.editorContainer.width?this.editorContainer.style.left=t.innerWidth-n.editorContainer.width+"px":h.left+c/2<parseInt(this.editorContainer.style.left,10)+20&&(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(h.left-n.cellPointer.width/2-e.Dom.offset(this.editorContainer).left+c/2-u.x,10)+"px"}}},i.prototype.updateEditorData=function(){var t=this.instance.getSelected(),e=this.instance.getDataAtCell(t[0],t[1]);this.row=t[0],this.col=t[1],this.setValue(e),this.updateEditorPosition()},i.prototype.prepareAndSave=function(){var t;return this.valueChanged()?(t=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],void this.saveValue(t)):!0},i.prototype.bindEvents=function(){var i=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(t){i.prepareAndSave(),i.instance.selection.transformStart(0,-1,null,!0),i.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(t){i.prepareAndSave(),i.instance.selection.transformStart(0,1,null,!0),i.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(t){i.prepareAndSave(),i.instance.selection.transformStart(-1,0,null,!0),i.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(t){i.prepareAndSave(),i.instance.selection.transformStart(1,0,null,!0),i.updateEditorData(),t.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(t){if(1==t.touches.length){var e=t.touches[0],n={x:i.editorContainer.offsetLeft,y:i.editorContainer.offsetTop},o={x:e.pageX-n.x,y:e.pageY-n.y};i.eventManager.addEventListener(this,"touchmove",function(t){var e=t.touches[0];i.updateEditorPosition(e.pageX-o.x,e.pageY-o.y),i.hideCellPointer(),t.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(t){e.Dom.isChildOf(t.target,i.editorContainer)||e.Dom.isChildOf(t.target,i.instance.rootElement)||i.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtScrollbars.horizontal.scrollHandler,"scroll",function(){i.instance.view.wt.wtScrollbars.horizontal.scrollHandler!=t&&i.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtScrollbars.vertical.scrollHandler,"scroll",function(){i.instance.view.wt.wtScrollbars.vertical.scrollHandler!=t&&i.hideCellPointer()})},i.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},e.editors.MobileTextEditor=i,e.editors.registerEditor("mobile",e.editors.MobileTextEditor)}(e),function(t){var e=t.editors.BaseEditor.prototype.extend();e.prototype.beginEditing=function(){var t=this.TD.querySelector('input[type="checkbox"]');t&&t.click()},e.prototype.finishEditing=function(){},e.prototype.init=function(){},e.prototype.open=function(){},e.prototype.close=function(){},e.prototype.getValue=function(){},e.prototype.setValue=function(){},e.prototype.focus=function(){},t.editors.CheckboxEditor=e,t.editors.registerEditor("checkbox",e)}(e),function(e){var i=e.editors.TextEditor.prototype.extend();i.prototype.init=function(){if("function"!=typeof moment)throw new Error("You need to include moment.js to your project.");if("function"!=typeof Pikaday)throw new Error("You need to include Pikaday to your project.");e.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var t=this;this.instance.addHook("afterDestroy",function(){t.parentDestroyed=!0,t.destroyElements()})},i.prototype.createElements=function(){e.editors.TextEditor.prototype.createElements.apply(this,arguments),this.defaultDatepickerTrigger=document.querySelector(".handsontableInput"),this.defaultDateFormat="MM/DD/YYYY",this.datePicker=document.createElement("DIV"),e.Dom.addClass(this.datePicker,"htDatepickerHolder"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=99,document.body.appendChild(this.datePicker);var t=this,i={format:t.defaultDateFormat,field:document.querySelector(".handsontableInput"),trigger:document.querySelector(".handsontableInput"),container:t.datePicker,reposition:!1,onSelect:function(e){isNaN(e.getTime())||(e=moment(e).format(t.cellProperties.dateFormat||t.defaultDateFormat)),t.setValue(e)},onClose:function(){t.parentDestroyed||t.finishEditing(!1)}};this.$datePicker=new Pikaday(i);var n=e.eventManager(this);n.addEventListener(this.datePicker,"mousedown",function(t){e.helper.stopPropagation(t)}),this.hideDatepicker()},i.prototype.destroyElements=function(){this.$datePicker.destroy()},i.prototype.prepare=function(){this._opened=!1,e.editors.TextEditor.prototype.prepare.apply(this,arguments)},i.prototype.open=function(){e.editors.TextEditor.prototype.open.call(this),this.showDatepicker()},i.prototype.close=function(){this._opened=!1,e.editors.TextEditor.prototype.close.apply(this,arguments)},i.prototype.finishEditing=function(){this.hideDatepicker(),e.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},i.prototype.showDatepicker=function(){var i=this.TD.getBoundingClientRect(),n=this;this.datePickerStyle.top=t.pageYOffset+i.top+e.Dom.outerHeight(this.TD)+"px",this.datePickerStyle.left=t.pageXOffset+i.left+"px",this.originalValue&&(this.$datePicker.setDate(this.originalValue,!0),this.setValue(this.originalValue)),this.$datePicker.config().trigger=document.querySelector(".htAutocomplete.current"),this.datePickerStyle.display="block",this.$datePicker.show(),this.instance._registerTimeout(setTimeout(function(){n.$datePicker.config().trigger=n.defaultDatepickerTrigger},50))},i.prototype.hideDatepicker=function(){this.datePickerStyle.display="none",this.$datePicker.hide()},e.editors.DateEditor=i,e.editors.registerEditor("date",i)}(e),function(t){var e=t.editors.TextEditor.prototype.extend();e.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments);var e=document.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.htEditor=new t(e),this.assignHooks()},e.prototype.prepare=function(e,i,n,o,r,s){t.editors.TextEditor.prototype.prepare.apply(this,arguments);var a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var t=this.getValue();void 0!==t&&a.setValue(t),a.instance.destroyEditor()}};this.cellProperties.handsontable&&t.helper.extend(l,s.handsontable),this.htEditor&&this.htEditor.destroy(),this.htEditor=new t(this.htContainer,l)};var i=function(e){if(null!=e&&null==e.isImmediatePropagationEnabled&&(e.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},e.isImmediatePropagationEnabled=!0,e.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled}),!e.isImmediatePropagationStopped()){var i,n=this.getActiveEditor(),o=n.htEditor.getInstance();if(e.keyCode==t.helper.keyCode.ARROW_DOWN)if(o.getSelected()){var r=o.getSelected()[0],s=o.countRows()-1;i=Math.min(s,r+1)}else i=0;else if(e.keyCode==t.helper.keyCode.ARROW_UP&&o.getSelected()){var r=o.getSelected()[0];i=r-1}void 0!==i&&(0>i?o.deselectCell():o.selectCell(i,0),e.preventDefault(),e.stopImmediatePropagation(),n.instance.listen(),n.TEXTAREA.focus())}};e.prototype.open=function(){this.instance.addHook("beforeKeyDown",i),t.editors.TextEditor.prototype.open.apply(this,arguments),this.htEditor.render(),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),t.Dom.setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},e.prototype.close=function(){this.instance.removeHook("beforeKeyDown",i),this.instance.listen(),t.editors.TextEditor.prototype.close.apply(this,arguments)},e.prototype.focus=function(){this.instance.listen(),t.editors.TextEditor.prototype.focus.apply(this,arguments)},e.prototype.beginEditing=function(){var e=this.instance.getSettings().onBeginEditing;e&&e()===!1||t.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},e.prototype.finishEditing=function(){if(this.htEditor.isListening()&&this.instance.listen(),this.htEditor.getSelected()){var e=this.htEditor.getInstance().getValue();void 0!==e&&this.setValue(e)}return t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},e.prototype.assignHooks=function(){var t=this;this.instance.addHook("afterDestroy",function(){t.htEditor&&t.htEditor.destroy()})},t.editors.HandsontableEditor=e,t.editors.registerEditor("handsontable",e)}(e),function(e){var i=e.editors.HandsontableEditor.prototype.extend();i.prototype.init=function(){e.editors.HandsontableEditor.prototype.init.apply(this,arguments);var t=this.htEditor.getInstance();t.updateSettings({height:1}),this.query=null,this.choices=[]},i.prototype.createElements=function(){e.editors.HandsontableEditor.prototype.createElements.apply(this,arguments);var i=function(){return-1!=t.navigator.platform.indexOf("Mac")?"htMacScroll":""};e.Dom.addClass(this.htContainer,"autocompleteEditor"),e.Dom.addClass(this.htContainer,i())};var n=!1,o=function(t){n=!1;var i=this.getActiveEditor(),o=e.helper.keyCode;if(e.helper.isPrintableChar(t.keyCode)||t.keyCode===o.BACKSPACE||t.keyCode===o.DELETE||t.keyCode===o.INSERT){var r=0;if(t.keyCode===o.C&&(t.ctrlKey||t.metaKey))return;i.isOpened()||(r+=10),i.instance._registerTimeout(setTimeout(function(){i.queryChoices(i.TEXTAREA.value),n=!0},r))}};i.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",o),e.editors.HandsontableEditor.prototype.prepare.apply(this,arguments)},i.prototype.open=function(){e.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.TEXTAREA.style.visibility="visible",this.focus(),this.htContainer.style.overflow="hidden";var t=this.htEditor.getInstance(),i=this;t.updateSettings({colWidths:[e.Dom.outerWidth(this.TEXTAREA)-2],afterRenderer:function(t,e,n,o,r){var s=this.getCellMeta(e,n).filteringCaseSensitive===!0;if(r){var a=s?r.indexOf(this.query):r.toLowerCase().indexOf(i.query.toLowerCase());if(-1!=a){var l=r.substr(a,i.query.length);t.innerHTML=r.replace(l,"<strong>"+l+"</strong>")}}}}),n&&(n=!1),i.instance._registerTimeout(setTimeout(function(){i.queryChoices(i.TEXTAREA.value),i.htContainer.style.overflow="auto"},0))},i.prototype.close=function(){e.editors.HandsontableEditor.prototype.close.apply(this,arguments)},i.prototype.queryChoices=function(t){if(this.query=t,"function"==typeof this.cellProperties.source){var e=this;this.cellProperties.source(t,function(t){e.updateChoicesList(t)})}else if(Array.isArray(this.cellProperties.source)){var i;if(t&&this.cellProperties.filter!==!1){var n=this.cellProperties.filteringCaseSensitive===!0,o=t.toLowerCase();i=this.cellProperties.source.filter(function(e){return n?-1!=e.indexOf(t):-1!=e.toLowerCase().indexOf(o)})}else i=this.cellProperties.source;this.updateChoicesList(i)}else this.updateChoicesList([])},i.prototype.updateChoicesList=function(t){var n,o=e.Dom.getCaretPosition(this.TEXTAREA),r=e.Dom.getSelectionEndPosition(this.TEXTAREA),s=i.sortByRelevance(this.getValue(),t,this.cellProperties.filteringCaseSensitive);if(0!=this.cellProperties.filter){for(var a=[],l=0,h=s.length;h>l;l++)a.push(t[s[l]]);n=0,t=a}else n=s[0];this.choices=t,this.htEditor.loadData(e.helper.pivot([t])),this.htEditor.updateSettings({height:this.getDropdownHeight()}),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(n),this.instance.listen(),this.TEXTAREA.focus(),e.Dom.setCaretPosition(this.TEXTAREA,o,o!=r?r:void 0)},i.prototype.finishEditing=function(t){t||this.instance.removeHook("beforeKeyDown",o),e.editors.HandsontableEditor.prototype.finishEditing.apply(this,arguments)},i.prototype.highlightBestMatchingChoice=function(t){"number"==typeof t?this.htEditor.selectCell(t,0):this.htEditor.deselectCell()},i.sortByRelevance=function(t,e,i){var n,o,r,s,a,l=[],h=t.length,c=[];if(0===h){for(s=0,a=e.length;a>s;s++)c.push(s);return c}for(s=0,a=e.length;a>s;s++)n=e[s],o=i?n.indexOf(t):n.toLowerCase().indexOf(t.toLowerCase()),-1!=o&&(r=n.length-o-h,l.push({baseIndex:s,index:o,charsLeft:r,value:n}));for(l.sort(function(t,e){return-1===e.index?-1:-1===t.index?1:t.index<e.index?-1:e.index<t.index?1:t.index===e.index?t.charsLeft<e.charsLeft?-1:t.charsLeft>e.charsLeft?1:0:void 0}),s=0,a=l.length;a>s;s++)c.push(l[s].baseIndex);return c},i.prototype.getDropdownHeight=function(){var t=this.htEditor.getInstance().getRowHeight(0)||23;return this.choices.length>=10?10*t:this.choices.length*t+8},e.editors.AutocompleteEditor=i,e.editors.registerEditor("autocomplete",i)}(e),function(t){var e=t.editors.TextEditor.prototype.extend();e.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,t.Dom.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},t.editors.PasswordEditor=e,t.editors.registerEditor("password",e)}(e),function(t){var e=t.editors.BaseEditor.prototype.extend();e.prototype.init=function(){this.select=document.createElement("SELECT"),t.Dom.addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select)},e.prototype.prepare=function(){t.editors.BaseEditor.prototype.prepare.apply(this,arguments);var e,i=this.cellProperties.selectOptions;e=this.prepareOptions("function"==typeof i?i(this.row,this.col,this.prop):i),t.Dom.empty(this.select);for(var n in e)if(e.hasOwnProperty(n)){var o=document.createElement("OPTION");o.value=n,t.Dom.fastInnerHTML(o,e[n]),this.select.appendChild(o)}},e.prototype.prepareOptions=function(t){var e={};if(Array.isArray(t))for(var i=0,n=t.length;n>i;i++)e[t[i]]=t[i];else"object"==typeof t&&(e=t);return e},e.prototype.getValue=function(){return this.select.value},e.prototype.setValue=function(t){this.select.value=t};var i=function(e){var i=this,n=i.getActiveEditor();switch(e.keyCode){case t.helper.keyCode.ARROW_UP:var o=n.select.find("option:selected").prev();1==o.length&&o.prop("selected",!0),e.stopImmediatePropagation(),e.preventDefault();break;case t.helper.keyCode.ARROW_DOWN:var r=n.select.find("option:selected").next();1==r.length&&r.prop("selected",!0),e.stopImmediatePropagation(),e.preventDefault()}};e.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},e.prototype.open=function(){var e,n=t.Dom.outerWidth(this.TD),o=t.Dom.outerHeight(this.TD),r=t.Dom.offset(this.instance.rootElement),s=t.Dom.offset(this.TD),a=this.checkEditorSection();switch(a){case"top":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode);break;case"left":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode);break;case"corner":e=t.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode)}var l=this.select.style;e&&-1!=e?l[e[0]]=e[1]:t.Dom.resetCssTransform(this.select),l.height=o+"px",l.minWidth=n+"px",l.top=s.top-r.top+"px",l.left=s.left-r.left+"px",l.margin="0px",l.display="",this.instance.addHook("beforeKeyDown",i)},e.prototype.close=function(){this.select.style.display="none",this.instance.removeHook("beforeKeyDown",i)},e.prototype.focus=function(){this.select.focus()},t.editors.SelectEditor=e,t.editors.registerEditor("select",e)}(e),function(t){var e=t.editors.AutocompleteEditor.prototype.extend();e.prototype.prepare=function(){t.editors.AutocompleteEditor.prototype.prepare.apply(this,arguments),this.cellProperties.filter=!1,this.cellProperties.strict=!0},t.editors.DropdownEditor=e,t.editors.registerEditor("dropdown",e)}(e),function(t){var e=t.editors.TextEditor.prototype.extend();e.prototype.beginEditing=function(e){var i=t.editors.TextEditor.prototype;if("undefined"==typeof e&&this.originalValue){var n=""+this.originalValue;"undefined"!=typeof this.cellProperties.language&&numeral.language(this.cellProperties.language);var o=numeral.languageData().delimiters.decimal;n=n.replace(".",o),i.beginEditing.apply(this,[n])}else i.beginEditing.apply(this,arguments)},t.editors.NumericEditor=e,t.editors.registerEditor("numeric",e)}(e),e.NumericValidator=function(t,e){null===t&&(t=""),e(/^-?\d*(\.|\,)?\d*$/.test(t))},e.DateValidator=function(t,i){var n=null,o=!0,r=e.editors.getEditor("date",this.instance);null===t&&(t="");var s=moment(new Date(t)).isValid(),a=moment(t,this.dateFormat||r.defaultDateFormat,!0).isValid();s||(o=!1),!s&&a&&(o=!0),s&&!a&&(this.correctFormat===!0?(n=R(t,this.dateFormat),this.instance.setDataAtCell(this.row,this.col,n,"dateValidator"),o=!0):o=!1),i(o)};var R=function(t,e){return t=moment(new Date(t)).format(e)},O=function(t,e){var i=t,n="string"==typeof i?i.toLowerCase():null;return function(t){for(var o=!1,r=0,s=t.length;s>r;r++){if(i===t[r]){o=!0;break}if(n===t[r].toLowerCase()){o=!0;break}}e(o)}};e.AutocompleteValidator=function(t,e){this.strict&&this.source?"function"==typeof this.source?this.source(t,O(t,e)):O(t,e)(this.source):e(!0)},e.mobileBrowser=e.helper.isMobileBrowser(),e.AutocompleteCell={editor:e.editors.AutocompleteEditor,renderer:e.renderers.AutocompleteRenderer,validator:e.AutocompleteValidator},e.CheckboxCell={editor:e.editors.CheckboxEditor,renderer:e.renderers.CheckboxRenderer},e.TextCell={editor:e.mobileBrowser?e.editors.MobileTextEditor:e.editors.TextEditor,renderer:e.renderers.TextRenderer},e.NumericCell={editor:e.editors.NumericEditor,renderer:e.renderers.NumericRenderer,validator:e.NumericValidator,dataType:"number"},e.DateCell={editor:e.editors.DateEditor,validator:e.DateValidator,renderer:e.renderers.AutocompleteRenderer},e.HandsontableCell={editor:e.editors.HandsontableEditor,renderer:e.renderers.AutocompleteRenderer},e.PasswordCell={editor:e.editors.PasswordEditor,renderer:e.renderers.PasswordRenderer,copyable:!1},e.DropdownCell={editor:e.editors.DropdownEditor,renderer:e.renderers.AutocompleteRenderer,validator:e.AutocompleteValidator},e.cellTypes={text:e.TextCell,date:e.DateCell,numeric:e.NumericCell,checkbox:e.CheckboxCell,autocomplete:e.AutocompleteCell,handsontable:e.HandsontableCell,password:e.PasswordCell,dropdown:e.DropdownCell},e.cellLookup={validator:{numeric:e.NumericValidator,autocomplete:e.AutocompleteValidator}};
/**
 * autoResize - resizes a DOM element to the width and height of another DOM element
 *
 * Copyright 2014, Marcin Warpechowski
 * Licensed under the MIT license
 */
var I=function(){var i,n={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},o=document.body,r=document.createTextNode(""),s=document.createElement("SPAN"),a=function(e,i,n){t.attachEvent?e.attachEvent("on"+i,n):e.addEventListener(i,n,!1)},l=function(e,i,n){t.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent("on"+i,n)},h=function(t){var a,l;t?/^[a-zA-Z \.,\\\/\|0-9]$/.test(t)||(t="."):t="",void 0!==r.textContent?r.textContent=i.value+t:r.data=i.value+t,s.style.fontSize=e.Dom.getComputedStyle(i).fontSize,s.style.fontFamily=e.Dom.getComputedStyle(i).fontFamily,s.style.whiteSpace="pre",o.appendChild(s),a=s.clientWidth+2,o.removeChild(s),i.style.height=n.minHeight+"px",i.style.width=n.minWidth>a?n.minWidth+"px":a>n.maxWidth?n.maxWidth+"px":a+"px",l=i.scrollHeight?i.scrollHeight-1:0,n.minHeight>l?i.style.height=n.minHeight+"px":n.maxHeight<l?(i.style.height=n.maxHeight+"px",i.style.overflowY="visible"):i.style.height=l+"px"},c=function(){t.setTimeout(h,0)},u=function(t){if(t&&t.minHeight)if("inherit"==t.minHeight)n.minHeight=i.clientHeight;else{var e=parseInt(t.minHeight);isNaN(e)||(n.minHeight=e)}if(t&&t.maxHeight)if("inherit"==t.maxHeight)n.maxHeight=i.clientHeight;else{var o=parseInt(t.maxHeight);isNaN(o)||(n.maxHeight=o)}if(t&&t.minWidth)if("inherit"==t.minWidth)n.minWidth=i.clientWidth;else{var a=parseInt(t.minWidth);isNaN(a)||(n.minWidth=a)}if(t&&t.maxWidth)if("inherit"==t.maxWidth)n.maxWidth=i.clientWidth;else{var l=parseInt(t.maxWidth);isNaN(l)||(n.maxWidth=l)}s.firstChild||(s.className="autoResize",s.style.display="inline-block",s.appendChild(r))},d=function(t,e,o){i=t,u(e),"TEXTAREA"==i.nodeName&&(i.style.resize="none",i.style.overflowY="",i.style.height=n.minHeight+"px",i.style.minWidth=n.minWidth+"px",i.style.maxWidth=n.maxWidth+"px",i.style.overflowY="hidden"),o&&(a(i,"change",h),a(i,"cut",c),a(i,"paste",c),a(i,"drop",c),a(i,"keydown",c)),h()};return{init:function(t,e,i){d(t,e,i)},unObserve:function(){l(i,"change",h),l(i,"cut",c),l(i,"paste",c),l(i,"drop",c),l(i,"keydown",c)},resize:h}};/**
 * SheetClip - Spreadsheet Clipboard Parser
 * version 0.2
 *
 * This tiny library transforms JavaScript arrays to strings that are pasteable by LibreOffice, OpenOffice,
 * Google Docs and Microsoft Excel.
 *
 * Copyright 2012, Marcin Warpechowski
 * Licensed under the MIT license.
 * http://github.com/warpech/sheetclip/
 */
!function(t){function e(t){return t.split('"').length-1}t.SheetClip={parse:function(t){var i,n,o,r,s,a,l,h=[],c=0;for(o=t.split("\n"),o.length>1&&""===o[o.length-1]&&o.pop(),i=0,n=o.length;n>i;i+=1){for(o[i]=o[i].split("	"),r=0,s=o[i].length;s>r;r+=1)h[c]||(h[c]=[]),a&&0===r?(l=h[c].length-1,h[c][l]=h[c][l]+"\n"+o[i][0],a&&1&e(o[i][0])&&(a=!1,h[c][l]=h[c][l].substring(0,h[c][l].length-1).replace(/""/g,'"'))):r===s-1&&0===o[i][r].indexOf('"')?(h[c].push(o[i][r].substring(1).replace(/""/g,'"')),a=!0):(h[c].push(o[i][r].replace(/""/g,'"')),a=!1);a||(c+=1)}return h},stringify:function(t){var e,i,n,o,r,s="";for(e=0,i=t.length;i>e;e+=1){for(o=t[e].length,n=0;o>n;n+=1)n>0&&(s+="	"),r=t[e][n],s+="string"==typeof r?r.indexOf("\n")>-1?'"'+r.replace(/"/g,'""')+'"':r:null===r||void 0===r?"":r;s+="\n"}return s}}}(t);var N=function(){var t;return{getInstance:function(){return t?t.hasBeenDestroyed()&&t.init():t=new i,t.refCounter++,t}}}();i.prototype.init=function(){var t,i;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],this._eventManager=e.eventManager(this),i=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",t=this.elDiv.style,t.position="fixed",t.top="-10000px",t.left="-10000px",i.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(t){return"WebkitAppearance"in document.documentElement.style?(this.value=t.clipboardData.getData("Text"),!1):void 0},t=this.elTextarea.style,t.width="10000px",t.height="10000px",t.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof t.opacity&&(t.opacity=0)),this.keyDownRemoveEvent=this._eventManager.addEventListener(document.documentElement,"keydown",this.onKeyDown.bind(this),!1)},i.prototype.onKeyDown=function(t){var e=this,i=!1;if(t.metaKey?i=!0:t.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(i=!0),i){if(document.activeElement!==this.elTextarea&&(""!==this.getSelectionText()||-1!==["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;this.selectNodeText(this.elTextarea),setTimeout(function(){e.selectNodeText(e.elTextarea)},0)}!i||67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode||(88===t.keyCode?setTimeout(function(){e.triggerCut(t)},0):86===t.keyCode&&setTimeout(function(){e.triggerPaste(t)},0))},i.prototype.selectNodeText=function(t){t&&t.select()},i.prototype.getSelectionText=function(){var e="";return t.getSelection?e=t.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},i.prototype.copyable=function(t){if("string"!=typeof t&&void 0===t.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=t},i.prototype.onCut=function(t){this.cutCallbacks.push(t)},i.prototype.onPaste=function(t){this.pasteCallbacks.push(t)},i.prototype.removeCallback=function(t){var e,i;for(e=0,i=this.copyCallbacks.length;i>e;e++)if(this.copyCallbacks[e]===t)return this.copyCallbacks.splice(e,1),!0;for(e=0,i=this.cutCallbacks.length;i>e;e++)if(this.cutCallbacks[e]===t)return this.cutCallbacks.splice(e,1),!0;for(e=0,i=this.pasteCallbacks.length;i>e;e++)if(this.pasteCallbacks[e]===t)return this.pasteCallbacks.splice(e,1),!0;return!1},i.prototype.triggerCut=function(t){var e=this;e.cutCallbacks&&setTimeout(function(){for(var i=0,n=e.cutCallbacks.length;n>i;i++)e.cutCallbacks[i](t)},50)},i.prototype.triggerPaste=function(t,e){var i=this;i.pasteCallbacks&&setTimeout(function(){for(var n=e||i.elTextarea.value,o=0,r=i.pasteCallbacks.length;r>o;o++)i.pasteCallbacks[o](n,t)},50)},i.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),this.keyDownRemoveEvent())},i.prototype.hasBeenDestroyed=function(){return!this.refCounter};var j;!function(e){function i(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function n(t,e){var o;for(var r in t)if(t.hasOwnProperty(r)){if(t[r]===e)return i(r)+"/";if("object"==typeof t[r]&&(o=n(t[r],e),""!=o))return i(r)+"/"+o}return""}function o(t,e){if(t===e)return"/";var i=n(t,e);if(""===i)throw new Error("Object not found in root");return"/"+i}function r(t){for(var e=0,i=y.length;i>e;e++)if(y[e].obj===t)return y[e]}function s(t,e){for(var i=0,n=t.observers.length;n>i;i++)if(t.observers[i].callback===e)return t.observers[i].observer}function a(t,e){for(var i=0,n=t.observers.length;n>i;i++)if(t.observers[i].observer===e)return void t.observers.splice(i,1)}function l(t,e){d(e),Object.observe?u(e,t):clearTimeout(e.next);var i=r(t);a(i,e)}function h(e,i){var n,a=[],l=e,h=r(e);if(h?n=s(h,i):(h=new b(e),y.push(h)),n)return n;if(Object.observe)n=function(t){u(n,e),c(n,e);for(var r=0,s=t.length;s>r;){if(("length"!==t[r].name||!x(t[r].object))&&"__Jasmine_been_here_before__"!==t[r].name){var h=t[r].type;switch(h){case"new":h="add";break;case"deleted":h="delete";break;case"updated":h="update"}v[h].call(t[r],a,o(l,t[r].object))}r++}a&&i&&i(a),n.patches=a,a=[]};else if(n={},h.value=JSON.parse(JSON.stringify(e)),i){n.callback=i,n.next=null;var p=this.intervals||[100,1e3,1e4,6e4],f=0,m=function(){d(n)},g=function(){clearTimeout(n.next),n.next=setTimeout(function(){m(),f=0,n.next=setTimeout(w,p[f++])},0)},w=function(){m(),f==p.length&&(f=p.length-1),n.next=setTimeout(w,p[f++])};"undefined"!=typeof t&&(t.addEventListener?(t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("keydown",g)):(t.attachEvent("onmousedown",g),t.attachEvent("onmouseup",g),t.attachEvent("onkeydown",g))),n.next=setTimeout(w,p[f++])}return n.patches=a,n.object=e,h.observers.push(new _(i,n)),c(n,e)}function c(t,e){if(Object.observe){Object.observe(e,t);for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n&&"object"==typeof n&&c(t,n)}}return t}function u(t,e){if(Object.observe){Object.unobserve(e,t);for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n&&"object"==typeof n&&u(t,n)}}return t}function d(t){if(Object.observe)Object.deliverChangeRecords(t);else{for(var e,i=0,n=y.length;n>i;i++)if(y[i].obj===t.object){e=y[i];break}p(e.value,t.object,t.patches,"")}var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function p(t,e,n,o){for(var r=w(e),s=w(t),a=!1,l=!1,h=s.length-1;h>=0;h--){var c=s[h],u=t[c];if(e.hasOwnProperty(c)){var d=e[c];u instanceof Object?p(u,d,n,o+"/"+i(c)):u!=d&&(a=!0,n.push({op:"replace",path:o+"/"+i(c),value:d}),t[c]=d)}else n.push({op:"remove",path:o+"/"+i(c)}),delete t[c],l=!0}if(l||r.length!=s.length)for(var h=0;h<r.length;h++){var c=r[h];t.hasOwnProperty(c)||(n.push({op:"add",path:o+"/"+i(c),value:e[c]}),t[c]=JSON.parse(JSON.stringify(e[c])))}}function f(t,e){for(var i,n=!1,o=0,r=e.length;r>o;){i=e[o];for(var s=i.path.split("/"),a=t,l=1,h=s.length;;)if(x(a)){var c=parseInt(s[l],10);if(l++,l>=h){n=g[i.op].call(i,a,c,t);break}a=a[c]}else{var u=s[l];if(-1!=u.indexOf("~")&&(u=u.replace(/~1/g,"/").replace(/~0/g,"~")),l++,l>=h){n=m[i.op].call(i,a,u,t);break}a=a[u]}o++}return n}var m={add:function(t,e){return t[e]=this.value,!0},remove:function(t,e){return delete t[e],!0},replace:function(t,e){return t[e]=this.value,!0},move:function(t,e,i){var n={op:"_get",path:this.from};return f(i,[n]),f(i,[{op:"remove",path:this.from}]),f(i,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(t,e,i){var n={op:"_get",path:this.from};return f(i,[n]),f(i,[{op:"add",path:this.path,value:n.value}]),!0},test:function(t,e){return JSON.stringify(t[e])===JSON.stringify(this.value)},_get:function(t,e){this.value=t[e]}},g={add:function(t,e){return t.splice(e,0,this.value),!0},remove:function(t,e){return t.splice(e,1),!0},replace:function(t,e){return t[e]=this.value,!0},move:m.move,copy:m.copy,test:m.test,_get:m._get},v={add:function(t,e){var n={op:"add",path:e+i(this.name),value:this.object[this.name]};t.push(n)},"delete":function(t,e){var n={op:"remove",path:e+i(this.name)};t.push(n)},update:function(t,e){var n={op:"replace",path:e+i(this.name),value:this.object[this.name]};t.push(n)}},y=[];e.intervals;var b=function(){function t(t){this.observers=[],this.obj=t}return t}(),_=function(){function t(t,e){this.callback=t,this.observer=e}return t}();e.unobserve=l,e.observe=h,e.generate=d;var w;w=Object.keys?Object.keys:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};var x;x=Array.isArray?Array.isArray:function(t){return t.push&&"number"==typeof t.length},e.apply=f}(j||(j={})),"undefined"!=typeof exports&&(exports.apply=j.apply,exports.observe=j.observe,exports.unobserve=j.unobserve,exports.generate=j.generate),e.PluginHookClass=function(){function t(){this.hooks=e(),this.globalBucket={},this.legacy=i}var e=function(){return{beforeInitWalkontable:[],beforeInit:[],beforeRender:[],beforeSetRangeEnd:[],beforeDrawBorders:[],beforeChange:[],beforeChangeRender:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],beforeOnCellMouseDown:[],beforeTouchScroll:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterSetCellMeta:[],afterGetColHeader:[],afterGetRowHeader:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterOnCellMouseDown:[],afterOnCellMouseOver:[],afterOnCellCornerMouseDown:[],afterScrollVertically:[],afterScrollHorizontally:[],afterCellMetaReset:[],afterIsMultipleSelectionCheck:[],afterDocumentKeyDown:[],afterMomentumScroll:[],beforeCellAlignment:[],modifyColWidth:[],modifyRowHeight:[],modifyRow:[],modifyCol:[]}},i={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};return t.prototype.getBucket=function(t){return t?(t.pluginHookBucket||(t.pluginHookBucket={}),t.pluginHookBucket):this.globalBucket},t.prototype.add=function(t,e,n){if(Array.isArray(e))for(var o=0,r=e.length;r>o;o++)this.add(t,e[o]);else{t in i&&(t=i[t]);var s=this.getBucket(n);"undefined"==typeof s[t]&&(s[t]=[]),e.skip=!1,-1==s[t].indexOf(e)&&s[t].push(e)}return this},t.prototype.once=function(t,e,i){if(Array.isArray(e))for(var n=0,o=e.length;o>n;n++)e[n].runOnce=!0,this.add(t,e[n],i);else e.runOnce=!0,this.add(t,e,i)},t.prototype.remove=function(t,e,n){var o=!1;t in i&&(t=i[t]);var r=this.getBucket(n);if("undefined"!=typeof r[t])for(var s=0,a=r[t].length;a>s;s++)if(r[t][s]==e){r[t][s].skip=!0,o=!0;break}return o},t.prototype.destroy=function(t){var e=this.getBucket(t);for(var i in e)if(e.hasOwnProperty(i))for(var n=0,o=e[i].length;o>n;n++)this.remove(i,e[i],t)},t.prototype.run=function(t,e,n,o,r,s,a,l){return e in i&&(e=i[e]),n=this._runBucket(this.globalBucket,t,e,n,o,r,s,a,l),n=this._runBucket(this.getBucket(t),t,e,n,o,r,s,a,l)},t.prototype._runBucket=function(t,e,i,n,o,r,s,a,l){var h,c,u,d=t[i];if(d)for(c=0,u=d.length;u>c;c++)d[c].skip||(h=d[c].call(e,n,o,r,s,a,l),void 0!==h&&(n=h),d[c].runOnce&&this.remove(i,d[c],t===this.globalBucket?null:e));return n},t.prototype.register=function(t){this.isRegistered(t)||(this.hooks[t]=[])},t.prototype.deregister=function(t){delete this.hooks[t]},t.prototype.isRegistered=function(t){return"undefined"!=typeof this.hooks[t]},t.prototype.getRegistered=function(){return Object.keys(this.hooks)},t}(),e.hooks=new e.PluginHookClass,e.PluginHooks=e.hooks,function(t){function e(){function e(t){var e=document,i=this;i.table=e.createElement("table"),i.theadTh=e.createElement("th"),i.table.appendChild(e.createElement("thead")).appendChild(e.createElement("tr")).appendChild(i.theadTh),i.tableStyle=i.table.style,i.tableStyle.tableLayout="auto",i.tableStyle.width="auto",i.tbody=e.createElement("tbody"),i.table.appendChild(i.tbody),i.container=e.createElement("div"),i.container.className=t.rootElement.className+" hidden",i.containerStyle=i.container.style,i.container.appendChild(i.table)}var n=this,o=5;this.beforeInit=function(){var t=this;t.autoColumnWidths=[],t.getSettings().autoColumnSize!==!1?t.autoColumnSizeTmp||(t.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0},t.addHook("beforeRender",i.determineIfChanged),t.addHook("modifyColWidth",i.modifyColWidth),t.addHook("afterDestroy",i.afterDestroy),t.determineColumnWidth=n.determineColumnWidth):t.autoColumnSizeTmp&&(t.removeHook("beforeRender",i.determineIfChanged),t.removeHook("modifyColWidth",i.modifyColWidth),t.removeHook("afterDestroy",i.afterDestroy),delete t.determineColumnWidth,n.afterDestroy.call(t))},this.determineIfChanged=function(t){t&&i.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(i){var n=this,r=n.autoColumnSizeTmp;r.container||e.call(r,n),r.container.className=n.rootElement.className+" htAutoColumnSize",r.table.className=n.table.className;for(var s=n.countRows(),a={},l=0,h=0;s>h;h++){var c=t.helper.stringify(n.getDataAtCell(h,i)),u=c.length;u>l&&(l=u),a[u]||(a[u]={needed:o,strings:[]}),a[u].needed&&(a[u].strings.push({value:c,row:h}),a[u].needed--)}var d=n.getSettings();d.colHeaders&&n.view.appendColHeader(i,r.theadTh),t.Dom.empty(r.tbody);for(var p in a)if(a.hasOwnProperty(p))for(var f=0,m=a[p].strings.length;m>f;f++){var g=a[p].strings[f].row,v=n.getCellMeta(g,i);v.col=i,v.row=g;var y=n.getCellRenderer(v),b=document.createElement("tr"),_=document.createElement("td");y(n,_,g,i,n.colToProp(i),a[p].strings[f].value,v),h++,b.appendChild(_),r.tbody.appendChild(b)}var w=n.rootElement.parentNode;w.appendChild(r.container);var x=t.Dom.outerWidth(r.table);return w.removeChild(r.container),x},this.determineColumnsWidth=function(){var t=this,e=this.getSettings();if(e.autoColumnSize||!e.colWidths)for(var i=this.countCols(),o=0;i>o;o++)t._getColWidthFromSettings(o)||(this.autoColumnWidths[o]=n.determineColumnWidth.call(t,o))},this.modifyColWidth=function(t,e){return this.autoColumnWidths[e]&&this.autoColumnWidths[e]>t?this.autoColumnWidths[e]:t},this.afterDestroy=function(){var t=this;t.autoColumnSizeTmp&&t.autoColumnSizeTmp.container&&t.autoColumnSizeTmp.container.parentNode&&t.autoColumnSizeTmp.container.parentNode.removeChild(t.autoColumnSizeTmp.container),t.autoColumnSizeTmp=null}}var i=new e;t.hooks.add("beforeInit",i.beforeInit),t.hooks.add("afterUpdateSettings",i.beforeInit)}(e);var H=new n;e.hooks.add("afterInit",function(){H.init.call(this,"afterInit")}),e.hooks.add("afterUpdateSettings",function(){H.init.call(this,"afterUpdateSettings")}),e.hooks.add("modifyRow",H.translateRow),e.hooks.add("afterGetColHeader",H.getColHeader),e.hooks.register("beforeColumnSort"),e.hooks.register("afterColumnSort"),function(t){function e(t,e){return-1!=t.indexOf(e)?t:(t=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),t+=" "+e)}function i(t,e){return-1!=t.indexOf(e)?t:(t=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),t+=" "+e)}function n(t){for(var e={},i=t.from.row;i<=t.to.row;i++)for(var n=t.from.col;n<=t.to.col;n++)e[i]||(e[i]=[]),e[i][n]=this.getCellMeta(i,n).className;return e}function o(t,n,o,r){var s=this.getCellMeta(t,n),a=r;s.className&&(a="vertical"===o?e(s.className,r):i(s.className,r)),this.setCellMeta(t,n,"className",a)}function r(t,e,i){var r=n.call(this,t);if(this.runHooks("beforeCellAlignment",r,t,e,i),t.from.row==t.to.row&&t.from.col==t.to.col)o.call(this,t.from.row,t.from.col,e,i);else for(var s=t.from.row;s<=t.to.row;s++)for(var a=t.from.col;a<=t.to.col;a++)o.call(this,s,a,e,i);this.render()}function s(e){this.instance=e;var i=this;if(i.menus=[],i.htMenus={},i.triggerRows=[],i.eventManager=t.eventManager(i),this.enabled=!0,this.instance.addHook("afterDestroy",function(){i.destroy()}),this.defaultOptions={items:[{key:"row_above",name:"Insert row above",callback:function(t,e){this.alter("insert_row",e.start.row)},disabled:function(){var t=this.getSelected(),e=[0,t[1],this.countRows()-1,t[1]],i=e.join(",")==t.join(",");return t[0]<0||this.countRows()>=this.getSettings().maxRows||i}},{key:"row_below",name:"Insert row below",callback:function(t,e){this.alter("insert_row",e.end.row+1)},disabled:function(){var t=this.getSelected(),e=[0,t[1],this.countRows()-1,t[1]],i=e.join(",")==t.join(",");return this.getSelected()[0]<0||this.countRows()>=this.getSettings().maxRows||i}},s.SEPARATOR,{key:"col_left",name:"Insert column on the left",callback:function(t,e){this.alter("insert_col",e.start.col)},disabled:function(){var t=this.getSelected(),e=[t[0],0,t[0],this.countCols()-1],i=e.join(",")==t.join(",");return this.getSelected()[1]<0||this.countCols()>=this.getSettings().maxCols||i}},{key:"col_right",name:"Insert column on the right",callback:function(t,e){this.alter("insert_col",e.end.col+1)},disabled:function(){var t=this.getSelected(),e=[t[0],0,t[0],this.countCols()-1],i=e.join(",")==t.join(",");return t[1]<0||this.countCols()>=this.getSettings().maxCols||i}},s.SEPARATOR,{key:"remove_row",name:"Remove row",callback:function(t,e){var i=e.end.row-e.start.row+1;this.alter("remove_row",e.start.row,i)},disabled:function(){var t=this.getSelected(),e=[0,t[1],this.countRows()-1,t[1]],i=e.join(",")==t.join(",");return t[0]<0||i}},{key:"remove_col",name:"Remove column",callback:function(t,e){var i=e.end.col-e.start.col+1;this.alter("remove_col",e.start.col,i)},disabled:function(){var t=this.getSelected(),e=[t[0],0,t[0],this.countCols()-1],i=e.join(",")==t.join(",");return t[1]<0||i}},s.SEPARATOR,{key:"undo",name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},{key:"redo",name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}},s.SEPARATOR,{key:"make_read_only",name:function(){var t="Read only",e=i.checkSelectionReadOnlyConsistency(this);return e&&(t=i.markSelected(t)),t},callback:function(){var t=i.checkSelectionReadOnlyConsistency(this),e=this;this.getSelectedRange().forAll(function(i,n){e.getCellMeta(i,n).readOnly=t?!1:!0}),this.render()}},s.SEPARATOR,{key:"alignment",name:"Alignment",submenu:{items:[{name:function(){var t="Left",e=i.checkSelectionAlignment(this,"htLeft");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htLeft")},disabled:!1},{name:function(){var t="Center",e=i.checkSelectionAlignment(this,"htCenter");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htCenter")},disabled:!1},{name:function(){var t="Right",e=i.checkSelectionAlignment(this,"htRight");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htRight")},disabled:!1},{name:function(){var t="Justify",e=i.checkSelectionAlignment(this,"htJustify");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"horizontal","htJustify")},disabled:!1},s.SEPARATOR,{name:function(){var t="Top",e=i.checkSelectionAlignment(this,"htTop");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htTop")},disabled:!1},{name:function(){var t="Middle",e=i.checkSelectionAlignment(this,"htMiddle");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htMiddle")},disabled:!1},{name:function(){var t="Bottom",e=i.checkSelectionAlignment(this,"htBottom");return e&&(t=i.markSelected(t)),t},callback:function(){r.call(this,this.getSelectedRange(),"vertical","htBottom")},disabled:!1}]}}]},i.options={},t.helper.extend(i.options,this.options),this.bindMouseEvents(),this.markSelected=function(t){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+t},this.checkSelectionAlignment=function(t,e){var i=!1;return t.getSelectedRange().forAll(function(n,o){var r=t.getCellMeta(n,o).className;return r&&-1!=r.indexOf(e)?(i=!0,!1):void 0}),i},!this.instance.getSettings().allowInsertRow){var n=l(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(n,1);var o=l(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(o,1),this.defaultOptions.items.splice(o,1)}if(!this.instance.getSettings().allowInsertColumn){var a=l(this.defaultOptions.items,"col_left");this.defaultOptions.items.splice(a,1);var h=l(this.defaultOptions.items,"col_right");this.defaultOptions.items.splice(h,1),this.defaultOptions.items.splice(h,1)}var c,u,d=!1,p=!1;this.instance.getSettings().allowRemoveRow||(c=l(this.defaultOptions.items,"remove_row"),this.defaultOptions.items.splice(c,1),d=!0),this.instance.getSettings().allowRemoveColumn||(u=l(this.defaultOptions.items,"remove_col"),this.defaultOptions.items.splice(u,1),p=!0),d&&p&&this.defaultOptions.items.splice(u,1),this.checkSelectionReadOnlyConsistency=function(t){var e=!1;return t.getSelectedRange().forAll(function(i,n){return t.getCellMeta(i,n).readOnly?(e=!0,!1):void 0}),e},t.hooks.run(e,"afterContextMenuDefaultOptions",this.defaultOptions)}function a(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i].key===e)return t[i]}function l(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i].key===e)return i}function h(){if(!this.rootElement.className.indexOf("htContextMenu")){for(var t=0,e=0,i=this.getSettings().data.length,n=0;i>n;n++)this.getSettings().data[n].name==s.SEPARATOR.name?t+=2:e+=26;this.view.wt.wtScrollbars.vertical.fixedContainer.style.height=e+t+"px"}}function c(){var e=this,i=e.getSettings().contextMenu,n=t.helper.isObject(i)?i:{};i?(e.contextMenu||(e.contextMenu=new s(e,n)),e.contextMenu.enable()):e.contextMenu&&(e.contextMenu.destroy(),delete e.contextMenu)}s.prototype.createMenu=function(e,i){e&&(e=e.replace(/ /g,"_"),e="htContextSubMenu_"+e);var n;return n=document.querySelector(e?".htContextMenu."+e:".htContextMenu"),n||(n=document.createElement("DIV"),t.Dom.addClass(n,"htContextMenu"),e&&t.Dom.addClass(n,e),document.getElementsByTagName("body")[0].appendChild(n)),this.menus.indexOf(n)<0&&(this.menus.push(n),i=i||0,this.triggerRows.push(i)),n},s.prototype.bindMouseEvents=function(){function e(e){var i=this.instance.getSettings();this.closeAll(),e.preventDefault(),t.helper.stopPropagation(e);var n=this.instance.getSettings().rowHeaders,o=this.instance.getSettings().colHeaders;if(n||o){if(n&&o){var r=e.target.parentNode.querySelectorAll(".cornerHeader").length>0;if(r)return}}else if(!("TD"==e.target.nodeName||t.Dom.hasClass(e.target,"current")&&t.Dom.hasClass(e.target,"wtBorder")))return;var a=this.createMenu(),l=this.getItems(i.contextMenu);this.show(a,l),this.setMenuPosition(e,a),this.eventManager.addEventListener(document.documentElement,"mousedown",t.helper.proxy(s.prototype.closeAll,this))}var i=t.eventManager(this.instance);i.addEventListener(this.instance.rootElement,"contextmenu",t.helper.proxy(e,this))},s.prototype.bindTableEvents=function(){this._afterScrollCallback=function(){},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},s.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},s.prototype.performAction=function(t,e){var i=this,n=e.getSelected()[0],o=e.getData()[n];if(o.disabled!==!0&&("function"!=typeof o.disabled||o.disabled.call(this.instance)!==!0)&&!o.hasOwnProperty("submenu")){if("function"!=typeof o.callback)return;var r=this.instance.getSelectedRange(),a=s.utils.normalizeSelection(r);o.callback.call(this.instance,o.key,a,t),i.closeAll()}},s.prototype.unbindMouseEvents=function(){this.eventManager.clear();var e=t.eventManager(this.instance);e.removeEventListener(this.instance.rootElement,"contextmenu")},s.prototype.show=function(e,i){var n=this;e.removeAttribute("style"),e.style.display="block";var o={data:i,colHeaders:!1,colWidths:[200],readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:t.helper.proxy(this.renderer,this)}],renderAllRows:!0,beforeKeyDown:function(t){n.onBeforeKeyDown(t,r)},afterOnCellMouseOver:function(t,e,i){n.onCellMouseOver(t,e,i,r)}},r=new t(e,o);this.eventManager.removeEventListener(e,"mousedown"),this.eventManager.addEventListener(e,"mousedown",function(t){n.performAction(t,r)}),this.bindTableEvents(),r.listen(),this.htMenus[r.guid]=r},s.prototype.close=function(t){this.hide(t),this.eventManager.clear(),this.unbindTableEvents(),this.instance.listen()},s.prototype.closeAll=function(){for(;this.menus.length>0;){var t=this.menus.pop();t&&this.close(t)}this.triggerRows=[]},s.prototype.closeLastOpenedSubMenu=function(){var t=this.menus.pop();t&&this.hide(t)},s.prototype.hide=function(t){t.style.display="none";var e=this.htMenus[t.id];e.destroy(),delete this.htMenus[t.id]},s.prototype.renderer=function(e,i,n,o,r,a){function l(t){return t.hasOwnProperty("submenu")}function h(t){return new RegExp(s.SEPARATOR.name,"i").test(t.name)}function c(t){return t.disabled===!0||"function"==typeof t.disabled&&t.disabled.call(u.instance)===!0}var u=this,d=e.getData()[n],p=document.createElement("DIV");"function"==typeof a&&(a=a.call(this.instance)),t.Dom.empty(i),i.appendChild(p),h(d)?t.Dom.addClass(i,"htSeparator"):t.Dom.fastInnerHTML(p,a),c(d)?(t.Dom.addClass(i,"htDisabled"),this.eventManager.addEventListener(p,"mouseenter",function(){e.deselectCell()})):l(d)?(t.Dom.addClass(i,"htSubmenu"),this.eventManager.addEventListener(p,"mouseenter",function(){e.selectCell(n,o)})):(t.Dom.removeClass(i,"htSubmenu"),t.Dom.removeClass(i,"htDisabled"),this.eventManager.addEventListener(p,"mouseenter",function(){e.selectCell(n,o)}))},s.prototype.onCellMouseOver=function(t,e,i,n){var o=this.menus.length;if(o>0){var r=this.menus[o-1];r.id!=n.guid&&this.closeLastOpenedSubMenu()}else this.closeLastOpenedSubMenu();if(-1!=i.className.indexOf("htSubmenu")){var s=n.getData()[e.row],a=this.getItems(s.submenu),l=this.createMenu(s.name,e.row),h=i.getBoundingClientRect();this.show(l,a),this.setSubMenuPosition(h,l)}},s.prototype.onBeforeKeyDown=function(e,i){function n(t){var e=t.getCell(0,0);s.utils.isSeparator(e)||s.utils.isDisabled(e)?r(0,0,t):t.selectCell(0,0)}function o(t){var e=t.countRows()-1,i=t.getCell(e,0);s.utils.isSeparator(i)||s.utils.isDisabled(i)?a(e,0,t):t.selectCell(e,0)}function r(t,e,i){var n=t+1,o=n<i.countRows()?i.getCell(n,e):null;o&&(s.utils.isSeparator(o)||s.utils.isDisabled(o)?r(n,e,i):i.selectCell(n,e))}function a(t,e,i){var n=t-1,o=n>=0?i.getCell(n,e):null;o&&(s.utils.isSeparator(o)||s.utils.isDisabled(o)?a(n,e,i):i.selectCell(n,e))}function l(t,e,i,n){var o=t.getData()[n],r=e.getItems(o.submenu),s=e.createMenu(o.name,n),a=i.getBoundingClientRect(),l=e.show(s,r);e.setSubMenuPosition(a,s),l.selectCell(0,0)}t.Dom.enableImmediatePropagation(e);var h=this,c=i.getSelected();switch(e.keyCode){case t.helper.keyCode.ESCAPE:h.closeAll(),e.preventDefault(),e.stopImmediatePropagation();break;case t.helper.keyCode.ENTER:c&&h.performAction(e,i);break;case t.helper.keyCode.ARROW_DOWN:c?r(c[0],c[1],i,h):n(i,h),e.preventDefault(),e.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_UP:c?a(c[0],c[1],i,h):o(i,h),e.preventDefault(),e.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_RIGHT:if(c){var u=c[0],d=i.getCell(c[0],0);s.utils.hasSubMenu(d)&&l(i,h,d,u)}e.preventDefault(),e.stopImmediatePropagation();break;case t.helper.keyCode.ARROW_LEFT:if(c){if(-1!=i.rootElement.className.indexOf("htContextSubMenu_")){h.closeLastOpenedSubMenu();var p=h.menus.length;if(p>0){var f=h.menus[p-1],m=h.triggerRows.pop();i=this.htMenus[f.id],i.selectCell(m,0)}}e.preventDefault(),e.stopImmediatePropagation()}}},s.prototype.getItems=function(e){function i(e){"string"==typeof e?this.name=e:t.helper.extend(this,e)}var n,o;i.prototype=e,e&&e.items&&(e=e.items),e===!0&&(e=this.defaultOptions.items),n=[];for(var r in e)e.hasOwnProperty(r)&&(o="string"==typeof e[r]?a(this.defaultOptions.items,e[r]):a(this.defaultOptions.items,r),o||(o=e[r]),o=new i(o),"object"==typeof e[r]&&t.helper.extend(o,e[r]),o.key||(o.key=r),n.push(o));return n},s.prototype.setSubMenuPosition=function(e,i){var n=t.Dom.getWindowScrollTop(),o=t.Dom.getWindowScrollLeft(),r={top:n+e.top,topRelative:e.top,left:e.left,leftRelative:e.left-o,scrollTop:n,scrollLeft:o,cellHeight:e.height,cellWidth:e.width};this.menuFitsBelowCursor(r,i,document.body.clientWidth)?this.positionMenuBelowCursor(r,i,!0):this.menuFitsAboveCursor(r,i)?this.positionMenuAboveCursor(r,i,!0):this.positionMenuBelowCursor(r,i,!0),this.menuFitsOnRightOfCursor(r,i,document.body.clientWidth)?this.positionMenuOnRightOfCursor(r,i,!0):this.positionMenuOnLeftOfCursor(r,i,!0)},s.prototype.setMenuPosition=function(e,i){var n=t.Dom.getWindowScrollTop(),o=t.Dom.getWindowScrollLeft(),r=e.pageY||e.clientY+n,s=e.pageX||e.clientX+o,a={top:r,topRelative:r-n,left:s,leftRelative:s-o,scrollTop:n,scrollLeft:o,cellHeight:e.target.clientHeight,cellWidth:e.target.clientWidth};this.menuFitsBelowCursor(a,i,document.body.clientHeight)?this.positionMenuBelowCursor(a,i):this.menuFitsAboveCursor(a,i)?this.positionMenuAboveCursor(a,i):this.positionMenuBelowCursor(a,i),this.menuFitsOnRightOfCursor(a,i,document.body.clientWidth)?this.positionMenuOnRightOfCursor(a,i):this.positionMenuOnLeftOfCursor(a,i)},s.prototype.menuFitsAboveCursor=function(t,e){return t.topRelative>=e.offsetHeight},s.prototype.menuFitsBelowCursor=function(t,e,i){return t.topRelative+e.offsetHeight<=i},s.prototype.menuFitsOnRightOfCursor=function(t,e,i){return t.leftRelative+e.offsetWidth<=i},s.prototype.positionMenuBelowCursor=function(t,e){e.style.top=t.top+"px"},s.prototype.positionMenuAboveCursor=function(t,e,i){e.style.top=i?t.top+t.cellHeight-e.offsetHeight+"px":t.top-e.offsetHeight+"px"},s.prototype.positionMenuOnRightOfCursor=function(t,e,i){e.style.left=i?1+t.left+t.cellWidth+"px":1+t.left+"px"},s.prototype.positionMenuOnLeftOfCursor=function(t,e,i){e.style.left=i?t.left-e.offsetWidth+"px":t.left-e.offsetWidth+"px"},s.utils={},s.utils.normalizeSelection=function(t){return{start:t.getTopLeftCorner(),end:t.getBottomRightCorner()}},s.utils.isSeparator=function(e){return t.Dom.hasClass(e,"htSeparator")},s.utils.hasSubMenu=function(e){return t.Dom.hasClass(e,"htSubmenu")},s.utils.isDisabled=function(e){return t.Dom.hasClass(e,"htDisabled")},s.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},s.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.closeAll(),this.unbindMouseEvents(),this.unbindTableEvents())},s.prototype.destroy=function(){for(this.closeAll();this.menus.length>0;){var t=this.menus.pop();this.triggerRows.pop(),t&&(this.close(t),this.isMenuEnabledByOtherHotInstance()||this.removeMenu(t))}this.unbindMouseEvents(),this.unbindTableEvents()},s.prototype.isMenuEnabledByOtherHotInstance=function(){for(var t=document.querySelectorAll(".handsontable"),e=!1,i=0,n=t.length;n>i;i++){var o=this.htMenus[t[i].id];if(o&&o.getSettings().contextMenu){e=!0;break}}return e},s.prototype.removeMenu=function(t){t.parentNode&&this.menu.parentNode.removeChild(t)},s.prototype.align=function(t,e,i){r.call(this,t,e,i)},s.SEPARATOR={name:"---------"},t.hooks.add("afterInit",c),t.hooks.add("afterUpdateSettings",c),t.hooks.add("afterInit",h),t.PluginHooks.register("afterContextMenuDefaultOptions"),t.ContextMenu=s}(e);var z=function(){var t=this,i=t.getSettings().comments;i&&(e.Comments=new o(t),e.Comments.init())},B=function(t,i,n,o,r,s){s.comment&&e.Dom.addClass(t,s.commentedCellClassName)},F=function(t){var i=this;i.getSettings().comments&&(t.items.push(e.ContextMenu.SEPARATOR),t.items.push({key:"commentsAddEdit",name:function(){var t=e.Comments.checkSelectionCommentsConsistency();return t?"Edit Comment":"Add Comment"},callback:function(){e.Comments.showComment(this.getSelectedRange())},disabled:function(){return!1}}),t.items.push({key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(t,i){e.Comments.removeComment(i.start.row,i.start.col)},disabled:function(){var t=e.Comments.checkSelectionCommentsConsistency();return!t}}))};e.hooks.add("beforeInit",z),e.hooks.add("afterContextMenuDefaultOptions",F),e.hooks.add("afterRenderer",B),function(e){function i(){function i(t){d=this,p=t;
var e=this.view.wt.wtTable.getCoords(t).col;if(e>=0){u=e;var i=p.getBoundingClientRect();c=i.left,f.style.top=i.top+"px",f.style.left=c+"px",d.rootElement.appendChild(f)}}function n(t,e){var i=t.getBoundingClientRect(),n=6;f.style.left=e>0?i.left+i.width-n+"px":i.left+"px"}function o(){var t=this;e.Dom.addClass(f,"active"),e.Dom.addClass(m,"active");var i=p.getBoundingClientRect();m.style.width=i.width+"px",m.style.height=t.view.maximumVisibleElementHeight(0)+"px",m.style.top=f.style.top,m.style.left=c+"px",t.rootElement.appendChild(m)}function r(t){m.style.left=c+t+"px"}function s(){e.Dom.removeClass(f,"active"),e.Dom.removeClass(m,"active")}var a,l,h,c,u,d,p,f=document.createElement("DIV"),m=document.createElement("DIV"),g=e.eventManager(this);f.className="manualColumnMover",m.className="manualColumnMoverGuide";var v=function(){var t=this;e.hooks.run(t,"persistentStateSave","manualColumnPositions",t.manualColumnPositions)},y=function(){var t=this,i={};return e.hooks.run(t,"persistentStateLoad","manualColumnPositions",i),i.value},b=function(t){return"BODY"!=t.tagName?"THEAD"==t.parentNode.tagName?!0:(t=t.parentNode,b(t)):!1},_=function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:_(t.parentNode):null},w=function(){var c,d=this;g.addEventListener(d.rootElement,"mouseover",function(t){if(b(t.target)){var e=_(t.target);if(e)if(c){var o=d.view.wt.wtTable.getCoords(e).col;o>=0&&(l=o,n(t.target,l-a))}else i.call(d,e)}}),g.addEventListener(d.rootElement,"mousedown",function(t){e.Dom.hasClass(t.target,"manualColumnMover")&&(h=e.helper.pageX(t),o.call(d),c=d,a=u,l=u)}),g.addEventListener(t,"mousemove",function(t){c&&r(e.helper.pageX(t)-h)}),g.addEventListener(t,"mouseup",function(){c&&(s(),c=!1,C(d.manualColumnPositions,d.countCols()),d.manualColumnPositions.splice(l,0,d.manualColumnPositions.splice(a,1)[0]),d.forceFullRender=!0,d.view.render(),v.call(d),e.hooks.run(d,"afterColumnMove",a,l),i.call(d,p))}),d.addHook("afterDestroy",x)},x=function(){g.clear()},C=function(t,e){if(t.length<e)for(var i=t.length;e>i;i++)t[i]=i};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(t){var e=this,i=!!this.getSettings().manualColumnMove;if(i){var n=this.getSettings().manualColumnMove,o=y.call(e);this.manualColumnPositions="undefined"!=typeof o?o:Array.isArray(n)?n:[],"afterInit"==t&&("undefined"!=typeof e.manualColumnPositionsPluginUsages?e.manualColumnPositionsPluginUsages.push("manualColumnMove"):e.manualColumnPositionsPluginUsages=["manualColumnMove"],w.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else{var r=e.manualColumnPositionsPluginUsages?e.manualColumnPositionsPluginUsages.indexOf("manualColumnMove"):-1;r>-1&&(x.call(this),this.manualColumnPositions=[],e.manualColumnPositionsPluginUsages[r]=void 0)}},this.modifyCol=function(t){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[t]&&C(this.manualColumnPositions,t+1),this.manualColumnPositions[t]):t},this.afterRemoveCol=function(t,e){if(this.getSettings().manualColumnMove){var i,n=this.manualColumnPositions;i=n.splice(t,e),n=n.map(function(t){var e,n=t;for(e=0;e<i.length;e++)t>i[e]&&n--;return n}),this.manualColumnPositions=n}},this.afterCreateCol=function(t,e){if(this.getSettings().manualColumnMove){var i=this.manualColumnPositions;if(i.length){for(var n=[],o=0;e>o;o++)n.push(t+o);t>=i.length?i.concat(n):(i=i.map(function(i){return i>=t?i+e:i}),i.splice.apply(i,[t,0].concat(n))),this.manualColumnPositions=i}}}}var n=new i;e.hooks.add("beforeInit",n.beforeInit),e.hooks.add("afterInit",function(){n.init.call(this,"afterInit")}),e.hooks.add("afterUpdateSettings",function(){n.init.call(this,"afterUpdateSettings")}),e.hooks.add("modifyCol",n.modifyCol),e.hooks.add("afterRemoveCol",n.afterRemoveCol),e.hooks.add("afterCreateCol",n.afterCreateCol),e.hooks.register("afterColumnMove")}(e),function(e){function i(){function i(t){c=this,a=t;var e=this.view.wt.wtTable.getCoords(t).col;if(e>=0){l=e;var i=a.getBoundingClientRect();f=i.left-6,p=parseInt(i.width,10),m.style.top=i.top+"px",m.style.left=f+p+"px",c.rootElement.appendChild(m)}}function n(){m.style.left=f+h+"px"}function o(){var t=this;e.Dom.addClass(m,"active"),e.Dom.addClass(g,"active"),g.style.top=m.style.top,g.style.left=m.style.left,g.style.height=t.view.maximumVisibleElementHeight(0)+"px",t.rootElement.appendChild(g)}function r(){g.style.left=m.style.left}function s(){e.Dom.removeClass(m,"active"),e.Dom.removeClass(g,"active")}var a,l,h,c,u,d,p,f,m=document.createElement("DIV"),g=document.createElement("DIV"),v=e.eventManager(this);m.className="manualColumnResizer",g.className="manualColumnResizerGuide";var y=function(){var t=this;e.hooks.run(t,"persistentStateSave","manualColumnWidths",t.manualColumnWidths)},b=function(){var t=this,i={};return e.hooks.run(t,"persistentStateLoad","manualColumnWidths",i),i.value},_=function(t){return"BODY"!=t.tagName?"THEAD"==t.parentNode.tagName?!0:(t=t.parentNode,_(t)):!1},w=function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:w(t.parentNode):null},x=function(){var c,f=this,m=0,g=null;v.addEventListener(f.rootElement,"mouseover",function(t){if(_(t.target)){var e=w(t.target);e&&(c||i.call(f,e))}}),v.addEventListener(f.rootElement,"mousedown",function(t){e.Dom.hasClass(t.target,"manualColumnResizer")&&(o.call(f),c=f,null==g&&(g=setTimeout(function(){m>=2&&(u=f.determineColumnWidth.call(f,l),k(l,u),f.forceFullRender=!0,f.view.render(),e.hooks.run(f,"afterColumnResize",l,u)),m=0,g=null},500),f._registerTimeout(g)),m++,d=e.helper.pageX(t),u=p)}),v.addEventListener(t,"mousemove",function(t){c&&(h=p+(e.helper.pageX(t)-d),u=k(l,h),n(),r())}),v.addEventListener(t,"mouseup",function(){c&&(s(),c=!1,u!=p&&(f.forceFullRender=!0,f.view.render(),y.call(f),e.hooks.run(f,"afterColumnResize",l,u)),i.call(f,a))}),f.addHook("afterDestroy",C)},C=function(){v.clear()};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(t){var e=this,i=!!this.getSettings().manualColumnResize;if(i){var n=this.getSettings().manualColumnResize,o=b.call(e);"undefined"!=typeof e.manualColumnWidthsPluginUsages?e.manualColumnWidthsPluginUsages.push("manualColumnResize"):e.manualColumnWidthsPluginUsages=["manualColumnResize"],this.manualColumnWidths="undefined"!=typeof o?o:Array.isArray(n)?n:[],"afterInit"==t&&(x.call(this),this.manualColumnWidths.length>0&&(this.forceFullRender=!0,this.render()))}else{var r=e.manualColumnWidthsPluginUsages?e.manualColumnWidthsPluginUsages.indexOf("manualColumnResize"):-1;r>-1&&(C.call(this),this.manualColumnWidths=[])}};var k=function(t,i){return i=Math.max(i,20),t=e.hooks.run(c,"modifyCol",t),c.manualColumnWidths[t]=i,i};this.modifyColWidth=function(t,e){return e=this.runHooks("modifyCol",e),this.getSettings().manualColumnResize&&this.manualColumnWidths[e]?this.manualColumnWidths[e]:t}}var n=new i;e.hooks.add("beforeInit",n.beforeInit),e.hooks.add("afterInit",function(){n.init.call(this,"afterInit")}),e.hooks.add("afterUpdateSettings",function(){n.init.call(this,"afterUpdateSettings")}),e.hooks.add("modifyColWidth",n.modifyColWidth),e.hooks.register("afterColumnResize")}(e),function(e){function i(){function i(t){c=this,a=t;var e=this.view.wt.wtTable.getCoords(t).row;if(e>=0){l=e;var i=a.getBoundingClientRect();f=i.top-6,p=parseInt(i.height,10),m.style.left=i.left+"px",m.style.top=f+p+"px",c.rootElement.appendChild(m)}}function n(){m.style.top=f+h+"px"}function o(){var t=this;e.Dom.addClass(m,"active"),e.Dom.addClass(g,"active"),g.style.top=m.style.top,g.style.left=m.style.left,g.style.width=t.view.maximumVisibleElementWidth(0)+"px",t.rootElement.appendChild(g)}function r(){g.style.top=m.style.top}function s(){e.Dom.removeClass(m,"active"),e.Dom.removeClass(g,"active")}var a,l,h,c,u,d,p,f,m=document.createElement("DIV"),g=document.createElement("DIV"),v=e.eventManager(this);m.className="manualRowResizer",g.className="manualRowResizerGuide";var y=function(){var t=this;e.hooks.run(t,"persistentStateSave","manualRowHeights",t.manualRowHeights)},b=function(){var t=this,i={};return e.hooks.run(t,"persistentStateLoad","manualRowHeights",i),i.value},_=function(t){return"BODY"!=t.tagName?"TBODY"==t.parentNode.tagName?!0:(t=t.parentNode,_(t)):!1},w=function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:w(t.parentNode):null},x=function(){var c,f=this,m=0,g=null;v.addEventListener(f.rootElement,"mouseover",function(t){if(_(t.target)){var e=w(t.target);e&&(c||i.call(f,e))}}),v.addEventListener(f.rootElement,"mousedown",function(t){e.Dom.hasClass(t.target,"manualRowResizer")&&(o.call(f),c=f,null==g&&(g=setTimeout(function(){m>=2&&(k(l,null),f.forceFullRender=!0,f.view.render(),e.hooks.run(f,"afterRowResize",l,u)),m=0,g=null},500),f._registerTimeout(g)),m++,d=e.helper.pageY(t),u=p)}),v.addEventListener(t,"mousemove",function(t){c&&(h=p+(e.helper.pageY(t)-d),u=k(l,h),n(),r())}),v.addEventListener(t,"mouseup",function(){c&&(s(),c=!1,u!=p&&(f.forceFullRender=!0,f.view.render(),y.call(f),e.hooks.run(f,"afterRowResize",l,u)),i.call(f,a))}),f.addHook("afterDestroy",C)},C=function(){v.clear()};this.beforeInit=function(){this.manualRowHeights=[]},this.init=function(t){var e=this,i=!!this.getSettings().manualRowResize;if(i){var n=this.getSettings().manualRowResize,o=b.call(e);"undefined"!=typeof e.manualRowHeightsPluginUsages?e.manualRowHeightsPluginUsages.push("manualRowResize"):e.manualRowHeightsPluginUsages=["manualRowResize"],this.manualRowHeights="undefined"!=typeof o?o:Array.isArray(n)?n:[],"afterInit"===t?(x.call(this),this.manualRowHeights.length>0&&(this.forceFullRender=!0,this.render())):(this.forceFullRender=!0,this.render())}else{var r=e.manualRowHeightsPluginUsages?e.manualRowHeightsPluginUsages.indexOf("manualRowResize"):-1;r>-1&&(C.call(this),this.manualRowHeights=[],e.manualRowHeightsPluginUsages[r]=void 0)}};var k=function(t,i){return t=e.hooks.run(c,"modifyRow",t),c.manualRowHeights[t]=i,i};this.modifyRowHeight=function(t,e){return this.getSettings().manualRowResize&&(e=this.runHooks("modifyRow",e),void 0!==this.manualRowHeights[e])?this.manualRowHeights[e]:t}}var n=new i;e.hooks.add("beforeInit",n.beforeInit),e.hooks.add("afterInit",function(){n.init.call(this,"afterInit")}),e.hooks.add("afterUpdateSettings",function(){n.init.call(this,"afterUpdateSettings")}),e.hooks.add("modifyRowHeight",n.modifyRowHeight),e.hooks.register("afterRowResize")}(e),function(){function t(){var t=this,e=t.getSettings().observeChanges;e?(t.observer&&o.call(t),i.call(t),s.call(t)):e||o.call(t)}function i(){var t=this;t.observeChangesActive=!0,t.pauseObservingChanges=function(){t.observeChangesActive=!1},t.resumeObservingChanges=function(){t.observeChangesActive=!0},t.observedData=t.getData(),t.observer=j.observe(t.observedData,function(e){t.observeChangesActive&&(n.call(t,e),t.render()),t.runHooks("afterChangesObserved")})}function n(t){function e(t){var e;return e=n(t),e=i(e)}function i(t){var e=[];return t.filter(function(t){var i=o(t.path);if(-1!=["add","remove"].indexOf(t.op)&&!isNaN(i.col)){if(-1!=e.indexOf(i.col))return!1;e.push(i.col)}return!0})}function n(t){return t.filter(function(t){return!/[/]length/gi.test(t.path)})}function o(t){var e=t.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(e[1],10),col:/^\d*$/.test(e[2])?parseInt(e[2],10):e[2]}}for(var r=this,s=e(t),a=0,l=s.length;l>a;a++){var h=s[a],c=o(h.path);switch(h.op){case"add":isNaN(c.col)?r.runHooks("afterCreateRow",c.row):r.runHooks("afterCreateCol",c.col);break;case"remove":isNaN(c.col)?r.runHooks("afterRemoveRow",c.row,1):r.runHooks("afterRemoveCol",c.col,1);break;case"replace":r.runHooks("afterChange",[c.row,c.col,null,h.value],"external")}}}function o(){var t=this;t.observer&&(r.call(t),a.call(t))}function r(){var t=this;j.unobserve(t.observedData,t.observer),delete t.observeChangesActive,delete t.pauseObservingChanges,delete t.resumeObservingChanges}function s(){var t=this;t.addHook("afterDestroy",o),t.addHook("afterCreateRow",l),t.addHook("afterRemoveRow",l),t.addHook("afterCreateCol",l),t.addHook("afterRemoveCol",l),t.addHook("afterChange",function(t,e){"loadData"!=e&&l.call(this)})}function a(){var t=this;t.removeHook("afterDestroy",o),t.removeHook("afterCreateRow",l),t.removeHook("afterRemoveRow",l),t.removeHook("afterCreateCol",l),t.removeHook("afterRemoveCol",l),t.removeHook("afterChange",l)}function l(){var t=this;t.pauseObservingChanges(),t.addHookOnce("afterChangesObserved",function(){t.resumeObservingChanges()})}e.hooks.add("afterLoadData",t),e.hooks.add("afterUpdateSettings",t),e.hooks.register("afterChangesObserved")}(),function(t){function i(){function i(){var t=this;for(var e in r)r.hasOwnProperty(e)&&t.addHook(e,r[e])}function n(){var t=this;for(var e in r)r.hasOwnProperty(e)&&t.removeHook(e,r[e])}var o=this;this.init=function(){var e=this,r=e.getSettings().persistentState;return o.enabled=!!r,o.enabled?(e.storage||(e.storage=new t(e.rootElement.id)),e.resetState=o.resetValue,void i.call(e)):void n.call(e)},this.saveValue=function(t,e){var i=this;i.storage.saveValue(t,e)},this.loadValue=function(t,e){var i=this;e.value=i.storage.loadValue(t)},this.resetValue=function(t){var e=this;"undefined"!=typeof t?e.storage.reset(t):e.storage.resetAll()};var r={persistentStateSave:o.saveValue,persistentStateLoad:o.loadValue,persistentStateReset:o.resetValue};for(var s in r)r.hasOwnProperty(s)&&e.hooks.register(s)}var n=new i;e.hooks.add("beforeInit",n.init),e.hooks.add("afterUpdateSettings",n.init)}(r),function(t){t.UndoRedo=function(e){var i=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",function(e){if(e){var n=new t.UndoRedo.ChangeAction(e);i.done(n)}}),e.addHook("afterCreateRow",function(e,n,o){if(!o){var r=new t.UndoRedo.CreateRowAction(e,n);i.done(r)}}),e.addHook("beforeRemoveRow",function(e,n){var o=i.instance.getData();e=(o.length+e)%o.length;var r=o.slice(e,e+n),s=new t.UndoRedo.RemoveRowAction(e,r);i.done(s)}),e.addHook("afterCreateCol",function(e,n,o){if(!o){var r=new t.UndoRedo.CreateColumnAction(e,n);i.done(r)}}),e.addHook("beforeRemoveCol",function(n,o){var r=i.instance.getData();n=(i.instance.countCols()+n)%i.instance.countCols();for(var s=[],a=0,l=r.length;l>a;a++)s[a]=r[a].slice(n,n+o);var h;Array.isArray(e.getSettings().colHeaders)&&(h=e.getSettings().colHeaders.slice(n,n+s.length));var c=new t.UndoRedo.RemoveColumnAction(n,s,h);i.done(c)}),e.addHook("beforeCellAlignment",function(e,n,o,r){var s=new t.UndoRedo.CellAlignmentAction(e,n,o,r);i.done(s)})},t.UndoRedo.prototype.done=function(t){this.ignoreNewActions||(this.doneActions.push(t),this.undoneActions.length=0)},t.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.pop();this.ignoreNewActions=!0;var e=this;t.undo(this.instance,function(){e.ignoreNewActions=!1,e.undoneActions.push(t)})}},t.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.pop();this.ignoreNewActions=!0;var e=this;t.redo(this.instance,function(){e.ignoreNewActions=!1,e.doneActions.push(t)})}},t.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},t.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},t.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},t.UndoRedo.Action=function(){},t.UndoRedo.Action.prototype.undo=function(){},t.UndoRedo.Action.prototype.redo=function(){},t.UndoRedo.ChangeAction=function(t){this.changes=t},t.helper.inherit(t.UndoRedo.ChangeAction,t.UndoRedo.Action),t.UndoRedo.ChangeAction.prototype.undo=function(e,i){for(var n=t.helper.deepClone(this.changes),o=e.countEmptyRows(!0),r=e.countEmptyCols(!0),s=0,a=n.length;a>s;s++)n[s].splice(3,1);e.addHookOnce("afterChange",i),e.setDataAtRowProp(n,null,null,"undo");for(var s=0,a=n.length;a>s;s++)e.getSettings().minSpareRows&&n[s][0]+1+e.getSettings().minSpareRows===e.countRows()&&o==e.getSettings().minSpareRows&&(e.alter("remove_row",parseInt(n[s][0]+1,10),e.getSettings().minSpareRows),e.undoRedo.doneActions.pop()),e.getSettings().minSpareCols&&n[s][1]+1+e.getSettings().minSpareCols===e.countCols()&&r==e.getSettings().minSpareCols&&(e.alter("remove_col",parseInt(n[s][1]+1,10),e.getSettings().minSpareCols),e.undoRedo.doneActions.pop())},t.UndoRedo.ChangeAction.prototype.redo=function(e,i){for(var n=t.helper.deepClone(this.changes),o=0,r=n.length;r>o;o++)n[o].splice(2,1);e.addHookOnce("afterChange",i),e.setDataAtRowProp(n,null,null,"redo")},t.UndoRedo.CreateRowAction=function(t,e){this.index=t,this.amount=e},t.helper.inherit(t.UndoRedo.CreateRowAction,t.UndoRedo.Action),t.UndoRedo.CreateRowAction.prototype.undo=function(t,e){var i=t.countRows(),n=t.getSettings().minSpareRows;this.index>=i&&this.index-n<i&&(this.index-=n),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount)},t.UndoRedo.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row",this.index+1,this.amount)},t.UndoRedo.RemoveRowAction=function(t,e){this.index=t,this.data=e},t.helper.inherit(t.UndoRedo.RemoveRowAction,t.UndoRedo.Action),t.UndoRedo.RemoveRowAction.prototype.undo=function(t,e){var i=[this.index,0];Array.prototype.push.apply(i,this.data),Array.prototype.splice.apply(t.getData(),i),t.addHookOnce("afterRender",e),t.render()},t.UndoRedo.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length)},t.UndoRedo.CreateColumnAction=function(t,e){this.index=t,this.amount=e},t.helper.inherit(t.UndoRedo.CreateColumnAction,t.UndoRedo.Action),t.UndoRedo.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount)},t.UndoRedo.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col",this.index+1,this.amount)},t.UndoRedo.CellAlignmentAction=function(t,e,i,n){this.stateBefore=t,this.range=e,this.type=i,this.alignment=n},t.UndoRedo.CellAlignmentAction.prototype.undo=function(t,e){if(t.contextMenu){for(var i=this.range.from.row;i<=this.range.to.row;i++)for(var n=this.range.from.col;n<=this.range.to.col;n++)t.setCellMeta(i,n,"className",this.stateBefore[i][n]||" htLeft");t.addHookOnce("afterRender",e),t.render()}},t.UndoRedo.CellAlignmentAction.prototype.redo=function(t,e){if(t.contextMenu){for(var i=this.range.from.row;i<=this.range.to.row;i++)for(var n=this.range.from.col;n<=this.range.to.col;n++)t.contextMenu.align.call(t,this.range,this.type,this.alignment);t.addHookOnce("afterRender",e),t.render()}},t.UndoRedo.RemoveColumnAction=function(t,e,i){this.index=t,this.data=e,this.amount=this.data[0].length,this.headers=i},t.helper.inherit(t.UndoRedo.RemoveColumnAction,t.UndoRedo.Action),t.UndoRedo.RemoveColumnAction.prototype.undo=function(t,e){for(var i,n,o=0,r=t.getData().length;r>o;o++)i=t.getSourceDataAtRow(o),n=[this.index,0],Array.prototype.push.apply(n,this.data[o]),Array.prototype.splice.apply(i,n);"undefined"!=typeof this.headers&&(n=[this.index,0],Array.prototype.push.apply(n,this.headers),Array.prototype.splice.apply(t.getSettings().colHeaders,n)),t.addHookOnce("afterRender",e),t.render()},t.UndoRedo.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount)}}(e),function(t){function e(){var e=this,s="undefined"==typeof e.getSettings().undo||e.getSettings().undo;s?e.undoRedo||(e.undoRedo=new t.UndoRedo(e),o(e),e.addHook("beforeKeyDown",i),e.addHook("afterChange",n)):e.undoRedo&&(delete e.undoRedo,r(e),e.removeHook("beforeKeyDown",i),e.removeHook("afterChange",n))}function i(t){var e=this,i=(t.ctrlKey||t.metaKey)&&!t.altKey;i&&(89===t.keyCode||t.shiftKey&&90===t.keyCode?(e.undoRedo.redo(),t.stopImmediatePropagation()):90===t.keyCode&&(e.undoRedo.undo(),t.stopImmediatePropagation()))}function n(t,e){var i=this;return"loadData"==e?i.undoRedo.clear():void 0}function o(t){t.undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()}}function r(t){delete t.undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo}t.hooks.add("afterInit",e),t.hooks.add("afterUpdateSettings",e)}(e),s.prototype.setBoundaries=function(t){this.boundaries=t},s.prototype.setCallback=function(t){this.callback=t},s.prototype.check=function(t,e){var i=0,n=0;e<this.boundaries.top?n=e-this.boundaries.top:e>this.boundaries.bottom&&(n=e-this.boundaries.bottom),t<this.boundaries.left?i=t-this.boundaries.left:t>this.boundaries.right&&(i=t-this.boundaries.right),this.callback(i,n)};var U,W;if("undefined"!=typeof e){var $=function(e){e.dragToScrollListening=!1;var i=e.view.wt.wtScrollbars.vertical.scrollHandler;U=new s,i!==t&&(U.setBoundaries(i.getBoundingClientRect()),U.setCallback(function(t,e){0>t?i.scrollLeft-=50:t>0&&(i.scrollLeft+=50),0>e?i.scrollTop-=20:e>0&&(i.scrollTop+=20)}),e.dragToScrollListening=!0)};e.hooks.add("afterInit",function(){var t=this,i=e.eventManager(this);i.addEventListener(document,"mouseup",function(){t.dragToScrollListening=!1}),i.addEventListener(document,"mousemove",function(e){t.dragToScrollListening&&U.check(e.clientX,e.clientY)})}),e.hooks.add("afterDestroy",function(){var t=e.eventManager(this);t.clear()}),e.hooks.add("afterOnCellMouseDown",function(){$(this)}),e.hooks.add("afterOnCellCornerMouseDown",function(){$(this)}),e.plugins.DragToScroll=s}if(function(t,e,i){function n(n){function o(){n.isListening()&&n.selection.empty()}function r(t){var e,o,r,s,a,l,h,c,p,f;n.isListening()&&n.selection.isSelected()&&(e=t,o=i.parse(e),r=n.getSelected(),s=new u(r[0],r[1]),a=new u(r[2],r[3]),l=new d(s,s,a),h=l.getTopLeftCorner(),c=l.getBottomRightCorner(),p=h,f=new u(Math.max(c.row,o.length-1+h.row),Math.max(c.col,o[0].length-1+h.col)),n.addHookOnce("afterChange",function(t){t&&t.length&&this.selectCell(p.row,p.col,f.row,f.col)}),n.populateFromArray(p.row,p.col,o,f.row,f.col,"paste",n.getSettings().pasteMode))}function s(e){var i;if(n.getSelected()){if(t.helper.isCtrlKey(e.keyCode))return a.setCopyableText(),void e.stopImmediatePropagation();i=(e.ctrlKey||e.metaKey)&&!e.altKey,e.keyCode==t.helper.keyCode.A&&i&&n._registerTimeout(setTimeout(t.helper.proxy(a.setCopyableText,a),0))}}var a=this;this.copyPasteInstance=e.getInstance(),this.copyPasteInstance.onCut(o),this.copyPasteInstance.onPaste(r),n.addHook("beforeKeyDown",s),this.destroy=function(){this.copyPasteInstance.removeCallback(o),this.copyPasteInstance.removeCallback(r),this.copyPasteInstance.destroy(),n.removeHook("beforeKeyDown",s)},n.addHook("afterDestroy",t.helper.proxy(this.destroy,this)),this.triggerPaste=t.helper.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=t.helper.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var e=n.getSettings(),i=e.copyRowsLimit,o=e.copyColsLimit,r=n.getSelectedRange(),s=r.getTopLeftCorner(),a=r.getBottomRightCorner(),l=s.row,h=s.col,c=a.row,u=a.col,d=Math.min(c,l+i-1),p=Math.min(u,h+o-1);n.copyPaste.copyPasteInstance.copyable(n.getCopyableData(l,h,d,p)),(c!==d||u!==p)&&t.hooks.run(n,"afterCopyLimit",c-l+1,u-h+1,i,o)}}function o(){var t=this,e=t.getSettings().copyPaste!==!1;e&&!t.copyPaste?t.copyPaste=new n(t):!e&&t.copyPaste&&(t.copyPaste.destroy(),delete t.copyPaste)}t.hooks.add("afterInit",o),t.hooks.add("afterUpdateSettings",o),t.hooks.register("afterCopyLimit")}(e,N,SheetClip),function(t){function e(){var e=this,i=!!e.getSettings().search;i?e.search=new t.Search(e):delete e.search}t.Search=function(e){this.query=function(i,n,o){var r=e.countRows(),s=e.countCols(),a=[];n||(n=t.Search.global.getDefaultCallback()),o||(o=t.Search.global.getDefaultQueryMethod());for(var l=0;r>l;l++)for(var h=0;s>h;h++){var c=e.getDataAtCell(l,h),u=e.getCellMeta(l,h),d=u.search.callback||n,p=u.search.queryMethod||o,f=p(i,c);if(f){var m={row:l,col:h,data:c};a.push(m)}d&&d(e,l,h,c,f)}return a}},t.Search.DEFAULT_CALLBACK=function(t,e,i,n,o){t.getCellMeta(e,i).isSearchResult=o},t.Search.DEFAULT_QUERY_METHOD=function(t,e){return"undefined"!=typeof t&&null!=t&&t.toLowerCase&&0!==t.length?"undefined"==typeof e||null==e?!1:-1!=e.toString().toLowerCase().indexOf(t.toLowerCase()):!1},t.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",t.Search.global=function(){var e=t.Search.DEFAULT_CALLBACK,i=t.Search.DEFAULT_QUERY_METHOD,n=t.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return e},setDefaultCallback:function(t){e=t},getDefaultQueryMethod:function(){return i},setDefaultQueryMethod:function(t){i=t},getDefaultSearchResultClass:function(){return n},setDefaultSearchResultClass:function(t){n=t}}}(),t.SearchCellDecorator=function(e,i,n,o,r,s,a){var l="object"==typeof a.search&&a.search.searchResultClass||t.Search.global.getDefaultSearchResultClass();a.isSearchResult?t.Dom.addClass(i,l):t.Dom.removeClass(i,l)};var i=t.renderers.cellDecorator;t.renderers.cellDecorator=function(){i.apply(this,arguments),t.SearchCellDecorator.apply(this,arguments)},t.hooks.add("afterInit",e),t.hooks.add("afterUpdateSettings",e)}(e),l.prototype.canMergeRange=function(t){return!t.isSingle()},l.prototype.mergeRange=function(t){if(this.canMergeRange(t)){var e=t.getTopLeftCorner(),i=t.getBottomRightCorner(),n={};n.row=e.row,n.col=e.col,n.rowspan=i.row-e.row+1,n.colspan=i.col-e.col+1,this.mergedCellInfoCollection.setInfo(n)}},l.prototype.mergeOrUnmergeSelection=function(t){var e=this.mergedCellInfoCollection.getInfo(t.from.row,t.from.col);e?this.unmergeSelection(t.from):this.mergeSelection(t)},l.prototype.mergeSelection=function(t){this.mergeRange(t)},l.prototype.unmergeSelection=function(t){var e=this.mergedCellInfoCollection.getInfo(t.row,t.col);this.mergedCellInfoCollection.removeInfo(e.row,e.col)},l.prototype.applySpanProperties=function(t,e,i){var n=this.mergedCellInfoCollection.getInfo(e,i);n?n.row===e&&n.col===i?(t.setAttribute("rowspan",n.rowspan),t.setAttribute("colspan",n.colspan)):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="none"):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"))},l.prototype.modifyTransform=function(t,e,i){var n=function(t,e){return e.row>=t.row&&e.row<=t.row+t.rowspan-1?!0:!1},o=function(t,e){return e.col>=t.col&&e.col<=t.col+t.colspan-1?!0:!1},r=function(t){return new u(e.to.row+t.row,e.to.col+t.col)},s={row:i.row,col:i.col};if("modifyTransformStart"==t){this.lastDesiredCoords||(this.lastDesiredCoords=new u(null,null));for(var a,l=new u(e.highlight.row,e.highlight.col),h=this.mergedCellInfoCollection.getInfo(l.row,l.col),c=0,p=this.mergedCellInfoCollection.length;p>c;c++){var f=this.mergedCellInfoCollection[c];if(f=new u(f.row+f.rowspan-1,f.col+f.colspan-1),e.includes(f)){a=!0;break}}if(h){var m=new u(h.row,h.col),g=new u(h.row+h.rowspan-1,h.col+h.colspan-1),v=new d(m,m,g);v.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new u(null,null)),s.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-l.row:s.row,s.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-l.col:s.col,i.row>0?s.row=h.row+h.rowspan-1-l.row+i.row:i.row<0&&(s.row=l.row-h.row+i.row),i.col>0?s.col=h.col+h.colspan-1-l.col+i.col:i.col<0&&(s.col=l.col-h.col+i.col)}var y=new u(e.highlight.row+s.row,e.highlight.col+s.col),b=this.mergedCellInfoCollection.getInfo(y.row,y.col);b&&(this.lastDesiredCoords=y,s={row:b.row-l.row,col:b.col-l.col})}else if("modifyTransformEnd"==t)for(var c=0,p=this.mergedCellInfoCollection.length;p>c;c++){var _=this.mergedCellInfoCollection[c],m=new u(_.row,_.col),g=new u(_.row+_.rowspan-1,_.col+_.colspan-1),w=new d(m,m,g),x=e.getBordersSharedWith(w);if(w.isEqual(e))e.setDirection("NW-SE");else if(x.length>0){var C=e.highlight.isEqual(w.from);x.indexOf("top")>-1?e.to.isSouthEastOf(w.from)&&C?e.setDirection("NW-SE"):e.to.isSouthWestOf(w.from)&&C&&e.setDirection("NE-SW"):x.indexOf("bottom")>-1&&(e.to.isNorthEastOf(w.from)&&C?e.setDirection("SW-NE"):e.to.isNorthWestOf(w.from)&&C&&e.setDirection("SE-NW"))}var y=r(s),k=n(_,y),S=o(_,y);e.includesRange(w)&&(w.includes(y)||k||S)&&(k&&(s.row<0?s.row-=_.rowspan-1:s.row>0&&(s.row+=_.rowspan-1)),S&&(s.col<0?s.col-=_.colspan-1:s.col>0&&(s.col+=_.colspan-1)))}0!==s.row&&(i.row=s.row),0!==s.col&&(i.col=s.col)},"undefined"==typeof e)throw new Error("Handsontable is not defined");var G=function(){var t=this,e=t.getSettings().mergeCells;e&&(t.mergeCells||(t.mergeCells=new l(e)))},q=function(){var t=this;t.mergeCells&&(t.view.wt.wtTable.getCell=function(e){if(t.getSettings().mergeCells){var i=t.mergeCells.mergedCellInfoCollection.getInfo(e.row,e.col);i&&(e=i)}return P.prototype.getCell.call(this,e)})},V=function(t){if(this.mergeCells){var e=(t.ctrlKey||t.metaKey)&&!t.altKey;e&&77===t.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),t.stopImmediatePropagation())}},Y=function(t){this.getSettings().mergeCells&&(t.items.push(e.ContextMenu.SEPARATOR),t.items.push({key:"mergeCells",name:function(){var t=this.getSelected(),e=this.mergeCells.mergedCellInfoCollection.getInfo(t[0],t[1]);return e?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return!1}}))},B=function(t,e,i){this.mergeCells&&this.mergeCells.applySpanProperties(t,e,i)},X=function(t){return function(e){var i=this.getSettings().mergeCells;if(i){var n=this.getSelectedRange();if(this.mergeCells.modifyTransform(t,n,e),"modifyTransformEnd"===t){var o=this.countRows(),r=this.countCols();n.from.row<0?n.from.row=0:n.from.row>0&&n.from.row>=o&&(n.from.row=n.from-1),n.from.col<0?n.from.col=0:n.from.col>0&&n.from.col>=r&&(n.from.col=r-1)}}}},Z=function(t){this.lastDesiredCoords=null;var e=this.getSettings().mergeCells;if(e){var i=this.getSelectedRange();i.highlight=new u(i.highlight.row,i.highlight.col),i.to=t;var n=!1;do{n=!1;for(var o=0,r=this.mergeCells.mergedCellInfoCollection.length;r>o;o++){var s=this.mergeCells.mergedCellInfoCollection[o],a=new u(s.row,s.col),l=new u(s.row+s.rowspan-1,s.col+s.colspan-1),h=new d(a,a,l);i.expandByRange(h)&&(t.row=i.to.row,t.col=i.to.col,n=!0)}}while(n)}},K=function(t,e){if(e&&"area"==e){var i=this.getSettings().mergeCells;if(i)for(var n=this.getSelectedRange(),o=new d(n.from,n.from,n.from),r=new d(n.to,n.to,n.to),s=0,a=this.mergeCells.mergedCellInfoCollection.length;a>s;s++){var l=this.mergeCells.mergedCellInfoCollection[s],h=new u(l.row,l.col),c=new u(l.row+l.rowspan-1,l.col+l.colspan-1),p=new d(h,h,c);o.expandByRange(p)&&(t[0]=o.from.row,t[1]=o.from.col),r.expandByRange(p)&&(t[2]=r.from.row,t[3]=r.from.col)}}},Q=function(t,e,i){var n=this.getSettings().mergeCells;if(n){var o=this.mergeCells.mergedCellInfoCollection.getInfo(t,e);!o||o.row==t&&o.col==e||(i.copyable=!1)}},J=function(t){var e=this.getSettings().mergeCells;if(e)for(var i,n=this.countCols(),o=0;n>o;o++){if(i=this.mergeCells.mergedCellInfoCollection.getInfo(t.startRow,o),i&&i.row<t.startRow)return t.startRow=i.row,J.call(this,t);if(i=this.mergeCells.mergedCellInfoCollection.getInfo(t.endRow,o)){var r=i.row+i.rowspan-1;if(r>t.endRow)return t.endRow=r,J.call(this,t)}}},te=function(t){var e=this.getSettings().mergeCells;if(e)for(var i,n=this.countRows(),o=0;n>o;o++){if(i=this.mergeCells.mergedCellInfoCollection.getInfo(o,t.startColumn),i&&i.col<t.startColumn)return t.startColumn=i.col,te.call(this,t);if(i=this.mergeCells.mergedCellInfoCollection.getInfo(o,t.endColumn)){var r=i.col+i.colspan-1;if(r>t.endColumn)return t.endColumn=r,te.call(this,t)}}},ee=function(t){if(t&&this.mergeCells){var e=this.mergeCells.mergedCellInfoCollection,i=this.getSelectedRange();for(var n in e)if(i.highlight.row==e[n].row&&i.highlight.col==e[n].col&&i.to.row==e[n].row+e[n].rowspan-1&&i.to.col==e[n].col+e[n].colspan-1)return!1}return t};e.hooks.add("beforeInit",G),e.hooks.add("afterInit",q),e.hooks.add("beforeKeyDown",V),e.hooks.add("modifyTransformStart",X("modifyTransformStart")),e.hooks.add("modifyTransformEnd",X("modifyTransformEnd")),e.hooks.add("beforeSetRangeEnd",Z),e.hooks.add("beforeDrawBorders",K),e.hooks.add("afterIsMultipleSelection",ee),e.hooks.add("afterRenderer",B),e.hooks.add("afterContextMenuDefaultOptions",Y),e.hooks.add("afterGetCellMeta",Q),e.hooks.add("afterViewportRowCalculatorOverride",J),e.hooks.add("afterViewportColumnCalculatorOverride",te),e.MergeCells=l,function(){function t(){}var i,n=function(t){return"boolean"==typeof t&&t===!0?!0:"object"==typeof t&&t.length>0?!0:!1},o=function(){n(this.getSettings().customBorders)&&(this.customBorders||(i=this,this.customBorders=new t))},r=function(t){for(var e=0;e<i.view.wt.selections.length;e++)if(i.view.wt.selections[e].settings.className==t)return e;
return-1},s=function(t){var e={row:t.row,col:t.col},n=new S(t,new d(e,e,e)),o=r(t.className);o>=0?i.view.wt.selections[o]=n:i.view.wt.selections.push(n)},a=function(t,e,i){var n=f(t,e);n=m(n,i),this.setCellMeta(t,e,"borders",n),s(n)},l=function(t){for(var e=t.range,i=e.from.row;i<=e.to.row;i++)for(var n=e.from.col;n<=e.to.col;n++){var o=f(i,n),r=0;i==e.from.row&&(r++,t.hasOwnProperty("top")&&(o.top=t.top)),i==e.to.row&&(r++,t.hasOwnProperty("bottom")&&(o.bottom=t.bottom)),n==e.from.col&&(r++,t.hasOwnProperty("left")&&(o.left=t.left)),n==e.to.col&&(r++,t.hasOwnProperty("right")&&(o.right=t.right)),r>0&&(this.setCellMeta(i,n,"borders",o),s(o))}},h=function(t,e){return"border_row"+t+"col"+e},c=function(){return{width:1,color:"#000"}},u=function(){return{hide:!0}},p=function(){return{width:1,color:"#000",cornerVisible:!1}},f=function(t,e){return{className:h(t,e),border:p(),row:t,col:e,top:u(),right:u(),bottom:u(),left:u()}},m=function(t,e){return e.hasOwnProperty("border")&&(t.border=e.border),e.hasOwnProperty("top")&&(t.top=e.top),e.hasOwnProperty("right")&&(t.right=e.right),e.hasOwnProperty("bottom")&&(t.bottom=e.bottom),e.hasOwnProperty("left")&&(t.left=e.left),t},g=function(t){for(var e=document.querySelectorAll("."+t),i=0;i<e.length;i++)if(e[i]&&"TD"!=e[i].nodeName){var n=e[i].parentNode;n.parentNode&&n.parentNode.removeChild(n)}},v=function(t,e){var i=h(t,e);g(i),this.removeCellMeta(t,e,"borders")},y=function(t,e,i,n){var o=this.getCellMeta(t,e).borders;o&&void 0!=o.border||(o=f(t,e)),o[i]=n?u():c(),this.setCellMeta(t,e,"borders",o);var r=h(t,e);g(r),s(o),this.render()},b=function(t,e,i){if(t.from.row==t.to.row&&t.from.col==t.to.col)"noBorders"==e?v.call(this,t.from.row,t.from.col):y.call(this,t.from.row,t.from.col,e,i);else switch(e){case"noBorders":for(var n=t.from.col;n<=t.to.col;n++)for(var o=t.from.row;o<=t.to.row;o++)v.call(this,o,n);break;case"top":for(var r=t.from.col;r<=t.to.col;r++)y.call(this,t.from.row,r,e,i);break;case"right":for(var s=t.from.row;s<=t.to.row;s++)y.call(this,s,t.to.col,e);break;case"bottom":for(var a=t.from.col;a<=t.to.col;a++)y.call(this,t.to.row,a,e);break;case"left":for(var l=t.from.row;l<=t.to.row;l++)y.call(this,l,t.from.col,e)}},_=function(t,e){var i=!1;return t.getSelectedRange().forAll(function(n,o){var r=t.getCellMeta(n,o).borders;if(r){if(!e)return i=!0,!1;if(!r[e].hasOwnProperty("hide"))return i=!0,!1}}),i},w=function(t){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+t},x=function(t){this.getSettings().customBorders&&(t.items.push(e.ContextMenu.SEPARATOR),t.items.push({key:"borders",name:"Borders",submenu:{items:{top:{name:function(){var t="Top",e=_(this,"top");return e&&(t=w(t)),t},callback:function(){var t=_(this,"top");b.call(this,this.getSelectedRange(),"top",t)},disabled:!1},right:{name:function(){var t="Right",e=_(this,"right");return e&&(t=w(t)),t},callback:function(){var t=_(this,"right");b.call(this,this.getSelectedRange(),"right",t)},disabled:!1},bottom:{name:function(){var t="Bottom",e=_(this,"bottom");return e&&(t=w(t)),t},callback:function(){var t=_(this,"bottom");b.call(this,this.getSelectedRange(),"bottom",t)},disabled:!1},left:{name:function(){var t="Left",e=_(this,"left");return e&&(t=w(t)),t},callback:function(){var t=_(this,"left");b.call(this,this.getSelectedRange(),"left",t)},disabled:!1},remove:{name:"Remove border(s)",callback:function(){b.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!_(this)}}}}}))};e.hooks.add("beforeInit",o),e.hooks.add("afterContextMenuDefaultOptions",x),e.hooks.add("afterInit",function(){var t=this.getSettings().customBorders;if(t){for(var e=0;e<t.length;e++)t[e].range?l.call(this,t[e]):a.call(this,t[e].row,t[e].col,t[e]);this.render(),this.view.wt.draw(!0)}}),e.CustomBorders=t}(),function(e){function i(){function i(t){W=this,d=t;var e=this.view.wt.wtTable.getCoords(t).row;if(e>=0){u=e;var i=d.getBoundingClientRect();c=i.top,p.style.top=c+"px",p.style.left=i.left+"px",W.rootElement.appendChild(p)}}function n(t,e){var i=t.getBoundingClientRect(),n=6;p.style.top=e>0?i.top+i.height-n+"px":i.top+"px"}function o(){var t=this;e.Dom.addClass(p,"active"),e.Dom.addClass(f,"active");var i=d.getBoundingClientRect();f.style.width=t.view.maximumVisibleElementWidth(0)+"px",f.style.height=i.height+"px",f.style.top=c+"px",f.style.left=p.style.left,t.rootElement.appendChild(f)}function r(t){f.style.top=c+t+"px"}function s(){e.Dom.removeClass(p,"active"),e.Dom.removeClass(f,"active")}var a,l,h,c,u,d,p=document.createElement("DIV"),f=document.createElement("DIV"),m=e.eventManager(this);p.className="manualRowMover",f.className="manualRowMoverGuide";var g=function(){var t=this;e.hooks.run(t,"persistentStateSave","manualRowPositions",t.manualRowPositions)},v=function(){var t=this,i={};return e.hooks.run(t,"persistentStateLoad","manualRowPositions",i),i.value},y=function(t){return"BODY"!=t.tagName?"TBODY"==t.parentNode.tagName?!0:(t=t.parentNode,y(t)):!1},b=function(t){return"TABLE"!=t.tagName?"TH"==t.tagName?t:b(t.parentNode):null},_=function(){var c,p=this;m.addEventListener(p.rootElement,"mouseover",function(t){if(y(t.target)){var e=b(t.target);e&&(c?(l=p.view.wt.wtTable.getCoords(e).row,n(e,l-a)):i.call(p,e))}}),m.addEventListener(p.rootElement,"mousedown",function(t){e.Dom.hasClass(t.target,"manualRowMover")&&(h=e.helper.pageY(t),o.call(p),c=p,a=u,l=u)}),m.addEventListener(t,"mousemove",function(t){c&&r(e.helper.pageY(t)-h)}),m.addEventListener(t,"mouseup",function(){c&&(s(),c=!1,x(p.manualRowPositions,p.countRows()),p.manualRowPositions.splice(l,0,p.manualRowPositions.splice(a,1)[0]),p.forceFullRender=!0,p.view.render(),g.call(p),e.hooks.run(p,"afterRowMove",a,l),i.call(p,d))}),p.addHook("afterDestroy",w)},w=function(){m.clear()},x=function(t,e){if(t.length<e)for(var i=t.length;e>i;i++)t[i]=i};this.beforeInit=function(){this.manualRowPositions=[]},this.init=function(t){var e=this,i=!!e.getSettings().manualRowMove;if(i){var n=e.getSettings().manualRowMove,o=v.call(e);"undefined"!=typeof e.manualRowPositionsPluginUsages?e.manualRowPositionsPluginUsages.push("manualColumnMove"):e.manualRowPositionsPluginUsages=["manualColumnMove"],this.manualRowPositions="undefined"!=typeof o?o:Array.isArray(n)?n:[],"afterInit"===t&&(_.call(this),this.manualRowPositions.length>0&&(e.forceFullRender=!0,e.render()))}else{var r=e.manualRowPositionsPluginUsages?e.manualRowPositionsPluginUsages.indexOf("manualColumnMove"):-1;r>-1&&(w.call(this),e.manualRowPositions=[],e.manualRowPositionsPluginUsages[r]=void 0)}},this.modifyRow=function(t){var e=this;return e.getSettings().manualRowMove?("undefined"==typeof e.manualRowPositions[t]&&x(this.manualRowPositions,t+1),e.manualRowPositions[t]):t}}var n=new i;e.hooks.add("beforeInit",n.beforeInit),e.hooks.add("afterInit",function(){n.init.call(this,"afterInit")}),e.hooks.add("afterUpdateSettings",function(){n.init.call(this,"afterUpdateSettings")}),e.hooks.add("modifyRow",n.modifyRow),e.hooks.register("afterRowMove")}(e),function(e){function i(i){this.instance=i,this.addingStarted=!1;var n,o,r=!1,s=this,a=e.eventManager(i),l=function(){return i.autofill?void(i.autofill.handle&&i.autofill.handle.isDragged&&(i.autofill.handle.isDragged>1&&i.autofill.apply(),i.autofill.handle.isDragged=0,r=!1)):!0};a.addEventListener(document,"mouseup",function(t){l(t)}),a.addEventListener(document,"mousemove",function(i){if(!s.instance.autofill)return 0;var n=e.Dom.offset(s.instance.table).top-(t.pageYOffset||document.documentElement.scrollTop)+e.Dom.outerHeight(s.instance.table),o=e.Dom.offset(s.instance.table).left-(t.pageXOffset||document.documentElement.scrollLeft)+e.Dom.outerWidth(s.instance.table);s.addingStarted===!1&&s.instance.autofill.handle.isDragged>0&&i.clientY>n&&i.clientX<=o?(this.mouseDragOutside=!0,s.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&setTimeout(function(){s.addingStarted=!1,s.instance.alter("insert_row")},200)}),n=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(t){i.autofill.handle.isDragged=1,r=!0,n(t)},o=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(t,e,n,s){i.autofill&&r&&!i.view.isMouseDown()&&i.autofill.handle&&i.autofill.handle.isDragged&&(i.autofill.handle.isDragged++,i.autofill.showBorder(e),i.autofill.checkIfNewRowNeeded()),o(t,e,n,s)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){i.autofill.selectAdjacent()}}i.prototype.init=function(){this.handle={}},i.prototype.disable=function(){this.handle.disabled=!0},i.prototype.selectAdjacent=function(){var t,e,i,n,o;t=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),e=this.instance.getData();t:for(i=t[2]+1;i<this.instance.countRows();i++){for(o=t[1];o<=t[3];o++)if(e[i][o])break t;(e[i][t[1]-1]||e[i][t[3]+1])&&(n=i)}n&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new u(t[0],t[1])),this.instance.view.wt.selections.fill.add(new u(n,t[3])),this.apply())},i.prototype.apply=function(){var t,i,n,o,r;if(this.handle.isDragged=0,t=this.instance.view.wt.selections.fill.getCorners()){var s=function(t,e,i,n){var o,r,s,a=i.length,l=i?i[0].length:0,h=[],c=e.row-t.row,u=e.col-t.col,d=[];if(-1!==["down","up"].indexOf(n)){for(var p=0;u>=p;p++)o=parseInt(i[0][p],10),r=parseInt(i[a-1][p],10),s=("down"===n?r-o:o-r)/(a-1)||0,d.push(s);h.push(d)}if(-1!==["right","left"].indexOf(n))for(var f=0;c>=f;f++)o=parseInt(i[f][0],10),r=parseInt(i[f][l-1],10),s=("right"===n?r-o:o-r)/(l-1)||0,d=[],d.push(s),h.push(d);return h};this.instance.view.wt.selections.fill.clear(),i=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners();var a;if(t[0]===i[0]&&t[1]<i[1]?(a="left",n=new u(t[0],t[1]),o=new u(t[2],i[1]-1)):t[0]===i[0]&&t[3]>i[3]?(a="right",n=new u(t[0],i[3]+1),o=new u(t[2],t[3])):t[0]<i[0]&&t[1]===i[1]?(a="up",n=new u(t[0],t[1]),o=new u(i[0]-1,t[3])):t[2]>i[2]&&t[1]===i[1]&&(a="down",n=new u(i[2]+1,t[1]),o=new u(t[2],t[3])),n&&n.row>-1&&n.col>-1){var l={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to};r=this.instance.getData(l.from.row,l.from.col,l.to.row,l.to.col);var h=s(n,o,r,a);e.hooks.run(this.instance,"beforeAutofill",n,o,r),this.instance.populateFromArray(n.row,n.col,r,o.row,o.col,"autofill",null,a,h),this.instance.selection.setRangeStart(new u(t[0],t[1])),this.instance.selection.setRangeEnd(new u(t[2],t[3]))}else this.instance.selection.refreshBorders()}},i.prototype.showBorder=function(t){var e=this.instance.getSelectedRange().getTopLeftCorner(),i=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==this.instance.getSettings().fillHandle&&(i.row<t.row||e.row>t.row))t=new u(t.row,i.col);else{if("vertical"===this.instance.getSettings().fillHandle)return;t=new u(i.row,t.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(t),this.instance.view.render()},i.prototype.checkIfNewRowNeeded=function(){var t,e,i=this.instance.countRows(),n=this;this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&(e=this.instance.getSelected(),t=this.instance.view.wt.selections.fill.getCorners(),e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout(function(){n.instance.alter("insert_row"),n.addingStarted=!1},200))))},e.hooks.add("afterInit",function(){var t=new i(this);"undefined"!=typeof this.getSettings().fillHandle&&(t.handle&&this.getSettings().fillHandle===!1?t.disable():t.handle||this.getSettings().fillHandle===!1||(this.autofill=t,this.autofill.init()))}),e.Autofill=i}(e);var ie=function(t){var i=[],n={rows:0,cols:0},o={rows:0,cols:0},r=[],s=[],a={groupIndicatorContainer:"htGroupIndicatorContainer",groupIndicator:function(t){return"ht"+t+"Group"},groupStart:"htGroupStart",collapseButton:"htCollapseButton",expandButton:"htExpandButton",collapseGroupId:function(t){return"htCollapse-"+t},collapseFromLevel:function(t,e){return"htCollapse"+t+"FromLevel-"+e},clickable:"clickable",levelTrigger:"htGroupLevelTrigger"},l=function(t,e){return function(i,n){return"undefined"==typeof e||"asc"===e?i[t]-n[t]:n[t]-i[t]}},h=function(t,e){for(var i=[];e>=t;)i.push(t++);return i},c=function(t,e,i){var n=[],o={row:null,col:null};if("cols"==t)for(;i>=e;)o={row:-1,col:e++},n.push(o);else for(;i>=e;)o={row:e++,col:-1},n.push(o);for(var r=d(n),s=0,a=0,l=0;l<r.length;l++)s+=r[l].filter(function(t){return t.rows}).length,a+=r[l].filter(function(t){return t.cols}).length;return{total:{rows:s,cols:a},groups:r}},d=function(t){for(var e=[],i=0;i<t.length;i++)e.push(p(t[i]));return e},p=function(t,e,n){for(var o=t.row,r=t.col,s=-1===o?0:o,a=-1===r?0:r,l=[],h=0;h<i.length;h++){var c=i[h],u=c.id,d=(c.level,c.rows||[]),p=c.cols||[];-1===l.indexOf(u)&&(-1!==d.indexOf(s)||-1!==p.indexOf(a))&&l.push(c)}-1===r?l=l.concat(v()):-1===o&&(l=l.concat(b())),e&&(l=l.filter(function(t){return t.level===e})),n&&("cols"===n?l=l.filter(function(t){return t.cols}):"rows"===n&&(l=l.filter(function(t){return t.rows})));var f=[];return l.filter(function(t){return-1===f.indexOf(t.id)?(f.push(t.id),t):void 0})},f=function(t){for(var e=0,n=i.length;n>e;e++)if(i[e].id==t)return i[e];return!1},m=function(t,e){for(var n=0,o=i.length;o>n;n++)if(i[n].level==e&&i[n].rows&&i[n].rows.indexOf(t)>-1)return i[n];return!1},g=function(t,e){for(var n=0,o=i.length;o>n;n++)if(i[n].level==e&&i[n].cols&&i[n].cols.indexOf(t)>-1)return i[n];return!1},v=function(){for(var t=[],e=0,n=i.length;n>e;e++)Array.isArray(i[e].cols)&&t.push(i[e]);return t},y=function(t){for(var e=[],n=0,o=i.length;o>n;n++)i[n].cols&&i[n].level===t&&e.push(i[n]);return e},b=function(){for(var t=[],e=0,n=i.length;n>e;e++)Array.isArray(i[e].rows)&&t.push(i[e]);return t},_=function(t){for(var e=[],n=0,o=i.length;o>n;n++)i[n].rows&&i[n].level===t&&e.push(i[n]);return e},w=function(t){var e=0;return t.length&&t.forEach(function(t){if(t=t.filter(function(t){return t.cols}),t.length){var i=t.sort(l("level","desc")),n=i[0].level;n>e&&(e=n)}}),e},x=function(t){var e=0;return t.length&&t.forEach(function(t){if(t=t.filter(function(t){return t.rows}),t.length){var i=t.sort(l("level","desc")),n=i[0].level;n>e&&(e=n)}}),e},C=function(t,e){var r=c("cols",t,e),s=w(r.groups);s===o.cols?o.cols++:s>o.cols&&(o.cols=s+1),n.cols||(n.cols=v().length),n.cols++,i.push({id:"c"+n.cols,level:s+1,cols:h(t,e),hidden:0})},k=function(t,e){var r=c("rows",t,e),s=x(r.groups);o.rows=Math.max(o.rows,s+1),n.rows||(n.rows=b().length),n.rows++,i.push({id:"r"+n.rows,level:s+1,rows:h(t,e),hidden:0})},S=function(t,e){for(var i,n=0,o=e.length;o>n;n++)if(e[n].hidden=t,i=e[n].level,r[i]||(r[i]=[]),s[i]||(s[i]=[]),e[n].rows)for(var a=0,l=e[n].rows.length;l>a;a++)r[i][e[n].rows[a]]=t>0?!0:void 0;else if(e[n].cols)for(var a=0,h=e[n].cols.length;h>a;a++)s[i][e[n].cols[a]]=t>0?!0:void 0},T=function(t,i,n,o){var r,s;switch(t){case"rows":r=m(i+1,n).id,s=e.Grouping.getGroupLevelsByRows();break;case"cols":r=g(i+1,n).id,s=e.Grouping.getGroupLevelsByCols()}return!!(s[i+1]&&s[i+1].indexOf(n)>-1&&o==r)},P=function(t,i,n,o){var r,s;switch(t){case"rows":r=m(i-1,n).id,s=e.Grouping.getGroupLevelsByRows();break;case"cols":r=g(i-1,n).id,s=e.Grouping.getGroupLevelsByCols()}return!!(s[i-1]&&s[i-1].indexOf(n)>-1&&o==r)},E=function(i,n,a,l){if(0===n)return!1;var h,c,u=P(i,n,a,l),d=T(i,n,a,l),p=!1;switch(i){case"rows":h=e.Grouping.getGroupLevelsByRows(),c=t.countRows();for(var f=0;f<=o.rows;f++)if(r[f]&&r[f][n+1]){p=!0;break}break;case"cols":h=e.Grouping.getGroupLevelsByCols(),c=t.countCols();for(var f=0;f<=o.cols;f++)if(s[f]&&s[f][n+1]){p=!0;break}}if(u){if(n==c-1)return!0;if(!d||d&&p)return!0;if(!h[n+1])return!0}return!1},D=function(e){var i;switch(e){case"rows":i=o.rows;for(var n=0;i>=n;n++)if(r[n]&&r[n][t.countRows()-1])return!0;break;case"cols":i=o.cols;for(var n=0;i>=n;n++)if(s[n]&&s[n][t.countCols()-1])return!0}return!1},L=function(i,n,a,l){var h,c,u,d=f(l),p=!1,m=function(t){for(var e=!1,i="rows"==t?r:s,a=0;a<=o[t];a++){for(u=n;d[t].indexOf(u)>-1;)e=!(!i[a]||!i[a][u]),u--;if(e)break}return e},g=P(i,n,a,l),v=T(i,n,a,l);switch(i){case"rows":h=e.Grouping.getGroupLevelsByRows(),c=t.countRows(),p=m(i);break;case"cols":h=e.Grouping.getGroupLevelsByCols(),c=t.countCols(),p=m(i)}if(n==c-1)return!1;if(0===n){if(v)return!0}else if(!g||g&&p){if(v)return!0}else if(!h[n-1]&&v)return!0;return!1},M=function(t,i,n,o,r){var s;switch(t){case"rows":s=m(i-1,n).id;break;case"cols":s=g(i-1,n).id}if(!s)return null;if(i>0&&P(t,i-1,n,s)&&s!=o){var l=document.createElement("DIV");return e.Dom.addClass(l,a.expandButton),l.id="htExpand-"+s,l.appendChild(document.createTextNode("+")),l.setAttribute("data-level",n),l.setAttribute("data-type",t),l.setAttribute("data-hidden","1"),r.appendChild(l),l}return null},A=function(t){for(var e=b(),i=v(),n=0,o=e.length;o>n;n++)if(e[n].rows.indexOf(t.row)>-1&&e[n].hidden)return!0;if(null===t.col)return!1;for(var n=0,r=i.length;r>n;n++)if(i[n].cols.indexOf(t.col)>-1&&i[n].hidden)return!0;return!1};return{getGroups:function(){return i},getLevels:function(){return o},instance:t,baseSpareRows:t.getSettings().minSpareRows,baseSpareCols:t.getSettings().minSpareCols,getRowGroups:b,getColGroups:v,init:function(){var i=t.getSettings().groups;i&&Array.isArray(i)&&e.Grouping.initGroups(i)},initGroups:function(t){i=[],t.forEach(function(t){var e=[],i=!1,n=!1;Array.isArray(t.rows)?(e=t.rows,i=!0):Array.isArray(t.cols)&&(e=t.cols,n=!0);var o=e[0],r=e[e.length-1];i?k(o,r):n&&C(o,r)})},resetGroups:function(){i=[],n={rows:0,cols:0},o={rows:0,cols:0};var t;for(var r in a)if("function"!=typeof a[r]){t=document.querySelectorAll("."+a[r]);for(var s=0,l=t.length;l>s;s++)e.Dom.removeClass(t[s],a[r])}for(var h=["htGroupColClosest","htGroupCol"],r=0,c=h.length;c>r;r++){t=document.querySelectorAll("."+h[r]);for(var s=0,l=t.length;l>s;s++)e.Dom.removeClass(t[s],h[r])}},updateGroups:function(){var t=this.getSettings().groups;e.Grouping.resetGroups(),e.Grouping.initGroups(t)},afterGetRowHeader:function(t,i){for(var n=!1,o=0,s=r.length;s>o;o++)r[o]&&r[o][t]===!0&&(n=!0);n?e.Dom.addClass(i.parentNode,"hidden"):!n&&e.Dom.hasClass(i.parentNode,"hidden")&&e.Dom.removeClass(i.parentNode,"hidden")},afterGetColHeader:function(i){var n=this.view.wt.wtSettings.getSetting("rowHeaders").length,o=t.rootElement.querySelectorAll("colgroup col:nth-child("+parseInt(i+n+1,10)+")");if(0!==o.length){for(var r=!1,a=0,l=s.length;l>a;a++)s[a]&&s[a][i]===!0&&(r=!0);if(r)for(var a=0,h=o.length;h>a;a++)e.Dom.addClass(o[a],"hidden");else if(!r&&e.Dom.hasClass(o[0],"hidden"))for(var a=0,h=o.length;h>a;a++)e.Dom.removeClass(o[a],"hidden")}},groupIndicatorsFactory:function(t,i){var r,s,l,h,c,u,d,p;switch(i){case"horizontal":r=e.Grouping.getGroupLevelsByCols(),s=function(t){return Array.prototype.indexOf.call(t.parentNode.parentNode.childNodes,t.parentNode)+1},l=function(t,e){return g(t,e).id},h="cols",c=function(t,e){return g(t-1,e)},u="columnHeaders",d=function(t){if(1===t.length){var i=t[0];t[0]=function(t,n,o){-1>t?v()(t,n,o):(e.Dom.removeClass(n,a.groupIndicatorContainer),i(t,n,o))}}return function(){return t}},p=!0;break;case"vertical":r=e.Grouping.getGroupLevelsByRows(),s=function(t){return e.Dom.index(t)+1},l=function(t,e){return m(t,e).id},h="rows",c=function(t,e){return m(t-1,e)},u="rowHeaders",d=function(t){return t}}var f=function(t){var i=document.createElement("div");return t.appendChild(i),{button:i,addClass:function(t){e.Dom.addClass(i,t)}}},v=function(){var t=i.charAt(0).toUpperCase()+i.slice(1);return function(i,n,o){o++;for(var s,u;s=n.lastChild;)n.removeChild(s);e.Dom.addClass(n,a.groupIndicatorContainer);var d=l(i,o);if(i>-1&&r[i]&&r[i].indexOf(o)>-1&&(u=f(n),u.addClass(a.groupIndicator(t)),L(h,i,o,d)&&u.addClass(a.groupStart),E(h,i,o,d)&&(u.button.appendChild(document.createTextNode("-")),u.addClass(a.collapseButton),u.button.id=a.collapseGroupId(d),u.button.setAttribute("data-level",o),u.button.setAttribute("data-type",h))),p){var m=e.Dom.index(n.parentNode);if(-1===i||-1>i&&m===e.Grouping.getLevels().cols+1||0===m&&0===e.Grouping.getLevels().cols)if(u=f(n),u.addClass(a.levelTrigger),-1===i)u.button.id=a.collapseFromLevel("Cols",o),u.button.appendChild(document.createTextNode(o));else if(-1>i&&m===e.Grouping.getLevels().cols+1||0===m&&0===e.Grouping.getLevels().cols){var g=e.Dom.index(n)+1;u.button.id=a.collapseFromLevel("Rows",g),u.button.appendChild(document.createTextNode(g))}}var v=M(h,i,o,d,n);if(i>0){var y=c(i-1,o);v&&y.hidden&&e.Dom.addClass(v,a.clickable)}ne()}};if(t=d(t),n[h]>0)for(var y=0;y<o[h]+1;y++)Array.isArray(t)||(t="function"==typeof t?t():new Array(t)),t.unshift(v())},getGroupLevelsByRows:function(){for(var t=b(),e=[],i=0,n=t.length;n>i;i++)if(t[i].rows)for(var o=0,r=t[i].rows.length;r>o;o++)e[t[i].rows[o]]||(e[t[i].rows[o]]=[]),e[t[i].rows[o]].push(t[i].level);return e},getGroupLevelsByCols:function(){for(var t=v(),e=[],i=0,n=t.length;n>i;i++)if(t[i].cols)for(var o=0,r=t[i].cols.length;r>o;o++)e[t[i].cols[o]]||(e[t[i].cols[o]]=[]),e[t[i].cols[o]].push(t[i].level);return e},toggleGroupVisibility:function(i){if(e.Dom.hasClass(i.target,a.expandButton)||e.Dom.hasClass(i.target,a.collapseButton)||e.Dom.hasClass(i.target,a.levelTrigger)){var n,r,s,l,h=i.target,c=h.id.split("-"),u=[],d=function(t){t&&(h=t),c=h.id.split("-"),n=c[1],r=parseInt(h.getAttribute("data-level"),10),s=h.getAttribute("data-type"),l=parseInt(h.getAttribute("data-hidden")),l=isNaN(l)?1:l?0:1,h.setAttribute("data-hidden",l.toString()),u.push(f(n))};if(h.className.indexOf(a.levelTrigger)>-1){for(var p,m=[],g=[],v=h.id.indexOf("Rows")>-1?"rows":"cols",b=1,w=o[v];w>=b;b++)if(p="rows"==v?_(b):y(b),b>=parseInt(c[1],10))for(var x=0,C=p.length;C>x;x++)g.push(p[x]);else for(var x=0,C=p.length;C>x;x++)m.push(p[x]);S(!0,g),S(!1,m)}else d(),S(l,u);s=s||v;var k=D(s),T=s.charAt(0).toUpperCase()+s.slice(1),P=e.Grouping["baseSpare"+T];k?0==P&&(t.alter("insert_"+s.slice(0,-1),t["count"+T]()),e.Grouping["dummy"+s.slice(0,-1)]=!0):0==P&&e.Grouping["dummy"+s.slice(0,-1)]&&(t.alter("remove_"+s.slice(0,-1),t["count"+T]()-1),e.Grouping["dummy"+s.slice(0,-1)]=!1),t.render(),i.stopImmediatePropagation()}},modifySelectionFactory:function(t){var e,i=this.instance,n=new u(0,0),o=function(t,e){var i=0;switch(t){case"down":for(;A(e);)i++,e.row+=1;break;case"up":for(;A(e);)i--,e.row-=1;break;case"right":for(;A(e);)i++,e.col+=1;break;case"left":for(;A(e);)i--,e.col-=1}return i},r=function(t,e){t.row>0?A(e)&&(t.row+=o("down",e)):t.row<0&&A(e)&&(t.row+=o("up",e)),t.col>0?A(e)&&(t.col+=o("right",e)):t.col<0&&A(e)&&(t.col+=o("left",e))};switch(t){case"start":return function(t){e=i.getSelected(),n.row=e[0]+t.row,n.col=e[1]+t.col,r(t,n)};case"end":return function(t){e=i.getSelected(),n.row=e[2]+t.row,n.col=e[3]+t.col,r(t,n)}}},modifyRowHeight:function(e,i){return t.view.wt.wtTable.rowFilter&&A({row:i,col:null})?0:void 0},validateGroups:function(){for(var e=function(t,e){return t[0]<e[0]&&t[1]<e[1]&&e[0]<=t[1]||t[0]>e[0]&&e[1]<t[1]&&t[0]<=e[1]?!0:void 0},i=t.getSettings().groups,n=[],o=[],r=0,s=i.length;s>r;r++)if(i[r].rows){if(1===i[r].rows.length)throw new Error("Grouping error:  Group {"+i[r].rows[0]+"} is invalid. Cannot define single-entry groups.");if(0===i[r].rows.length)throw new Error("Grouping error:  Cannot define empty groups.");o.push(i[r].rows);for(var a=0,l=o.length;l>a;a++)if(e(i[r].rows,o[a]))throw new Error("Grouping error:  ranges {"+i[r].rows[0]+", "+i[r].rows[1]+"} and {"+o[a][0]+", "+o[a][1]+"} are overlapping.")}else if(i[r].cols){if(1===i[r].cols.length)throw new Error("Grouping error:  Group {"+i[r].cols[0]+"} is invalid. Cannot define single-entry groups.");if(0===i[r].cols.length)throw new Error("Grouping error:  Cannot define empty groups.");n.push(i[r].cols);for(var a=0,h=n.length;h>a;a++)if(e(i[r].cols,n[a]))throw new Error("Grouping error:  ranges {"+i[r].cols[0]+", "+i[r].cols[1]+"} and {"+n[a][0]+", "+n[a][1]+"} are overlapping.")}return!0},afterGetRowHeaderRenderers:function(t){e.Grouping.groupIndicatorsFactory(t,"vertical")},afterGetColumnHeaderRenderers:function(t){e.Grouping.groupIndicatorsFactory(t,"horizontal")},hookProxy:function(i,n){return function(){return t.getSettings().groups?n?e.Grouping[i](n).apply(this,arguments):e.Grouping[i].apply(this,arguments):void 0}}}},z=function(){var t=this,i=!!t.getSettings().groups;if(i){var n={};e.Grouping=new ie(t),t.getSettings().rowHeaders||(n.rowHeaders=!0),t.getSettings().colHeaders||(n.colHeaders=!0),(n.colHeaders||n.rowHeaders)&&t.updateSettings(n);var o=e.Grouping.validateGroups();if(!o)return;t.addHook("beforeInit",e.Grouping.hookProxy("init")),t.addHook("afterUpdateSettings",e.Grouping.hookProxy("updateGroups")),t.addHook("afterGetColumnHeaderRenderers",e.Grouping.hookProxy("afterGetColumnHeaderRenderers")),t.addHook("afterGetRowHeaderRenderers",e.Grouping.hookProxy("afterGetRowHeaderRenderers")),t.addHook("afterGetRowHeader",e.Grouping.hookProxy("afterGetRowHeader")),t.addHook("afterGetColHeader",e.Grouping.hookProxy("afterGetColHeader")),t.addHook("beforeOnCellMouseDown",e.Grouping.hookProxy("toggleGroupVisibility")),t.addHook("modifyTransformStart",e.Grouping.hookProxy("modifySelectionFactory","start")),t.addHook("modifyTransformEnd",e.Grouping.hookProxy("modifySelectionFactory","end")),t.addHook("modifyRowHeight",e.Grouping.hookProxy("modifyRowHeight"))}},ne=function(){for(var t=document.querySelectorAll("colgroup"),i=0,n=t.length;n>i;i++){var o=t[i].querySelectorAll("col.rowHeader");if(0===o.length)return;for(var r=0,s=o.length+1;s>r;r++){if(2==s)return;r<e.Grouping.getLevels().rows+1&&(r==e.Grouping.getLevels().rows?e.Dom.addClass(o[r],"htGroupColClosest"):e.Dom.addClass(o[r],"htGroupCol"))}}};e.hooks.add("beforeInit",z),e.hooks.add("afterUpdateSettings",function(){this.getSettings().groups&&!e.Grouping?z.call(this,arguments):!this.getSettings().groups&&e.Grouping&&(e.Grouping.resetGroups(),e.Grouping=void 0)}),e.plugins.Grouping=ie,function(t){function e(){this.zeroClipboardInstance=null,this.instance=null}e.prototype.prepareZeroClipboard=function(){this.swfPath&&ZeroClipboard.config({swfPath:this.swfPath})},e.prototype.copy=function(){return this.instance.copyPaste.setCopyableText(),this.instance.copyPaste.copyPasteInstance.elTextarea.value},e.prototype.addToContextMenu=function(e){this.getSettings().contextMenuCopyPaste&&e.items.unshift({key:"copy",name:"Copy"},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()}},t.ContextMenu.SEPARATOR)},e.prototype.setupZeroClipboard=function(e){var n=this;if(this.cmInstance=e,t.Dom.hasClass(this.cmInstance.rootElement,"htContextMenu"))for(var o=e.getData(),r=0,s=o.length;s>r;r++)if("copy"===o[r].key){this.zeroClipboardInstance=new ZeroClipboard(e.getCell(r,0)),this.zeroClipboardInstance.off(),this.zeroClipboardInstance.on("copy",function(t){var e=t.clipboardData;e.setData("text/plain",n.copy()),n.instance.getSettings().outsideClickDeselects=n.outsideClickDeselectsCache}),i.bindEvents();break}},e.prototype.bindEvents=function(){var e=this;if(e.cmInstance){var i=new t.eventManager(this.instance),n=function(){var i=e.cmInstance.rootElement.querySelector("td.current");i&&t.Dom.removeClass(i,"current"),e.outsideClickDeselectsCache=e.instance.getSettings().outsideClickDeselects,e.instance.getSettings().outsideClickDeselects=!1},o=function(){var i=e.cmInstance.rootElement.querySelector("td.zeroclipboard-is-hover");i&&t.Dom.removeClass(i,"zeroclipboard-is-hover"),e.instance.getSettings().outsideClickDeselects=e.outsideClickDeselectsCache};i.removeEventListener(document,"mouseenter",function(){n()}),i.addEventListener(document,"mouseenter",function(){n()}),i.removeEventListener(document,"mouseleave",function(){o()}),i.addEventListener(document,"mouseleave",function(){o()})}},e.prototype.init=function(){if(this.getSettings().contextMenuCopyPaste){if("object"==typeof this.getSettings().contextMenuCopyPaste&&(i.swfPath=this.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof ZeroClipboard)throw new Error("To be able to use the Copy/Paste feature from the context menu, you need to manualy include ZeroClipboard.js file to your website.");try{{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}}catch(t){if("undefined"==typeof navigator.mimeTypes["application/x-shockwave-flash"])throw new Error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}i.instance=this,i.prepareZeroClipboard()}};var i=new e;t.hooks.add("afterRender",function(){i.setupZeroClipboard(this)}),t.hooks.add("afterInit",i.init),t.hooks.add("afterContextMenuDefaultOptions",i.addToContextMenu),t.ContextMenuCopyPaste=e}(e),function(t){function e(e){this.instance=e,this.dragged=[],this.eventManager=t.eventManager(e),this.bindTouchEvents()}e.prototype.getCurrentRangeCoords=function(t,e,i,n,o){var r=t.getTopLeftCorner(),s=t.getBottomRightCorner(),a=t.getBottomLeftCorner(),l=t.getTopRightCorner(),h={start:null,end:null};switch(i){case"NE-SW":switch(n){case"NE-SW":case"NW-SE":h="topLeft"==o?{start:new u(e.row,t.highlight.col),end:new u(a.row,e.col)}:{start:new u(t.highlight.row,e.col),end:new u(e.row,r.col)};break;case"SE-NW":"bottomRight"==o&&(h={start:new u(s.row,e.col),end:new u(e.row,r.col)})}break;case"NW-SE":switch(n){case"NE-SW":"topLeft"==o?h={start:e,end:a}:h.end=e;break;case"NW-SE":"topLeft"==o?h={start:e,end:s}:h.end=e;break;case"SE-NW":"topLeft"==o?h={start:e,end:r}:h.end=e;break;case"SW-NE":"topLeft"==o?h={start:e,end:l}:h.end=e}break;case"SW-NE":switch(n){case"NW-SE":h="bottomRight"==o?{start:new u(e.row,r.col),end:new u(a.row,e.col)}:{start:new u(r.row,e.col),end:new u(e.row,s.col)};break;case"SW-NE":h="topLeft"==o?{start:new u(t.highlight.row,e.col),end:new u(e.row,s.col)}:{start:new u(e.row,r.col),end:new u(r.row,e.col)};break;case"SE-NW":"bottomRight"==o?h={start:new u(e.row,l.col),end:new u(r.row,e.col)}:"topLeft"==o&&(h={start:a,end:e})}break;case"SE-NW":switch(n){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==o&&(h.end=e);break;case"SE-NW":"topLeft"==o?h.end=e:h={start:e,end:r}}}return h},e.prototype.bindTouchEvents=function(){var e=this,i=function(t){if(1==this.dragged.length)return this.dragged=[],!0;var e=this.dragged.indexOf(t);return-1==e?!1:void(0===e?this.dragged=this.dragged.slice(0,1):1==e&&(this.dragged=this.dragged.slice(-1)))};this.eventManager.addEventListener(this.instance.rootElement,"touchstart",function(i){if(t.Dom.hasClass(i.target,"topLeftSelectionHandle-HitArea")){e.dragged.push("topLeft");var n=e.instance.getSelectedRange();return e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},i.preventDefault(),!1}if(t.Dom.hasClass(i.target,"bottomRightSelectionHandle-HitArea")){e.dragged.push("bottomRight");var n=e.instance.getSelectedRange();return e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},i.preventDefault(),!1}}),this.eventManager.addEventListener(this.instance.rootElement,"touchend",function(n){return t.Dom.hasClass(n.target,"topLeftSelectionHandle-HitArea")?(i.call(e,"topLeft"),e.touchStartRange=void 0,n.preventDefault(),!1):t.Dom.hasClass(n.target,"bottomRightSelectionHandle-HitArea")?(i.call(e,"bottomRight"),e.touchStartRange=void 0,n.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.instance.rootElement,"touchmove",function(i){var n=t.Dom.getWindowScrollTop(),o=t.Dom.getWindowScrollLeft();if(e.dragged.length>0){var r=document.elementFromPoint(i.touches[0].screenX-o,i.touches[0].screenY-n);if(!r)return;if("TD"==r.nodeName||"TH"==r.nodeName){var s=e.instance.getCoords(r);-1==s.col&&(s.col=0);var a=e.instance.getSelectedRange(),l=a.getWidth(),h=a.getHeight(),c=a.getDirection();1==l&&1==h&&e.instance.selection.setRangeEnd(s);var u=e.getCurrentRangeCoords(a,s,e.touchStartRange.direction,c,e.dragged[0]);null!=u.start&&e.instance.selection.setRangeStart(u.start),e.instance.selection.setRangeEnd(u.end)}i.preventDefault()}})},e.prototype.isDragged=function(){return 0===this.dragged.length?!1:!0};var i=function(){var i=this;t.plugins.multipleSelectionHandles=new e(i)};t.hooks.add("afterInit",i)}(e);var oe=function(){function t(){}return t.prototype.init=function(t){this.instance=t,this.bindEvents(),this.scrollbars=[this.instance.view.wt.wtScrollbars.vertical,this.instance.view.wt.wtScrollbars.horizontal,this.instance.view.wt.wtScrollbars.corner],this.clones=[this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode,this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode,this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode]
},t.prototype.bindEvents=function(){var t=this;this.instance.addHook("beforeTouchScroll",function(){e.freezeOverlays=!0;for(var i=0,n=t.clones.length;n>i;i++)e.Dom.addClass(t.clones[i],"hide-tween")}),this.instance.addHook("afterMomentumScroll",function(){e.freezeOverlays=!1;for(var i=0,n=t.clones.length;n>i;i++)e.Dom.removeClass(t.clones[i],"hide-tween");for(var i=0,n=t.clones.length;n>i;i++)e.Dom.addClass(t.clones[i],"show-tween");setTimeout(function(){for(var i=0,n=t.clones.length;n>i;i++)e.Dom.removeClass(t.clones[i],"show-tween")},400);for(var i=0,n=t.scrollbars.length;n>i;i++)t.scrollbars[i].refresh(),t.scrollbars[i].resetFixedPosition()})},t}(),re=new oe;if(e.hooks.add("afterInit",function(){re.init.call(re,this)}),function(t){function e(e){function i(i){i.items.push(t.ContextMenu.SEPARATOR,{key:"freeze_column",name:function(){var t=e.getSelected()[1];return t>f-1?"Freeze this column":"Unfreeze this column"},disabled:function(){var t=e.getSelected();return t[1]!==t[3]},callback:function(){var t=e.getSelected()[1];t>f-1?h(t):c(t)}})}function n(){e.updateSettings({fixedColumnsLeft:f+1}),f++}function o(){e.updateSettings({fixedColumnsLeft:f-1}),f--}function r(t){e.manualColumnPositions&&0!==e.manualColumnPositions.length||e.manualColumnPositions||(e.manualColumnPositions=[]),t?e.manualColumnPositions[t]||s(t+1):s(e.countCols())}function s(t){if(e.manualColumnPositions.length<t)for(var i=e.manualColumnPositions.length;t>i;i++)e.manualColumnPositions[i]=i}function a(t,i,n,o){null==n&&(n=t),"freeze"===o?e.manualColumnPositions.splice(f,0,e.manualColumnPositions.splice(i,1)[0]):"unfreeze"===o&&e.manualColumnPositions.splice(n,0,e.manualColumnPositions.splice(i,1)[0])}function l(t){for(var e=f,i=u(e),n=u(t);n>i;)e++,i=u(e);return e-1}function h(t){if(!(f-1>=t)){var e=u(t)||t;r(e),a(e,t,null,"freeze"),n()}}function c(t){if(!(t>f-1)){var e=l(t),i=u(t)||t;r(i),a(i,t,e,"unfreeze"),o()}}function u(t){return e.manualColumnPositions[t]}function d(t){return this.manualColumnPositionsPluginUsages.length>1?t:u(t)}function p(){e.addHook("modifyCol",d),e.addHook("afterContextMenuDefaultOptions",i)}var f=e.getSettings().fixedColumnsLeft,m=function(){"undefined"!=typeof e.manualColumnPositionsPluginUsages?e.manualColumnPositionsPluginUsages.push("manualColumnFreeze"):e.manualColumnPositionsPluginUsages=["manualColumnFreeze"],p()};return{init:m,freezeColumn:h,unfreezeColumn:c,helpers:{addFixedColumn:n,removeFixedColumn:o,checkPositionData:r,modifyColumnOrder:a,getBestColumnReturnPosition:l}}}var i=function(){if(this.getSettings().manualColumnFreeze){var i;t.plugins.manualColumnFreeze=e,this.manualColumnFreeze=new e(this),i=this.manualColumnFreeze,i.init.call(this)}};t.hooks.add("beforeInit",i)}(e),h.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.scrollHandler=this.getScrollableElement(this.TABLE)},h.prototype.makeClone=function(t){var e=document.createElement("DIV");e.className="ht_clone_"+t+" handsontable",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.overflow="hidden";var i=document.createElement("TABLE");return i.className=this.instance.wtTable.TABLE.className,e.appendChild(i),this.instance.wtTable.holder.parentNode.appendChild(e),new m({cloneSource:this.instance,cloneOverlay:this,table:i})},h.prototype.getScrollableElement=function(e){for(var i=e.parentNode;i&&i.style&&document.body!==i;){if("visible"!==i.style.overflow&&""!==i.style.overflow)return i;if(t.getComputedStyle){var n=t.getComputedStyle(i);if("visible"!==n.getPropertyValue("overflow")&&""!==n.getPropertyValue("overflow"))return i}if(this instanceof x&&"visible"!==i.style.overflowX&&""!==i.style.overflowX)return i;i=i.parentNode}return t},h.prototype.refresh=function(t){this.clone&&this.clone.draw(t)},h.prototype.destroy=function(){var t=e.eventManager(this.clone);t.clear()},c.prototype.appear=function(t){var i,n,o,r,s,a,l,h,c,d,p,f;if(!this.disabled){var m,g,v,y,b,_,x,k=this.instance,S=function(){return!this.instance.selections.area.cellRange||v==this.instance.selections.area.cellRange.to.row&&y==this.instance.selections.area.cellRange.to.col?!1:!0},T=function(t,e,i,n){var o=parseInt(this.selectionHandles.styles.topLeft.width,10),r=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(t-o,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(e-o,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(t-r/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(e-r/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(t+n,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(e+i,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(t+n-r/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(e+i-r/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",S.call(this)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),m==this.instance.wtSettings.getSetting("fixedRowsTop")||g==this.instance.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")};for(_=k.cloneOverlay instanceof C||k.cloneOverlay instanceof w?k.getSetting("fixedRowsTop"):k.wtTable.getRenderedRowsCount(),b=0;_>b;b++)if(x=k.wtTable.rowFilter.renderedToSource(b),x>=t[0]&&x<=t[2]){m=x;break}for(b=_-1;b>=0;b--)if(x=k.wtTable.rowFilter.renderedToSource(b),x>=t[0]&&x<=t[2]){v=x;break}for(_=k.wtTable.getRenderedColumnsCount(),b=0;_>b;b++)if(x=k.wtTable.columnFilter.renderedToSource(b),x>=t[1]&&x<=t[3]){g=x;break}for(b=_-1;b>=0;b--)if(x=k.wtTable.columnFilter.renderedToSource(b),x>=t[1]&&x<=t[3]){y=x;break}if(void 0===m||void 0===g)return void this.disappear();i=m!==v||g!==y,n=k.wtTable.getCell(new u(m,g)),o=i?k.wtTable.getCell(new u(v,y)):n,r=e.Dom.offset(n),s=i?e.Dom.offset(o):r,a=e.Dom.offset(k.wtTable.TABLE),h=r.top,p=s.top+e.Dom.outerHeight(o)-h,d=r.left,f=s.left+e.Dom.outerWidth(o)-d,l=h-a.top-1,c=d-a.left-1;var P=e.Dom.getComputedStyle(n);parseInt(P.borderTopWidth,10)>0&&(l+=1,p=p>0?p-1:0),parseInt(P.borderLeftWidth,10)>0&&(c+=1,f=f>0?f-1:0),this.topStyle.top=l+"px",this.topStyle.left=c+"px",this.topStyle.width=f+"px",this.topStyle.display="block",this.leftStyle.top=l+"px",this.leftStyle.left=c+"px",this.leftStyle.height=p+"px",this.leftStyle.display="block";var E=Math.floor(this.settings.border.width/2);if(this.bottomStyle.top=l+p-E+"px",this.bottomStyle.left=c+"px",this.bottomStyle.width=f+"px",this.bottomStyle.display="block",this.rightStyle.top=l+"px",this.rightStyle.left=c+f-E+"px",this.rightStyle.height=p+1+"px",this.rightStyle.display="block",e.mobileBrowser||!this.hasSetting(this.settings.border.cornerVisible)||S.call(this))this.cornerStyle.display="none";else if(this.cornerStyle.top=l+p-4+"px",this.cornerStyle.left=c+f-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="block",y===this.instance.getSetting("totalColumns")-1){var D=e.Dom.getScrollableElement(k.wtTable.TABLE),L=o.offsetLeft+e.Dom.outerWidth(o)>=e.Dom.innerWidth(D);L&&(this.cornerStyle.left=Math.floor(c+f-3-parseInt(this.cornerDefaultStyle.width)/2)+"px",this.cornerStyle.borderRightWidth=0)}e.mobileBrowser&&T.call(this,l,c,f,p)}},c.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",e.mobileBrowser&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")},c.prototype.hasSetting=function(t){return"function"==typeof t?t():!!t},u.prototype.isValid=function(t){return this.row<0||this.col<0?!1:this.row>=t.getSetting("totalRows")||this.col>=t.getSetting("totalColumns")?!1:!0},u.prototype.isEqual=function(t){return t===this?!0:this.row===t.row&&this.col===t.col},u.prototype.isSouthEastOf=function(t){return this.row>=t.row&&this.col>=t.col},u.prototype.isNorthWestOf=function(t){return this.row<=t.row&&this.col<=t.col},u.prototype.isSouthWestOf=function(t){return this.row>=t.row&&this.col<=t.col},u.prototype.isNorthEastOf=function(t){return this.row<=t.row&&this.col>=t.col},t.WalkontableCellCoords=u,d.prototype.isValid=function(t){return this.from.isValid(t)&&this.to.isValid(t)},d.prototype.isSingle=function(){return this.from.row===this.to.row&&this.from.col===this.to.col},d.prototype.getHeight=function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1},d.prototype.getWidth=function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1},d.prototype.includes=function(t){var e=this.getTopLeftCorner(),i=this.getBottomRightCorner();return t.row<0&&(t.row=0),t.col<0&&(t.col=0),e.row<=t.row&&i.row>=t.row&&e.col<=t.col&&i.col>=t.col},d.prototype.includesRange=function(t){return this.includes(t.getTopLeftCorner())&&this.includes(t.getBottomRightCorner())},d.prototype.isEqual=function(t){return Math.min(this.from.row,this.to.row)==Math.min(t.from.row,t.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(t.from.row,t.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(t.from.col,t.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(t.from.col,t.to.col)},d.prototype.overlaps=function(t){return t.isSouthEastOf(this.getTopLeftCorner())&&t.isNorthWestOf(this.getBottomRightCorner())},d.prototype.isSouthEastOf=function(t){return this.getTopLeftCorner().isSouthEastOf(t)||this.getBottomRightCorner().isSouthEastOf(t)},d.prototype.isNorthWestOf=function(t){return this.getTopLeftCorner().isNorthWestOf(t)||this.getBottomRightCorner().isNorthWestOf(t)},d.prototype.expand=function(t){var e=this.getTopLeftCorner(),i=this.getBottomRightCorner();return t.row<e.row||t.col<e.col||t.row>i.row||t.col>i.col?(this.from=new u(Math.min(e.row,t.row),Math.min(e.col,t.col)),this.to=new u(Math.max(i.row,t.row),Math.max(i.col,t.col)),!0):!1},d.prototype.expandByRange=function(t){if(this.includesRange(t)||!this.overlaps(t))return!1;var e=this.getTopLeftCorner(),i=this.getBottomRightCorner(),n=(this.getTopRightCorner(),this.getBottomLeftCorner(),t.getTopLeftCorner()),o=t.getBottomRightCorner(),r=Math.min(e.row,n.row),s=Math.min(e.col,n.col),a=Math.max(i.row,o.row),l=Math.max(i.col,o.col),h=new u(r,s),c=new u(a,l),p=new d(h,h,c).isCorner(this.from,t),f=t.isEqual(new d(h,h,c));return p&&!f&&(this.from.col>h.col&&(h.col=l,c.col=s),this.from.row>h.row&&(h.row=a,c.row=r)),this.from=h,this.to=c,!0},d.prototype.getDirection=function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},d.prototype.setDirection=function(t){switch(t){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},d.prototype.getTopLeftCorner=function(){return new u(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},d.prototype.getBottomRightCorner=function(){return new u(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},d.prototype.getTopRightCorner=function(){return new u(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},d.prototype.getBottomLeftCorner=function(){return new u(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},d.prototype.isCorner=function(t,e){return e&&e.includes(t)&&(this.getTopLeftCorner().isEqual(new u(e.from.row,e.from.col))||this.getTopRightCorner().isEqual(new u(e.from.row,e.to.col))||this.getBottomLeftCorner().isEqual(new u(e.to.row,e.from.col))||this.getBottomRightCorner().isEqual(new u(e.to.row,e.to.col)))?!0:t.isEqual(this.getTopLeftCorner())||t.isEqual(this.getTopRightCorner())||t.isEqual(this.getBottomLeftCorner())||t.isEqual(this.getBottomRightCorner())},d.prototype.getOppositeCorner=function(t,e){if(!(t instanceof u))return!1;if(e&&e.includes(t)){if(this.getTopLeftCorner().isEqual(new u(e.from.row,e.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new u(e.from.row,e.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new u(e.to.row,e.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new u(e.to.row,e.to.col)))return this.getTopLeftCorner()}return t.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():t.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():t.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():t.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},d.prototype.getBordersSharedWith=function(t){if(!this.includesRange(t))return[];var e={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(t.from.row,t.to.row),bottom:Math.max(t.from.row,t.to.row),left:Math.min(t.from.col,t.to.col),right:Math.max(t.from.col,t.to.col)},n=[];return e.top==i.top&&n.push("top"),e.right==i.right&&n.push("right"),e.bottom==i.bottom&&n.push("bottom"),e.left==i.left&&n.push("left"),n},d.prototype.getInner=function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),i=[],n=t.row;n<=e.row;n++)for(var o=t.col;o<=e.col;o++)this.from.row===n&&this.from.col===o||this.to.row===n&&this.to.col===o||i.push(new u(n,o));return i},d.prototype.getAll=function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),i=[],n=t.row;n<=e.row;n++)for(var o=t.col;o<=e.col;o++)i.push(t.row===n&&t.col===o?t:e.row===n&&e.col===o?e:new u(n,o));return i},d.prototype.forAll=function(t){for(var e=this.getTopLeftCorner(),i=this.getBottomRightCorner(),n=e.row;n<=i.row;n++)for(var o=e.col;o<=i.col;o++){var r=t(n,o);if(r===!1)return}},t.WalkontableCellRange=d,p.prototype.offsetted=function(t){return t+this.offset},p.prototype.unOffsetted=function(t){return t-this.offset},p.prototype.renderedToSource=function(t){return this.offsetted(t)},p.prototype.sourceToRendered=function(t){return this.unOffsetted(t)},p.prototype.offsettedTH=function(t){return t-this.countTH},p.prototype.unOffsettedTH=function(t){return t+this.countTH},p.prototype.visibleRowHeadedColumnToSourceColumn=function(t){return this.renderedToSource(this.offsettedTH(t))},p.prototype.sourceColumnToVisibleRowHeadedColumn=function(t){return this.unOffsettedTH(this.sourceToRendered(t))},f.prototype.getContainerSize=function(){return"function"==typeof this.containerSizeFn?this.containerSizeFn():this.containerSizeFn},f.prototype.getSize=function(t){return this.cellSizes[t]+(this.cellStretch[t]||0)},f.prototype.stretch=function(){var t=this.getContainerSize(),e=0;if(this.remainingSize=this.cellSizesSum-t,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var i,n=t/this.cellSizesSum;e<this.cellCount-1;)i=Math.floor(n*this.cellSizes[e]),this.remainingSize+=i-this.cellSizes[e],this.cellStretch[e]=i-this.cellSizes[e],e++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&1/0!==t&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},f.prototype.countVisible=function(){return this.visibleCellCount},f.prototype.isLastIncomplete=function(){var t=this.instance.wtTable.getFirstVisibleRow(),i=this.instance.wtTable.getLastVisibleColumn(),n=this.instance.wtTable.getCell(new u(t,i)),o=e.Dom.offset(n),r=e.Dom.outerWidth(n),s=o.left+r,a=this.instance.wtScrollbars.vertical.getScrollPosition(),l=this.instance.wtViewport.getViewportWidth(),h=a+l;return h>=s},m.prototype.draw=function(t){return this.drawInterrupted=!1,t||e.Dom.isVisible(this.wtTable.TABLE)?(this.wtTable.draw(t),this):void(this.drawInterrupted=!0)},m.prototype.getCell=function(t,e){if(e){var i=this.wtSettings.getSetting("fixedRowsTop"),n=this.wtSettings.getSetting("fixedColumnsLeft");return t.row<i&&t.col<n?this.wtScrollbars.corner.clone.wtTable.getCell(t):t.row<i?this.wtScrollbars.vertical.clone.wtTable.getCell(t):t.col<n?this.wtScrollbars.horizontal.clone.wtTable.getCell(t):this.wtTable.getCell(t)}return this.wtTable.getCell(t)},m.prototype.update=function(t,e){return this.wtSettings.update(t,e)},m.prototype.scrollVertical=function(t){return this.wtScrollbars.vertical.scrollTo(t),this.getSetting("onScrollVertically"),this},m.prototype.scrollHorizontal=function(t){return this.wtScrollbars.horizontal.scrollTo(t),this.getSetting("onScrollHorizontally"),this},m.prototype.scrollViewport=function(t){return this.wtScroll.scrollViewport(t),this},m.prototype.getViewport=function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},m.prototype.getSetting=function(t,e,i,n,o){return this.wtSettings.getSetting(t,e,i,n,o)},m.prototype.hasSetting=function(t){return this.wtSettings.has(t)},m.prototype.destroy=function(){this.wtScrollbars.destroy(),this.wtEvent&&this.wtEvent.destroy()},g.prototype=new h,g.prototype.destroy=function(){h.prototype.destroy.call(this),clearTimeout(this.lastTimeout)},v.prototype.parentCell=function(t){var i={},n=this.instance.wtTable.TABLE,o=e.Dom.closest(t,["TD","TH"],n);return o&&e.Dom.isChildOf(o,n)?(i.coords=this.instance.wtTable.getCoords(o),i.TD=o):e.Dom.hasClass(t,"wtBorder")&&e.Dom.hasClass(t,"current")?(i.coords=this.instance.selections.current.cellRange.highlight,i.TD=this.instance.wtTable.getCell(i.coords)):e.Dom.hasClass(t,"wtBorder")&&e.Dom.hasClass(t,"area")&&this.instance.selections.area.cellRange&&(i.coords=this.instance.selections.area.cellRange.to,i.TD=this.instance.wtTable.getCell(i.coords)),i},t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),t.getComputedStyle||!function(){var e,i={getPropertyValue:function(t){return"float"==t&&(t="styleFloat"),e.currentStyle[t.toUpperCase()]||null}};t.getComputedStyle=function(t){return e=t,i}}(),!String.prototype.trim){var se=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(se,"")}}b.prototype.offsetted=function(t){return t+this.offset},b.prototype.unOffsetted=function(t){return t-this.offset},b.prototype.renderedToSource=function(t){return this.offsetted(t)},b.prototype.sourceToRendered=function(t){return this.unOffsetted(t)},b.prototype.offsettedTH=function(t){return t-this.countTH},b.prototype.visibleColHeadedRowToSourceRow=function(t){return this.renderedToSource(this.offsettedTH(t))},b.prototype.sourceRowToVisibleColHeadedRow=function(t){return this.unOffsettedTH(this.sourceToRendered(t))},_.prototype.scrollViewport=function(t){if(this.instance.drawn){var e=this.instance.getSetting("totalRows"),i=this.instance.getSetting("totalColumns");if(t.row<0||t.row>e-1)throw new Error("row "+t.row+" does not exist");if(t.col<0||t.col>i-1)throw new Error("column "+t.col+" does not exist");t.row>this.instance.wtTable.getLastVisibleRow()?this.instance.wtScrollbars.vertical.scrollTo(t.row,!0):t.row>=this.instance.getSetting("fixedRowsTop")&&t.row<this.instance.wtTable.getFirstVisibleRow()&&this.instance.wtScrollbars.vertical.scrollTo(t.row),t.col>this.instance.wtTable.getLastVisibleColumn()?this.instance.wtScrollbars.horizontal.scrollTo(t.col,!0):t.col>=this.instance.getSetting("fixedColumnsLeft")&&t.col<this.instance.wtTable.getFirstVisibleColumn()&&this.instance.wtScrollbars.horizontal.scrollTo(t.col)}},w.prototype=new h,w.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var i,n,o=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var r=this.instance.wtTable.holder.getBoundingClientRect(),s=Math.ceil(r.top),a=Math.ceil(r.left),l=Math.ceil(r.bottom),h=Math.ceil(r.right);i=0>a&&h-o.offsetWidth>0?-a+"px":"0",n=0>s&&l-o.offsetHeight>0?-s+"px":"0"}else e.freezeOverlays||(i=this.instance.wtScrollbars.horizontal.getScrollPosition()+"px",n=this.instance.wtScrollbars.vertical.getScrollPosition()+"px");e.Dom.setOverlayPosition(o,i,n),o.style.width=e.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px",o.style.height=e.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},x.prototype=new h,x.prototype.resetFixedPosition=function(){var i,n;if(this.instance.wtTable.holder.parentNode){var o=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var r=this.instance.wtTable.holder.getBoundingClientRect(),s=Math.ceil(r.left),a=Math.ceil(r.right);i=0>s&&a-o.offsetWidth>0?-s+"px":"0",n=this.instance.wtTable.hider.style.top}else e.freezeOverlays||(i=this.getScrollPosition()+"px",n=this.instance.wtTable.hider.style.top);e.Dom.setOverlayPosition(o,i,n),o.style.height=e.Dom.outerHeight(this.clone.wtTable.TABLE)+"px",o.style.width=e.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px"}},x.prototype.refresh=function(t){this.applyToDOM(),h.prototype.refresh.call(this,t)},x.prototype.getScrollPosition=function(){return e.Dom.getScrollLeft(this.scrollHandler)},x.prototype.setScrollPosition=function(i){this.scrollHandler===t?t.scrollTo(i,e.Dom.getWindowScrollTop()):this.scrollHandler.scrollLeft=i},x.prototype.onScroll=function(){this.instance.getSetting("onScrollHorizontally")},x.prototype.sumCellSizes=function(t,e){for(var i=0;e>t;)i+=this.instance.wtTable.getStretchedColumnWidth(t)||this.instance.wtSettings.defaultColumnWidth,t++;return i},x.prototype.applyToDOM=function(){var t=this.instance.getSetting("totalColumns"),e=this.instance.wtViewport.getRowHeaderWidth();if(this.fixedContainer.style.width=e+this.sumCellSizes(0,t)+"px","number"==typeof this.instance.wtViewport.columnsRenderCalculator.startPosition)this.fixed.style.left=this.instance.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the columnsRenderCalculator");this.fixed.style.left="0"}this.fixed.style.right=""},x.prototype.scrollTo=function(t,e){var i=this.getTableParentOffset();if(e)i+=this.sumCellSizes(0,t+1),i-=this.instance.wtViewport.getViewportWidth();else{var n=this.instance.getSetting("fixedColumnsLeft");i+=this.sumCellSizes(n,t)}this.setScrollPosition(i)},x.prototype.getTableParentOffset=function(){return this.scrollHandler===t?this.instance.wtTable.holderOffset.left:0},C.prototype=new h,C.prototype.resetFixedPosition=function(){var i,n;if(this.instance.wtTable.holder.parentNode){var o=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){var r=this.instance.wtTable.holder.getBoundingClientRect(),s=Math.ceil(r.top),a=Math.ceil(r.bottom);i=this.instance.wtTable.hider.style.left,n=0>s&&a-o.offsetHeight>0?-s+"px":"0"}else e.freezeOverlays||(n=this.getScrollPosition()+"px",i=this.instance.wtTable.hider.style.left);e.Dom.setOverlayPosition(o,i,n),o.style.width=this.instance.wtScrollbars.horizontal.scrollHandler===t?this.instance.wtViewport.getWorkspaceActualWidth()+"px":e.Dom.outerWidth(this.clone.wtTable.TABLE)+"px",o.style.height=e.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},C.prototype.getScrollPosition=function(){return e.Dom.getScrollTop(this.scrollHandler)},C.prototype.setScrollPosition=function(i){this.scrollHandler===t?t.scrollTo(e.Dom.getWindowScrollLeft(),i):this.scrollHandler.scrollTop=i},C.prototype.onScroll=function(){this.instance.getSetting("onScrollVertically")},C.prototype.sumCellSizes=function(t,e){for(var i=0;e>t;)i+=this.instance.wtTable.getRowHeight(t)||this.instance.wtSettings.settings.defaultRowHeight,t++;return i},C.prototype.refresh=function(t){this.applyToDOM(),h.prototype.refresh.call(this,t)},C.prototype.applyToDOM=function(){var t=this.instance.getSetting("totalRows"),e=this.instance.wtViewport.getColumnHeaderHeight();if(this.fixedContainer.style.height=e+this.sumCellSizes(0,t)+"px","number"==typeof this.instance.wtViewport.rowsRenderCalculator.startPosition)this.fixed.style.top=this.instance.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the rowsRenderCalculator");this.fixed.style.top="0"}this.fixed.style.bottom=""},C.prototype.scrollTo=function(t,e){var i=this.getTableParentOffset();if(e)i+=this.sumCellSizes(0,t+1),i-=this.instance.wtViewport.getViewportHeight(),i+=1;else{var n=this.instance.getSetting("fixedRowsTop");i+=this.sumCellSizes(n,t)}this.setScrollPosition(i)},C.prototype.getTableParentOffset=function(){return this.scrollHandler===t?this.instance.wtTable.holderOffset.top:0},k.prototype.registerListeners=function(){var i=this;this.refreshAll=function(){if(i.instance.drawn){if(!i.instance.wtTable.holder.parentNode)return void i.destroy();i.instance.draw(!0),i.vertical.onScroll(),i.horizontal.onScroll()}};var n=e.eventManager(i.instance);n.addEventListener(this.vertical.scrollHandler,"scroll",this.refreshAll),this.vertical.scrollHandler!==this.horizontal.scrollHandler&&n.addEventListener(this.horizontal.scrollHandler,"scroll",this.refreshAll),this.vertical.scrollHandler!==t&&this.horizontal.scrollHandler!==t&&n.addEventListener(t,"scroll",this.refreshAll)},k.prototype.destroy=function(){var i=e.eventManager(this.instance);this.vertical&&(this.vertical.destroy(),i.removeEventListener(this.vertical.scrollHandler,"scroll",this.refreshAll)),this.horizontal&&(this.horizontal.destroy(),i.removeEventListener(this.horizontal.scrollHandler,"scroll",this.refreshAll)),i.removeEventListener(t,"scroll",this.refreshAll),this.corner&&this.corner.destroy(),this.debug&&this.debug.destroy()},k.prototype.refresh=function(t){this.horizontal&&this.horizontal.refresh(t),this.vertical&&this.vertical.refresh(t),this.corner&&this.corner.refresh(t),this.debug&&this.debug.refresh(t)},k.prototype.applyToDOM=function(){this.horizontal&&this.horizontal.applyToDOM(),this.vertical&&this.vertical.applyToDOM()},S.prototype.getBorder=function(t){return this.instanceBorders[t.guid]?this.instanceBorders[t.guid]:void(this.instanceBorders[t.guid]=new c(t,this.settings))},S.prototype.isEmpty=function(){return null===this.cellRange},S.prototype.add=function(t){this.isEmpty()?this.cellRange=new d(t,t,t):this.cellRange.expand(t)},S.prototype.replace=function(t,e){if(!this.isEmpty()){if(this.cellRange.from.isEqual(t))return this.cellRange.from=e,!0;if(this.cellRange.to.isEqual(t))return this.cellRange.to=e,!0}return!1},S.prototype.clear=function(){this.cellRange=null},S.prototype.getCorners=function(){var t=this.cellRange.getTopLeftCorner(),e=this.cellRange.getBottomRightCorner();return[t.row,t.col,e.row,e.col]},S.prototype.addClassAtCoords=function(t,i,n,o){var r=t.wtTable.getCell(new u(i,n));"object"==typeof r&&e.Dom.addClass(r,o)},S.prototype.draw=function(t){var i,n,o,r,s,a=this,l=t.wtTable.getRenderedRowsCount(),h=t.wtTable.getRenderedColumnsCount();if(this.isEmpty())return void(this.settings.border&&(r=this.getBorder(t),r&&r.disappear()));i=this.getCorners();for(var c=0;h>c;c++)o=t.wtTable.columnFilter.renderedToSource(c),o>=i[1]&&o<=i[3]&&(s=t.wtTable.getColumnHeader(o),s&&a.settings.highlightColumnClassName&&e.Dom.addClass(s,a.settings.highlightColumnClassName));for(var u=0;l>u;u++){n=t.wtTable.rowFilter.renderedToSource(u),n>=i[0]&&n<=i[2]&&(s=t.wtTable.getRowHeader(n),s&&a.settings.highlightRowClassName&&e.Dom.addClass(s,a.settings.highlightRowClassName));for(var c=0;h>c;c++)o=t.wtTable.columnFilter.renderedToSource(c),n>=i[0]&&n<=i[2]&&o>=i[1]&&o<=i[3]?a.settings.className&&a.addClassAtCoords(t,n,o,a.settings.className):n>=i[0]&&n<=i[2]?a.settings.highlightRowClassName&&a.addClassAtCoords(t,n,o,a.settings.highlightRowClassName):o>=i[1]&&o<=i[3]&&a.settings.highlightColumnClassName&&a.addClassAtCoords(t,n,o,a.settings.highlightColumnClassName)}t.getSetting("onBeforeDrawBorders",i,this.settings.className),this.settings.border&&(r=this.getBorder(t),r&&r.appear(i))},T.prototype.update=function(t,e){if(void 0===e)for(var i in t)t.hasOwnProperty(i)&&(this.settings[i]=t[i]);else this.settings[t]=e;return this.instance},T.prototype.getSetting=function(t,e,i,n,o){return"function"==typeof this.settings[t]?this.settings[t](e,i,n,o):void 0!==e&&Array.isArray(this.settings[t])?this.settings[t][e]:this.settings[t]},T.prototype.has=function(t){return!!this.settings[t]},P.prototype.isWorkingOnClone=function(){return!!this.instance.cloneSource},P.prototype.draw=function(t){if(this.isWorkingOnClone()||(this.holderOffset=e.Dom.offset(this.holder),t=this.instance.wtViewport.createRenderCalculators(t)),t)this.isWorkingOnClone()||this.instance.wtViewport.createVisibleCalculators(),this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0);else{this.tableOffset=this.isWorkingOnClone()?this.instance.cloneSource.wtTable.tableOffset:e.Dom.offset(this.TABLE);var i;i=this.instance.cloneOverlay instanceof g||this.instance.cloneOverlay instanceof C||this.instance.cloneOverlay instanceof w?0:this.instance.wtViewport.rowsRenderCalculator.startRow;var n;n=this.instance.cloneOverlay instanceof g||this.instance.cloneOverlay instanceof x||this.instance.cloneOverlay instanceof w?0:this.instance.wtViewport.columnsRenderCalculator.startColumn,this.rowFilter=new b(i,this.instance.getSetting("totalRows"),this.instance.getSetting("columnHeaders").length),this.columnFilter=new p(n,this.instance.getSetting("totalColumns"),this.instance.getSetting("rowHeaders").length),this._doDraw()}return this.refreshSelections(t),this.isWorkingOnClone()||(this.instance.wtScrollbars.vertical.resetFixedPosition(),this.instance.wtScrollbars.horizontal.resetFixedPosition(),this.instance.wtScrollbars.corner.resetFixedPosition()),this.instance.drawn=!0,this},P.prototype._doDraw=function(){var t=new E(this);t.render()},P.prototype.removeClassFromCells=function(t){for(var i=this.TABLE.querySelectorAll("."+t),n=0,o=i.length;o>n;n++)e.Dom.removeClass(i[n],t)},P.prototype.refreshSelections=function(t){var e,i;if(this.instance.selections){if(i=this.instance.selections.length,t)for(e=0;i>e;e++)this.instance.selections[e].settings.className&&this.removeClassFromCells(this.instance.selections[e].settings.className),this.instance.selections[e].settings.highlightRowClassName&&this.removeClassFromCells(this.instance.selections[e].settings.highlightRowClassName),this.instance.selections[e].settings.highlightColumnClassName&&this.removeClassFromCells(this.instance.selections[e].settings.highlightColumnClassName);for(e=0;i>e;e++)this.instance.selections[e].draw(this.instance,t)}},P.prototype.getCell=function(t){if(this.isRowBeforeRenderedRows(t.row))return-1;if(this.isRowAfterRenderedRows(t.row))return-2;var e=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t.row)];return e?e.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t.col)]:void 0},P.prototype.getColumnHeader=function(t,e){e||(e=0);var i=this.THEAD.childNodes[e];return i?i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t)]:void 0},P.prototype.getRowHeader=function(t){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var e=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)];return e?e.childNodes[0]:void 0},P.prototype.getCoords=function(t){var i=t.parentNode,n=e.Dom.index(i);return n=i.parentNode===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(n):this.rowFilter.renderedToSource(n),new u(n,this.columnFilter.visibleRowHeadedColumnToSourceColumn(t.cellIndex))},P.prototype.getTrForRow=function(t){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)]},P.prototype.getFirstRenderedRow=function(){return this.instance.wtViewport.rowsRenderCalculator.startRow
},P.prototype.getFirstVisibleRow=function(){return this.instance.wtViewport.rowsVisibleCalculator.startRow},P.prototype.getFirstRenderedColumn=function(){return this.instance.wtViewport.columnsRenderCalculator.startColumn},P.prototype.getFirstVisibleColumn=function(){return this.instance.wtViewport.columnsVisibleCalculator.startColumn},P.prototype.getLastRenderedRow=function(){return this.instance.wtViewport.rowsRenderCalculator.endRow},P.prototype.getLastVisibleRow=function(){return this.instance.wtViewport.rowsVisibleCalculator.endRow},P.prototype.getLastRenderedColumn=function(){return this.instance.wtViewport.columnsRenderCalculator.endColumn},P.prototype.getLastVisibleColumn=function(){return this.instance.wtViewport.columnsVisibleCalculator.endColumn},P.prototype.isRowBeforeRenderedRows=function(t){return this.rowFilter.sourceToRendered(t)<0&&t>=0},P.prototype.isRowAfterViewport=function(t){return t>this.getLastVisibleRow()},P.prototype.isRowAfterRenderedRows=function(t){return t>this.getLastRenderedRow()},P.prototype.isColumnBeforeViewport=function(t){return this.columnFilter.sourceToRendered(t)<0&&t>=0},P.prototype.isColumnAfterViewport=function(t){return t>this.getLastVisibleColumn()},P.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.getLastRenderedRow()},P.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn},P.prototype.getRenderedColumnsCount=function(){return this.instance.cloneOverlay instanceof g?this.instance.getSetting("totalColumns"):this.instance.cloneOverlay instanceof x||this.instance.cloneOverlay instanceof w?this.instance.getSetting("fixedColumnsLeft"):this.instance.wtViewport.columnsRenderCalculator.count},P.prototype.getRenderedRowsCount=function(){return this.instance.cloneOverlay instanceof g?this.instance.getSetting("totalRows"):this.instance.cloneOverlay instanceof C||this.instance.cloneOverlay instanceof w?this.instance.getSetting("fixedRowsTop"):this.instance.wtViewport.rowsRenderCalculator.count},P.prototype.getVisibleRowsCount=function(){return this.instance.wtViewport.rowsVisibleCalculator.count},P.prototype.allRowsInViewport=function(){return this.instance.getSetting("totalRows")==this.getVisibleRowsCount()},P.prototype.getRowHeight=function(t){var e=this.instance.wtSettings.settings.rowHeight(t),i=this.instance.wtViewport.oversizedRows[t];return void 0!==i&&(e=e?Math.max(e,i):i),e},P.prototype.getColumnHeaderHeight=function(t){var e=this.instance.wtSettings.settings.defaultRowHeight,i=this.instance.wtViewport.oversizedColumnHeaders[t];return void 0!==i&&(e=e?Math.max(e,i):i),e},P.prototype.getVisibleColumnsCount=function(){return this.instance.wtViewport.columnsVisibleCalculator.count},P.prototype.allColumnsInViewport=function(){return this.instance.getSetting("totalColumns")==this.getVisibleColumnsCount()},P.prototype.getColumnWidth=function(t){var e=this.instance.wtSettings.settings.columnWidth;"function"==typeof e?e=e(t):"object"==typeof e&&(e=e[t]);var i=this.instance.wtViewport.oversizedCols[t];return void 0!==i&&(e=e?Math.max(e,i):i),e},P.prototype.getStretchedColumnWidth=function(t){var e,i=this.getColumnWidth(t)||this.instance.wtSettings.settings.defaultColumnWidth,n=this.instance.wtViewport.columnsRenderCalculator;return n&&(e=n.getStretchedColumnWidth(t,i),e&&(i=e)),i},E.prototype.render=function(){this.wtTable.isWorkingOnClone()||this.instance.getSetting("beforeDraw",!0),this.rowHeaders=this.instance.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.instance.getSetting("fixedRowsTop"),this.columnHeaders=this.instance.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var t,e,i=this.instance.getSetting("totalRows"),n=this.instance.getSetting("totalColumns"),o=!1,r=this.wtTable.getRenderedRowsCount();if(n>0&&(this.adjustAvailableNodes(),o=!0,this.renderColGroups(),this.renderColumnHeaders(),t=this.wtTable.getRenderedColumnsCount(),this.renderRows(i,r,t),this.wtTable.isWorkingOnClone()?this.adjustColumnHeaderHeights():(e=this.instance.wtViewport.getWorkspaceWidth(),this.instance.wtViewport.containerWidth=null),this.adjustColumnWidths(t)),o||this.adjustAvailableNodes(),this.removeRedundantRows(r),!this.wtTable.isWorkingOnClone()){if(this.markOversizedRows(),this.instance.wtViewport.createVisibleCalculators(),this.instance.wtScrollbars.applyToDOM(),e!==this.instance.wtViewport.getWorkspaceWidth()){this.instance.wtViewport.containerWidth=null;for(var s=this.wtTable.getFirstRenderedColumn(),a=this.wtTable.getLastRenderedColumn(),l=s;a>l;l++){var h=this.wtTable.getStretchedColumnWidth(l),c=this.columnFilter.sourceToRendered(l);this.COLGROUP.childNodes[c+this.rowHeaderCount].style.width=h+"px"}}this.instance.wtScrollbars.refresh(!1),this.instance.getSetting("onDraw",!0)}},E.prototype.removeRedundantRows=function(t){for(;this.wtTable.tbodyChildrenLength>t;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},E.prototype.renderRows=function(t,e,i){for(var n,o,r=0,s=this.rowFilter.renderedToSource(r),a=this.wtTable.isWorkingOnClone();t>s&&s>=0;){if(r>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==e&&r===e)break;if(o=this.getOrCreateTrForRow(r,o),this.renderRowHeaders(s,o),this.adjustColumns(o,i+this.rowHeaderCount),n=this.renderCells(s,o,i),a||this.resetOversizedRow(s),o.firstChild){var l=this.instance.wtTable.getRowHeight(s);o.firstChild.style.height=l?l+"px":""}r++,s=this.rowFilter.renderedToSource(r)}},E.prototype.resetOversizedRow=function(t){this.instance.wtViewport.oversizedRows&&this.instance.wtViewport.oversizedRows[t]&&(this.instance.wtViewport.oversizedRows[t]=void 0)},E.prototype.markOversizedRows=function(){for(var t,i,n,o,r=this.instance.wtTable.TBODY.childNodes.length;r;)r--,n=this.instance.wtTable.rowFilter.renderedToSource(r),t=this.instance.wtTable.getRowHeight(n),o=this.instance.wtTable.getTrForRow(n),i=e.Dom.innerHeight(o)-1,(!t&&this.instance.wtSettings.settings.defaultRowHeight<i||i>t)&&(this.instance.wtViewport.oversizedRows[n]=i)},E.prototype.adjustColumnHeaderHeights=function(){for(var t=this.instance.getSetting("columnHeaders"),e=0,i=t.length;i>e;e++)if(this.instance.wtViewport.oversizedColumnHeaders[e]){if(0===this.instance.wtTable.THEAD.childNodes[e].childNodes.length)return;this.instance.wtTable.THEAD.childNodes[e].childNodes[0].style.height=this.instance.wtViewport.oversizedColumnHeaders[e]+"px"}},E.prototype.markIfOversizedColumnHeader=function(t){var i,n,o,r,s=(0!==this.instance.wtTable.THEAD.childNodes.length?this.instance.wtTable.THEAD.childNodes[0].childNodes.length:0,this.instance.getSetting("columnHeaders")),a=s.length,l=a;for(i=this.instance.wtTable.columnFilter.renderedToSource(t);l;)l--,n=this.instance.wtTable.getColumnHeaderHeight(l),o=this.instance.wtTable.getColumnHeader(i,l),o&&(r=e.Dom.innerHeight(o)-1,(!n&&this.instance.wtSettings.settings.defaultRowHeight<r||r>n)&&(this.instance.wtViewport.oversizedColumnHeaders[l]=r))},E.prototype.renderCells=function(t,i,n){for(var o,r,s=0;n>s;s++)r=this.columnFilter.renderedToSource(s),o=0===s?i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(r)]:o.nextSibling,"TH"==o.nodeName&&(o=this.utils.replaceThWithTd(o,i)),e.Dom.hasClass(o,"hide")||(o.className=""),o.removeAttribute("style"),this.instance.wtSettings.settings.cellRenderer(t,r,o);return o},E.prototype.adjustColumnWidths=function(t){var e;this.instance.wtViewport.columnsRenderCalculator.refreshStretching(this.instance.wtViewport.getViewportWidth());for(var i=0;t>i;i++)e=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(i)),this.COLGROUP.childNodes[i+this.rowHeaderCount].style.width=e+"px"},E.prototype.appendToTbody=function(t){this.TBODY.appendChild(t),this.wtTable.tbodyChildrenLength++},E.prototype.getOrCreateTrForRow=function(t,e){var i;return t>=this.wtTable.tbodyChildrenLength?(i=this.createRow(),this.appendToTbody(i)):i=0===t?this.TBODY.firstChild:e.nextSibling,i},E.prototype.createRow=function(){for(var t=document.createElement("TR"),e=0;e<this.rowHeaderCount;e++)t.appendChild(document.createElement("TH"));return t},E.prototype.renderRowHeader=function(t,e,i){i.className="",i.removeAttribute("style"),this.rowHeaders[e](t,i,e)},E.prototype.renderRowHeaders=function(t,e){for(var i=e.firstChild,n=0;n<this.rowHeaderCount;n++)i?"TD"==i.nodeName&&(i=this.utils.replaceTdWithTh(i,e)):(i=document.createElement("TH"),e.appendChild(i)),this.renderRowHeader(t,n,i),i=i.nextSibling},E.prototype.adjustAvailableNodes=function(){this.adjustColGroups(),this.adjustThead()},E.prototype.renderColumnHeaders=function(){if(this.columnHeaderCount)for(var t,e,i=this.wtTable.getRenderedColumnsCount(),n=0;n<this.columnHeaderCount;n++)for(t=this.getTrForColumnHeaders(n),e=-1*this.rowHeaderCount;i>e;e++){var o=this.columnFilter.renderedToSource(e);this.renderColumnHeader(n,o,t.childNodes[e+this.rowHeaderCount]),this.wtTable.isWorkingOnClone()||this.markIfOversizedColumnHeader(e)}},E.prototype.adjustColGroups=function(){for(var t=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<t+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>t+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--},E.prototype.adjustThead=function(){var t=this.wtTable.getRenderedColumnsCount(),i=this.THEAD.firstChild;if(this.columnHeaders.length){for(var n=0,o=this.columnHeaders.length;o>n;n++){for(i=this.THEAD.childNodes[n],i||(i=document.createElement("TR"),this.THEAD.appendChild(i)),this.theadChildrenLength=i.childNodes.length;this.theadChildrenLength<t+this.rowHeaderCount;)i.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>t+this.rowHeaderCount;)i.removeChild(i.lastChild),this.theadChildrenLength--}var r=this.THEAD.childNodes.length;if(r>this.columnHeaders.length)for(var n=this.columnHeaders.length;r>n;n++)this.THEAD.removeChild(this.THEAD.lastChild)}else i&&e.Dom.empty(i)},E.prototype.getTrForColumnHeaders=function(t){var e=this.THEAD.childNodes[t];return e},E.prototype.renderColumnHeader=function(t,e,i){return i.className="",i.removeAttribute("style"),this.columnHeaders[t](e,i,t)},E.prototype.renderColGroups=function(){for(var t=0;t<this.wtTable.colgroupChildrenLength;t++)t<this.rowHeaderCount?e.Dom.addClass(this.COLGROUP.childNodes[t],"rowHeader"):e.Dom.removeClass(this.COLGROUP.childNodes[t],"rowHeader")},E.prototype.adjustColumns=function(t,e){for(var i=t.childNodes.length;e>i;){var n=document.createElement("TD");t.appendChild(n),i++}for(;i>e;)t.removeChild(t.lastChild),i--},E.prototype.removeRedundantColumns=function(t){for(;this.wtTable.tbodyChildrenLength>t;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},E.utils={},E.utils.replaceTdWithTh=function(t,e){var i;return i=document.createElement("TH"),e.insertBefore(i,t),e.removeChild(t),i},E.utils.replaceThWithTd=function(t,e){var i=document.createElement("TD");return e.insertBefore(i,t),e.removeChild(t),i},D.prototype.getWorkspaceHeight=function(){var i=this.instance.wtScrollbars.vertical.scrollHandler;if(i===t)return document.documentElement.clientHeight;var n=e.Dom.outerHeight(i),o=n>0&&i.clientHeight>0?i.clientHeight:1/0;return o},D.prototype.getWorkspaceWidth=function(){var i,n,o=this.instance.getSetting("totalColumns"),r=this.instance.wtScrollbars.horizontal.scrollHandler,s=this.instance.getSetting("stretchH");return i=e.freezeOverlays?Math.min(document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth):Math.min(this.getContainerFillWidth(),document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth),r===t&&o>0&&this.sumColumnWidths(0,o-1)>i?document.documentElement.clientWidth:r!==t&&(n=this.instance.wtScrollbars.horizontal.scrollHandler.style.overflow,"scroll"==n||"hidden"==n||"auto"==n)?Math.max(i,r.clientWidth):"none"!==s&&s?i:Math.max(i,e.Dom.outerWidth(this.instance.wtTable.TABLE))},D.prototype.sumColumnWidths=function(t,e){for(var i=0;e>t;)i+=this.instance.wtTable.getColumnWidth(t)||this.instance.wtSettings.defaultColumnWidth,t++;return i},D.prototype.getContainerFillWidth=function(){if(this.containerWidth)return this.containerWidth;for(var t,e,i=this.instance.wtTable.holder;i.parentNode!=document.body&&null!=i.parentNode&&-1===i.className.indexOf("handsontable");)i=i.parentNode;return e=document.createElement("DIV"),e.style.width="100%",e.style.height="1px",i.appendChild(e),t=e.offsetWidth,this.containerWidth=t,i.removeChild(e),t},D.prototype.getWorkspaceOffset=function(){return e.Dom.offset(this.instance.wtTable.TABLE)},D.prototype.getWorkspaceActualHeight=function(){return e.Dom.outerHeight(this.instance.wtTable.TABLE)},D.prototype.getWorkspaceActualWidth=function(){return e.Dom.outerWidth(this.instance.wtTable.TABLE)||e.Dom.outerWidth(this.instance.wtTable.TBODY)||e.Dom.outerWidth(this.instance.wtTable.THEAD)},D.prototype.getColumnHeaderHeight=function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=e.Dom.outerHeight(this.instance.wtTable.THEAD)),this.columnHeaderHeight},D.prototype.getViewportHeight=function(){var t=this.getWorkspaceHeight();if(1/0===t)return t;var e=this.getColumnHeaderHeight();return e>0&&(t-=e),t},D.prototype.getRowHeaderWidth=function(){if(this.instance.cloneSource)return this.instance.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var t=this.instance.getSetting("rowHeaders");if(t.length){var i=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var n=0,o=t.length;o>n;n++)i?(this.rowHeaderWidth+=e.Dom.outerWidth(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},D.prototype.getViewportWidth=function(){var t,e=this.getWorkspaceWidth();return 1/0===e?e:(t=this.getRowHeaderWidth(),t>0?e-t:e)},D.prototype.createRowsCalculator=function(t){this.rowHeaderWidth=0/0;var e;e=this.instance.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight();var i=this.instance.wtScrollbars.vertical.getScrollPosition()-this.instance.wtScrollbars.vertical.getTableParentOffset();0>i&&(i=0);var n=this.instance.getSetting("fixedRowsTop");if(n){var o=this.instance.wtScrollbars.vertical.sumCellSizes(0,n);i+=o,e-=o}var r=this;return new M(e,i,this.instance.getSetting("totalRows"),function(t){return r.instance.wtTable.getRowHeight(t)},t?null:this.instance.wtSettings.settings.viewportRowCalculatorOverride,t?!0:!1)},D.prototype.createColumnsCalculator=function(t){this.columnHeaderHeight=0/0;var e=this.getViewportWidth(),i=this.instance.wtScrollbars.horizontal.getScrollPosition()-this.instance.wtScrollbars.vertical.getTableParentOffset();0>i&&(i=0);var n=this.instance.getSetting("fixedColumnsLeft");if(n){var o=this.instance.wtScrollbars.horizontal.sumCellSizes(0,n);i+=o,e-=o}var r=this;return new L(e,i,this.instance.getSetting("totalColumns"),function(t){return r.instance.wtTable.getColumnWidth(t)},t?null:this.instance.wtSettings.settings.viewportColumnCalculatorOverride,t?!0:!1,this.instance.getSetting("stretchH"))},D.prototype.createRenderCalculators=function(t){if(t){var e=this.createRowsCalculator(!0),i=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(e)&&this.areAllProposedVisibleColumnsAlreadyRendered(i)||(t=!1)}return t||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,t},D.prototype.createVisibleCalculators=function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)},D.prototype.areAllProposedVisibleRowsAlreadyRendered=function(t){return this.rowsVisibleCalculator?t.startRow<this.rowsRenderCalculator.startRow||t.startRow===this.rowsRenderCalculator.startRow&&t.startRow>0?!1:t.endRow>this.rowsRenderCalculator.endRow||t.endRow===this.rowsRenderCalculator.endRow&&t.endRow<this.instance.getSetting("totalRows")-1?!1:!0:!1},D.prototype.areAllProposedVisibleColumnsAlreadyRendered=function(t){return this.columnsVisibleCalculator?t.startColumn<this.columnsRenderCalculator.startColumn||t.startColumn===this.columnsRenderCalculator.startColumn&&t.startColumn>0?!1:t.endColumn>this.columnsRenderCalculator.endColumn||t.endColumn===this.columnsRenderCalculator.endColumn&&t.endColumn<this.instance.getSetting("totalColumns")-1?!1:!0:!1},t.jQuery&&!function(t,e,i){e.fn.handsontable=function(t){var e,n,o,r,s,a=this.first(),l=a.data("handsontable");if("string"!=typeof t)return s=t||{},l?l.updateSettings(s):(l=new i.Core(a[0],s),a.data("handsontable",l),l.init()),a;if(o=[],arguments.length>1)for(e=1,n=arguments.length;n>e;e++)o.push(arguments[e]);if(l){if("undefined"==typeof l[t])throw new Error("Handsontable do not provide action: "+t);r=l[t].apply(l,o),"destroy"===t&&a.removeData()}return r}}(t,jQuery,e)}(window,Handsontable),/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
function(){function t(t){this._value=t}function e(t,e,i,n){var o,r,s=Math.pow(10,e);return r=(i(t*s)/s).toFixed(e),n&&(o=new RegExp("0{1,"+n+"}$"),r=r.replace(o,"")),r}function i(t,e,i){var n;return n=e.indexOf("$")>-1?o(t,e,i):e.indexOf("%")>-1?r(t,e,i):e.indexOf(":")>-1?s(t,e):l(t._value,e,i)}function n(t,e){var i,n,o,r,s,l=e,h=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(e.indexOf(":")>-1)t._value=a(e);else if(e===g)t._value=0;else{for("."!==f[m].delimiters.decimal&&(e=e.replace(/\./g,"").replace(f[m].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+f[m].abbreviations.thousand+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+f[m].abbreviations.million+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+f[m].abbreviations.billion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+f[m].abbreviations.trillion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),s=0;s<=h.length&&!(c=e.indexOf(h[s])>-1?Math.pow(1024,s+1):!1);s++);t._value=(c?c:1)*(l.match(i)?Math.pow(10,3):1)*(l.match(n)?Math.pow(10,6):1)*(l.match(o)?Math.pow(10,9):1)*(l.match(r)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=c?Math.ceil(t._value):t._value}return t._value}function o(t,e,i){var n,o,r=e.indexOf("$"),s=e.indexOf("("),a=e.indexOf("-"),h="";return e.indexOf(" $")>-1?(h=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(h=" ",e=e.replace("$ ","")):e=e.replace("$",""),o=l(t._value,e,i),1>=r?o.indexOf("(")>-1||o.indexOf("-")>-1?(o=o.split(""),n=1,(s>r||a>r)&&(n=0),o.splice(n,0,f[m].currency.symbol+h),o=o.join("")):o=f[m].currency.symbol+h+o:o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,h+f[m].currency.symbol),o=o.join("")):o=o+h+f[m].currency.symbol,o}function r(t,e,i){var n,o="",r=100*t._value;return e.indexOf(" %")>-1?(o=" ",e=e.replace(" %","")):e=e.replace("%",""),n=l(r,e,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,o+"%"),n=n.join("")):n=n+o+"%",n}function s(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*i);return e+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function a(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function l(t,i,n){var o,r,s,a,l,h,c=!1,u=!1,d=!1,p="",v=!1,y=!1,b=!1,_=!1,w=!1,x="",C="",k=Math.abs(t),S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",P=!1;if(0===t&&null!==g)return g;if(i.indexOf("(")>-1?(c=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(u=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(v=i.indexOf("aK")>=0,y=i.indexOf("aM")>=0,b=i.indexOf("aB")>=0,_=i.indexOf("aT")>=0,w=v||y||b||_,i.indexOf(" a")>-1?(p=" ",i=i.replace(" a","")):i=i.replace("a",""),k>=Math.pow(10,12)&&!w||_?(p+=f[m].abbreviations.trillion,t/=Math.pow(10,12)):k<Math.pow(10,12)&&k>=Math.pow(10,9)&&!w||b?(p+=f[m].abbreviations.billion,t/=Math.pow(10,9)):k<Math.pow(10,9)&&k>=Math.pow(10,6)&&!w||y?(p+=f[m].abbreviations.million,t/=Math.pow(10,6)):(k<Math.pow(10,6)&&k>=Math.pow(10,3)&&!w||v)&&(p+=f[m].abbreviations.thousand,t/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(x=" ",i=i.replace(" b","")):i=i.replace("b",""),s=0;s<=S.length;s++)if(o=Math.pow(1024,s),r=Math.pow(1024,s+1),t>=o&&r>t){x+=S[s],o>0&&(t/=o);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(C=" ",i=i.replace(" o","")):i=i.replace("o",""),C+=f[m].ordinal(t)),i.indexOf("[.]")>-1&&(d=!0,i=i.replace("[.]",".")),a=t.toString().split(".")[0],l=i.split(".")[1],h=i.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),T=e(t,l[0].length+l[1].length,n,l[1].length)):T=e(t,l.length,n),a=T.split(".")[0],T=T.split(".")[1].length?f[m].delimiters.decimal+T.split(".")[1]:"",d&&0===Number(T.slice(1))&&(T="")):a=e(t,null,n),a.indexOf("-")>-1&&(a=a.slice(1),P=!0),h>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f[m].delimiters.thousands)),0===i.indexOf(".")&&(a=""),(c&&P?"(":"")+(!c&&P?"-":"")+(!P&&u?"+":"")+a+T+(C?C:"")+(p?p:"")+(x?x:"")+(c&&P?")":"")}function h(t,e){f[t]=e}function c(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function u(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var i=c(t),n=c(e);return i>n?i:n},-1/0)}var d,p="1.5.3",f={},m="en",g=null,v="0,0",y="undefined"!=typeof module&&module.exports;d=function(e){return d.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=d.fn.unformat(e)),new t(Number(e))},d.version=p,d.isNumeral=function(e){return e instanceof t},d.language=function(t,e){if(!t)return m;if(t=t.toLowerCase(),t&&!e){if(!f[t])throw new Error("Unknown language : "+t);m=t}return(e||!f[t])&&h(t,e),d},d.languageData=function(t){if(!t)return f[m];if(!f[t])throw new Error("Unknown language : "+t);return f[t]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(t){g="string"==typeof t?t:null},d.defaultFormat=function(t){v="string"==typeof t?t:"0.0"},d.validate=function(t,e){var i,n,o,r,s,a,l,h;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),""===t)return!1;t=t.replace(/^[+-]?/,"");try{l=d.languageData(e)}catch(c){l=d.languageData(d.language())}return o=l.currency.symbol,s=l.abbreviations,i=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,h=t.match(/^[^\d]+/),null!==h&&(t=t.substr(1),h[0]!==o)?!1:(h=t.match(/[^\d]+$/),null!==h&&(t=t.slice(0,-1),h[0]!==s.thousand&&h[0]!==s.million&&h[0]!==s.billion&&h[0]!==s.trillion)?!1:t.match(/^\d+$/)?!0:(a=new RegExp(n+"{2}"),t.match(/[^\d.,]/g)?!1:(r=t.split(i),r.length>2?!1:r.length<2?!!r[0].match(/^\d+.*\d$/)&&!r[0].match(a):1===r[0].length?!!r[0].match(/^\d+$/)&&!r[0].match(a)&&!!r[1].match(/^\d+$/):!!r[0].match(/^\d+.*\d$/)&&!r[0].match(a)&&!!r[1].match(/^\d+$/))))},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,n,o=this.length>>>0,r=!1;for(1<arguments.length&&(n=e,r=!0),i=0;o>i;++i)this.hasOwnProperty(i)&&(r?n=t(n,this[i],i,this):(n=this[i],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n}),d.fn=t.prototype={clone:function(){return d(this)},format:function(t,e){return i(this,t?t:v,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:n(this,t?t:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+i*e}var i=u.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e){return t-i*e}var i=u.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e){var i=u(t,e);return t*i*e*i/(i*i)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var i=u(t,e);return t*i/(e*i)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(d(this._value).subtract(t).value())}},y&&(module.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define([],function(){return d})}.call(this),/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
function(t,e,i){function n(i){var n=e.console;r[i]||(r[i]=!0,t.migrateWarnings.push(i),n&&n.warn&&!t.migrateMute&&(n.warn("JQMIGRATE: "+i),t.migrateTrace&&n.trace&&n.trace()))}function o(e,i,o,r){if(Object.defineProperty)try{return void Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return n(r),o},set:function(t){n(r),o=t}})}catch(s){}t._definePropertyBroken=!0,e[i]=o}var r={};t.migrateWarnings=[],t.migrateMute=!0,!t.migrateMute&&e.console&&e.console.log&&e.console.log("JQMIGRATE: Logging is active"),t.migrateTrace===i&&(t.migrateTrace=!0),t.migrateReset=function(){r={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&n("jQuery is not compatible with Quirks Mode");var s=t("<input/>",{size:1}).attr("size")&&t.attrFn,a=t.attr,l=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},h=t.attrHooks.value&&t.attrHooks.value.set||function(){return i},c=/^(?:input|button)$/i,u=/^[238]$/,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;o(t,"attrFn",s||{},"jQuery.attrFn is deprecated"),t.attr=function(e,o,r,l){var h=o.toLowerCase(),f=e&&e.nodeType;return l&&(a.length<4&&n("jQuery.fn.attr( props, pass ) is deprecated"),e&&!u.test(f)&&(s?o in s:t.isFunction(t.fn[o])))?t(e)[o](r):("type"===o&&r!==i&&c.test(e.nodeName)&&e.parentNode&&n("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[h]&&d.test(h)&&(t.attrHooks[h]={get:function(e,n){var o,r=t.prop(e,n);return r===!0||"boolean"!=typeof r&&(o=e.getAttributeNode(n))&&o.nodeValue!==!1?n.toLowerCase():i},set:function(e,i,n){var o;return i===!1?t.removeAttr(e,n):(o=t.propFix[n]||n,o in e&&(e[o]=!0),e.setAttribute(n,n.toLowerCase())),n}},p.test(h)&&n("jQuery.fn.attr('"+h+"') may use property instead of attribute")),a.call(t,e,o,r))},t.attrHooks.value={get:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&n("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?h.apply(this,arguments):("input"!==i&&"option"!==i&&n("jQuery.fn.attr('value', val) no longer sets properties"),void(t.value=e))}};var f,m,g=t.fn.init,v=t.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;t.fn.init=function(e,i,o){var r;return e&&"string"==typeof e&&!t.isPlainObject(i)&&(r=y.exec(t.trim(e)))&&r[0]&&("<"!==e.charAt(0)&&n("$(html) HTML strings must start with '<' character"),r[3]&&n("$(html) HTML text after last tag is ignored"),"#"===r[0].charAt(0)&&(n("HTML string cannot start with a '#' character"),t.error("JQMIGRATE: Invalid selector string (XSS)")),i&&i.context&&(i=i.context),t.parseHTML)?g.call(this,t.parseHTML(r[2],i,!0),i,o):g.apply(this,arguments)},t.fn.init.prototype=t.fn,t.parseJSON=function(t){return t||null===t?v.apply(this,arguments):(n("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(f=t.uaMatch(navigator.userAgent),m={},f.browser&&(m[f.browser]=!0,m.version=f.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),t.browser=m),o(t,"browser",t.browser,"jQuery.browser is deprecated"),t.sub=function(){function e(t,i){return new e.fn.init(t,i)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,o){return o&&o instanceof t&&!(o instanceof e)&&(o=e(o)),t.fn.init.call(this,n,o,i)},e.fn.init.prototype=e.fn;var i=e(document);return n("jQuery.sub() is deprecated"),e},t.ajaxSetup({converters:{"text json":t.parseJSON}});var b=t.fn.data;t.fn.data=function(e){var o,r,s=this[0];return!s||"events"!==e||1!==arguments.length||(o=t.data(s,e),r=t._data(s,e),o!==i&&o!==r||r===i)?b.apply(this,arguments):(n("Use of jQuery.fn.data('events') is deprecated"),r)};var _=/\/(java|ecma)script/i,w=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return n("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},t.clean||(t.clean=function(e,i,o,r){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,n("jQuery.clean() is deprecated");var s,a,l,h,c=[];if(t.merge(c,t.buildFragment(e,i).childNodes),o)for(l=function(t){return!t.type||_.test(t.type)?r?r.push(t.parentNode?t.parentNode.removeChild(t):t):o.appendChild(t):void 0},s=0;null!=(a=c[s]);s++)t.nodeName(a,"script")&&l(a)||(o.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(h=t.grep(t.merge([],a.getElementsByTagName("script")),l),c.splice.apply(c,[s+1,0].concat(h)),s+=h.length));return c});var x=t.event.add,C=t.event.remove,k=t.event.trigger,S=t.fn.toggle,T=t.fn.live,P=t.fn.die,E="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=new RegExp("\\b(?:"+E+")\\b"),L=/(?:^|\s)hover(\.\S+|)\b/,M=function(e){return"string"!=typeof e||t.event.special.hover?e:(L.test(e)&&n("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(L,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&o(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,i,o,r){t!==document&&D.test(e)&&n("AJAX events should be attached to document: "+e),x.call(this,t,M(e||""),i,o,r)},t.event.remove=function(t,e,i,n,o){C.call(this,t,M(e)||"",i,n,o)},t.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return n("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},t.fn.toggle=function(e,i){if(!t.isFunction(e)||!t.isFunction(i))return S.apply(this,arguments);n("jQuery.fn.toggle(handler, handler...) is deprecated");var o=arguments,r=e.guid||t.guid++,s=0,a=function(i){var n=(t._data(this,"lastToggle"+e.guid)||0)%s;return t._data(this,"lastToggle"+e.guid,n+1),i.preventDefault(),o[n].apply(this,arguments)||!1};for(a.guid=r;s<o.length;)o[s++].guid=r;return this.click(a)},t.fn.live=function(e,i,o){return n("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(t(this.context).on(e,this.selector,i,o),this)},t.fn.die=function(e,i){return n("jQuery.fn.die() is deprecated"),P?P.apply(this,arguments):(t(this.context).off(e,this.selector||"**",i),this)},t.event.trigger=function(t,e,i,o){return i||D.test(t)||n("Global events are undocumented and deprecated"),k.call(this,t,e,i||document,o)},t.each(E.split("|"),function(e,i){t.event.special[i]={setup:function(){var e=this;return e!==document&&(t.event.add(document,i+"."+t.guid,function(){t.event.trigger(i,null,e,!0)}),t._data(this,i,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,i+"."+t._data(this,i)),!1}}})}(jQuery,window),/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function(t,e){function i(t){return"string"==typeof t}function n(t){var e=v.call(arguments,1);return function(){return t.apply(this,e.concat(v.call(arguments)))}}function o(t){return t.replace(/^[^#]*#?(.*)$/,"$1")}function r(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function s(n,o,r,s,a){var l,c,d,p,f;return s!==h?(d=r.match(n?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),f=d[3]||"",2===a&&i(s)?c=s.replace(n?L:D,""):(p=u(d[2]),s=i(s)?u[n?k:C](s):s,c=2===a?s:1===a?t.extend({},s,p):t.extend({},p,s),c=b(c),n&&(c=c.replace(g,y))),l=d[1]+(n?"#":c||!d[1]?"?":"")+c+f):l=o(r!==h?r:e[T][P]),l}function a(t,e,n){return e===h||"boolean"==typeof e?(n=e,e=b[t?k:C]()):e=i(e)?e.replace(t?L:D,""):e,u(e,n)}function l(e,n,o,r){return i(o)||"object"==typeof o||(r=o,o=n,n=h),this.each(function(){var i=t(this),s=n||m()[(this.nodeName||"").toLowerCase()]||"",a=s&&i.attr(s)||"";i.attr(s,b[e](a,o,r))})}var h,c,u,d,p,f,m,g,v=Array.prototype.slice,y=decodeURIComponent,b=t.param,_=t.bbq=t.bbq||{},w=t.event.special,x="hashchange",C="querystring",k="fragment",S="elemUrlAttr",T="location",P="href",E="src",D=/^.*\?|#.*$/g,L=/^.*\#/,M={};b[C]=n(s,0,r),b[k]=c=n(s,1,o),c.noEscape=function(e){e=e||"";var i=t.map(e.split(""),encodeURIComponent);g=new RegExp(i.join("|"),"g")},c.noEscape(",/"),t.deparam=u=function(e,i){var n={},o={"true":!0,"false":!1,"null":null};return t.each(e.replace(/\+/g," ").split("&"),function(e,r){var s,a=r.split("="),l=y(a[0]),c=n,u=0,d=l.split("]["),p=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[p])?(d[p]=d[p].replace(/\]$/,""),d=d.shift().split("[").concat(d),p=d.length-1):p=0,2===a.length)if(s=y(a[1]),i&&(s=s&&!isNaN(s)?+s:"undefined"===s?h:o[s]!==h?o[s]:s),p)for(;p>=u;u++)l=""===d[u]?c.length:d[u],c=c[l]=p>u?c[l]||(d[u+1]&&isNaN(d[u+1])?{}:[]):s;else t.isArray(n[l])?n[l].push(s):n[l]=n[l]!==h?[n[l],s]:s;else l&&(n[l]=i?h:"")}),n},u[C]=n(a,0),u[k]=d=n(a,1),t[S]||(t[S]=function(e){return t.extend(M,e)})({a:P,base:P,iframe:E,img:E,input:E,form:"action",link:P,script:E}),m=t[S],t.fn[C]=n(l,C),t.fn[k]=n(l,k),_.pushState=p=function(t,n){i(t)&&/^#/.test(t)&&n===h&&(n=2);var o=t!==h,r=c(e[T][P],o?t:{},o?n:2);e[T][P]=r+(/#/.test(r)?"":"#")},_.getState=f=function(t,e){return t===h||"boolean"==typeof t?d(t):d(e)[t]},_.removeState=function(e){var i={};e!==h&&(i=f(),t.each(t.isArray(e)?e:arguments,function(t,e){delete i[e]})),p(i,2)},w[x]=t.extend(w[x],{add:function(e){function i(t){var e=t[k]=c();t.getState=function(t,i){return t===h||"boolean"==typeof t?u(e,t):u(e,i)[t]},n.apply(this,arguments)}var n;return t.isFunction(e)?(n=e,i):(n=e.handler,void(e.handler=i))}})}(jQuery,this),/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function(t,e,i){function n(t){return t=t||e[s][l],t.replace(/^[^#]*#?(.*)$/,"$1")}var o,r=t.event.special,s="location",a="hashchange",l="href",h=t.browser,c=document.documentMode,u=h.msie&&(c===i||8>c),d="on"+a in e&&!u;t[a+"Delay"]=100,r[a]=t.extend(r[a],{setup:function(){return d?!1:void t(o.start)},teardown:function(){return d?!1:void t(o.stop)}}),o=function(){function i(){h=c=function(t){return t},u&&(r=t('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,c=function(){return n(r.document[s][l])},(h=function(t,e){if(t!==e){var i=r.document;i.open().close(),i[s].hash="#"+t}})(n()))}var o,r,h,c,d={};return d.start=function(){if(!o){var r=n();h||i(),function u(){var i=n(),d=c(r);i!==r?(h(r=i,d),t(e).trigger(a)):d!==r&&(e[s][l]=e[s][l].replace(/#.*/,"")+"#"+d),o=setTimeout(u,t[a+"Delay"])}()}},d.stop=function(){r||(o&&clearTimeout(o),o=0)},d}()}(jQuery,this),/*
 * jQuery File Upload Image Preview & Resize Plugin 1.7.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],t):t(window.jQuery,window.loadImage)}(function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var o=this,r=i.files[i.index],s=t.Deferred();return"number"===t.type(n.maxFileSize)&&r.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(r.type)||!e(r,function(t){t.src&&(i.img=t),s.resolveWith(o,[i])},n)?i:s.promise()},resizeImage:function(i,n){if(n.disabled||!i.canvas&&!i.img)return i;n=t.extend({canvas:!0},n);var o,r=this,s=t.Deferred(),a=n.canvas&&i.canvas||i.img,l=function(t){t&&(t.width!==a.width||t.height!==a.height||n.forceResize)&&(i[t.getContext?"canvas":"img"]=t),i.preview=t,s.resolveWith(r,[i])};if(i.exif){if(n.orientation===!0&&(n.orientation=i.exif.get("Orientation")),n.thumbnail&&(o=i.exif.get("Thumbnail")))return e(o,l,n),s.promise();i.orientation?delete n.orientation:i.orientation=n.orientation}return a?(l(e.scale(a,n)),s.promise()):i},saveImage:function(e,i){if(!e.canvas||i.disabled)return e;var n=this,o=e.files[e.index],r=t.Deferred();return e.canvas.toBlob?(e.canvas.toBlob(function(t){t.name||(o.type===t.type?t.name=o.name:o.name&&(t.name=o.name.replace(/\..+$/,"."+t.type.substr(6)))),o.type!==t.type&&delete e.imageHead,e.files[e.index]=t,r.resolveWith(n,[e])},i.type||o.type,i.quality),r.promise()):e},loadImageMetaData:function(i,n){if(n.disabled)return i;var o=this,r=t.Deferred();return e.parseMetaData(i.files[i.index],function(e){t.extend(i,e),r.resolveWith(o,[i])},n),r.promise()},saveImageMetaData:function(t,e){if(!(t.imageHead&&t.canvas&&t.canvas.toBlob)||e.disabled)return t;var i=t.files[t.index],n=new Blob([t.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,t.files[t.index]=n,t},setImage:function(t,e){return t.preview&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.preview),t},deleteImageReferences:function(t,e){return e.disabled||(delete t.img,delete t.canvas,delete t.preview,delete t.imageHead),t}}})}),/*
 * jQuery File Upload Validation Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],t):t(window.jQuery)}(function(t){"use strict";t.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{getNumberOfFiles:t.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,i){if(i.disabled)return e;var n,o=t.Deferred(),r=this.options,s=e.files[e.index];return(i.minFileSize||i.maxFileSize)&&(n=s.size),"number"===t.type(i.maxNumberOfFiles)&&(r.getNumberOfFiles()||0)+e.files.length>i.maxNumberOfFiles?s.error=r.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(s.type)||i.acceptFileTypes.test(s.name)?n>i.maxFileSize?s.error=r.i18n("maxFileSize"):"number"===t.type(n)&&n<i.minFileSize?s.error=r.i18n("minFileSize"):delete s.error:s.error=r.i18n("acceptFileTypes"),s.error||e.files.error?(e.files.error=!0,o.rejectWith(this,[e])):o.resolveWith(this,[e]),o.promise()}}})}),function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var n=document.head||document.getElementsByTagName("head")[0],o=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",r=document.createElement("div");r.innerHTML='<p>x</p><style id="fit-vids-style">'+o+"</style>",n.appendChild(r.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var o=t(this).find(e.join(","));o=o.not("object object"),o=o.not(n),o.each(function(){var e=t(this);if(!(e.parents(n).length>0||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),o=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),r=i/o;if(!e.attr("id")){var s="fitvid"+Math.floor(999999*Math.random());e.attr("id",s)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*r+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright Cory LaViska for A Beautiful Site, LLC. (http://www.abeautifulsite.net/)
 *
 * Dual-licensed under the MIT and GPL Version 2 licenses
 *
*/
jQuery&&function(t){function e(e,i){var n=t('<span class="minicolors" />'),o=t.minicolors.defaultSettings;e.data("minicolors-initialized")||(i=t.extend(!0,{},o,i),n.addClass("minicolors-theme-"+i.theme).addClass("minicolors-swatch-position-"+i.swatchPosition).toggleClass("minicolors-swatch-left","left"===i.swatchPosition).toggleClass("minicolors-with-opacity",i.opacity),void 0!==i.position&&t.each(i.position.split(" "),function(){n.addClass("minicolors-position-"+this)}),e.addClass("minicolors-input").data("minicolors-initialized",!0).data("minicolors-settings",i).prop("size",7).prop("maxlength",7).wrap(n).after('<span class="minicolors-panel minicolors-slider-'+i.control+'"><span class="minicolors-slider"><span class="minicolors-picker"></span></span><span class="minicolors-opacity-slider"><span class="minicolors-picker"></span></span><span class="minicolors-grid"><span class="minicolors-grid-inner"></span><span class="minicolors-picker"><span></span></span></span></span>'),e.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),"left"===i.swatchPosition?e.before('<span class="minicolors-swatch"><span></span></span>'):e.after('<span class="minicolors-swatch"><span></span></span>'),i.textfield||e.addClass("minicolors-hidden"),i.inline&&e.parent().addClass("minicolors-inline"),l(e))}function i(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeProp("maxlength").removeClass("minicolors-input"),e.before(t).remove()}function n(t){l(t)}function o(t){var e=t.parent(),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-focus")||(r(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(t)}))}function r(){t(".minicolors-input").each(function(){var e=t(this),i=e.data("minicolors-settings"),n=e.parent();i.inline||n.find(".minicolors-panel").fadeOut(i.hideSpeed,function(){n.hasClass("minicolors-focus")&&i.hide&&i.hide.call(e),n.removeClass("minicolors-focus")})})}function s(t,e,i){var n,o,r,s,l=t.parents(".minicolors").find("INPUT"),h=l.data("minicolors-settings"),c=t.find("[class$=-picker]"),u=t.offset().left,d=t.offset().top,p=Math.round(e.pageX-u),f=Math.round(e.pageY-d),m=i?h.animationSpeed:0;e.originalEvent.changedTouches&&(p=e.originalEvent.changedTouches[0].pageX-u,f=e.originalEvent.changedTouches[0].pageY-d),0>p&&(p=0),0>f&&(f=0),p>t.width()&&(p=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&c.parent().is(".minicolors-grid")&&(n=75-p,o=75-f,r=Math.sqrt(n*n+o*o),s=Math.atan2(o,n),0>s&&(s+=2*Math.PI),r>75&&(r=75,p=75-75*Math.cos(s),f=75-75*Math.sin(s)),p=Math.round(p),f=Math.round(f)),t.is(".minicolors-grid")?c.stop(!0).animate({top:f+"px",left:p+"px"},m,h.animationEasing,function(){a(l)}):c.stop(!0).animate({top:f+"px"},m,h.animationEasing,function(){a(l)})}function a(t){function e(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var i,n,o,r,s,a,l,h,c,d=t.parent(),f=t.data("minicolors-settings"),m=(d.find(".minicolors-panel"),d.find(".minicolors-swatch")),v=d.find(".minicolors-grid"),y=d.find(".minicolors-slider"),b=d.find(".minicolors-opacity-slider"),_=v.find("[class$=-picker]"),w=y.find("[class$=-picker]"),x=b.find("[class$=-picker]"),C=e(_,v),k=e(w,y),S=e(x,b);switch(f.control){case"wheel":a=v.width()/2-C.x,l=v.height()/2-C.y,h=Math.sqrt(a*a+l*l),c=Math.atan2(l,a),0>c&&(c+=2*Math.PI),h>75&&(h=75,C.x=69-75*Math.cos(c),C.y=69-75*Math.sin(c)),n=p(h/.75,0,100),i=p(180*c/Math.PI,0,360),o=p(100-Math.floor(k.y*(100/y.height())),0,100),s=g({h:i,s:n,b:o}),y.css("backgroundColor",g({h:i,s:n,b:100}));break;case"saturation":i=p(parseInt(C.x*(360/v.width())),0,360),n=p(100-Math.floor(k.y*(100/y.height())),0,100),o=p(100-Math.floor(C.y*(100/v.height())),0,100),s=g({h:i,s:n,b:o}),y.css("backgroundColor",g({h:i,s:100,b:o})),d.find(".minicolors-grid-inner").css("opacity",n/100);break;case"brightness":i=p(parseInt(C.x*(360/v.width())),0,360),n=p(100-Math.floor(C.y*(100/v.height())),0,100),o=p(100-Math.floor(k.y*(100/y.height())),0,100),s=g({h:i,s:n,b:o}),y.css("backgroundColor",g({h:i,s:n,b:100})),d.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:i=p(360-parseInt(k.y*(360/y.height())),0,360),n=p(Math.floor(C.x*(100/v.width())),0,100),o=p(100-Math.floor(C.y*(100/v.height())),0,100),s=g({h:i,s:n,b:o}),v.css("backgroundColor",g({h:i,s:100,b:100}))}r=f.opacity?parseFloat(1-S.y/b.height()).toFixed(2):1,t.val(u(s,f.letterCase)),f.opacity&&t.attr("data-opacity",r),m.find("SPAN").css({backgroundColor:s,opacity:r}),s+r!==t.data("minicolors-lastChange")&&(t.data("minicolors-lastChange",s+r),f.change&&f.change.call(t,s,r))}function l(t,e){var i,n,o,r,s,a,l,h=t.parent(),c=t.data("minicolors-settings"),f=h.find(".minicolors-swatch"),m=h.find(".minicolors-grid"),y=h.find(".minicolors-slider"),b=h.find(".minicolors-opacity-slider"),_=m.find("[class$=-picker]"),w=y.find("[class$=-picker]"),x=b.find("[class$=-picker]");switch(i=u(d(t.val(),!0),c.letterCase),i||(i=u(d(c.defaultValue,!0))),n=v(i),e||t.val(i),c.opacity&&(o=""===t.attr("data-opacity")?1:p(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),t.attr("data-opacity",o),f.find("SPAN").css("opacity",o),s=p(b.height()-b.height()*o,0,b.height()),x.css("top",s+"px")),f.find("SPAN").css("backgroundColor",i),c.control){case"wheel":a=p(Math.ceil(.75*n.s),0,m.height()/2),l=n.h*Math.PI/180,r=p(75-Math.cos(l)*a,0,m.width()),s=p(75-Math.sin(l)*a,0,m.height()),_.css({top:s+"px",left:r+"px"}),s=150-n.b/(100/m.height()),""===i&&(s=0),w.css("top",s+"px"),y.css("backgroundColor",g({h:n.h,s:n.s,b:100}));break;case"saturation":r=p(5*n.h/12,0,150),s=p(m.height()-Math.ceil(n.b/(100/m.height())),0,m.height()),_.css({top:s+"px",left:r+"px"}),s=p(y.height()-n.s*(y.height()/100),0,y.height()),w.css("top",s+"px"),y.css("backgroundColor",g({h:n.h,s:100,b:n.b})),h.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":r=p(5*n.h/12,0,150),s=p(m.height()-Math.ceil(n.s/(100/m.height())),0,m.height()),_.css({top:s+"px",left:r+"px"}),s=p(y.height()-n.b*(y.height()/100),0,y.height()),w.css("top",s+"px"),y.css("backgroundColor",g({h:n.h,s:n.s,b:100})),h.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:r=p(Math.ceil(n.s/(100/m.width())),0,m.width()),s=p(m.height()-Math.ceil(n.b/(100/m.height())),0,m.height()),_.css({top:s+"px",left:r+"px"}),s=p(y.height()-n.h/(360/y.height()),0,y.height()),w.css("top",s+"px"),m.css("backgroundColor",g({h:n.h,s:100,b:100}))}}function h(e){var i=d(t(e).val(),!0),n=b(i),o=t(e).attr("data-opacity");return n?(void 0!==o&&t.extend(n,{a:parseFloat(o)}),n):null}function c(e,i){var n=d(t(e).val(),!0),o=b(n),r=t(e).attr("data-opacity");return o?(void 0===r&&(r=1),i?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(r)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function u(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function d(t,e){return t=t.replace(/[^A-F0-9]/gi,""),3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t)}function p(t,e,i){return e>t&&(t=e),t>i&&(t=i),t}function f(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=o;else{var r=o,s=(255-n)*o/255,a=(r-s)*(i%60)/60;360===i&&(i=0),60>i?(e.r=r,e.b=s,e.g=s+a):120>i?(e.g=r,e.b=s,e.r=r-a):180>i?(e.g=r,e.r=s,e.b=s+a):240>i?(e.b=r,e.r=s,e.g=r-a):300>i?(e.b=r,e.g=s,e.r=s+a):360>i?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function m(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function g(t){return m(f(t))}function v(t){var e=y(b(t));return 0===e.s&&(e.h=360),e}function y(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;return e.b=n,e.s=0!==n?255*o/n:0,e.h=0!==e.s?t.r===n?(t.g-t.b)/o:t.g===n?2+(t.b-t.r)/o:4+(t.r-t.g)/o:-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function b(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:!0,theme:"default"}},t.extend(t.fn,{minicolors:function(o,r){switch(o){case"destroy":return t(this).each(function(){i(t(this))}),t(this);case"opacity":return void 0===r?t(this).attr("data-opacity"):(t(this).each(function(){n(t(this).attr("data-opacity",r))}),t(this));case"rgbObject":return h(t(this),"rgbaObject"===o);case"rgbString":case"rgbaString":return c(t(this),"rgbaString"===o);case"settings":return void 0===r?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};i(t(this)),t(this).minicolors(t.extend(!0,e,r))}),t(this));case"value":return void 0===r?t(this).val():(t(this).each(function(){n(t(this).val(r))}),t(this));case"create":default:return"create"!==o&&(r=o),t(this).each(function(){e(t(this),r)}),t(this)}}}),t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||r()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(document).data("minicolors-target",i),s(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(document).data("minicolors-target");i&&s(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(){var e=t(this).parent().find("INPUT"),i=e.parent();i.hasClass("minicolors-focus")?r(e):o(e)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&o(e)}).on("blur.minicolors",".minicolors-input",function(){var e=t(this),i=e.data("minicolors-settings");e.data("minicolors-initialized")&&(e.val(d(e.val(),!0)),""===e.val()&&e.val(d(i.defaultValue,!0)),e.val(u(e.val(),i.letterCase)),r(e))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:r();break;case 27:r(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&l(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){l(e,!0)},1)})}(jQuery),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function o(t,n){var o=this,r=i(o);if(o.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),t===!0)return r[0].value=n;r.focus()}else o.value="",r.removeClass("placeholder"),o==e.activeElement&&o.select()}function r(){var t,e=this,r=i(e),s=this.id;if(""==e.value){if("password"==e.type){if(!r.data("placeholder-textinput")){try{t=r.clone().attr({type:"text"})}catch(a){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",o),r.data({"placeholder-textinput":t,"placeholder-id":s}).before(t)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var s,a,l="placeholder"in e.createElement("input"),h="placeholder"in e.createElement("textarea"),c=i.fn,u=i.valHooks;l&&h?(a=c.placeholder=function(){return this},a.input=a.textarea=!0):(a=c.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":o,"blur.placeholder":r}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},a.input=l,a.textarea=h,s={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,n){var s=i(t);return s.data("placeholder-enabled")?(""==n?(t.value=n,t!=e.activeElement&&r.call(t)):s.hasClass("placeholder")?o.call(t,!0,n)||(t.value=n):t.value=n,s):t.value=n}},l||(u.input=s),h||(u.textarea=s),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(o);setTimeout(function(){t.each(r)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*
 * jQuery postMessage Transport Plugin 1.1.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=0,i=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],n=function(t){return t};t.ajaxSetup({converters:{"postmessage text":n,"postmessage json":n,"postmessage html":n}}),t.ajaxTransport("postmessage",function(n){if(n.postMessage&&window.postMessage){var o,r=t("<a>").prop("href",n.postMessage)[0],s=r.protocol+"//"+r.host,a=n.xhr().upload;return{send:function(r,l){e+=1;var h={id:"postmessage-transport-"+e},c="message."+h.id;o=t('<iframe style="display:none;" src="'+n.postMessage+'" name="'+h.id+'"></iframe>').bind("load",function(){t.each(i,function(t,e){h[e]=n[e]}),h.dataType=h.dataType.replace("postmessage ",""),t(window).bind(c,function(e){e=e.originalEvent;var i,n=e.data;e.origin===s&&n.id===h.id&&("progress"===n.type?(i=document.createEvent("Event"),i.initEvent(n.type,!1,!0),t.extend(i,n),a.dispatchEvent(i)):(l(n.status,n.statusText,{postmessage:n.result},n.headers),o.remove(),t(window).unbind(c)))}),o[0].contentWindow.postMessage(h,s)}).appendTo(document.body)},abort:function(){o&&o.remove()}}}})}),/*
 * 
 * TableSorter 2.0 - Client-side table sorting with ease!
 * Version 2.0.5b
 * @requires jQuery v1.2.3
 * 
 * Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 */
function($){$.extend({tablesorter:new function(){function benchmark(t,e){log(t+","+((new Date).getTime()-e.getTime())+"ms")}function log(t){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(t):alert(t)}function buildParserCache(t,e){if(t.config.debug)var i="";if(0!=t.tBodies.length){var n=t.tBodies[0].rows;if(n[0])for(var o=[],r=n[0].cells,s=r.length,a=0;s>a;a++){var l=!1;$.metadata&&$(e[a]).metadata()&&$(e[a]).metadata().sorter?l=getParserById($(e[a]).metadata().sorter):t.config.headers[a]&&t.config.headers[a].sorter&&(l=getParserById(t.config.headers[a].sorter)),l||(l=detectParserForColumn(t,n,-1,a)),t.config.debug&&(i+="column:"+a+" parser:"+l.id+"\n"),o.push(l)}return t.config.debug&&log(i),o}}function detectParserForColumn(t,e,i,n){for(var o=parsers.length,r=!1,s=!1,a=!0;""==s&&a;)i++,e[i]?(r=getNodeFromRowAndCellIndex(e,i,n),s=trimAndGetNodeText(t.config,r),t.config.debug&&log("Checking if value was empty on row:"+i)):a=!1;for(var l=1;o>l;l++)if(parsers[l].is(s,t,r))return parsers[l];return parsers[0]}function getNodeFromRowAndCellIndex(t,e,i){return t[e].cells[i]}function trimAndGetNodeText(t,e){return $.trim(getElementText(t,e))}function getParserById(t){for(var e=parsers.length,i=0;e>i;i++)if(parsers[i].id.toLowerCase()==t.toLowerCase())return parsers[i];return!1}function buildCache(t){if(t.config.debug)var e=new Date;for(var i=t.tBodies[0]&&t.tBodies[0].rows.length||0,n=t.tBodies[0].rows[0]&&t.tBodies[0].rows[0].cells.length||0,o=t.config.parsers,r={row:[],normalized:[]},s=0;i>s;++s){var a=$(t.tBodies[0].rows[s]),l=[];if(a.hasClass(t.config.cssChildRow))r.row[r.row.length-1]=r.row[r.row.length-1].add(a);else{r.row.push(a);for(var h=0;n>h;++h)l.push(o[h].format(getElementText(t.config,a[0].cells[h]),t,a[0].cells[h]));l.push(r.normalized.length),r.normalized.push(l),l=null}}return t.config.debug&&benchmark("Building cache for "+i+" rows:",e),r}function getElementText(t,e){var i="";return e?(t.supportsTextContent||(t.supportsTextContent=e.textContent||!1),i="simple"==t.textExtraction?t.supportsTextContent?e.textContent:e.childNodes[0]&&e.childNodes[0].hasChildNodes()?e.childNodes[0].innerHTML:e.innerHTML:"function"==typeof t.textExtraction?t.textExtraction(e):$(e).text()):""}function appendToTable(t,e){if(t.config.debug)var i=new Date;for(var n=e,o=n.row,r=n.normalized,s=r.length,a=r[0].length-1,l=$(t.tBodies[0]),h=[],c=0;s>c;c++){var u=r[c][a];if(h.push(o[u]),!t.config.appender)for(var d=o[u].length,p=0;d>p;p++)l[0].appendChild(o[u][p])}t.config.appender&&t.config.appender(t,h),h=null,t.config.debug&&benchmark("Rebuilt table:",i),applyWidget(t),setTimeout(function(){$(t).trigger("sortEnd")},0)}function buildHeaders(t){if(t.config.debug)var e=new Date;var i=($.metadata?!0:!1,computeTableHeaderCellIndexes(t));return $tableHeaders=$(t.config.selectorHeaders,t).each(function(e){if(this.column=i[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(t.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(t,e))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(t,e)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(t,e)),!this.sortDisabled){var n=$(this).addClass(t.config.cssHeader);t.config.onRenderHeader&&t.config.onRenderHeader.apply(n)}t.config.headerList[e]=this}),t.config.debug&&(benchmark("Built headers:",e),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(t){for(var e=[],i={},n=t.getElementsByTagName("THEAD")[0],o=n.getElementsByTagName("TR"),r=0;r<o.length;r++)for(var s=o[r].cells,a=0;a<s.length;a++){var l,h=s[a],c=h.parentNode.rowIndex,u=c+"-"+h.cellIndex,d=h.rowSpan||1,p=h.colSpan||1;"undefined"==typeof e[c]&&(e[c]=[]);for(var f=0;f<e[c].length+1;f++)if("undefined"==typeof e[c][f]){l=f;break}i[u]=l;for(var f=c;c+d>f;f++){"undefined"==typeof e[f]&&(e[f]=[]);for(var m=e[f],g=l;l+p>g;g++)m[g]="x"}}return i}function checkCellColSpan(t,e,i){for(var n=[],o=t.tHead.rows,r=o[i].cells,s=0;s<r.length;s++){var a=r[s];a.colSpan>1?n=n.concat(checkCellColSpan(t,headerArr,i++)):(1==t.tHead.length||a.rowSpan>1||!o[i+1])&&n.push(a)}return n}function checkHeaderMetadata(t){return $.metadata&&$(t).metadata().sorter===!1?!0:!1}function checkHeaderOptions(t,e){return t.config.headers[e]&&t.config.headers[e].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(t,e){return t.config.headers[e]&&t.config.headers[e].lockedOrder?t.config.headers[e].lockedOrder:!1}function applyWidget(t){for(var e=t.config.widgets,i=e.length,n=0;i>n;n++)getWidgetById(e[n]).format(t)}function getWidgetById(t){for(var e=widgets.length,i=0;e>i;i++)if(widgets[i].id.toLowerCase()==t.toLowerCase())return widgets[i]}function formatSortingOrder(t){return"Number"!=typeof t?"desc"==t.toLowerCase()?1:0:1==t?1:0}function isValueInArray(t,e){for(var i=e.length,n=0;i>n;n++)if(e[n][0]==t)return!0;return!1}function setHeadersCss(t,e,i,n){e.removeClass(n[0]).removeClass(n[1]);var o=[];e.each(function(){this.sortDisabled||(o[this.column]=$(this))});for(var r=i.length,s=0;r>s;s++)o[i[s][0]].addClass(n[i[s][1]])}function fixColumnWidth(t){var e=t.config;if(e.widthFixed){var i=$("<colgroup>");$("tr:first td",t.tBodies[0]).each(function(){i.append($("<col>").css("width",$(this).width()))}),$(t).prepend(i)}}function updateHeaderSortCount(t,e){for(var i=t.config,n=e.length,o=0;n>o;o++){var r=e[o],s=i.headerList[r[0]];s.count=r[1],s.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(t,e,i){var n="a["+i+"]",o="b["+i+"]";return"text"==t&&"asc"==e?"("+n+" == "+o+" ? 0 : ("+n+" === null ? Number.POSITIVE_INFINITY : ("+o+" === null ? Number.NEGATIVE_INFINITY : ("+n+" < "+o+") ? -1 : 1 )));":"text"==t&&"desc"==e?"("+n+" == "+o+" ? 0 : ("+n+" === null ? Number.POSITIVE_INFINITY : ("+o+" === null ? Number.NEGATIVE_INFINITY : ("+o+" < "+n+") ? -1 : 1 )));":"numeric"==t&&"asc"==e?"("+n+" === null && "+o+" === null) ? 0 :("+n+" === null ? Number.POSITIVE_INFINITY : ("+o+" === null ? Number.NEGATIVE_INFINITY : "+n+" - "+o+"));":"numeric"==t&&"desc"==e?"("+n+" === null && "+o+" === null) ? 0 :("+n+" === null ? Number.POSITIVE_INFINITY : ("+o+" === null ? Number.NEGATIVE_INFINITY : "+o+" - "+n+"));":void 0}function makeSortText(t){return"((a["+t+"] < b["+t+"]) ? -1 : ((a["+t+"] > b["+t+"]) ? 1 : 0));"}function makeSortTextDesc(t){return"((b["+t+"] < a["+t+"]) ? -1 : ((b["+t+"] > a["+t+"]) ? 1 : 0));"}function makeSortNumeric(t){return"a["+t+"]-b["+t+"];"}function makeSortNumericDesc(t){return"b["+t+"]-a["+t+"];"}function sortText(t,e){return table.config.sortLocaleCompare?t.localeCompare(e):e>t?-1:t>e?1:0}function sortTextDesc(t,e){return table.config.sortLocaleCompare?e.localeCompare(t):t>e?-1:e>t?1:0}function sortNumeric(t,e){return t-e}function sortNumericDesc(t,e){return e-t}function getCachedSortType(t,e){return t[e].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(t){return this.each(function(){if(this.tHead&&this.tBodies){var e,i,n,o;this.config={},o=$.extend(this.config,$.tablesorter.defaults,t),e=$(this),$.data(this,"tablesorter",o),i=buildHeaders(this),this.config.parsers=buildParserCache(this,i),n=buildCache(this);var r=[o.cssDesc,o.cssAsc];fixColumnWidth(this),i.click(function(t){var s=e[0].tBodies[0]&&e[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&s>0){e.trigger("sortStart");var a=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),t[o.sortMultiSortKey])if(isValueInArray(a,o.sortList))for(var l=0;l<o.sortList.length;l++){var h=o.sortList[l],c=o.headerList[h[0]];h[0]==a&&(c.count=h[1],c.count++,h[1]=c.count%2)}else o.sortList.push([a,this.order]);else{if(o.sortList=[],null!=o.sortForce)for(var u=o.sortForce,l=0;l<u.length;l++)u[l][0]!=a&&o.sortList.push(u[l]);o.sortList.push([a,this.order])}return setTimeout(function(){setHeadersCss(e[0],i,o.sortList,r),appendToTable(e[0],multisort(e[0],o.sortList,n))},1),!1}}).mousedown(function(){return o.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),e.bind("update",function(){var t=this;setTimeout(function(){t.config.parsers=buildParserCache(t,i),n=buildCache(t)},1)}).bind("updateCell",function(t,e){var i=this.config,o=[e.parentNode.rowIndex-1,e.cellIndex];n.normalized[o[0]][o[1]]=i.parsers[o[1]].format(getElementText(i,e),e)}).bind("sorton",function(t,e){$(this).trigger("sortStart"),o.sortList=e;var s=o.sortList;updateHeaderSortCount(this,s),setHeadersCss(this,i,s,r),appendToTable(this,multisort(this,s,n))}).bind("appendCache",function(){appendToTable(this,n)}).bind("applyWidgetId",function(t,e){getWidgetById(e).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(o.sortList=$(this).metadata().sortlist),o.sortList.length>0&&e.trigger("sorton",[o.sortList]),applyWidget(this)}})},this.addParser=function(t){for(var e=parsers.length,i=!0,n=0;e>n;n++)parsers[n].id.toLowerCase()==t.id.toLowerCase()&&(i=!1);i&&parsers.push(t)},this.addWidget=function(t){widgets.push(t)},this.formatFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},this.formatInt=function(t){var e=parseInt(t);return isNaN(e)?0:e},this.isDigit=function(t){return/^[-+]?\d*$/.test($.trim(t.replace(/[,.']/g,"")))},this.clearTableBody=function(t){function e(){for(;this.firstChild;)this.removeChild(this.firstChild)}$.browser.msie?e.apply(t.tBodies[0]):t.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(){return!0},format:function(t){return $.trim(t.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(t,e){var i=e.config;return $.tablesorter.isDigit(t,i)},format:function(t){return $.tablesorter.formatFloat(t)},type:"numeric"}),ts.addParser({id:"currency",is:function(t){return/^[\xa3$\u20ac?.]/.test(t)},format:function(t){return $.tablesorter.formatFloat(t.replace(new RegExp(/[\xa3$\u20ac]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(t){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(t)},format:function(t){for(var e=t.split("."),i="",n=e.length,o=0;n>o;o++){var r=e[o];i+=2==r.length?"0"+r:r}return $.tablesorter.formatFloat(i)},type:"numeric"}),ts.addParser({id:"url",is:function(t){return/^(https?|ftp|file):\/\/$/.test(t)},format:function(t){return jQuery.trim(t.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(t){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(t)},format:function(t){return $.tablesorter.formatFloat(""!=t?new Date(t.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(t){return/\%$/.test($.trim(t))},format:function(t){return $.tablesorter.formatFloat(t.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(t){return t.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(t){return $.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(t){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(t)},format:function(t,e){var i=e.config;return t=t.replace(/\-/g,"/"),"us"==i.dateFormat?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==i.dateFormat?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==i.dateFormat||"dd-mm-yy"==i.dateFormat)&&(t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(t){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(t)},format:function(t){return $.tablesorter.formatFloat(new Date("2000/01/01 "+t).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(t,e,i){var n=e.config,o=n.parserMetadataName?n.parserMetadataName:"sortValue";return $(i).metadata()[o]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(t){if(t.config.debug)var e=new Date;var i,n,o=-1;$("tr:visible",t.tBodies[0]).each(function(){i=$(this),i.hasClass(t.config.cssChildRow)||o++,n=o%2==0,i.removeClass(t.config.widgetZebra.css[n?0:1]).addClass(t.config.widgetZebra.css[n?1:0])}),t.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",e)}})}(jQuery),function(t){var e=new Array,n=new Array;t.fn.doAutosize=function(e){var i=t(this).data("minwidth"),n=t(this).data("maxwidth"),o="",r=t(this),s=t("#"+t(this).data("tester_id"));if(o!==(o=r.val())){var a=o.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");s.html(a);var l=s.width(),h=l+e.comfortZone>=i?l+e.comfortZone:i,c=r.width(),u=c>h&&h>=i||h>i&&n>h;u&&r.width(h)}},t.fn.resetAutosize=function(e){var i=t(this).data("minwidth")||e.minInputWidth||t(this).width(),n=t(this).data("maxwidth")||e.maxInputWidth||t(this).closest(".tagsinput").width()-e.inputPadding,o=t(this),r=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:o.css("fontSize"),fontFamily:o.css("fontFamily"),fontWeight:o.css("fontWeight"),letterSpacing:o.css("letterSpacing"),whiteSpace:"nowrap"}),s=t(this).attr("id")+"_autosize_tester";!t("#"+s).length>0&&(r.attr("id",s),r.appendTo("body")),o.data("minwidth",i),o.data("maxwidth",n),o.data("tester_id",s),o.css("width",i)},t.fn.addTag=function(i,o){return o=jQuery.extend({focus:!1,callback:!0},o),this.each(function(){var r=t(this).attr("id"),s=t(this).val().split(e[r]);if(""==s[0]&&(s=new Array),i=jQuery.trim(i),o.unique){var a=t(s).tagExist(i);1==a&&t("#"+r+"_tag").addClass("not_valid")}else var a=!1;if(""!=i&&1!=a){if(t("<span>").addClass("tag").append(t("<span>").text(i).append("\xa0\xa0"),t("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return t("#"+r).removeTag(escape(i))})).insertBefore("#"+r+"_addTag"),s.push(i),t("#"+r+"_tag").val(""),o.focus?t("#"+r+"_tag").focus():t("#"+r+"_tag").blur(),t.fn.tagsInput.updateTagsField(this,s),o.callback&&n[r]&&n[r].onAddTag){var l=n[r].onAddTag;l.call(this,i)}if(n[r]&&n[r].onChange){var h=s.length,l=n[r].onChange;l.call(this,t(this),s[h-1])}}}),!1},t.fn.removeTag=function(o){return o=unescape(o),this.each(function(){var r=t(this).attr("id"),s=t(this).val().split(e[r]);for(t("#"+r+"_tagsinput .tag").remove(),str="",i=0;i<s.length;i++)s[i]!=o&&(str=str+e[r]+s[i]);if(t.fn.tagsInput.importTags(this,str),n[r]&&n[r].onRemoveTag){var a=n[r].onRemoveTag;a.call(this,o)}}),!1},t.fn.tagExist=function(e){return jQuery.inArray(e,t(this))>=0},t.fn.importTags=function(e){id=t(this).attr("id"),t("#"+id+"_tagsinput .tag").remove(),t.fn.tagsInput.importTags(this,e)},t.fn.tagsInput=function(i){var o=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i);return this.each(function(){o.hide&&t(this).hide();var i=t(this).attr("id");(!i||e[t(this).attr("id")])&&(i=t(this).attr("id","tags"+(new Date).getTime()).attr("id"));var r=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},o);e[i]=r.delimiter,(o.onAddTag||o.onRemoveTag||o.onChange)&&(n[i]=new Array,n[i].onAddTag=o.onAddTag,n[i].onRemoveTag=o.onRemoveTag,n[i].onChange=o.onChange);var s='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(o.interactive&&(s=s+'<input id="'+i+'_tag" value="" data-default="'+o.defaultText+'" />'),s+='</div><div class="tags_clear"></div></div>',t(s).insertAfter(this),t(r.holder).css("width",o.width),t(r.holder).css("height",o.height),""!=t(r.real_input).val()&&t.fn.tagsInput.importTags(t(r.real_input),t(r.real_input).val()),o.interactive){if(t(r.fake_input).val(t(r.fake_input).attr("data-default")),t(r.fake_input).css("color",o.placeholderColor),t(r.fake_input).resetAutosize(o),t(r.holder).bind("click",r,function(e){t(e.data.fake_input).focus()}),t(r.fake_input).bind("focus",r,function(e){t(e.data.fake_input).val()==t(e.data.fake_input).attr("data-default")&&t(e.data.fake_input).val(""),t(e.data.fake_input).css("color","#000000")}),void 0!=o.autocomplete_url){autocomplete_options={source:o.autocomplete_url};for(attrname in o.autocomplete)autocomplete_options[attrname]=o.autocomplete[attrname];void 0!==jQuery.Autocompleter?(t(r.fake_input).autocomplete(o.autocomplete_url,o.autocomplete),t(r.fake_input).bind("result",r,function(e,n){n&&t("#"+i).addTag(n[0]+"",{focus:!0,unique:o.unique})})):void 0!==jQuery.ui.autocomplete&&(t(r.fake_input).autocomplete(autocomplete_options),t(r.fake_input).bind("autocompleteselect",r,function(e,i){return t(e.data.real_input).addTag(i.item.value,{focus:!0,unique:o.unique}),!1}))}else t(r.fake_input).bind("blur",r,function(e){var i=t(this).attr("data-default");return""!=t(e.data.fake_input).val()&&t(e.data.fake_input).val()!=i?e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:o.unique}):(t(e.data.fake_input).val(t(e.data.fake_input).attr("data-default")),t(e.data.fake_input).css("color",o.placeholderColor)),!1});t(r.fake_input).bind("keypress",r,function(e){return e.which==e.data.delimiter.charCodeAt(0)||13==e.which?(e.preventDefault(),e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:o.unique}),t(e.data.fake_input).resetAutosize(o),!1):void(e.data.autosize&&t(e.data.fake_input).doAutosize(o))}),r.removeWithBackspace&&t(r.fake_input).bind("keydown",function(e){if(8==e.keyCode&&""==t(this).val()){e.preventDefault();var i=t(this).closest(".tagsinput").find(".tag:last").text(),n=t(this).attr("id").replace(/_tag$/,"");i=i.replace(/[\s]+x$/,""),t("#"+n).removeTag(escape(i)),t(this).trigger("focus")}}),t(r.fake_input).blur(),r.unique&&t(r.fake_input).keydown(function(e){(8==e.keyCode||String.fromCharCode(e.which).match(/\w+|[\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1,/]+/))&&t(this).removeClass("not_valid")})}}),this},t.fn.tagsInput.updateTagsField=function(i,n){var o=t(i).attr("id");t(i).val(n.join(e[o]))},t.fn.tagsInput.importTags=function(o,r){t(o).val("");var s=t(o).attr("id"),a=r.split(e[s]);for(i=0;i<a.length;i++)t(o).addTag(a[i],{focus:!1,callback:!1});if(n[s]&&n[s].onChange){var l=n[s].onChange;l.call(o,o,a[i])}}}(jQuery),/*! TinySort 1.5.6
* Copyright (c) 2008-2013 Ron Valstar http://tinysort.sjeiti.com/
* License:
*     MIT: http://www.opensource.org/licenses/mit-license.php
*     GPL: http://www.gnu.org/licenses/gpl.html
*/
!function(t,e){"use strict";function i(t){return t&&t.toLowerCase?t.toLowerCase():t}function n(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return!o;return o}var o=!1,r=null,s=parseFloat,a=Math.min,l=/(-?\d+\.?\d*)$/g,h=/(\d+\.?\d*)$/g,c=[],u=[],d=function(t){return"string"==typeof t},p=function(t,e){for(var i,n=t.length,o=n;o--;)i=n-o-1,e(t[i],i)},f=Array.prototype.indexOf||function(t){var e=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=e);e>i;i++)if(i in this&&this[i]===t)return i;return-1};t.tinysort={id:"TinySort",version:"1.5.6",copyright:"Copyright (c) 2008-2013 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(){var t=function(t,e){c.push(t),u.push(e)};return t.indexOf=f,t}(),defaults:{order:"asc",attr:r,data:r,useVal:o,place:"start",returns:o,cases:o,forceStrings:o,ignoreDashes:o,sortFunction:r}},t.fn.extend({tinysort:function(){var m,g,v,y,b=this,_=[],w=[],x=[],C=[],k=0,S=[],T=[],P=function(t){p(c,function(e){e.call(e,t)})},E=function(t,e){return"string"==typeof e&&(t.cases||(e=i(e)),e=e.replace(/^\s*(.*?)\s*$/i,"$1")),e},D=function(t,e){var i=0;for(0!==k&&(k=0);0===i&&y>k;){var n=C[k],r=n.oSettings,a=r.ignoreDashes?h:l;if(P(r),r.sortFunction)i=r.sortFunction(t,e);else if("rand"==r.order)i=Math.random()<.5?1:-1;else{var c=o,f=E(r,t.s[k]),m=E(r,e.s[k]);if(!r.forceStrings){var g=d(f)?f&&f.match(a):o,v=d(m)?m&&m.match(a):o;if(g&&v){var b=f.substr(0,f.length-g[0].length),_=m.substr(0,m.length-v[0].length);b==_&&(c=!o,f=s(g[0]),m=s(v[0]))}}i=n.iAsc*(m>f?-1:f>m?1:0)}p(u,function(t){i=t.call(t,c,f,m,i)}),0===i&&k++}return i};for(m=0,v=arguments.length;v>m;m++){var L=arguments[m];d(L)?S.push(L)-1>T.length&&(T.length=S.length-1):T.push(L)>S.length&&(S.length=T.length)}for(S.length>T.length&&(T.length=S.length),y=S.length,0===y&&(y=S.length=1,T.push({})),m=0,v=y;v>m;m++){var M=S[m],A=t.extend({},t.tinysort.defaults,T[m]),R=!(!M||""===M),O=R&&":"===M[0];C.push({sFind:M,oSettings:A,bFind:R,bAttr:!(A.attr===r||""===A.attr),bData:A.data!==r,bFilter:O,$Filter:O?b.filter(M):b,fnSort:A.sortFunction,iAsc:"asc"==A.order?1:-1})}return b.each(function(i,n){var o,r=t(n),s=r.parent().get(0),a=[];for(g=0;y>g;g++){var l=C[g],h=l.bFind?l.bFilter?l.$Filter.filter(n):r.find(l.sFind):r;a.push(l.bData?h.data(l.oSettings.data):l.bAttr?h.attr(l.oSettings.attr):l.oSettings.useVal?h.val():h.text()),o===e&&(o=h)}var c=f.call(x,s);0>c&&(c=x.push(s)-1,w[c]={s:[],n:[]}),o.length>0?w[c].s.push({s:a,e:r,n:i}):w[c].n.push({e:r,n:i})}),p(w,function(t){t.s.sort(D)}),p(w,function(t){var e=t.s,i=t.n,r=e.length,s=i.length,l=r+s,h=[],c=l,u=[0,0];switch(A.place){case"first":p(e,function(t){c=a(c,t.n)});break;case"org":p(e,function(t){h.push(t.n)});break;case"end":c=s;break;default:c=0}for(m=0;l>m;m++){var d=n(h,m)?!o:m>=c&&c+r>m,f=d?0:1,g=(d?e:i)[u[f]].e;g.parent().append(g),(d||!A.returns)&&_.push(g.get(0)),u[f]++}}),b.length=0,Array.prototype.push.apply(b,_),b}}),t.fn.TinySort=t.fn.Tinysort=t.fn.tsort=t.fn.tinysort}(jQuery),/*
 * jQuery XDomainRequest Transport Plugin 1.1.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on Julian Aubourg's ajaxHooks xdr.js:
 * https://github.com/jaubourg/ajaxHooks/
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";window.XDomainRequest&&!t.support.cors&&t.ajaxTransport(function(e){if(e.crossDomain&&e.async){e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout);var i;return{send:function(n,o){function r(e,n,r,s){i.onload=i.onerror=i.ontimeout=t.noop,i=null,o(e,n,r,s)}var s=/\?/.test(e.url)?"&":"?";i=new XDomainRequest,"DELETE"===e.type?(e.url=e.url+s+"_method=DELETE",e.type="POST"):"PUT"===e.type?(e.url=e.url+s+"_method=PUT",e.type="POST"):"PATCH"===e.type&&(e.url=e.url+s+"_method=PATCH",e.type="POST"),i.open(e.type,e.url),i.onload=function(){r(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)},i.onerror=function(){r(404,"Not Found")},e.xdrTimeout&&(i.ontimeout=function(){r(0,"timeout")},i.timeout=e.xdrTimeout),i.send(e.hasContent&&e.data||null)},abort:function(){i&&(i.onerror=t.noop(),i.abort())}}}})}),/*!
 * Layzr.js 1.4.0 - A small, fast, modern, and dependency-free library for lazy loading.
 * Copyright (c) 2015 Michael Cavalea - http://callmecavs.github.io/layzr.js/
 * License: MIT
 */
function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Layzr=e()}(this,function(){"use strict";function t(t){this._lastScroll=0,this._ticking=!1,t=t||{},this._optionsContainer=document.querySelector(t.container)||window,this._optionsSelector=t.selector||"[data-layzr]",this._optionsAttr=t.attr||"data-layzr",this._optionsAttrRetina=t.retinaAttr||"data-layzr-retina",this._optionsAttrBg=t.bgAttr||"data-layzr-bg",this._optionsAttrHidden=t.hiddenAttr||"data-layzr-hidden",this._optionsThreshold=t.threshold||0,this._optionsCallback=t.callback||null,this._retina=window.devicePixelRatio>1,this._srcAttr=this._retina?this._optionsAttrRetina:this._optionsAttr,this._nodes=document.querySelectorAll(this._optionsSelector),this._create()}return t.prototype._requestScroll=function(){this._lastScroll=this._optionsContainer===window?window.scrollY||window.pageYOffset:this._optionsContainer.scrollTop+this._getOffset(this._optionsContainer),this._requestTick()},t.prototype._requestTick=function(){this._ticking||(requestAnimationFrame(this.update.bind(this)),this._ticking=!0)},t.prototype._getOffset=function(t){var e=0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e},t.prototype._getContainerHeight=function(){return this._optionsContainer.innerHeight||this._optionsContainer.offsetHeight},t.prototype._create=function(){this._requestScroll(),this._optionsContainer.addEventListener("scroll",this._requestScroll.bind(this),!1),this._optionsContainer.addEventListener("resize",this._requestScroll.bind(this),!1)},t.prototype._destroy=function(){this._optionsContainer.removeEventListener("scroll",this._requestScroll.bind(this),!1),this._optionsContainer.removeEventListener("resize",this._requestScroll.bind(this),!1)},t.prototype._inViewport=function(t){var e=this._lastScroll,i=e+this._getContainerHeight(),n=this._getOffset(t),o=n+this._getContainerHeight(),r=this._optionsThreshold/100*window.innerHeight;return o>=e-r&&i+r>=n&&!t.hasAttribute(this._optionsAttrHidden)},t.prototype._reveal=function(t){var e=t.getAttribute(this._srcAttr)||t.getAttribute(this._optionsAttr);t.hasAttribute(this._optionsAttrBg)?t.style.backgroundImage="url("+e+")":t.setAttribute("src",e),"function"==typeof this._optionsCallback&&this._optionsCallback.call(t),t.removeAttribute(this._optionsAttr),t.removeAttribute(this._optionsAttrRetina),t.removeAttribute(this._optionsAttrBg),t.removeAttribute(this._optionsAttrHidden)},t.prototype.updateSelector=function(){this._nodes=document.querySelectorAll(this._optionsSelector)},t.prototype.update=function(){for(var t=this._nodes.length,e=0;t>e;e++){var i=this._nodes[e];i.hasAttribute(this._optionsAttr)&&this._inViewport(i)&&this._reveal(i)}this._ticking=!1},t}),function(t,e){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.addLayers(e)}if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom);var n=t,o=this._map.getZoom();if(t.__parent)for(;n.__parent._zoom>=o;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,n):this._animationAddLayerNonAnimated(t,n)),this},removeLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.removeLayers(e)}return t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.setOpacity&&t.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){var e,i,n,o,r=this._featureGroup,s=this._nonPointGroup,a=this.options.chunkedLoading,l=this.options.chunkInterval,h=this.options.chunkProgress;if(this._map){var c=0,u=(new Date).getTime(),d=L.bind(function(){for(var e=(new Date).getTime();c<t.length;c++){if(a&&c%200===0){var i=(new Date).getTime()-e;if(i>l)break}if(o=t[c],o.getLatLng){if(!this.hasLayer(o)&&(this._addLayer(o,this._maxZoom),o.__parent&&2===o.__parent.getChildCount())){var n=o.__parent.getAllChildMarkers(),p=n[0]===o?n[1]:n[0];r.removeLayer(p)}}else s.addLayer(o)}h&&h(c,t.length,(new Date).getTime()-u),c===t.length?(this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else{for(e=[],i=0,n=t.length;n>i;i++)o=t[i],o.getLatLng?this.hasLayer(o)||e.push(o):s.addLayer(o);this._needsClustering=this._needsClustering.concat(e)}return this},removeLayers:function(t){var e,i,n,o=this._featureGroup,r=this._nonPointGroup;if(!this._map){for(e=0,i=t.length;i>e;e++)n=t[e],this._arraySplice(this._needsClustering,n),r.removeLayer(n);return this}for(e=0,i=t.length;i>e;e++)n=t[e],n.__parent?(this._removeLayer(n,!0,!0),o.hasLayer(n)&&(o.removeLayer(n),n.setOpacity&&n.setOpacity(1))):r.removeLayer(n);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),o.eachLayer(function(t){t instanceof L.MarkerCluster&&t._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){delete t.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),i=n.length-1;i>=0;i--)t.call(e,n[i]);this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon)e();else if(t.__parent._icon){var n=function(){this.off("spiderfied",n,this),e()};this.on("spiderfied",n,this),t.__parent.spiderfy()}};if(t._icon&&this._map.getBounds().contains(t.getLatLng()))e();else if(t.__parent._zoom<this._map.getZoom())this._map.on("moveend",i,this),this._map.panTo(t.getLatLng());else{var n=function(){this._map.off("movestart",n,this),n=null};this._map.on("movestart",n,this),this._map.on("moveend",i,this),this.on("animationend",i,this),t.__parent.zoomToBounds(),n&&i.call(this)}},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(t),this._nonPointGroup.onAdd(t),this._gridClusters||this._generateInitialClusters(),e=0,i=this._needsRemoving.length;i>e;e++)n=this._needsRemoving[e],this._removeLayer(n,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(t),this._nonPointGroup.onRemove(t),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,s=this._map;if(e)for(var a=this._maxZoom;a>=0&&o[a].removeObject(t,s.project(t.getLatLng(),a));a--);var l,h=t.__parent,c=h._markers;for(this._arraySplice(c,t);h&&(h._childCount--,!(h._zoom<0));)e&&h._childCount<=1?(l=h._markers[0]===t?h._markers[1]:h._markers[0],n[h._zoom].removeObject(h,s.project(h._cLatLng,h._zoom)),o[h._zoom].addObject(l,s.project(l.getLatLng(),h._zoom)),this._arraySplice(h.__parent._childClusters,h),h.__parent._markers.push(l),l.__parent=h.__parent,h._icon&&(r.removeLayer(h),i||r.addLayer(l))):(h._recalculateBounds(),i&&h._icon||h._updateIcon()),h=h.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},_propagateEvent:function(t){if(t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;t.type="cluster"+t.type}this.fire(t.type,t)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=10>e?"small":100>e?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=this._map;e.getMaxZoom()===e.getZoom()?this.options.spiderfyOnMaxZoom&&t.layer.spiderfy():this.options.zoomToBoundsOnClick&&t.layer.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&e._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius,i=e;"function"!=typeof e&&(i=function(){return e}),this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var n=t;n>=0;n--)this._gridClusters[n]=new L.DistanceGrid(i(n)),this._gridUnclustered[n]=new L.DistanceGrid(i(n));this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(t,e){var i,n,o=this._gridClusters,r=this._gridUnclustered;for(this.options.singleMarkerMode&&(t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}}));e>=0;e--){i=this._map.project(t.getLatLng(),e);var s=o[e].getNearObject(i);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(i)){var a=s.__parent;a&&this._removeLayer(s,!1);var l=new L.MarkerCluster(this,e,s,t);o[e].addObject(l,this._map.project(l._cLatLng,e)),s.__parent=l,t.__parent=l;var h=l;for(n=e-1;n>a._zoom;n--)h=new L.MarkerCluster(this,n,h),o[n].addObject(h,this._map.project(s.getLatLng(),n));for(a._addChild(h),n=e;n>=0&&r[n].removeObject(s,this._map.project(s.getLatLng(),n));n--);return}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this._map.getBounds();var t=this._map,e=t.getBounds(),i=e._southWest,n=e._northEast,o=L.Browser.mobile?0:Math.abs(i.lat-n.lat),r=L.Browser.mobile?0:Math.abs(i.lng-n.lng);return new L.LatLngBounds(new L.LatLng(i.lat-o,i.lng-r,!0),new L.LatLng(n.lat+o,n.lng+r,!0))},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),o=this._featureGroup;this._topClusterLevel._recursively(n,t,0,function(r){var s,a=r._latlng,l=r._markers;for(n.contains(a)||(a=null),r._isSingleParent()&&t+1===e?(o.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,n)):(r.setOpacity(0),r._recursivelyAddChildrenToMap(a,e,n)),i=l.length-1;i>=0;i--)s=l[i],n.contains(s._latlng)||o.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),o.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.setOpacity(1)}),this._topClusterLevel._recursively(n,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._enqueue(function(){this._topClusterLevel._recursively(n,t,0,function(t){o.removeLayer(t),t.setOpacity(1)}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(n,e+1,i);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(1===t._childCount){var r=t._markers[0];r.setLatLng(r.getLatLng()),r.setOpacity&&r.setOpacity(1)}else t._recursively(n,i,0,function(t){t._recursivelyRemoveChildrenFromMap(n,e+1)});o._animationEnd()})},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.setOpacity(0),this._enqueue(function(){n.removeLayer(t),t.setOpacity(1),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(e.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var t,e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),o=this._zoom+1,r=i.getZoom();e.length>0&&n>o;){o++;var s=[];for(t=0;t<e.length;t++)s=s.concat(e[t]._childClusters);e=s}n>o?this._group._map.setView(this._latlng,o):r>=n?this._group._map.setView(this._latlng,r+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._expandBounds(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_expandBounds:function(t){var e,i=t._wLatLng||t._latlng;t instanceof L.MarkerCluster?(this._bounds.extend(t._bounds),e=t._childCount):(this._bounds.extend(i),e=1),this._cLatLng||(this._cLatLng=t._cLatLng||i);var n=this._childCount+e;this._wLatLng?(this._wLatLng.lat=(i.lat*e+this._wLatLng.lat*this._childCount)/n,this._wLatLng.lng=(i.lng*e+this._wLatLng.lng*this._childCount)/n):this._latlng=this._wLatLng=new L.LatLng(i.lat,i.lng)},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,0,i-1,function(t){var i,n,o=t._markers;for(i=o.length-1;i>=0;i--)n=o[i],n._icon&&(n._setPos(e),n.setOpacity(0))},function(t){var i,n,o=t._childClusters;for(i=o.length-1;i>=0;i--)n=o[i],n._icon&&(n._setPos(e),n.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i){this._recursively(t,i,0,function(n){n._recursivelyAnimateChildrenIn(t,n._group._map.latLngToLayerPoint(n.getLatLng()).round(),e),n._isSingleParent()&&e-1===i?(n.setOpacity(1),n._recursivelyRemoveChildrenFromMap(t,e)):n.setOpacity(0),n._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,function(t){t.setOpacity(1)})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,-1,e,function(n){if(e!==n._zoom)for(var o=n._markers.length-1;o>=0;o--){var r=n._markers[o];i.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.setOpacity&&r.setOpacity(0)),n._group._featureGroup.addLayer(r))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i){var n,o;this._recursively(t,-1,e-1,function(t){for(o=t._markers.length-1;o>=0;o--)n=t._markers[o],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))},function(t){for(o=t._childClusters.length-1;o>=0;o--)n=t._childClusters[o],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))})},_recursively:function(t,e,i,n,o){var r,s,a=this._childClusters,l=this._zoom;if(e>l)for(r=a.length-1;r>=0;r--)s=a[r],t.intersects(s._bounds)&&s._recursively(t,e,i,n,o);else if(n&&n(this),o&&this._zoom===i&&o(this),i>l)for(r=a.length-1;r>=0;r--)s=a[r],t.intersects(s._bounds)&&s._recursively(t,e,i,n,o)},_recalculateBounds:function(){var t,e=this._markers,i=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,t=e.length-1;t>=0;t--)this._expandBounds(e[t]);for(t=i.length-1;t>=0;t--)this._expandBounds(i[t])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,r=o[n]=o[n]||{},s=r[i]=r[i]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,o=this._getCoord(e.x),r=this._getCoord(e.y),s=this._grid,a=s[r]=s[r]||{},l=a[o]=a[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;n>i;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete a[o],!0},eachObject:function(t,e){var i,n,o,r,s,a,l,h=this._grid;for(i in h){s=h[i];for(n in s)for(a=s[n],o=0,r=a.length;r>o;o++)l=t.call(e,a[o]),l&&(o--,r--)}},getNearObject:function(t){var e,i,n,o,r,s,a,l,h=this._getCoord(t.x),c=this._getCoord(t.y),u=this._objectPoint,d=this._sqCellSize,p=null;for(e=c-1;c+1>=e;e++)if(o=this._grid[e])for(i=h-1;h+1>=i;i++)if(r=o[i])for(n=0,s=r.length;s>n;n++)a=r[n],l=this._sqDist(u[L.Util.stamp(a)],t),d>l&&(d=l,p=a);return p},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},/* Copyright (c) 2012 the authors listed at the following URL, and/or
the authors of referenced articles or incorporated external code:
http://en.literateprograms.org/Quickhull_(Javascript)?action=history&offset=20120410175256

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Retrieved from: http://en.literateprograms.org/Quickhull_(Javascript)?oldid=18434
*/
function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,o,r=0,s=null,a=[];for(i=e.length-1;i>=0;i--)n=e[i],o=this.getDistant(n,t),o>0&&(a.push(n),o>r&&(r=o,s=n));return{maxPoint:s,newPoints:a}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints))):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,o=null,r=null;for(e=t.length-1;e>=0;e--){var s=t[e];(i===!1||s.lat>i)&&(o=s,i=s.lat),(n===!1||s.lat<n)&&(r=s,n=s.lat)}var a=[].concat(this.buildConvexHull([r,o],t),this.buildConvexHull([o,r],t));return a}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),i=this._group,n=i._map,o=n.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,o):(o.y+=10,t=this._generatePointsCircle(e.length,o)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),r=o/this._2PI,s=this._2PI/t,a=[];for(a.length=t,i=t-1;i>=0;i--)n=this._circleStartAngle+i*s,a[i]=new L.Point(e.x+r*Math.cos(n),e.y+r*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,o=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,r=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,s=0,a=[];for(a.length=t,i=t-1;i>=0;i--)s+=o/n+5e-4*i,a[i]=new L.Point(e.x+n*Math.cos(s),e.y+n*Math.sin(s))._round(),n+=this._2PI*r/s;return a},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,o=i._featureGroup,r=this.getAllChildMarkers();for(this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return e.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(t,i){var n,o,r,s,a=this,l=this._group,h=l._map,c=l._featureGroup,u=h.latLngToLayerPoint(this._latlng);for(n=t.length-1;n>=0;n--)o=t[n],o.setOpacity?(o.setZIndexOffset(1e6),o.setOpacity(0),c.addLayer(o),o._setPos(u)):c.addLayer(o);l._forceLayout(),l._animationStart();var d=L.Path.SVG?0:.3,p=L.Path.SVG_NS;for(n=t.length-1;n>=0;n--)if(s=h.layerPointToLatLng(i[n]),o=t[n],o._preSpiderfyLatlng=o._latlng,o.setLatLng(s),o.setOpacity&&o.setOpacity(1),r=new L.Polyline([a._latlng,s],{weight:1.5,color:"#222",opacity:d}),h.addLayer(r),o._spiderLeg=r,L.Path.SVG&&this.SVG_ANIMATION){var f=r._path.getTotalLength();r._path.setAttribute("stroke-dasharray",f+","+f);var m=e.createElementNS(p,"animate");m.setAttribute("attributeName","stroke-dashoffset"),m.setAttribute("begin","indefinite"),m.setAttribute("from",f),m.setAttribute("to",0),m.setAttribute("dur",.25),r._path.appendChild(m),m.beginElement(),m=e.createElementNS(p,"animate"),m.setAttribute("attributeName","stroke-opacity"),m.setAttribute("attributeName","stroke-opacity"),m.setAttribute("begin","indefinite"),m.setAttribute("from",0),m.setAttribute("to",.5),m.setAttribute("dur",.25),r._path.appendChild(m),m.beginElement()}if(a.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),n=t.length-1;n>=0;n--)o=t[n]._spiderLeg,o.options.opacity=.5,o._path.setAttribute("stroke-opacity",.5);setTimeout(function(){l._animationEnd(),l.fire("spiderfied")},200)},_animationUnspiderfy:function(t){var e,i,n,o=this._group,r=o._map,s=o._featureGroup,a=t?r._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):r.latLngToLayerPoint(this._latlng),l=this.getAllChildMarkers(),h=L.Path.SVG&&this.SVG_ANIMATION;for(o._animationStart(),this.setOpacity(1),i=l.length-1;i>=0;i--)e=l[i],e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,e.setOpacity?(e._setPos(a),e.setOpacity(0)):s.removeLayer(e),h&&(n=e._spiderLeg._path.childNodes[0],n.setAttribute("to",n.getAttribute("from")),n.setAttribute("from",0),n.beginElement(),n=e._spiderLeg._path.childNodes[1],n.setAttribute("from",.5),n.setAttribute("to",0),n.setAttribute("stroke-opacity",0),n.beginElement(),e._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var t=0;for(i=l.length-1;i>=0;i--)e=l[i],e._spiderLeg&&t++;for(i=l.length-1;i>=0;i--)e=l[i],e._spiderLeg&&(e.setOpacity&&(e.setOpacity(1),e.setZIndexOffset(0)),t>1&&s.removeLayer(e),r.removeLayer(e._spiderLeg),delete e._spiderLeg);o._animationEnd()},200)}}:{_animationSpiderfy:function(t,e){var i,n,o,r,s=this._group,a=s._map,l=s._featureGroup;for(i=t.length-1;i>=0;i--)r=a.layerPointToLatLng(e[i]),n=t[i],n._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n),o=new L.Polyline([this._latlng,r],{weight:1.5,color:"#222"}),a.addLayer(o),n._spiderLeg=o;this.setOpacity(.3),s.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.setOpacity(1),t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}})}(window,document),/*!
    localForage -- Offline Storage, Improved
    Version 1.2.6
    https://mozilla.github.io/localForage
    (c) 2013-2015 Mozilla, Apache License 2.0
*/
!function(){var t,e,i,n;!function(){var o={},r={};t=function(t,e,i){o[t]={deps:e,callback:i}},n=i=e=function(t){function i(e){if("."!==e.charAt(0))return e;for(var i=e.split("/"),n=t.split("/").slice(0,-1),o=0,r=i.length;r>o;o++){var s=i[o];if(".."===s)n.pop();else{if("."===s)continue;n.push(s)}}return n.join("/")}if(n._eak_seen=o,r[t])return r[t];if(r[t]={},!o[t])throw new Error("Could not find module "+t);for(var s,a=o[t],l=a.deps,h=a.callback,c=[],u=0,d=l.length;d>u;u++)c.push("exports"===l[u]?s={}:e(i(l[u])));var p=h.apply(this,c);return r[t]=s||p}}(),t("promise/all",["./utils","exports"],function(t,e){"use strict";function i(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to all.");return new e(function(e,i){function n(t){return function(e){r(t,e)}}function r(t,i){a[t]=i,0===--l&&e(a)}var s,a=[],l=t.length;0===l&&e([]);for(var h=0;h<t.length;h++)s=t[h],s&&o(s.then)?s.then(n(h),i):r(h,s)})}var n=t.isArray,o=t.isFunction;e.all=i}),t("promise/asap",["exports"],function(t){"use strict";function e(){return function(){process.nextTick(o)}}function i(){var t=0,e=new l(o),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function n(){return function(){h.setTimeout(o,1)}}function o(){for(var t=0;t<c.length;t++){var e=c[t],i=e[0],n=e[1];i(n)}c=[]}function r(t,e){var i=c.push([t,e]);1===i&&s()}var s,a="undefined"!=typeof window?window:{},l=a.MutationObserver||a.WebKitMutationObserver,h="undefined"!=typeof global?global:void 0===this?window:this,c=[];s="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():l?i():n(),t.asap=r}),t("promise/config",["exports"],function(t){"use strict";function e(t,e){return 2!==arguments.length?i[t]:void(i[t]=e)}var i={instrument:!1};t.config=i,t.configure=e}),t("promise/polyfill",["./promise","./utils","exports"],function(t,e,i){"use strict";function n(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),r(e)}();e||(t.Promise=o)}var o=t.Promise,r=e.isFunction;i.polyfill=n}),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,i,n,o,r,s,a){"use strict";function l(t){if(!w(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],h(t,this)}function h(t,e){function i(t){f(e,t)}function n(t){g(e,t)}try{t(i,n)}catch(o){n(o)}}function c(t,e,i,n){var o,r,s,a,l=w(i);if(l)try{o=i(n),s=!0}catch(h){a=!0,r=h}else o=n,s=!0;p(e,o)||(l&&s?f(e,o):a?g(e,r):t===D?f(e,o):t===L&&g(e,o))}function u(t,e,i,n){var o=t._subscribers,r=o.length;o[r]=e,o[r+D]=i,o[r+L]=n}function d(t,e){for(var i,n,o=t._subscribers,r=t._detail,s=0;s<o.length;s+=3)i=o[s],n=o[s+e],c(e,i,n,r);t._subscribers=null}function p(t,e){var i,n=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(_(e)&&(n=e.then,w(n)))return n.call(e,function(n){return i?!0:(i=!0,void(e!==n?f(t,n):m(t,n)))},function(e){return i?!0:(i=!0,void g(t,e))}),!0}catch(o){return i?!0:(g(t,o),!0)}return!1}function f(t,e){t===e?m(t,e):p(t,e)||m(t,e)}function m(t,e){t._state===P&&(t._state=E,t._detail=e,b.async(v,t))}function g(t,e){t._state===P&&(t._state=E,t._detail=e,b.async(y,t))}function v(t){d(t,t._state=D)}function y(t){d(t,t._state=L)}var b=t.config,_=(t.configure,e.objectOrFunction),w=e.isFunction,x=(e.now,i.all),C=n.race,k=o.resolve,S=r.reject,T=s.asap;b.async=T;var P=void 0,E=0,D=1,L=2;l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var i=this,n=new this.constructor(function(){});if(this._state){var o=arguments;b.async(function(){c(i._state,n,o[i._state-1],i._detail)})}else u(this,n,t,e);return n},"catch":function(t){return this.then(null,t)}},l.all=x,l.race=C,l.resolve=k,l.reject=S,a.Promise=l}),t("promise/race",["./utils","exports"],function(t,e){"use strict";function i(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to race.");return new e(function(e,i){for(var n,o=0;o<t.length;o++)n=t[o],n&&"function"==typeof n.then?n.then(e,i):e(n)})}var n=t.isArray;e.race=i}),t("promise/reject",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e,i){i(t)})}t.reject=e}),t("promise/resolve",["exports"],function(t){"use strict";function e(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=this;return new e(function(e){e(t)})}t.resolve=e}),t("promise/utils",["exports"],function(t){"use strict";function e(t){return i(t)||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}var o=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=i,t.isArray=n,t.now=o}),e("promise/polyfill").polyfill()}(),function(t,e){if("function"==typeof define&&define.amd)define("localforageSerializer",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.localforageSerializer=i.exports}}(this,function(t,e){"use strict";(function(){function t(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=C.BlobBuilder||C.MSBlobBuilder||C.MozBlobBuilder||C.WebKitBlobBuilder,o=new n,r=0;r<t.length;r+=1)o.append(t[r]);return o.getBlob(e.type)}}function i(t,e){var i="";if(t&&(i=t.toString()),t&&("[object ArrayBuffer]"===t.toString()||t.buffer&&"[object ArrayBuffer]"===t.buffer.toString())){var n,o=h;t instanceof ArrayBuffer?(n=t,o+=u):(n=t.buffer,"[object Int8Array]"===i?o+=p:"[object Uint8Array]"===i?o+=f:"[object Uint8ClampedArray]"===i?o+=m:"[object Int16Array]"===i?o+=g:"[object Uint16Array]"===i?o+=y:"[object Int32Array]"===i?o+=v:"[object Uint32Array]"===i?o+=b:"[object Float32Array]"===i?o+=_:"[object Float64Array]"===i?o+=w:e(new Error("Failed to get type for BinaryArray"))),e(o+r(n))}else if("[object Blob]"===i){var s=new FileReader;s.onload=function(){var i=a+t.type+"~"+r(this.result);e(h+d+i)},s.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(l){console.error("Couldn't convert value into a JSON string: ",t),e(null,l)}}function n(e){if(e.substring(0,c)!==h)return JSON.parse(e);var i,n=e.substring(x),r=e.substring(c,x);if(r===d&&l.test(n)){var s=n.match(l);i=s[1],n=n.substring(s[0].length)}var a=o(n);switch(r){case u:return a;case d:return t([a],{type:i});case p:return new Int8Array(a);case f:return new Uint8Array(a);case m:return new Uint8ClampedArray(a);case g:return new Int16Array(a);case y:return new Uint16Array(a);case v:return new Int32Array(a);case b:return new Uint32Array(a);case _:return new Float32Array(a);case w:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}function o(t){var e,i,n,o,r,a=.75*t.length,l=t.length,h=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(e=0;l>e;e+=4)i=s.indexOf(t[e]),n=s.indexOf(t[e+1]),o=s.indexOf(t[e+2]),r=s.indexOf(t[e+3]),u[h++]=i<<2|n>>4,u[h++]=(15&n)<<4|o>>2,u[h++]=(3&o)<<6|63&r;return c}function r(t){var e,i=new Uint8Array(t),n="";for(e=0;e<i.length;e+=3)n+=s[i[e]>>2],n+=s[(3&i[e])<<4|i[e+1]>>4],n+=s[(15&i[e+1])<<2|i[e+2]>>6],n+=s[63&i[e+2]];return i.length%3===2?n=n.substring(0,n.length-1)+"=":i.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="~~local_forage_type~",l=/^~~local_forage_type~([^~]+)~/,h="__lfsc__:",c=h.length,u="arbf",d="blob",p="si08",f="ui08",m="uic8",g="si16",v="si32",y="ur16",b="ui32",_="fl32",w="fl64",x=c+u.length,C=this,k={serialize:i,deserialize:n,stringToBuffer:o,bufferToString:r};e.exports=k}).call("undefined"!=typeof window?window:self)}),function(t,e){if("function"==typeof define&&define.amd)define("asyncStorage",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.asyncStorage=i.exports}}(this,function(t,e){"use strict";(function(){function t(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=b.BlobBuilder||b.MSBlobBuilder||b.MozBlobBuilder||b.WebKitBlobBuilder,o=new n,r=0;r<t.length;r+=1)o.append(t[r]);return o.getBlob(e.type)}}function i(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i),o=0;e>o;o++)n[o]=t.charCodeAt(o);return i}function n(t){return new Promise(function(e,i){var n=new XMLHttpRequest;n.open("GET",t),n.withCredentials=!0,n.responseType="arraybuffer",n.onreadystatechange=function(){return 4===n.readyState?200===n.status?e({response:n.response,type:n.getResponseHeader("Content-Type")}):void i({status:n.status,response:n.response}):void 0},n.send()})}function o(e){return new Promise(function(i,o){var r=t([""],{type:"image/png"}),s=e.transaction([x],"readwrite");s.objectStore(x).put(r,"key"),s.oncomplete=function(){var t=e.transaction([x],"readwrite"),r=t.objectStore(x).get("key");r.onerror=o,r.onsuccess=function(t){var e=t.target.result,o=URL.createObjectURL(e);n(o).then(function(t){i(!(!t||"image/png"!==t.type))},function(){i(!1)}).then(function(){URL.revokeObjectURL(o)})}}})["catch"](function(){return!1})}function r(t){return"boolean"==typeof w?Promise.resolve(w):o(t).then(function(t){return w=t})}function s(t){return new Promise(function(e,i){var n=new FileReader;n.onerror=i,n.onloadend=function(i){var n=btoa(i.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:t.type})},n.readAsBinaryString(t)})}function a(e){var n=i(atob(e.data));return t([n],{type:e.type})}function l(t){return t&&t.__local_forage_encoded_blob}function h(t){var e=this,i={db:null};if(t)for(var n in t)i[n]=t[n];return new Promise(function(t,n){var o=_.open(i.name,i.version);o.onerror=function(){n(o.error)},o.onupgradeneeded=function(t){o.result.createObjectStore(i.storeName),t.oldVersion<=1&&o.result.createObjectStore(x)},o.onsuccess=function(){i.db=o.result,e._dbInfo=i,t()}})}function c(t,e){var i=this;"string"!=typeof t&&(b.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo,r=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=r.get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),l(t)&&(t=a(t)),e(t)},s.onerror=function(){n(s.error)}})["catch"](n)});return y(n,e),n}function u(t,e){var i=this,n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo,r=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=r.openCursor(),h=1;s.onsuccess=function(){var i=s.result;if(i){var n=i.value;l(n)&&(n=a(n));var o=t(n,i.key,h++);void 0!==o?e(o):i["continue"]()}else e()},s.onerror=function(){n(s.error)}})["catch"](n)});return y(n,e),n}function d(t,e,i){var n=this;"string"!=typeof t&&(b.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(i,o){var a;n.ready().then(function(){return a=n._dbInfo,r(a.db)}).then(function(t){return!t&&e instanceof Blob?s(e):e}).then(function(e){var n=a.db.transaction(a.storeName,"readwrite"),r=n.objectStore(a.storeName);null===e&&(e=void 0);var s=r.put(e,t);n.oncomplete=function(){void 0===e&&(e=null),i(e)},n.onabort=n.onerror=function(){var t=s.error?s.error:s.transaction.error;o(t)}})["catch"](o)});return y(o,i),o}function p(t,e){var i=this;"string"!=typeof t&&(b.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo,r=o.db.transaction(o.storeName,"readwrite"),s=r.objectStore(o.storeName),a=s["delete"](t);r.oncomplete=function(){e()},r.onerror=function(){n(a.error)},r.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}})["catch"](n)});return y(n,e),n}function f(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo,o=n.db.transaction(n.storeName,"readwrite"),r=o.objectStore(n.storeName),s=r.clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=s.error?s.error:s.transaction.error;i(t)}})["catch"](i)});return y(i,t),i}function m(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),r=o.count();r.onsuccess=function(){t(r.result)},r.onerror=function(){i(r.error)}})["catch"](i)});return y(i,t),i}function g(t,e){var i=this,n=new Promise(function(e,n){return 0>t?void e(null):void i.ready().then(function(){var o=i._dbInfo,r=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=!1,a=r.openCursor();a.onsuccess=function(){var i=a.result;return i?void(0===t?e(i.key):s?e(i.key):(s=!0,i.advance(t))):void e(null)},a.onerror=function(){n(a.error)}})["catch"](n)});return y(n,e),n}function v(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),r=o.openCursor(),s=[];r.onsuccess=function(){var e=r.result;return e?(s.push(e.key),void e["continue"]()):void t(s)},r.onerror=function(){i(r.error)}})["catch"](i)});return y(i,t),i}function y(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var b=this,_=_||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(_){var w,x="local-forage-detect-blob-support",C={_driver:"asyncStorage",_initStorage:h,iterate:u,getItem:c,setItem:d,removeItem:p,clear:f,length:m,key:g,keys:v};e.exports=C}}).call("undefined"!=typeof window?window:self)}),function(t,e){if("function"==typeof define&&define.amd)define("localStorageWrapper",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.localStorageWrapper=i.exports}}(this,function(t,e){"use strict";var i="undefined"!=typeof window?window:self;(function(){function t(t){var n=this,o={};if(t)for(var r in t)o[r]=t[r];return o.keyPrefix=o.name+"/",n._dbInfo=o,new Promise(function(t,n){"function"==typeof i.define&&i.define.amd?i.require(["localforageSerializer"],t,n):t("undefined"!=typeof e&&e.exports&&"undefined"!=typeof require||"undefined"!=typeof e&&e.component&&i.require&&"component"===i.require.loader?require("./../utils/serializer"):i.localforageSerializer)}).then(function(t){return p=t,Promise.resolve()})}function n(t){var e=this,i=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,i=f.length-1;i>=0;i--){var n=f.key(i);0===n.indexOf(t)&&f.removeItem(n)}});return u(i,t),i}function o(t,e){var i=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=i.ready().then(function(){var e=i._dbInfo,n=f.getItem(e.keyPrefix+t);return n&&(n=p.deserialize(n)),n});return u(n,e),n}function r(t,e){var i=this,n=i.ready().then(function(){for(var e=i._dbInfo.keyPrefix,n=e.length,o=f.length,r=0;o>r;r++){var s=f.key(r);if(0===s.indexOf(e)){var a=f.getItem(s);if(a&&(a=p.deserialize(a)),a=t(a,s.substring(n),r+1),void 0!==a)return a}}});return u(n,e),n}function s(t,e){var i=this,n=i.ready().then(function(){var e,n=i._dbInfo;try{e=f.key(t)}catch(o){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e});return u(n,e),n}function a(t){var e=this,i=e.ready().then(function(){for(var t=e._dbInfo,i=f.length,n=[],o=0;i>o;o++)0===f.key(o).indexOf(t.keyPrefix)&&n.push(f.key(o).substring(t.keyPrefix.length));return n});return u(i,t),i}function l(t){var e=this,i=e.keys().then(function(t){return t.length});return u(i,t),i}function h(t,e){var i=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=i.ready().then(function(){var e=i._dbInfo;f.removeItem(e.keyPrefix+t)});return u(n,e),n}function c(t,e,i){var n=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=n.ready().then(function(){void 0===e&&(e=null);var i=e;return new Promise(function(o,r){p.serialize(e,function(e,s){if(s)r(s);else try{var a=n._dbInfo;f.setItem(a.keyPrefix+t,e),o(i)}catch(l){("QuotaExceededError"===l.name||"NS_ERROR_DOM_QUOTA_REACHED"===l.name)&&r(l),r(l)}})})});return u(o,i),o}function u(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var d=this,p=null,f=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;f=this.localStorage}catch(m){return}var g={_driver:"localStorageWrapper",_initStorage:t,iterate:r,getItem:o,setItem:c,removeItem:h,clear:n,length:l,key:s,keys:a};e.exports=g}).call("undefined"!=typeof window?window:self)}),function(t,e){if("function"==typeof define&&define.amd)define("webSQLStorage",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.webSQLStorage=i.exports}}(this,function(t,e){"use strict";var i="undefined"!=typeof window?window:self;(function(){function t(t){var n=this,o={db:null};if(t)for(var r in t)o[r]="string"!=typeof t[r]?t[r].toString():t[r];var s=new Promise(function(e,i){try{o.db=f(o.name,String(o.version),o.description,o.size)}catch(r){return n.setDriver(n.LOCALSTORAGE).then(function(){return n._initStorage(t)}).then(e)["catch"](i)}o.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+o.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){n._dbInfo=o,e()},function(t,e){i(e)})})});return new Promise(function(t,n){"function"==typeof i.define&&i.define.amd?i.require(["localforageSerializer"],t,n):t("undefined"!=typeof e&&e.exports&&"undefined"!=typeof require||"undefined"!=typeof e&&e.component&&i.require&&"component"===i.require.loader?require("./../utils/serializer"):i.localforageSerializer)}).then(function(t){return p=t,s})}function n(t,e){var i=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo;o.db.transaction(function(i){i.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,i){var n=i.rows.length?i.rows.item(0).value:null;n&&(n=p.deserialize(n)),e(n)},function(t,e){n(e)})})})["catch"](n)});return u(n,e),n}function o(t,e){var i=this,n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo;o.db.transaction(function(i){i.executeSql("SELECT * FROM "+o.storeName,[],function(i,n){for(var o=n.rows,r=o.length,s=0;r>s;s++){var a=o.item(s),l=a.value;if(l&&(l=p.deserialize(l)),l=t(l,a.key,s+1),void 0!==l)return void e(l)}e()},function(t,e){n(e)})})})["catch"](n)});return u(n,e),n}function r(t,e,i){var n=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise(function(i,o){n.ready().then(function(){void 0===e&&(e=null);var r=e;p.serialize(e,function(e,s){if(s)o(s);else{var a=n._dbInfo;a.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){i(r)},function(t,e){o(e)})},function(t){t.code===t.QUOTA_ERR&&o(t)})}})})["catch"](o)});return u(o,i),o}function s(t,e){var i=this;"string"!=typeof t&&(d.console.warn(t+" used as a key, but it is not a string."),t=String(t));var n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo;o.db.transaction(function(i){i.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){n(e)})})})["catch"](n)});return u(n,e),n}function a(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){e.executeSql("DELETE FROM "+n.storeName,[],function(){t()},function(t,e){i(e)})})})["catch"](i)});return u(i,t),i}function l(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+n.storeName,[],function(e,i){var n=i.rows.item(0).c;t(n)},function(t,e){i(e)})})})["catch"](i)});return u(i,t),i}function h(t,e){var i=this,n=new Promise(function(e,n){i.ready().then(function(){var o=i._dbInfo;o.db.transaction(function(i){i.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,i){var n=i.rows.length?i.rows.item(0).key:null;e(n)},function(t,e){n(e)})})})["catch"](n)});return u(n,e),n}function c(t){var e=this,i=new Promise(function(t,i){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){e.executeSql("SELECT key FROM "+n.storeName,[],function(e,i){for(var n=[],o=0;o<i.rows.length;o++)n.push(i.rows.item(o).key);t(n)},function(t,e){i(e)})})})["catch"](i)});return u(i,t),i}function u(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var d=this,p=null,f=this.openDatabase;if(f){var m={_driver:"webSQLStorage",_initStorage:t,iterate:o,getItem:n,setItem:r,removeItem:s,clear:a,length:l,key:h,keys:c};e.exports=m}}).call("undefined"!=typeof window?window:self)}),function(t,e){if("function"==typeof define&&define.amd)define("localforage",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.localforage=i.exports}}(this,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="undefined"!=typeof window?window:self;(function(){function t(t,e){t[e]=function(){var i=arguments;return t.ready().then(function(){return t[e].apply(t,i)})}}function o(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var i in e)e.hasOwnProperty(i)&&(arguments[0][i]=d(e[i])?e[i].slice():e[i])}return arguments[0]}function r(t){for(var e in a)if(a.hasOwnProperty(e)&&a[e]===t)return!0;return!1}var s={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},l=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],h=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],c={description:"",driver:l.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},u=function(t){var e=e||t.indexedDB||t.webkitIndexedDB||t.mozIndexedDB||t.OIndexedDB||t.msIndexedDB,i={};return i[a.WEBSQL]=!!t.openDatabase,i[a.INDEXEDDB]=!!function(){if("undefined"!=typeof t.openDatabase&&t.navigator&&t.navigator.userAgent&&/Safari/.test(t.navigator.userAgent)&&!/Chrome/.test(t.navigator.userAgent))return!1;try{return e&&"function"==typeof e.open&&"undefined"!=typeof t.IDBKeyRange}catch(i){return!1}}(),i[a.LOCALSTORAGE]=!!function(){try{return t.localStorage&&"setItem"in t.localStorage&&t.localStorage.setItem}catch(e){return!1}}(),i}(this),d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},p=function(){function l(e){i(this,l),this.INDEXEDDB=a.INDEXEDDB,this.LOCALSTORAGE=a.LOCALSTORAGE,this.WEBSQL=a.WEBSQL,this._config=o({},c,e),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var n=0;n<h.length;n++)t(this,h[n]);this.setDriver(this._config.driver)}return l.prototype.config=function(t){if("object"==typeof t){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof t?this._config[t]:this._config},l.prototype.defineDriver=function(t,e,i){var n=new Promise(function(e,i){try{var n=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void i(o);if(r(t._driver))return void i(a);for(var l=h.concat("_initStorage"),c=0;c<l.length;c++){var d=l[c];if(!d||!t[d]||"function"!=typeof t[d])return void i(o)}var p=Promise.resolve(!0);"_support"in t&&(p=t._support&&"function"==typeof t._support?t._support():Promise.resolve(!!t._support)),p.then(function(i){u[n]=i,s[n]=t,e()},i)}catch(f){i(f)}});return n.then(e,i),n},l.prototype.driver=function(){return this._driver||null},l.prototype.ready=function(t){var e=this,i=new Promise(function(t,i){e._driverSet.then(function(){null===e._ready&&(e._ready=e._initStorage(e._config)),e._ready.then(t,i)})["catch"](i)});return i.then(t,t),i},l.prototype.setDriver=function(t,i,o){function a(){l._config.driver=l.driver()}var l=this;return"string"==typeof t&&(t=[t]),this._driverSet=new Promise(function(i,o){var a=l._getFirstSupportedDriver(t),h=new Error("No available storage method found.");if(!a)return l._driverSet=Promise.reject(h),void o(h);if(l._dbInfo=null,l._ready=null,r(a)){var c;switch(a){case l.INDEXEDDB:c=new Promise(function(t,i){"function"==typeof n.define&&n.define.amd?n.require(["asyncStorage"],t,i):t("undefined"!=typeof e&&e.exports&&"undefined"!=typeof require||"undefined"!=typeof e&&e.component&&n.require&&"component"===n.require.loader?require("./drivers/indexeddb"):n.asyncStorage)});break;case l.LOCALSTORAGE:c=new Promise(function(t,i){"function"==typeof n.define&&n.define.amd?n.require(["localStorageWrapper"],t,i):t("undefined"!=typeof e&&e.exports&&"undefined"!=typeof require||"undefined"!=typeof e&&e.component&&n.require&&"component"===n.require.loader?require("./drivers/localstorage"):n.localStorageWrapper)});break;case l.WEBSQL:c=new Promise(function(t,i){"function"==typeof n.define&&n.define.amd?n.require(["webSQLStorage"],t,i):t("undefined"!=typeof e&&e.exports&&"undefined"!=typeof require||"undefined"!=typeof e&&e.component&&n.require&&"component"===n.require.loader?require("./drivers/websql"):n.webSQLStorage)})}c.then(function(t){l._extend(t),i()})}else s[a]?(l._extend(s[a]),i()):(l._driverSet=Promise.reject(h),o(h))}),this._driverSet.then(a,a),this._driverSet.then(i,o),this._driverSet},l.prototype.supports=function(t){return!!u[t]},l.prototype._extend=function(t){o(this,t)},l.prototype._getFirstSupportedDriver=function(t){if(t&&d(t))for(var e=0;e<t.length;e++){var i=t[e];if(this.supports(i))return i}return null},l.prototype.createInstance=function(t){return new l(t)},l}(),f=new p;e.exports=f}).call("undefined"!=typeof window?window:self)}),function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){"use strict";function i(){}function n(t){try{return t.then}catch(e){return m=e,g}}function o(t,e){try{return t(e)}catch(i){return m=i,g}}function r(t,e,i){try{t(e,i)}catch(n){return m=n,g}}function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==i&&p(t,this)}function a(t,e,n){return new t.constructor(function(o,r){var a=new s(i);a.then(o,r),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(e):void f(function(){var i=1===t._37?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._37?h(e.promise,t._12):c(e.promise,t._12));var n=o(i,t._12);n===g?c(e.promise,m):h(e.promise,n)})}function h(t,e){if(e===t)return c(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=n(e);if(i===g)return c(t,m);if(i===t.then&&e instanceof s)return t._37=3,t._12=e,void u(t);if("function"==typeof i)return void p(i.bind(e),t)}t._37=1,t._12=e,u(t)}function c(t,e){t._37=2,t._12=e,u(t)}function u(t){for(var e=0;e<t._59.length;e++)l(t,t._59[e]);t._59=null}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function p(t,e){var i=!1,n=r(t,function(t){i||(i=!0,h(e,t))},function(t){i||(i=!0,c(e,t))});i||n!==g||(i=!0,c(e,m))}var f=t("asap/raw"),m=null,g={};e.exports=s,s._99=i,s.prototype.then=function(t,e){if(this.constructor!==s)return a(this,t,e);var n=new s(i);return l(this,new d(t,e,n)),n}},{"asap/raw":4}],2:[function(t,e){"use strict";function i(t){var e=new n(n._99);return e._37=1,e._12=t,e}var n=t("./core.js");e.exports=n;var o=i(!0),r=i(!1),s=i(null),a=i(void 0),l=i(0),h=i("");n.resolve=function(t){if(t instanceof n)return t;if(null===t)return s;if(void 0===t)return a;if(t===!0)return o;if(t===!1)return r;if(0===t)return l;if(""===t)return h;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new n(e.bind(t))}catch(c){return new n(function(t,e){e(c)})}return i(t)},n.all=function(t){var e=Array.prototype.slice.call(t);return new n(function(t,i){function o(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._37;)a=a._12;return 1===a._37?o(s,a._12):(2===a._37&&i(a._12),void a.then(function(t){o(s,t)},i))}var l=a.then;if("function"==typeof l){var h=new n(l.bind(a));return void h.then(function(t){o(s,t)},i)}}e[s]=a,0===--r&&t(e)}if(0===e.length)return t([]);for(var r=e.length,s=0;s<e.length;s++)o(s,e[s])})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,i){t.forEach(function(t){n.resolve(t).then(e,i)})})},n.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":1}],3:[function(t,e){"use strict";function i(){if(a.length)throw a.shift()}function n(t){var e;e=s.length?s.pop():new o,e.task=t,r(e)}function o(){this.task=null}var r=t("./raw"),s=[],a=[],l=r.makeRequestCallFromTimer(i);e.exports=n,o.prototype.call=function(){try{this.task.call()}catch(t){n.onerror?n.onerror(t):(a.push(t),l())}finally{this.task=null,s[s.length]=this}}},{"./raw":4}],4:[function(t,e){(function(t){"use strict";function i(t){a.length||(s(),l=!0),a[a.length]=t}function n(){for(;h<a.length;){var t=h;if(h+=1,a[t].call(),h>c){for(var e=0,i=a.length-h;i>e;e++)a[e]=a[e+h];a.length-=h,h=0}}a.length=0,h=0,l=!1}function o(t){var e=1,i=new u(t),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}function r(t){return function(){function e(){clearTimeout(i),clearInterval(n),t()}var i=setTimeout(e,0),n=setInterval(e,50)}}e.exports=i;var s,a=[],l=!1,h=0,c=1024,u=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof u?o(n):r(n),i.requestFlush=s,i.makeRequestCallFromTimer=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(t){setTimeout(function(){throw t},0)})})},{}],6:[function(t){t("asap");"undefined"==typeof Promise&&(Promise=t("./lib/core.js"),t("./lib/es6-extensions.js")),t("./polyfill-done.js")},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]),"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(t){setTimeout(function(){throw t},0)})}),function(t,e){var i;t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var o,r,s,a,l,h;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),r=n.attr("action"),s=n.serializeArray();
var c=n.data("ujs:submit-button");c&&(s.push(c),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=i.href(n),s=n.data("params")||null);return h={type:o||"GET",data:s,dataType:l,crossDomain:a,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[t,o])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])}},r&&(h.url=r),i.ajax(h)}return!1},handleMethod:function(n){var o=i.href(n),r=n.data("method"),s=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),h=t('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&h.attr("target",s),h.hide().append(c).appendTo("body"),h.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),o=!1;return n?(i.fire(t,"confirm")&&(o=i.confirm(n),e=i.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,i,n){var o,r=t(),s=i||"input,textarea";return e.find(s).each(function(){o=t(this),(n?o.val():!o.val())&&(r=r.add(o))}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var o=i.data("events"),r=!0;return o!==e&&o.submit!==e&&t.each(o.submit,function(t,e){return"function"==typeof e.handler?r=e.handler(n):void 0}),r},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),t(document).delegate(i.linkClickSelector,"click.rails",function(n){var o=t(this),r=o.data("method"),s=o.data("params");return i.allowAction(o)?(o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==e?!n.metaKey&&!n.ctrlKey||r&&"GET"!==r||s?(i.handleRemote(o)===!1&&i.enableElement(o),!1):!0:o.data("method")?(i.handleMethod(o),!1):void 0):i.stopEverything(n)}),t(document).delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),t(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var o=t(this),r=o.data("remote")!==e,s=i.blankInputs(o,i.requiredInputSelector),a=i.nonBlankInputs(o,i.fileInputSelector);return i.allowAction(o)?s&&o.attr("novalidate")==e&&i.fire(o,"ajax:aborted:required",[s])?i.stopEverything(n):r?a?i.fire(o,"ajax:aborted:file",[a]):!t.support.submitBubbles&&t().jquery<"1.7"&&i.callFormSubmitBindings(o,n)===!1?i.stopEverything(n):(i.handleRemote(o),!1):void setTimeout(function(){i.disableFormElements(o)},13):i.stopEverything(n)}),t(document).delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),t(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),t(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){csrf_token=t("meta[name=csrf-token]").attr("content"),csrf_param=t("meta[name=csrf-param]").attr("content"),t('form input[name="'+csrf_param+'"]').val(csrf_token)})}(jQuery),/*!
 * Select2 4.0.0
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return function(){if(!e||!e.requirejs){e?i=e:e={};/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var t,i,n;!function(e){function o(t,e){return _.call(t,e)}function r(t,e){var i,n,o,r,s,a,l,h,c,u,d,p=e&&e.split("/"),f=y.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=t.split("/"),s=t.length-1,y.nodeIdCompat&&x.test(t[s])&&(t[s]=t[s].replace(x,"")),t=p.concat(t),c=0;c<t.length;c+=1)if(d=t[c],"."===d)t.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||m)&&f){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),p)for(u=p.length;u>0;u-=1)if(o=f[p.slice(0,u).join("/")],o&&(o=o[n])){r=o,a=c;break}if(r)break;!l&&m&&m[n]&&(l=m[n],h=c)}!r&&l&&(r=l,a=h),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function s(t,i){return function(){return p.apply(e,w.call(arguments,0).concat([t,i]))}}function a(t){return function(e){return r(e,t)}}function l(t){return function(e){g[t]=e}}function h(t){if(o(v,t)){var i=v[t];delete v[t],b[t]=!0,d.apply(e,i)}if(!o(g,t)&&!o(b,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function u(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,p,f,m,g={},v={},y={},b={},_=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;f=function(t,e){var i,n=c(t),o=n[0];return t=n[1],o&&(o=r(o,e),i=h(o)),o?t=i&&i.normalize?i.normalize(t,a(e)):r(t,e):(t=r(t,e),n=c(t),o=n[0],t=n[1],o&&(i=h(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},m={require:function(t){return s(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:u(t)}}},d=function(t,i,n,r){var a,c,u,d,p,y,_=[],w=typeof n;if(r=r||t,"undefined"===w||"function"===w){for(i=!i.length&&n.length?["require","exports","module"]:i,p=0;p<i.length;p+=1)if(d=f(i[p],r),c=d.f,"require"===c)_[p]=m.require(t);else if("exports"===c)_[p]=m.exports(t),y=!0;else if("module"===c)a=_[p]=m.module(t);else if(o(g,c)||o(v,c)||o(b,c))_[p]=h(c);else{if(!d.p)throw new Error(t+" missing "+c);d.p.load(d.n,s(r,!0),l(c),{}),_[p]=g[c]}u=n?n.apply(g[t],_):void 0,t&&(a&&a.exports!==e&&a.exports!==g[t]?g[t]=a.exports:u===e&&y||(g[t]=u))}else t&&(g[t]=n)},t=i=p=function(t,i,n,o,r){if("string"==typeof t)return m[t]?m[t](i):h(f(t,i).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=o,o=r),o?d(e,t,i,n):setTimeout(function(){d(e,t,i,n)},4),p},p.config=function(t){return p(t)},t._defined=g,n=function(t,e,i){e.splice||(i=e,e=[]),o(g,t)||o(v,t)||(v[t]=[t,e,i])},n.amd={jQuery:!0}}(),e.requirejs=t,e.require=i,e.define=n}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,i=[];for(var n in e){var o=e[n];"function"==typeof o&&"constructor"!==n&&i.push(n)}return i}var i={};i.Extend=function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},i.Decorate=function(t,i){function n(){var e=Array.prototype.unshift,n=i.prototype.constructor.length,o=t.prototype.constructor;n>0&&(e.call(arguments,t.prototype.constructor),o=i.prototype.constructor),o.apply(this,arguments)}function o(){this.constructor=n}var r=e(i),s=e(t);i.displayName=t.displayName,n.prototype=new o;for(var a=0;a<s.length;a++){var l=s[a];n.prototype[l]=t.prototype[l]}for(var h=(function(t){var e=function(){};t in n.prototype&&(e=n.prototype[t]);var o=i.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,e),o.apply(this,arguments)}}),c=0;c<r.length;c++){var u=r[c];n.prototype[u]=h(u)}return n};var n=function(){this.listeners={}};return n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i].apply(this,e)},i.Observable=n,i.generateChars=function(t){for(var e="",i=0;t>i;i++){var n=Math.floor(36*Math.random());e+=n.toString(36)}return e},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var r=i[o];r=r.substring(0,1).toLowerCase()+r.substring(1),r in n||(n[r]={}),o==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},i.hasScroll=function(e,i){var n=t(i),o=i.style.overflowX,r=i.style.overflowY;return o!==r||"hidden"!==r&&"visible"!==r?"scroll"===o||"scroll"===r?!0:n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth:!1},i.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},i.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,function(t){n=n.add(t)}),i=n}e.append(i)},i}),e.define("select2/results",["jquery","./utils"],function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="treeitem" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);n.append(i(o(e.args))),this.$results.append(n)},i.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)},i.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)},i.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)},i.prototype.setClasses=function(){var e=this;this.data.current(function(i){var n=t.map(i,function(t){return t.id.toString()}),o=e.$results.find(".select2-results__option[aria-selected]");o.each(function(){var e=t(this),i=t.data(this,"data"),o=""+i.id;null!=i.element&&i.element.selected||null==i.element&&t.inArray(o,n)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var r=o.filter("[aria-selected=true]");r.length>0?r.first().trigger("mouseenter"):o.first().trigger("mouseenter")})},i.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:e(t)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(i.id=e._resultId),e.title&&(i.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]);for(var o in n){var r=n[o];i.setAttribute(o,r)}if(e.children){var s=t(i),a=document.createElement("strong");a.className="select2-results__group";{t(a)}this.template(e,a);for(var l=[],h=0;h<e.children.length;h++){var c=e.children[h],u=this.option(c);l.push(u)}var d=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});d.append(l),s.append(a),s.append(d)}else this.template(e,i);return t.data(i,"data",e),i},i.prototype.bind=function(e){var i=this,n=e.id+"-results";this.$results.attr("id",n),e.on("results:all",function(t){i.clear(),i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("results:append",function(t){i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("query",function(t){i.showLoading(t)}),e.on("select",function(){e.isOpen()&&i.setClasses()}),e.on("unselect",function(){e.isOpen()&&i.setClasses()}),e.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),e.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var o=n-1;0===t.length&&(o=0);var r=e.eq(o);r.trigger("mouseenter");var s=i.$results.offset().top,a=r.offset().top,l=i.$results.scrollTop()+(a-s);0===o?i.$results.scrollTop(0):0>a-s&&i.$results.scrollTop(l)}}),e.on("results:next",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t),o=n+1;if(!(o>=e.length)){var r=e.eq(o);r.trigger("mouseenter");var s=i.$results.offset().top+i.$results.outerHeight(!1),a=r.offset().top+r.outerHeight(!1),l=i.$results.scrollTop()+a-s;0===o?i.$results.scrollTop(0):a>s&&i.$results.scrollTop(l)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){i.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-i.$results.scrollTop()+t.deltaY,o=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&n<=i.$results.height();o?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var n=t(this),o=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:o}):i.trigger("close")):void i.trigger("select",{originalEvent:e,data:o})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:e,element:t(this)})})},i.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),i=e.index(t),n=this.$results.offset().top,o=t.offset().top,r=this.$results.scrollTop()+(o-n),s=o-n;r-=2*t.outerHeight(!1),2>=i?this.$results.scrollTop(0):(s>this.$results.outerHeight()||0>s)&&this.$results.scrollTop(r)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=n(e);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=o(r):t(i).append(r)},i}),e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},n.prototype.bind=function(t){var e=this,n=(t.id+"-container",t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e.trigger("blur",t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",n),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},n.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var i=t(e.target),n=i.closest(".select2"),o=t(".select2.select2-container--open");o.each(function(){var e=t(this);if(this!=n[0]){var i=e.data("element");i.select2("close")}})})},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},n.prototype.bind=function(t){var e=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("selection:update",function(t){e.update(t.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},n.prototype.selectionContainer=function(){return t("<span></span>")},n.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],i=this.display(e),n=this.$selection.find(".select2-selection__rendered");n.empty().append(i),n.prop("title",e.title||e.text)},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(){var e=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(i){var n=t(this),o=n.parent(),r=o.data("data");e.trigger("unselect",{originalEvent:i,data:r})})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},n.prototype.selectionContainer=function(){var e=t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return e},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var o=t[n],r=this.display(o),s=this.selectionContainer();s.append(r),s.prop("title",o.title||o.text),s.data("data",o),e.push(s)}var a=this.$selection.find(".select2-selection__rendered");i.appendMany(a,e)}},n}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id,n=e.length>1;if(n||i)return t.call(this,e);this.clear();var o=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(o)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function i(){}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),o=0;o<n.length;o++){var r={data:n[o]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},i.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||(i.which==e.DELETE||i.which==e.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(e,i){if(e.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=t('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return n},n.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus()}),e.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val(""),o.$search.focus()}),e.on("enable",function(){o.$search.prop("disabled",!1)}),e.on("disable",function(){o.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(t){o.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){o.trigger("blur",t)}),this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation(),o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===i.BACKSPACE&&""===o.$search.val()){var n=o.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var r=n.data("data");o.searchRemoveChoice(r),t.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){o.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(t){o.handleSearch(t)})},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{var e=this.$search.val().length+1;t=.75*e+"em"}this.$search.css("width",t)},n}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,i,n){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];e.call(this,i,n),i.on("*",function(e,i){if(-1!==t.inArray(e,r)){i=i||{};var n=t.Event("select2:"+e,{params:i});o.$element.trigger(n),-1!==t.inArray(e,s)&&(i.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i}),e.define("select2/diacritics",[],function(){var t={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};
return t}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),n+=null!=i.id?"-"+i.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each(function(){var t=i(this),o=n.item(t);e.push(o)}),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var o=[];t=[t],t.push.apply(t,n);for(var r=0;r<t.length;r++){var s=t[r].id;-1===i.inArray(s,o)&&o.push(s)}e.$element.val(o),e.$element.trigger("change")});else{var n=t.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple"))return t.selected=!1,i(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(n){for(var o=[],r=0;r<n.length;r++){var s=n[r].id;s!==t.id&&-1===i.inArray(s,o)&&o.push(s)}e.$element.val(o),e.$element.trigger("change")})},n.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],o=this,r=this.$element.children();r.each(function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var r=o.item(e),s=o.matches(t,r);null!==s&&n.push(s)}}),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var n=i(e),o=this._normalizeItem(t);return o.element=e,i.data(e,"data",o),n},n.prototype.item=function(t){var e={};if(e=i.data(t[0],"data"),null!=e)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var n=t.children("option"),o=[],r=0;r<n.length;r++){var s=i(n[r]),a=this.item(s);o.push(a)}e.children=o}return e=this._normalizeItem(e),e.element=t[0],i.data(t[0],"data",e),e},n.prototype._normalizeItem=function(t){i.isPlainObject(t)||(t={id:t,text:t}),t=i.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,i){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.setData(i)}return e.Extend(n,t),n.prototype.setData=function(t){"function"==typeof t&&(t=t.call(null)),this.$element.empty(),this.addOptions(this.convertToOptions(t))},n.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,i){return i.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){function n(t){return function(){return i(this).val()==t.id}}for(var o=this,r=this.$element.find("option"),s=r.map(function(){return o.item(i(this)).id}).get(),a=[],l=0;l<t.length;l++){var h=this._normalizeItem(t[l]);if(i.inArray(h.id,s)>=0){var c=r.filter(n(h)),u=this.item(c),d=(i.extend(!0,{},u,h),this.option(u));c.replaceWith(d)}else{var p=this.option(h);if(h.children){var f=this.convertToOptions(h.children);e.appendMany(p,f)}a.push(p)}}return a},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,i){function n(e,i){this.ajaxOptions=this._applyDefaults(i.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),t.__super__.constructor.call(this,e,i)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,n){var o=i.ajax(t);return o.then(e),o.fail(n),o}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){function n(){var n=r.transport(r,function(n){var r=o.processResults(n,t);o.options.get("debug")&&window.console&&console.error&&(r&&r.results&&i.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)},function(){});o._request=n}var o=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url(t)),"function"==typeof r.data&&(r.data=r.data(t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,i,n){var o=n.get("tags"),r=n.get("createTag");if(void 0!==r&&(this.createTag=r),e.call(this,i,n),t.isArray(o))for(var s=0;s<o.length;s++){var a=o[s],l=this._normalizeItem(a),h=this.option(l);this.$element.append(h)}}return e.prototype.query=function(t,e,i){function n(t,r){for(var s=t.results,a=0;a<s.length;a++){var l=s[a],h=null!=l.children&&!n({results:l.children},!0),c=l.text===e.term;if(c||h)return r?!1:(t.data=s,void i(t))}if(r)return!0;var u=o.createTag(e);if(null!=u){var d=o.option(u);d.attr("data-select2-tag",!0),o.addOptions([d]),o.insertTag(s,u)}t.results=s,i(t)}var o=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,i):void t.call(this,e,n)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(){var e=(this._lastTag,this.$element.find("option[data-select2-tag]"));e.each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(t,e,i){function n(t){o.select(t)}var o=this;e.term=e.term||"";var r=this.tokenizer(e,this.options,n);r.term!==e.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),e.term=r.term),t.call(this,e,i)},e.prototype.tokenizer=function(e,i,n,o){for(var r=n.get("tokenSeparators")||[],s=i.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<s.length;){var h=s[a];if(-1!==t.inArray(h,r)){var c=s.substr(0,a),u=t.extend({},i,{term:c}),d=l(u);o(d),s=s.substr(a+1)||"",a=0}else a++}return{term:s}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength||t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){var n=this;this.current(function(o){var r=null!=o?o.length:0;return n.maximumSelectionLength>0&&r>=n.maximumSelectionLength?void n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):void t.call(n,e,i)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},e.prototype.bind=function(e,i,n){var o=this;e.call(this,i,n),this.$search.on("keydown",function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){o.handleSearch(t)}),i.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0)}),i.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val("")}),i.on("results:all",function(t){if(null==t.query.term||""===t.query.term){var e=o.showSearch(t);e?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide")}})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,i,n){var o=this;e.call(this,i,n),i.on("query",function(t){o.lastParams=t,o.loading=!0}),i.on("query:append",function(t){o.lastParams=t,o.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,o.$loadingMore[0]);if(!o.loading&&e){var i=o.$results.offset().top+o.$results.outerHeight(!1),n=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1);i+50>=n&&o.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="option load-more" role="treeitem"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function i(t,e,i){this.$dropdownParent=i.get("dropdownParent")||document.body,t.call(this,e,i)}return i.prototype.bind=function(t,e,i){var n=this,o=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),o||(o=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var n=this,o="scroll.select2."+i.id,r="resize.select2."+i.id,s="orientationchange.select2."+i.id,a=this.$container.parents().filter(e.hasScroll);a.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),a.on(o,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(o+" "+r+" "+s,function(){n._positionDropdown(),n._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var n="scroll.select2."+i.id,o="resize.select2."+i.id,r="orientationchange.select2."+i.id,s=this.$container.parents().filter(e.hasScroll);s.off(n),t(window).off(n+" "+o+" "+r)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=(this.$container.position(),this.$container.offset());r.bottom=r.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=r.top,s.bottom=r.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},h=l.top<r.top-a.height,c=l.bottom>r.bottom+a.height,u={left:r.left,top:s.bottom};i||n||(o="below"),c||!h||i?!h&&c&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(u.top=s.top-a.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return t(i.data.results)<this.minimumResultsForSearch?!1:e.call(this,i)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(){n._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();t.length<1||this.trigger("select",{data:t.data("data")})},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close")},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){var e=t.minimum-t.input.length,i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,i,n,o,r,s,a,l,h,c,u,d,p,f,m,g,v,y,b,_,w,x,C,k,S,T,P,E){function D(){this.reset()}D.prototype.apply=function(u){if(u=t.extend({},this.defaults,u),null==u.dataAdapter){if(u.dataAdapter=null!=u.ajax?f:null!=u.data?p:d,u.minimumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=h.Decorate(u.dataAdapter,m)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=h.Decorate(u.dataAdapter,g)),null!=u.query){var E=e(u.amdBase+"compat/query");u.dataAdapter=h.Decorate(u.dataAdapter,E)}if(null!=u.initSelection){var D=e(u.amdBase+"compat/initSelection");u.dataAdapter=h.Decorate(u.dataAdapter,D)}}if(null==u.resultsAdapter&&(u.resultsAdapter=i,null!=u.ajax&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,C)),null!=u.placeholder&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,x)),u.selectOnClose&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,T))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=_;else{var L=h.Decorate(_,w);u.dropdownAdapter=L}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,S)),u.closeOnSelect&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,P)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var M=e(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=h.Decorate(u.dropdownAdapter,M)}u.dropdownAdapter=h.Decorate(u.dropdownAdapter,k)}if(null==u.selectionAdapter){if(u.selectionAdapter=u.multiple?o:n,null!=u.placeholder&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,s)),u.multiple&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,a)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var A=e(u.amdBase+"compat/containerCss");u.selectionAdapter=h.Decorate(u.selectionAdapter,A)}u.selectionAdapter=h.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var R=u.language.split("-"),O=R[0];u.language=[u.language,O]}else u.language=[u.language];if(t.isArray(u.language)){var I=new c;u.language.push("en");for(var N=u.language,j=0;j<N.length;j++){var H=N[j],z={};try{z=c.loadPath(H)}catch(B){try{H=this.defaults.amdLanguageBase+H,z=c.loadPath(H)}catch(F){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+H+'" could not be automatically loaded. A fallback will be used instead.');continue}}I.extend(z)}u.translations=I}else{var U=c.loadPath(this.defaults.amdLanguageBase+"en"),W=new c(u.language);W.extend(U),u.translations=W}return u},D.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,o){if(""===t.trim(n.term))return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),s=o.children.length-1;s>=0;s--){var a=o.children[s],l=i(n,a);null==l&&r.children.splice(s,1)}return r.children.length>0?r:i(n,r)}var h=e(o.text).toUpperCase(),c=e(n.term).toUpperCase();return h.indexOf(c)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:E,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},D.prototype.set=function(e,i){var n=t.camelCase(e),o={};o[n]=i;var r=h._convertData(o);t.extend(this.defaults,r)};var L=new D;return L}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,i,n){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),this.options=i.apply(this.options),o&&o.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var o={};o=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var r=e.extend(!0,{},o);r=n._convertData(r);for(var s in r)e.inArray(s,i)>-1||(e.isPlainObject(this.options[s])?e.extend(this.options[s],r[s]):this.options[s]=r[s]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,i,n){var o=function(t,i){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),o.__super__.constructor.call(this);var n=t.attr("tabindex")||0;t.data("old-tabindex",n),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var h=this.options.get("resultsAdapter");this.results=new h(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){c.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4),e="select2-"+e},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return 0>=o?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var s=r.split(";"),a=0,l=s.length;l>a;a+=1){var h=s[a].replace(/\s/g,""),c=h.match(i);if(null!==c&&c.length>=1)return c[1]}return null}return e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){t.each(i,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerSelectionEvents=function(){var e=this,i=["toggle"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("*",function(n,o){-1===t.inArray(n,i)&&e.trigger(n,o)})},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("focus",function(){t.$container.addClass("select2-container--focus")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open"),this.dataAdapter.query(e,function(i){t.trigger("results:all",{data:i,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(i){t.trigger("results:append",{data:i,query:e})})}),this.on("keypress",function(e){var i=e.which;t.isOpen()?i===n.ENTER?(t.trigger("results:select"),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle"),e.preventDefault()):i===n.UP?(t.trigger("results:previous"),e.preventDefault()):i===n.DOWN?(t.trigger("results:next"),e.preventDefault()):(i===n.ESC||i===n.TAB)&&(t.close(),e.preventDefault()):(i===n.ENTER||i===n.SPACE||(i===n.DOWN||i===n.UP)&&e.altKey)&&(t.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},o.prototype.trigger=function(t,e){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in n){var r=n[t],s={prevented:!1,name:t,args:e};if(i.call(this,r,s),s.prevented)return void(e.prevented=!0)}i.call(this,t,e)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},o.prototype.close=function(){this.isOpen()&&this.trigger("close")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,function(t){return t.toString()})),this.$element.val(i).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},o}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,i,n){var o,r,s=[];o=t.trim(e.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&s.push(this)})),o=t.trim(i.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(r=n(this),null!=r&&s.push(r))})),e.attr("class",s.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var o=n.call(this),r=this.options.get("containerCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var s=this.options.get("adaptContainerCssClass");if(s=s||i,-1!==r.indexOf(":all:")){r=r.replace(":all","");var a=s;s=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,s),o.css(l),o.addClass(r),o},n}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var o=n.call(this),r=this.options.get("dropdownCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var s=this.options.get("adaptDropdownCssClass");if(s=s||i,-1!==r.indexOf(":all:")){r=r.replace(":all","");var a=s;s=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,s),o.css(l),o.addClass(r),o},n}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,t.call(this,e,i)
}return e.prototype.current=function(e,i){var n=this;return this._isInitialized?void e.call(this,i):void this.initSelection.call(null,this.$element,function(e){n._isInitialized=!0,t.isArray(e)||(e=[e]),i(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===e.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,i)}return e.prototype.current=function(e,i){function n(e,i){var o=[];return e.selected||-1!==t.inArray(e.id,i)?(e.selected=!0,o.push(e)):e.selected=!1,e.children&&o.push.apply(o,n(e.children,i)),o}for(var o=[],r=0;r<this._currentData.length;r++){var s=this._currentData[r];o.push.apply(o,n(s,this.$element.val().split(this._valueSeparator)))}i(o)},e.prototype.select=function(e,i){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+i.id,this.$element.val(n),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var i=this;e.selected=!1,this.current(function(t){for(var n=[],o=0;o<t.length;o++){var r=t[o];e.id!=r.id&&n.push(r.id)}i.$element.val(n.join(i._valueSeparator)),i.$element.trigger("change")})},e.prototype.query=function(t,e,i){for(var n=[],o=0;o<this._currentData.length;o++){var r=this._currentData[o],s=this.matches(e,r);null!==s&&n.push(s)}i({results:n})},e.prototype.addOptions=function(e,i){var n=t.map(i,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,n)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function i(i,n){var o=t.extend(!0,{},n);if(null==i.term||""===t.trim(i.term))return o;if(n.children){for(var r=n.children.length-1;r>=0;r--){var s=n.children[r],a=e(i.term,s.text,s);a||o.children.splice(r,1)}if(o.children.length>0)return o}return e(i.term,n.text,n)?o:null}return i}return e}),e.define("select2/compat/query",[],function(){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.callback=i;var n=this.options.get("query");n.call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,i){t.call(this,e,i)}return t.prototype.position=function(t,e,i){var n=i.find(".dropdown-wrapper");n.append(e),e.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(t,e,i,n){if(e("jquery.mousewheel"),null==t.fn.select2){var o=["open","close","destroy"];t.fn.select2=function(e){if(e=e||{},"object"==typeof e)return this.each(function(){{var n=t.extend({},e,!0);new i(t(this),n)}}),this;if("string"==typeof e){var n=this.data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var r=Array.prototype.slice.call(arguments,1),s=n[e](r);return t.inArray(e,o)>-1?this:s}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i}),function(i){"function"==typeof e.define&&e.define.amd?e.define("jquery.mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(t)}(function(t){function e(e){var s=e||window.event,a=l.call(arguments,1),h=0,u=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(s),e.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*d,d=0),h=0===d?u:d,"deltaY"in s&&(d=-1*s.deltaY,h=d),"deltaX"in s&&(u=s.deltaX,0===d&&(h=-1*u)),0!==d||0!==u){if(1===s.deltaMode){var g=t.data(this,"mousewheel-line-height");h*=g,d*=g,u*=g}else if(2===s.deltaMode){var v=t.data(this,"mousewheel-page-height");h*=v,d*=v,u*=v}if(p=Math.max(Math.abs(d),Math.abs(u)),(!r||r>p)&&(r=p,n(s,p)&&(r/=40)),n(s,p)&&(h/=40,u/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/r),u=Math[u>=1?"floor":"ceil"](u/r),d=Math[d>=1?"floor":"ceil"](d/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=u,e.deltaY=d,e.deltaFactor=r,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,h,u,d),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){r=null}function n(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,r,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var h=s.length;h;)t.event.fixHooks[s[--h]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i}),!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.s=t()}}(function(){return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return o(i?i:t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){var i=t("./trim"),n=t("./decapitalize");e.exports=function(t,e){return t=i(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),e===!0?n(t):t}},{"./decapitalize":9,"./trim":60}],2:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return t=i(t),t.charAt(0).toUpperCase()+t.slice(1)}},{"./helper/makeString":19}],3:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return i(t).split("")}},{"./helper/makeString":19}],4:[function(t,e){e.exports=function(t,e){return null==t?[]:(t=String(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])}},{}],5:[function(t,e){var i=t("./capitalize"),n=t("./camelize"),o=t("./helper/makeString");e.exports=function(t){return t=o(t),i(n(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":19}],6:[function(t,e){var i=t("./trim");e.exports=function(t){return i(t).replace(/\s+/g," ")}},{"./trim":60}],7:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){if(t=i(t),e=i(e),0===t.length||0===e.length)return 0;for(var n=0,o=0,r=e.length;;){if(o=t.indexOf(e,o),-1===o)break;n++,o+=r}return n}},{"./helper/makeString":19}],8:[function(t,e){var i=t("./trim");e.exports=function(t){return i(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":60}],9:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return t=i(t),t.charAt(0).toLowerCase()+t.slice(1)}},{"./helper/makeString":19}],10:[function(t,e){function i(t){for(var e=t.match(/^[\s\\t]*/gm),i=e[0].length,n=1;n<e.length;n++)i=Math.min(e[n].length,i);return i}var n=t("./helper/makeString");e.exports=function(t,e){t=n(t);var o,r=i(t);return 0===r?t:(o="string"==typeof e?new RegExp("^"+e,"gm"):new RegExp("^[ \\t]{"+r+"}","gm"),t.replace(o,""))}},{"./helper/makeString":19}],11:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/toPositive");e.exports=function(t,e,o){return t=i(t),e=""+e,o="undefined"==typeof o?t.length-e.length:Math.min(n(o),t.length)-e.length,o>=0&&t.indexOf(e,o)===o}},{"./helper/makeString":19,"./helper/toPositive":21}],12:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/escapeChars"),o={};for(var r in n)o[n[r]]=r;o["'"]="#39",e.exports=function(t){return i(t).replace(/[&<>"']/g,function(t){return"&"+o[t]+";"})}},{"./helper/escapeChars":17,"./helper/makeString":19}],13:[function(t,e){e.exports=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse|join)$/)&&(t[e]=this[e]);return t}},{}],14:[function(t,e){"use strict";function i(t){return this instanceof i?void(this._wrapped=t):new i(t)}function n(t,e){"function"==typeof e&&(i.prototype[t]=function(){var t=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=e.apply(null,t);return"string"==typeof n?new i(n):n})}function o(t){n(t,function(e){var i=Array.prototype.slice.call(arguments,1);return String.prototype[t].apply(e,i)})}i.VERSION="3.0.3",i.isBlank=t("./isBlank"),i.stripTags=t("./stripTags"),i.capitalize=t("./capitalize"),i.decapitalize=t("./decapitalize"),i.chop=t("./chop"),i.trim=t("./trim"),i.clean=t("./clean"),i.count=t("./count"),i.chars=t("./chars"),i.swapCase=t("./swapCase"),i.escapeHTML=t("./escapeHTML"),i.unescapeHTML=t("./unescapeHTML"),i.splice=t("./splice"),i.insert=t("./insert"),i.replaceAll=t("./replaceAll"),i.include=t("./include"),i.join=t("./join"),i.lines=t("./lines"),i.dedent=t("./dedent"),i.reverse=t("./reverse"),i.startsWith=t("./startsWith"),i.endsWith=t("./endsWith"),i.pred=t("./pred"),i.succ=t("./succ"),i.titleize=t("./titleize"),i.camelize=t("./camelize"),i.underscored=t("./underscored"),i.dasherize=t("./dasherize"),i.classify=t("./classify"),i.humanize=t("./humanize"),i.ltrim=t("./ltrim"),i.rtrim=t("./rtrim"),i.truncate=t("./truncate"),i.prune=t("./prune"),i.words=t("./words"),i.pad=t("./pad"),i.lpad=t("./lpad"),i.rpad=t("./rpad"),i.lrpad=t("./lrpad"),i.sprintf=t("./sprintf"),i.vsprintf=t("./vsprintf"),i.toNumber=t("./toNumber"),i.numberFormat=t("./numberFormat"),i.strRight=t("./strRight"),i.strRightBack=t("./strRightBack"),i.strLeft=t("./strLeft"),i.strLeftBack=t("./strLeftBack"),i.toSentence=t("./toSentence"),i.toSentenceSerial=t("./toSentenceSerial"),i.slugify=t("./slugify"),i.surround=t("./surround"),i.quote=t("./quote"),i.unquote=t("./unquote"),i.repeat=t("./repeat"),i.naturalCmp=t("./naturalCmp"),i.levenshtein=t("./levenshtein"),i.toBoolean=t("./toBoolean"),i.exports=t("./exports"),i.escapeRegExp=t("./helper/escapeRegExp"),i.strip=i.trim,i.lstrip=i.ltrim,i.rstrip=i.rtrim,i.center=i.lrpad,i.rjust=i.lpad,i.ljust=i.rpad,i.contains=i.include,i.q=i.quote,i.toBool=i.toBoolean,i.camelcase=i.camelize,i.prototype={value:function(){return this._wrapped}};for(var r in i)n(r,i[r]);n("tap",function(t,e){return e(t)});var s=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var r in s)o(s[r]);e.exports=i},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./count":7,"./dasherize":8,"./decapitalize":9,"./dedent":10,"./endsWith":11,"./escapeHTML":12,"./exports":13,"./helper/escapeRegExp":18,"./humanize":22,"./include":23,"./insert":24,"./isBlank":25,"./join":26,"./levenshtein":27,"./lines":28,"./lpad":29,"./lrpad":30,"./ltrim":31,"./naturalCmp":32,"./numberFormat":33,"./pad":34,"./pred":35,"./prune":36,"./quote":37,"./repeat":38,"./replaceAll":39,"./reverse":40,"./rpad":41,"./rtrim":42,"./slugify":43,"./splice":44,"./sprintf":45,"./startsWith":46,"./strLeft":47,"./strLeftBack":48,"./strRight":49,"./strRightBack":50,"./stripTags":51,"./succ":52,"./surround":53,"./swapCase":54,"./titleize":55,"./toBoolean":56,"./toNumber":57,"./toSentence":58,"./toSentenceSerial":59,"./trim":60,"./truncate":61,"./underscored":62,"./unescapeHTML":63,"./unquote":64,"./vsprintf":65,"./words":66}],15:[function(t,e){var i=t("./makeString");e.exports=function(t,e){return t=i(t),0===t.length?"":t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+e)}},{"./makeString":19}],16:[function(t,e){var i=t("./escapeRegExp");e.exports=function(t){return null==t?"\\s":t.source?t.source:"["+i(t)+"]"}},{"./escapeRegExp":18}],17:[function(t,e){var i={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};e.exports=i},{}],18:[function(t,e){var i=t("./makeString");e.exports=function(t){return i(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":19}],19:[function(t,e){e.exports=function(t){return null==t?"":""+t}},{}],20:[function(t,e){e.exports=function(t,e){if(1>e)return"";for(var i="";e>0;)1&e&&(i+=t),e>>=1,t+=t;return i}},{}],21:[function(t,e){e.exports=function(t){return 0>t?0:+t||0}},{}],22:[function(t,e){var i=t("./capitalize"),n=t("./underscored"),o=t("./trim");e.exports=function(t){return i(o(n(t).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":60,"./underscored":62}],23:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){return""===e?!0:-1!==i(t).indexOf(e)}},{"./helper/makeString":19}],24:[function(t,e){var i=t("./splice");e.exports=function(t,e,n){return i(t,e,0,n)}},{"./splice":44}],25:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return/^\s*$/.test(i(t))}},{"./helper/makeString":19}],26:[function(t,e){var i=t("./helper/makeString"),n=[].slice;e.exports=function(){var t=n.call(arguments),e=t.shift();return t.join(i(e))}},{"./helper/makeString":19}],27:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){t=i(t),e=i(e);for(var n,o,r=[],s=0;s<=e.length;s++)for(var a=0;a<=t.length;a++)o=s&&a?t.charAt(a-1)===e.charAt(s-1)?n:Math.min(r[a],r[a-1],n)+1:s+a,n=r[a],r[a]=o;return r.pop()}},{"./helper/makeString":19}],28:[function(t,e){e.exports=function(t){return null==t?[]:String(t).split(/\r?\n/)}},{}],29:[function(t,e){var i=t("./pad");e.exports=function(t,e,n){return i(t,e,n)}},{"./pad":34}],30:[function(t,e){var i=t("./pad");e.exports=function(t,e,n){return i(t,e,n,"both")}},{"./pad":34}],31:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/defaultToWhiteSpace"),o=String.prototype.trimLeft;e.exports=function(t,e){return t=i(t),!e&&o?o.call(t):(e=n(e),t.replace(new RegExp("^"+e+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],32:[function(t,e){e.exports=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var i=/(\.\d+)|(\d+)|(\D+)/g,n=String(t).match(i),o=String(e).match(i),r=Math.min(n.length,o.length),s=0;r>s;s++){var a=n[s],l=o[s];if(a!==l){var h=+a,c=+l;return h===h&&c===c?h>c?1:-1:l>a?-1:1}}return n.length!=o.length?n.length-o.length:e>t?-1:1}},{}],33:[function(t,e){e.exports=function(t,e,i,n){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),n="string"==typeof n?n:",";var o=t.split("."),r=o[0],s=o[1]?(i||".")+o[1]:"";return r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+s}},{}],34:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/strRepeat");e.exports=function(t,e,o,r){t=i(t),e=~~e;var s=0;switch(o?o.length>1&&(o=o.charAt(0)):o=" ",r){case"right":return s=e-t.length,t+n(o,s);case"both":return s=e-t.length,n(o,Math.ceil(s/2))+t+n(o,Math.floor(s/2));default:return s=e-t.length,n(o,s)+t}}},{"./helper/makeString":19,"./helper/strRepeat":20}],35:[function(t,e){var i=t("./helper/adjacent");e.exports=function(t){return i(t,-1)}},{"./helper/adjacent":15}],36:[function(t,e){var i=t("./helper/makeString"),n=t("./rtrim");e.exports=function(t,e,o){if(t=i(t),e=~~e,o=null!=o?String(o):"...",t.length<=e)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):n(s.slice(0,s.length-1)),(s+o).length>t.length?t:t.slice(0,s.length)+o}},{"./helper/makeString":19,"./rtrim":42}],37:[function(t,e){var i=t("./surround");e.exports=function(t,e){return i(t,e||'"')}},{"./surround":53}],38:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/strRepeat");e.exports=function o(t,e,r){if(t=i(t),e=~~e,null==r)return n(t,e);for(var o=[];e>0;o[--e]=t);return o.join(r)}},{"./helper/makeString":19,"./helper/strRepeat":20}],39:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e,n,o){var r=o===!0?"gi":"g",s=new RegExp(e,r);return i(t).replace(s,n)}},{"./helper/makeString":19}],40:[function(t,e){var i=t("./chars");e.exports=function(t){return i(t).reverse().join("")}},{"./chars":3}],41:[function(t,e){var i=t("./pad");e.exports=function(t,e,n){return i(t,e,n,"right")}},{"./pad":34}],42:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/defaultToWhiteSpace"),o=String.prototype.trimRight;e.exports=function(t,e){return t=i(t),!e&&o?o.call(t):(e=n(e),t.replace(new RegExp(e+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],43:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/defaultToWhiteSpace"),o=t("./trim"),r=t("./dasherize");e.exports=function(t){var e="\u0105\xe0\xe1\xe4\xe2\xe3\xe5\xe6\u0103\u0107\u010d\u0109\u0119\xe8\xe9\xeb\xea\u011d\u0125\xec\xed\xef\xee\u0135\u0142\u013e\u0144\u0148\xf2\xf3\xf6\u0151\xf4\xf5\xf0\xf8\u015b\u0219\u0161\u015d\u0165\u021b\u016d\xf9\xfa\xfc\u0171\xfb\xf1\xff\xfd\xe7\u017c\u017a\u017e",s="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz",a=new RegExp(n(e),"g");return t=i(t).toLowerCase().replace(a,function(t){var i=e.indexOf(t);return s.charAt(i)||"-"}),o(r(t.replace(/[^\w\s-]/g,"-")),"-")}},{"./dasherize":8,"./helper/defaultToWhiteSpace":16,"./helper/makeString":19,"./trim":60}],44:[function(t,e){var i=t("./chars");e.exports=function(t,e,n,o){var r=i(t);return r.splice(~~e,~~n,o),r.join("")}},{"./chars":3}],45:[function(t,e){// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
var i=t("./helper/strRepeat"),n=Object.prototype.toString,o=function(){function t(t){return n.call(t).slice(8,-1).toLowerCase()}var e=i,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(i,n){var r,s,a,l,h,c,u,d=1,p=i.length,f="",m=[];for(s=0;p>s;s++)if(f=t(i[s]),"string"===f)m.push(i[s]);else if("array"===f){if(l=i[s],l[2])for(r=n[d],a=0;a<l[2].length;a++){if(!r.hasOwnProperty(l[2][a]))throw new Error(o('[_.sprintf] property "%s" does not exist',l[2][a]));r=r[l[2][a]]}else r=l[1]?n[l[1]]:n[d++];if(/[^s]/.test(l[8])&&"number"!=t(r))throw new Error(o("[_.sprintf] expecting number but found %s",t(r)));switch(l[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=l[7]?r.toExponential(l[7]):r.toExponential();break;case"f":r=l[7]?parseFloat(r).toFixed(l[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&l[7]?r.substring(0,l[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(l[8])&&l[3]&&r>=0?"+"+r:r,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",u=l[6]-String(r).length,h=l[6]?e(c,u):"",m.push(l[5]?r+h:h+r)}return m.join("")},r.cache={},r.parse=function(t){for(var e=t,i=[],n=[],o=0;e;){if(null!==(i=/^[^\x25]+/.exec(e)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(i[2]){o|=1;var r=[],s=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(r.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))r.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");r.push(a[1])}i[2]=r}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}e=e.substring(i[0].length)}return n},r}();e.exports=o},{"./helper/strRepeat":20}],46:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/toPositive");e.exports=function(t,e,o){return t=i(t),e=""+e,o=null==o?0:Math.min(n(o),t.length),t.lastIndexOf(e,o)===o}},{"./helper/makeString":19,"./helper/toPositive":21}],47:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){t=i(t),e=i(e);var n=e?t.indexOf(e):-1;return~n?t.slice(0,n):t}},{"./helper/makeString":19}],48:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){t=i(t),e=i(e);var n=t.lastIndexOf(e);return~n?t.slice(0,n):t}},{"./helper/makeString":19}],49:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){t=i(t),e=i(e);var n=e?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],50:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e){t=i(t),e=i(e);var n=e?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],51:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return i(t).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":19}],52:[function(t,e){var i=t("./helper/adjacent");e.exports=function(t){return i(t,1)}},{"./helper/adjacent":15}],53:[function(t,e){e.exports=function(t,e){return[e,t,e].join("")}},{}],54:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return i(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})}},{"./helper/makeString":19}],55:[function(t,e){var i=t("./helper/makeString");e.exports=function(t){return i(t).toLowerCase().replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})}},{"./helper/makeString":19}],56:[function(t,e){function i(t,e){var i,n,o=t.toLowerCase();for(e=[].concat(e),i=0;i<e.length;i+=1)if(n=e[i]){if(n.test&&n.test(t))return!0;if(n.toLowerCase()===o)return!0}}var n=t("./trim");e.exports=function(t,e,o){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=n(t),i(t,e||["true","1"])?!0:i(t,o||["false","0"])?!1:void 0)}},{"./trim":60}],57:[function(t,e){t("./trim");e.exports=function(t,e){if(null==t)return 0;var i=Math.pow(10,isFinite(e)?e:0);return Math.round(t*i)/i}},{"./trim":60}],58:[function(t,e){var i=t("./rtrim");e.exports=function(t,e,n,o){e=e||", ",n=n||" and ";var r=t.slice(),s=r.pop();return t.length>2&&o&&(n=i(e)+n),r.length?r.join(e)+n+s:s}},{"./rtrim":42}],59:[function(t,e){var i=t("./toSentence");e.exports=function(t,e,n){return i(t,e,n,!0)}},{"./toSentence":58}],60:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/defaultToWhiteSpace"),o=String.prototype.trim;e.exports=function(t,e){return t=i(t),!e&&o?o.call(t):(e=n(e),t.replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],61:[function(t,e){var i=t("./helper/makeString");e.exports=function(t,e,n){return t=i(t),n=n||"...",e=~~e,t.length>e?t.slice(0,e)+n:t}},{"./helper/makeString":19}],62:[function(t,e){var i=t("./trim");e.exports=function(t){return i(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":60}],63:[function(t,e){var i=t("./helper/makeString"),n=t("./helper/escapeChars");e.exports=function(t){return i(t).replace(/\&([^;]+);/g,function(t,e){var i;return e in n?n[e]:(i=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(i[1],16)):(i=e.match(/^#(\d+)$/))?String.fromCharCode(~~i[1]):t})}},{"./helper/escapeChars":17,"./helper/makeString":19}],64:[function(t,e){e.exports=function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t}},{}],65:[function(t,e){var i=t("./sprintf");e.exports=function(t,e){return e.unshift(t),i.apply(null,e)}},{"./sprintf":45}],66:[function(t,e){var i=t("./isBlank"),n=t("./trim");e.exports=function(t,e){return i(t)?[]:n(t,e).split(e||/\s+/)}},{"./isBlank":25,"./trim":60}]},{},[14])(14)}),$.ajaxTransport("+*",function(t,e,i){return window.FormData&&(t.dataType&&("blob"==t.dataType||"arraybuffer"==t.dataType)||t.data&&(window.Blob&&t.data instanceof Blob||window.ArrayBuffer&&t.data instanceof ArrayBuffer))?{send:function(e,i){var n=new XMLHttpRequest,o=t.url||window.location.href,r=t.type||"GET",s=t.dataType||"text",a=t.data||null,l=t.async||!0;n.addEventListener("load",function(){var t={};t[s]=n.response,i(n.status,n.statusText,t,n.getAllResponseHeaders())}),n.open(r,o,l),n.responseType=s,n.send(a)},abort:function(){i.abort()}}:void 0}),amplify.request.decoders.json=function(t,e,i,n,o){var r=window.performance.now(),s=JSON.parse(t);debug("decode json: "+(window.performance.now()-r)+"ms"),"ok"==s.status?n(s):o(s,s.message)};var BSON=null;amplify.request.decoders.bson=function(t,e,i,n,o){BSON||(BSON=bson().BSON);var r=window.performance.now(),s=new Uint8Array(t),a=BSON.deserialize(s);debug("decode BSON: "+(window.performance.now()-r)+"ms"),"ok"==a.status?n(a):o(a,a.message)};var pack=null;amplify.request.decoders.msgpack=function(t,e,i,n,o){pack||(pack=msgpack());var r=window.performance.now(),s=pack.decode(t);debug("decode MsgPack: "+(window.performance.now()-r)+"ms"),"ok"==s.status?n(s):o(s,s.message)};var LL={};$(document).ready(function(){$(".dropdown-menu").on("touchstart.dropdown.data-api",function(t){t.stopPropagation()}),$(".tip").tooltip(),$("#signinModal").on("shown.bs.modal",function(){$("#signinModal input#redirect").val(window.location),$("#signinModal #user_email").focus()}),$(".forgotLink").click(function(){var t=$("#signinModal .modal-content"),e=$("#signinModal #user_email").val(),i=t.get(0),n=$("#forgotContent").html(),o=flippant.flip(i,n);return $(".flippant-back #user_email").val(e),$(".nevermind",o).click(function(){return t.fadeIn(),o.close(),!1}),!1}),$("body").on("click",".read_more, .see_more",function(){var t=$(this).attr("data-target").replace("#","");return $(this).hasClass("see_more")&&$(this).hide(),$("#"+t).removeClass("hide"),!1}),$("a.more").click(function(){return $(this).hide(),$("div.more, p.more",$(this).parent()).slideDown(),!1}),$("a#set-home").click(function(){var t=$(this).data("city"),e=$(this).closest("p");return $(this).css("opacity",.5),LL.Memory.set({home_city:t},function(t){e.text("Saved your home city preference."),"ok"==t.status&&e.delay(2e3).fadeOut()}),!1})}),0==window.location.hash.length&&window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)}),$(document).ready(function(){var t=/[$,-]/g;$.tablesorter.addParser({id:"price",is:function(){return!1},format:function(e){var i=e.replace(t,"");return-parseInt(i)},type:"numeric"}),$.tablesorter.addParser({id:"date",is:function(){return!1},format:function(t){return-1==t.indexOf(" ET, ")?stringToNumber(t):Date.parse(t.replace(" ET","").concat("/11"))},type:"numeric"}),$.tablesorter.addParser({id:"date2",is:function(){return!1},format:function(t){return moment(t).unix()},type:"numeric"}),$.tablesorter.addParser({id:"firstNumber",is:function(){return!1},format:function(t){var e=t.match(/^([0-9]+)/);return e?parseInt(e[1]):null},type:"numeric"}),$.tablesorter.addParser({id:"tags",is:function(){return!1},format:function(t){var e=t.replace(/^[ \n\t]+/,"").replace(/[ \n\t]+$/,"");return 0==e.length?"zzzzzzzzz":e},type:"text"});var e=/([0-9]+) (.*)/;$.tablesorter.addParser({id:"address",is:function(){return!1},format:function(t){var i=e.exec(t);return!i||i.length<3?t:i[2].concat(i[1])},type:"text"});var i=/([0-9]+) ([a-z]+) ago/;$.tablesorter.addParser({id:"ago",is:function(){return!1},format:function(t){var e=i.exec(t);if(!e)return"a minute ago"==t?1:0;switch(e[2]){case"hour":case"hours":return 60*parseInt(e[1]);case"minute":case"minutes":return parseInt(e[1]);case"day":case"days":return 1440*parseInt(e[1]);default:return 0}},type:"numeric"})}),L.Icon.Default.imagePath="/assets/lib/leaflet/images",$.fn.exists=function(){return this.length>0};var transliterate=function(t){if(null===t)return null;if(""===t)return"";var e=t.toLowerCase();return e=e.replace(/'/g,""),e=e.replace(/[^A-Za-z0-9]+/g," "),e=e.replace(/\ +/g,"_")},numberWithCommas=function(t){if(!t)return"0";if("string"==typeof t)return t;var e=t.toString();if(parseInt(t)!=t){if(t>=100)return numberWithCommas(parseInt(t));var i=parseFloat(Math.round(100*t)/100).toFixed(2),n=i.match(/^([0-9]+)\.([0-9]+)$/);return n?numberWithCommas(n[1])+"."+n[2]:i}return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")};Handlebars.registerHelper("numberWithCommas",numberWithCommas),Handlebars.registerHelper("transliterate",transliterate),Handlebars.registerHelper("shortDate",function(t){var e="number"==typeof t?moment.unix(t):moment(t);return e.format("M-D-YY")}),Handlebars.registerHelper("arrayLength",function(t){return"object"==typeof t&&$.isArray(t)?t.length:0});var stringToNumber=function(t){for(var e=0,i=1e5,n=$.trim(t).toLowerCase(),o=0;o<n.length;o++,i/=100)e+=n.charCodeAt(o)*i;return e},switchPath=function(t,e){if(!t||0==t.length)return t;if("/"==t||t.match(/^\/neighborhoods/))return"/"+e+t;var i=new RegExp("^/("+data.ds_names.join("|")+"|us)(.*)$");return t.replace(i,"/"+e+"$2")},divsIntersect=function(t,e){var i=t.offsetTop,n=e.offsetUp,o=t.offsetLeft,r=e.offsetLeft,s=t.offsetLeft+t.offsetWidth,a=t.offsetTop+t.offsetHeight,l=e.offsetLeft+e.offsetWidth,h=e.offsetTop+e.offsetHeight;return i>h||n>a||o>l||r>s||n>a||i>h||r>s||o>l?!1:!0},normalizeURL=function(t){var e=parseURL(t);return e.host+e.path},debug=function(){"production"!=window.data.env&&console.log.apply(console,arguments)};$.fn.listHandlers=function(t){return this.each(function(){var e=this,i=$(this).data("events");i&&$.each(i,function(i,n){new RegExp("^("+("*"===t?".+":t.replace(",","|").replace(/^on/i,""))+")$","i").test(i)&&$.each(n,function(t,n){console.info(e,"\n"+t+": ["+i+"] : "+n.handler.target)})})})};